<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux & Bash Lab - Script House</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(167, 139, 250, 0.1), rgba(167, 139, 250, 0.05));
            border-radius: 16px;
            border: 1px solid rgba(167, 139, 250, 0.3);
        }
        .header h1 { font-size: 2.2rem; color: #a78bfa; margin-bottom: 10px; }
        .header p { color: #a0a0a0; font-size: 1.1rem; }
        .progress-bar { background: rgba(255,255,255,0.1); border-radius: 10px; height: 12px; margin: 20px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #a78bfa, #c084fc); border-radius: 10px; transition: width 0.5s ease; width: 0%; }
        .progress-text { text-align: center; color: #888; font-size: 0.9rem; }
        .exercise { background: rgba(255, 255, 255, 0.03); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 25px; overflow: hidden; }
        .exercise-header { background: rgba(167, 139, 250, 0.1); padding: 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .exercise-header:hover { background: rgba(167, 139, 250, 0.15); }
        .exercise-title { display: flex; align-items: center; gap: 15px; }
        .exercise-number { background: #a78bfa; color: #000; width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .exercise-name { font-size: 1.2rem; color: #fff; }
        .exercise-status { padding: 5px 15px; border-radius: 20px; font-size: 0.85rem; }
        .status-pending { background: rgba(100, 100, 100, 0.3); color: #888; }
        .status-complete { background: rgba(74, 222, 128, 0.2); color: #4ade80; }
        .exercise-content { padding: 25px; display: none; }
        .exercise.active .exercise-content { display: block; }
        .scenario { background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 15px 20px; margin-bottom: 20px; border-radius: 0 8px 8px 0; }
        .scenario h4 { color: #60a5fa; margin-bottom: 8px; }
        .task-list { list-style: none; margin: 20px 0; }
        .task-item { padding: 12px 15px; margin: 8px 0; background: rgba(255, 255, 255, 0.02); border-radius: 8px; display: flex; align-items: center; gap: 12px; border: 1px solid rgba(255, 255, 255, 0.05); }
        .task-item input[type="checkbox"] { width: 20px; height: 20px; accent-color: #a78bfa; }
        .task-item.checked { background: rgba(74, 222, 128, 0.05); border-color: rgba(74, 222, 128, 0.2); }
        .task-item.checked label { text-decoration: line-through; color: #666; }
        .applet-link { display: inline-flex; align-items: center; gap: 8px; background: rgba(167, 139, 250, 0.15); color: #a78bfa; padding: 10px 18px; border-radius: 8px; text-decoration: none; margin: 10px 10px 10px 0; border: 1px solid rgba(167, 139, 250, 0.3); transition: all 0.3s; }
        .applet-link:hover { background: rgba(167, 139, 250, 0.25); transform: translateY(-2px); }
        .question-section { background: rgba(168, 85, 247, 0.1); border-radius: 10px; padding: 20px; margin: 20px 0; }
        .question-section h4 { color: #a855f7; margin-bottom: 15px; }
        .question-section textarea { width: 100%; min-height: 100px; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 8px; padding: 12px; color: #e0e0e0; font-family: inherit; resize: vertical; }
        .question-section textarea:focus { outline: none; border-color: #a855f7; }
        .complete-btn { background: linear-gradient(135deg, #a78bfa, #c084fc); color: #000; border: none; padding: 12px 30px; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; margin-top: 15px; transition: transform 0.2s, box-shadow 0.2s; }
        .complete-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(167, 139, 250, 0.4); }
        .complete-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .code-block { background: #0d1117; border-radius: 8px; padding: 15px; margin: 15px 0; font-family: 'Courier New', monospace; font-size: 0.9rem; overflow-x: auto; border: 1px solid rgba(255,255,255,0.1); }
        .code-block .prompt { color: #7ee787; }
        .code-block .command { color: #79c0ff; }
        .code-block .output { color: #8b949e; }
        .code-block .comment { color: #8b949e; font-style: italic; }
        .concept-box { background: rgba(251, 191, 36, 0.1); border-left: 3px solid #fbbf24; padding: 15px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .concept-box h4 { color: #fbbf24; margin-bottom: 10px; }
        .completion-badge { display: none; text-align: center; padding: 40px; background: linear-gradient(135deg, rgba(74, 222, 128, 0.1), rgba(34, 197, 94, 0.05)); border-radius: 16px; border: 2px solid rgba(74, 222, 128, 0.3); margin-top: 30px; }
        .completion-badge.show { display: block; animation: fadeIn 0.5s ease; }
        .completion-badge h2 { color: #4ade80; font-size: 2rem; margin-bottom: 10px; }
        .badge-icon { font-size: 4rem; margin-bottom: 15px; }
        .next-steps { margin-top: 20px; }
        .next-steps a { display: inline-block; background: #a78bfa; color: #000; padding: 12px 25px; border-radius: 8px; text-decoration: none; font-weight: 600; margin: 5px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .back-link { display: inline-flex; align-items: center; gap: 8px; color: #888; text-decoration: none; margin-bottom: 20px; }
        .back-link:hover { color: #a78bfa; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">‚Üê Back to Script House</a>

        <div class="header">
            <h1>üêß Linux & Bash Lab</h1>
            <p>Hands-on exercises in command line navigation, file operations, and shell scripting</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text"><span id="completedCount">0</span> of 6 exercises completed</div>
        </div>

        <!-- Exercise 1: Navigation and Reconnaissance -->
        <div class="exercise active" data-exercise="1">
            <div class="exercise-header" onclick="toggleExercise(1)">
                <div class="exercise-title">
                    <div class="exercise-number">1</div>
                    <div class="exercise-name">Navigation & Reconnaissance</div>
                </div>
                <span class="exercise-status status-pending" id="status1">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>üìã Finding Your Way</h4>
                    <p>The command line is your window into the system. Learning to navigate efficiently is the foundation of all Linux skills.</p>
                </div>

                <div class="code-block">
<span class="comment"># Essential navigation commands</span>
<span class="prompt">$</span> <span class="command">pwd</span>                    <span class="output"># Print Working Directory</span>
<span class="prompt">$</span> <span class="command">ls -la</span>                 <span class="output"># List all files with details</span>
<span class="prompt">$</span> <span class="command">cd /var/log</span>            <span class="output"># Change to absolute path</span>
<span class="prompt">$</span> <span class="command">cd ..</span>                  <span class="output"># Go up one directory</span>
<span class="prompt">$</span> <span class="command">cd ~</span>                   <span class="output"># Go to home directory</span>
<span class="prompt">$</span> <span class="command">cd -</span>                   <span class="output"># Go to previous directory</span>

<span class="comment"># Information gathering</span>
<span class="prompt">$</span> <span class="command">whoami</span>                 <span class="output"># Current user</span>
<span class="prompt">$</span> <span class="command">id</span>                     <span class="output"># User ID and group memberships</span>
<span class="prompt">$</span> <span class="command">hostname</span>               <span class="output"># System name</span>
<span class="prompt">$</span> <span class="command">uname -a</span>               <span class="output"># Kernel and system info</span>
                </div>

                <h4>üéØ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t1-1" onchange="checkTask(1)">
                        <label for="t1-1">Complete CLH-001: Intro to Hacker CLI to learn command basics</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t1-2" onchange="checkTask(1)">
                        <label for="t1-2">Use CLH-002: Navigation Recon to practice directory traversal</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t1-3" onchange="checkTask(1)">
                        <label for="t1-3">Explore the Linux Filesystem Navigator to understand the directory structure</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t1-4" onchange="checkTask(1)">
                        <label for="t1-4">Practice using relative vs absolute paths in the Command Simulator</label>
                    </li>
                </ul>

                <a href="../applets/linux/clh-001-intro-to-hacker-cli.html" class="applet-link">üéÆ CLH-001: Intro</a>
                <a href="../applets/linux/clh-002-navigation-recon.html" class="applet-link">üß≠ CLH-002: Navigation</a>
                <a href="../applets/linux/linux-filesystem-navigator.html" class="applet-link">üìÅ Filesystem Navigator</a>
                <a href="../applets/linux/linux-command-simulator.html" class="applet-link">üíª Command Simulator</a>

                <div class="question-section">
                    <h4>üí≠ Practical Challenge</h4>
                    <p>You've SSH'd into a new server. Write the commands you would use to: find out who you are, where you are, what's in the current directory, and what operating system is running.</p>
                    <textarea id="q1" placeholder="Write your reconnaissance commands..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(1)" id="btn1">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 2: File Operations -->
        <div class="exercise" data-exercise="2">
            <div class="exercise-header" onclick="toggleExercise(2)">
                <div class="exercise-title">
                    <div class="exercise-number">2</div>
                    <div class="exercise-name">File Operations</div>
                </div>
                <span class="exercise-status status-pending" id="status2">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>üìã Working with Files</h4>
                    <p>Creating, copying, moving, and deleting files are fundamental operations. Understanding these commands and their options is essential.</p>
                </div>

                <div class="code-block">
<span class="comment"># Creating files and directories</span>
<span class="prompt">$</span> <span class="command">touch newfile.txt</span>      <span class="output"># Create empty file</span>
<span class="prompt">$</span> <span class="command">mkdir -p dir/subdir</span>    <span class="output"># Create nested directories</span>

<span class="comment"># Copying and moving</span>
<span class="prompt">$</span> <span class="command">cp file.txt backup/</span>   <span class="output"># Copy file to directory</span>
<span class="prompt">$</span> <span class="command">cp -r dir/ newdir/</span>    <span class="output"># Copy directory recursively</span>
<span class="prompt">$</span> <span class="command">mv old.txt new.txt</span>    <span class="output"># Rename file</span>
<span class="prompt">$</span> <span class="command">mv file.txt /tmp/</span>     <span class="output"># Move file to new location</span>

<span class="comment"># Viewing file contents</span>
<span class="prompt">$</span> <span class="command">cat file.txt</span>          <span class="output"># Display entire file</span>
<span class="prompt">$</span> <span class="command">head -n 10 file.txt</span>   <span class="output"># First 10 lines</span>
<span class="prompt">$</span> <span class="command">tail -f /var/log/syslog</span> <span class="output"># Follow log in real-time</span>
<span class="prompt">$</span> <span class="command">less largefile.txt</span>    <span class="output"># Paginated viewing</span>

<span class="comment"># Removing (BE CAREFUL!)</span>
<span class="prompt">$</span> <span class="command">rm file.txt</span>           <span class="output"># Delete file</span>
<span class="prompt">$</span> <span class="command">rm -rf directory/</span>     <span class="output"># Delete directory recursively (dangerous!)</span>
                </div>

                <h4>üéØ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t2-1" onchange="checkTask(2)">
                        <label for="t2-1">Complete CLH-006: File Operations for hands-on practice</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t2-2" onchange="checkTask(2)">
                        <label for="t2-2">Practice in Linux Lab 002: File Navigation</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t2-3" onchange="checkTask(2)">
                        <label for="t2-3">Understand the difference between hard links and symbolic links</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t2-4" onchange="checkTask(2)">
                        <label for="t2-4">Learn safe deletion practices (why rm -rf / is catastrophic)</label>
                    </li>
                </ul>

                <a href="../applets/linux/clh-006-file-operations.html" class="applet-link">üìÑ CLH-006: Files</a>
                <a href="../applets/linux/linux-lab-002-file-navigation.html" class="applet-link">üóÇÔ∏è Lab: Navigation</a>

                <div class="concept-box">
                    <h4>Safety First!</h4>
                    <p><code>rm -rf</code> is irreversible. Always double-check paths before executing. Consider using <code>rm -i</code> for interactive confirmation or <code>trash-cli</code> for recoverable deletion.</p>
                </div>

                <div class="question-section">
                    <h4>üí≠ Scenario</h4>
                    <p>You need to backup the /etc/nginx directory to /backup/nginx-$(date +%Y%m%d), then create a symbolic link /backup/nginx-latest pointing to the new backup. Write the commands.</p>
                    <textarea id="q2" placeholder="Write your backup commands..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(2)" id="btn2">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 3: Permissions -->
        <div class="exercise" data-exercise="3">
            <div class="exercise-header" onclick="toggleExercise(3)">
                <div class="exercise-title">
                    <div class="exercise-number">3</div>
                    <div class="exercise-name">Permissions & Ownership</div>
                </div>
                <span class="exercise-status status-pending" id="status3">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>üìã Access Control</h4>
                    <p>Linux permissions determine who can read, write, and execute files. Understanding the permission model is critical for security.</p>
                </div>

                <div class="code-block">
<span class="comment"># Permission string: -rwxr-xr-x</span>
<span class="comment"># Breakdown: [type][owner][group][others]</span>
<span class="comment"># r=read(4), w=write(2), x=execute(1)</span>

<span class="prompt">$</span> <span class="command">ls -l script.sh</span>
<span class="output">-rwxr-xr-x 1 user group 1024 Dec 26 script.sh</span>

<span class="comment"># Changing permissions</span>
<span class="prompt">$</span> <span class="command">chmod 755 script.sh</span>    <span class="output"># rwxr-xr-x (octal)</span>
<span class="prompt">$</span> <span class="command">chmod u+x script.sh</span>    <span class="output"># Add execute for owner</span>
<span class="prompt">$</span> <span class="command">chmod go-w file.txt</span>    <span class="output"># Remove write from group/others</span>

<span class="comment"># Changing ownership</span>
<span class="prompt">$</span> <span class="command">chown user:group file</span>  <span class="output"># Change owner and group</span>
<span class="prompt">$</span> <span class="command">chown -R user dir/</span>     <span class="output"># Recursive ownership change</span>

<span class="comment"># Special permissions</span>
<span class="prompt">$</span> <span class="command">chmod u+s /usr/bin/passwd</span>  <span class="output"># SUID - run as owner</span>
<span class="prompt">$</span> <span class="command">chmod g+s /shared/</span>         <span class="output"># SGID - inherit group</span>
<span class="prompt">$</span> <span class="command">chmod +t /tmp/</span>             <span class="output"># Sticky bit - only owner can delete</span>
                </div>

                <h4>üéØ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t3-1" onchange="checkTask(3)">
                        <label for="t3-1">Complete CLH-007: Permissions to understand the permission model</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t3-2" onchange="checkTask(3)">
                        <label for="t3-2">Use the Permissions Calculator to convert between symbolic and octal</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t3-3" onchange="checkTask(3)">
                        <label for="t3-3">Understand SUID, SGID, and sticky bit security implications</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t3-4" onchange="checkTask(3)">
                        <label for="t3-4">Practice identifying permission issues in Linux Lab 001</label>
                    </li>
                </ul>

                <a href="../applets/linux/clh-007-permissions.html" class="applet-link">üîê CLH-007: Permissions</a>
                <a href="../applets/linux/linux-permissions-calculator.html" class="applet-link">üßÆ Permissions Calculator</a>
                <a href="../applets/linux/linux-lab-001-user-identity.html" class="applet-link">üë§ Lab: User Identity</a>

                <div class="question-section">
                    <h4>üí≠ Security Analysis</h4>
                    <p>A web server needs to: allow the webserver user to read files in /var/www, allow developers (devgroup) to read and write, and prevent everyone else from accessing. What permissions and ownership would you set?</p>
                    <textarea id="q3" placeholder="Design your permission scheme..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(3)" id="btn3">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 4: Text Processing -->
        <div class="exercise" data-exercise="4">
            <div class="exercise-header" onclick="toggleExercise(4)">
                <div class="exercise-title">
                    <div class="exercise-number">4</div>
                    <div class="exercise-name">Text Processing & Pattern Matching</div>
                </div>
                <span class="exercise-status status-pending" id="status4">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>üìã The Power of Text</h4>
                    <p>Linux treats everything as text. Mastering grep, sed, awk, and regular expressions unlocks powerful data manipulation capabilities.</p>
                </div>

                <div class="code-block">
<span class="comment"># grep - pattern searching</span>
<span class="prompt">$</span> <span class="command">grep "error" /var/log/syslog</span>      <span class="output"># Find lines with "error"</span>
<span class="prompt">$</span> <span class="command">grep -i "warning" log.txt</span>         <span class="output"># Case-insensitive</span>
<span class="prompt">$</span> <span class="command">grep -r "TODO" src/</span>               <span class="output"># Recursive search</span>
<span class="prompt">$</span> <span class="command">grep -E "^[0-9]+" file.txt</span>        <span class="output"># Extended regex</span>

<span class="comment"># Pipelines - combining commands</span>
<span class="prompt">$</span> <span class="command">cat access.log | grep "404" | wc -l</span>
<span class="output">127</span>

<span class="prompt">$</span> <span class="command">ps aux | grep nginx | grep -v grep</span>

<span class="comment"># awk - field processing</span>
<span class="prompt">$</span> <span class="command">awk '{print $1}' access.log</span>       <span class="output"># Print first column</span>
<span class="prompt">$</span> <span class="command">awk -F: '{print $1}' /etc/passwd</span>  <span class="output"># Custom delimiter</span>

<span class="comment"># sed - stream editing</span>
<span class="prompt">$</span> <span class="command">sed 's/old/new/g' file.txt</span>        <span class="output"># Replace all occurrences</span>
<span class="prompt">$</span> <span class="command">sed -i 's/foo/bar/g' file.txt</span>     <span class="output"># In-place edit</span>
                </div>

                <h4>üéØ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t4-1" onchange="checkTask(4)">
                        <label for="t4-1">Complete CLH-003: Pattern Hunting to master grep</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t4-2" onchange="checkTask(4)">
                        <label for="t4-2">Practice advanced grep techniques in CLH-011</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t4-3" onchange="checkTask(4)">
                        <label for="t4-3">Learn text processing with CLH-009</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t4-4" onchange="checkTask(4)">
                        <label for="t4-4">Understand I/O redirection with CLH-010</label>
                    </li>
                </ul>

                <a href="../applets/linux/clh-003-pattern-hunting.html" class="applet-link">üîç CLH-003: Patterns</a>
                <a href="../applets/linux/clh-011-advanced-grep.html" class="applet-link">üéØ CLH-011: Advanced Grep</a>
                <a href="../applets/linux/clh-009-text-processing.html" class="applet-link">üìù CLH-009: Text</a>
                <a href="../applets/linux/clh-010-io-redirection.html" class="applet-link">‚ÜîÔ∏è CLH-010: I/O</a>

                <div class="question-section">
                    <h4>üí≠ Log Analysis Challenge</h4>
                    <p>Write a one-liner to: find all unique IP addresses in an Apache access log, count how many requests each made, sort by count descending, and show the top 10.</p>
                    <textarea id="q4" placeholder="Write your log analysis pipeline..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(4)" id="btn4">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 5: Process Management -->
        <div class="exercise" data-exercise="5">
            <div class="exercise-header" onclick="toggleExercise(5)">
                <div class="exercise-title">
                    <div class="exercise-number">5</div>
                    <div class="exercise-name">Process Management</div>
                </div>
                <span class="exercise-status status-pending" id="status5">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>üìã Managing Running Programs</h4>
                    <p>Understanding processes is essential for troubleshooting and system administration. Learn to monitor, control, and investigate running processes.</p>
                </div>

                <div class="code-block">
<span class="comment"># Viewing processes</span>
<span class="prompt">$</span> <span class="command">ps aux</span>                 <span class="output"># All processes with details</span>
<span class="prompt">$</span> <span class="command">ps aux --forest</span>        <span class="output"># Show process tree</span>
<span class="prompt">$</span> <span class="command">top</span>                    <span class="output"># Interactive process viewer</span>
<span class="prompt">$</span> <span class="command">htop</span>                   <span class="output"># Better interactive viewer</span>

<span class="comment"># Finding processes</span>
<span class="prompt">$</span> <span class="command">pgrep -a nginx</span>         <span class="output"># Find by name</span>
<span class="prompt">$</span> <span class="command">lsof -i :80</span>            <span class="output"># What's using port 80?</span>

<span class="comment"># Controlling processes</span>
<span class="prompt">$</span> <span class="command">kill 1234</span>              <span class="output"># Send SIGTERM (graceful)</span>
<span class="prompt">$</span> <span class="command">kill -9 1234</span>           <span class="output"># Send SIGKILL (force)</span>
<span class="prompt">$</span> <span class="command">pkill nginx</span>            <span class="output"># Kill by name</span>

<span class="comment"># Background processes</span>
<span class="prompt">$</span> <span class="command">./script.sh &</span>          <span class="output"># Run in background</span>
<span class="prompt">$</span> <span class="command">jobs</span>                   <span class="output"># List background jobs</span>
<span class="prompt">$</span> <span class="command">fg %1</span>                  <span class="output"># Bring job 1 to foreground</span>
<span class="prompt">$</span> <span class="command">nohup ./script.sh &</span>    <span class="output"># Survives logout</span>
                </div>

                <h4>üéØ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t5-1" onchange="checkTask(5)">
                        <label for="t5-1">Complete CLH-004: Process Investigation</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t5-2" onchange="checkTask(5)">
                        <label for="t5-2">Learn process control with CLH-014</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t5-3" onchange="checkTask(5)">
                        <label for="t5-3">Explore the Process Management Visualizer</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t5-4" onchange="checkTask(5)">
                        <label for="t5-4">Understand signals and their purposes (SIGTERM vs SIGKILL)</label>
                    </li>
                </ul>

                <a href="../applets/linux/clh-004-process-investigation.html" class="applet-link">üîé CLH-004: Investigation</a>
                <a href="../applets/linux/clh-014-process-control.html" class="applet-link">üéÆ CLH-014: Control</a>
                <a href="../applets/sysadmin/process-management-visualizer.html" class="applet-link">‚öôÔ∏è Process Visualizer</a>

                <div class="question-section">
                    <h4>üí≠ Troubleshooting Scenario</h4>
                    <p>A web server is unresponsive. Write the commands to: find the web server process, check its resource usage, identify if it's stuck, and restart it gracefully (or forcefully if needed).</p>
                    <textarea id="q5" placeholder="Write your troubleshooting commands..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(5)" id="btn5">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 6: Shell Scripting -->
        <div class="exercise" data-exercise="6">
            <div class="exercise-header" onclick="toggleExercise(6)">
                <div class="exercise-title">
                    <div class="exercise-number">6</div>
                    <div class="exercise-name">Shell Scripting</div>
                </div>
                <span class="exercise-status status-pending" id="status6">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>üìã Automating with Bash</h4>
                    <p>Shell scripts combine commands into reusable programs. Learn to write scripts that automate repetitive tasks and solve complex problems.</p>
                </div>

                <div class="code-block">
<span class="comment">#!/bin/bash</span>
<span class="comment"># Script structure example</span>

<span class="comment"># Variables</span>
NAME="World"
echo "Hello, $NAME!"

<span class="comment"># Conditionals</span>
if [ -f "/etc/passwd" ]; then
    echo "File exists"
else
    echo "File not found"
fi

<span class="comment"># Loops</span>
for file in *.log; do
    echo "Processing: $file"
    gzip "$file"
done

<span class="comment"># Functions</span>
backup_file() {
    local file=$1
    cp "$file" "$file.bak"
    echo "Backed up: $file"
}

<span class="comment"># Command substitution</span>
TODAY=$(date +%Y-%m-%d)
HOSTNAME=$(hostname)
                </div>

                <h4>üéØ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t6-1" onchange="checkTask(6)">
                        <label for="t6-1">Complete CLH-008: Shell Scripting fundamentals</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t6-2" onchange="checkTask(6)">
                        <label for="t6-2">Practice in the Bash Scripting Playground</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t6-3" onchange="checkTask(6)">
                        <label for="t6-3">Take on the CLH-015 Capstone Challenge</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t6-4" onchange="checkTask(6)">
                        <label for="t6-4">Explore the Command Translator for cross-platform understanding</label>
                    </li>
                </ul>

                <a href="../applets/linux/clh-008-shell-scripting.html" class="applet-link">üìú CLH-008: Scripting</a>
                <a href="../applets/linux/bash-scripting-playground.html" class="applet-link">üéÆ Bash Playground</a>
                <a href="../applets/linux/clh-015-capstone.html" class="applet-link">üèÜ CLH-015: Capstone</a>
                <a href="../applets/linux/command-translator.html" class="applet-link">üîÑ Command Translator</a>

                <div class="question-section">
                    <h4>üí≠ Final Script Challenge</h4>
                    <p>Write a bash script that: takes a directory as an argument, finds all files modified in the last 24 hours, backs them up to a dated archive, and logs the results. Include error handling.</p>
                    <textarea id="q6" placeholder="Write your backup script..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(6)" id="btn6">Mark Complete</button>
            </div>
        </div>

        <!-- Completion Badge -->
        <div class="completion-badge" id="completionBadge">
            <div class="badge-icon">üèÜ</div>
            <h2>Linux & Bash Lab Complete!</h2>
            <p>You've mastered command line navigation, file operations, permissions, text processing, and shell scripting.</p>
            <div class="next-steps">
                <a href="../quizzes/linux-bash-quiz.html">üìù Take the Quiz</a>
                <a href="../index.html">üìú Back to Script</a>
            </div>
        </div>
    </div>

    <script>
        const TOTAL_EXERCISES = 6;
        let completedExercises = new Set();

        document.addEventListener('DOMContentLoaded', () => { loadProgress(); updateProgressBar(); });

        function toggleExercise(num) {
            const exercise = document.querySelector(`[data-exercise="${num}"]`);
            const wasActive = exercise.classList.contains('active');
            document.querySelectorAll('.exercise').forEach(ex => ex.classList.remove('active'));
            if (!wasActive) exercise.classList.add('active');
        }

        function checkTask(exerciseNum) {
            const exercise = document.querySelector(`[data-exercise="${exerciseNum}"]`);
            exercise.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                cb.closest('.task-item').classList.toggle('checked', cb.checked);
            });
            saveProgress();
        }

        function completeExercise(num) {
            completedExercises.add(num);
            document.getElementById(`status${num}`).textContent = 'Complete';
            document.getElementById(`status${num}`).className = 'exercise-status status-complete';
            document.getElementById(`btn${num}`).textContent = '‚úì Completed';
            document.getElementById(`btn${num}`).disabled = true;
            updateProgressBar();
            saveProgress();
            if (num < TOTAL_EXERCISES) setTimeout(() => toggleExercise(num + 1), 500);
            if (completedExercises.size === TOTAL_EXERCISES) document.getElementById('completionBadge').classList.add('show');
        }

        function updateProgressBar() {
            const progress = (completedExercises.size / TOTAL_EXERCISES) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('completedCount').textContent = completedExercises.size;
        }

        function saveProgress() {
            const data = { completed: Array.from(completedExercises), checkboxes: {}, answers: {} };
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => { data.checkboxes[cb.id] = cb.checked; });
            document.querySelectorAll('textarea').forEach(ta => { data.answers[ta.id] = ta.value; });
            localStorage.setItem('script_linux_lab', JSON.stringify(data));
        }

        function loadProgress() {
            const saved = localStorage.getItem('script_linux_lab');
            if (!saved) return;
            const data = JSON.parse(saved);
            if (data.completed) {
                data.completed.forEach(num => {
                    completedExercises.add(num);
                    document.getElementById(`status${num}`).textContent = 'Complete';
                    document.getElementById(`status${num}`).className = 'exercise-status status-complete';
                    document.getElementById(`btn${num}`).textContent = '‚úì Completed';
                    document.getElementById(`btn${num}`).disabled = true;
                });
            }
            if (data.checkboxes) {
                Object.entries(data.checkboxes).forEach(([id, checked]) => {
                    const cb = document.getElementById(id);
                    if (cb) { cb.checked = checked; if (checked) cb.closest('.task-item').classList.add('checked'); }
                });
            }
            if (data.answers) {
                Object.entries(data.answers).forEach(([id, value]) => {
                    const ta = document.getElementById(id);
                    if (ta) ta.value = value;
                });
            }
            if (completedExercises.size === TOTAL_EXERCISES) document.getElementById('completionBadge').classList.add('show');
        }
    </script>
</body>
</html>
