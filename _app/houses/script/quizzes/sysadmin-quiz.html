<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Administration Quiz | Script House</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1025 50%, #0d0d15 100%);
            color: #e0e0e0;
            min-height: 100vh;
            line-height: 1.6;
        }

        .quiz-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(167, 139, 250, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%);
            border-radius: 16px;
            border: 1px solid rgba(167, 139, 250, 0.3);
        }

        .quiz-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .quiz-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            color: #9ca3af;
            font-size: 0.9rem;
            margin-top: 1rem;
        }

        .progress-section {
            background: rgba(30, 30, 40, 0.6);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .progress-bar {
            height: 8px;
            background: rgba(167, 139, 250, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #a78bfa 0%, #8b5cf6 100%);
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            color: #9ca3af;
            font-size: 0.9rem;
        }

        .question-card {
            background: rgba(30, 30, 40, 0.6);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(167, 139, 250, 0.2);
            transition: all 0.3s ease;
        }

        .question-card.correct {
            border-color: rgba(34, 197, 94, 0.5);
            background: rgba(34, 197, 94, 0.05);
        }

        .question-card.incorrect {
            border-color: rgba(239, 68, 68, 0.5);
            background: rgba(239, 68, 68, 0.05);
        }

        .question-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .question-number {
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .question-text {
            font-size: 1.1rem;
            color: #fff;
        }

        .code-inline {
            background: rgba(167, 139, 250, 0.2);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9rem;
            color: #a78bfa;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(167, 139, 250, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option:hover:not(.disabled) {
            border-color: rgba(167, 139, 250, 0.5);
            background: rgba(167, 139, 250, 0.1);
        }

        .option.selected {
            border-color: #a78bfa;
            background: rgba(167, 139, 250, 0.15);
        }

        .option.correct-answer {
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.15);
        }

        .option.wrong-answer {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.15);
        }

        .option.disabled {
            cursor: default;
            opacity: 0.8;
        }

        .option-marker {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid rgba(167, 139, 250, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .option.selected .option-marker {
            background: #a78bfa;
            border-color: #a78bfa;
            color: white;
        }

        .option.correct-answer .option-marker {
            background: #22c55e;
            border-color: #22c55e;
            color: white;
        }

        .option.wrong-answer .option-marker {
            background: #ef4444;
            border-color: #ef4444;
            color: white;
        }

        .explanation {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            display: none;
        }

        .explanation.show {
            display: block;
        }

        .explanation.correct {
            background: rgba(34, 197, 94, 0.1);
            border-left: 4px solid #22c55e;
        }

        .explanation.incorrect {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
        }

        .explanation-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .explanation.correct .explanation-title { color: #22c55e; }
        .explanation.incorrect .explanation-title { color: #ef4444; }

        .results-section {
            background: linear-gradient(135deg, rgba(167, 139, 250, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            margin-top: 2rem;
            border: 1px solid rgba(167, 139, 250, 0.3);
            display: none;
        }

        .results-section.show {
            display: block;
        }

        .results-score {
            font-size: 4rem;
            font-weight: 700;
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .results-label {
            font-size: 1.2rem;
            color: #9ca3af;
            margin-bottom: 1rem;
        }

        .results-message {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }

        .results-message.passed { color: #22c55e; }
        .results-message.failed { color: #ef4444; }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(167, 139, 250, 0.4);
        }

        .btn-secondary {
            background: rgba(107, 114, 128, 0.2);
            color: #9ca3af;
            border: 1px solid rgba(107, 114, 128, 0.3);
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(167, 139, 250, 0.2);
        }

        .submit-section {
            text-align: center;
            margin-top: 2rem;
        }

        .topic-tag {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: rgba(167, 139, 250, 0.2);
            color: #a78bfa;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: auto;
        }

        @media (max-width: 768px) {
            .quiz-container { padding: 1rem; }
            .quiz-title { font-size: 1.5rem; }
            .question-card { padding: 1.5rem; }
            .quiz-meta { flex-wrap: wrap; gap: 1rem; }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <header class="quiz-header">
            <div class="quiz-icon">‚öôÔ∏è</div>
            <h1 class="quiz-title">System Administration Quiz</h1>
            <p>Test your automation and sysadmin knowledge</p>
            <div class="quiz-meta">
                <span>üìù 15 Questions</span>
                <span>‚è±Ô∏è No Time Limit</span>
                <span>üéØ 70% to Pass</span>
            </div>
        </header>

        <div class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text">
                <span id="answeredCount">0 of 15 answered</span>
                <span id="correctCount">0 correct</span>
            </div>
        </div>

        <div id="questionsContainer">
            <!-- Questions will be dynamically inserted here -->
        </div>

        <div class="submit-section" id="submitSection">
            <button class="btn btn-primary" id="submitBtn" disabled>Submit Quiz</button>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="results-score" id="finalScore">0%</div>
            <div class="results-label">Final Score</div>
            <div class="results-message" id="resultsMessage"></div>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="retakeQuiz()">üîÑ Retake Quiz</button>
                <a href="sysadmin-lab.html" class="btn btn-secondary">üìö Review Lab</a>
            </div>
        </div>

        <nav class="nav-buttons">
            <a href="sysadmin-lab.html" class="btn btn-secondary">‚Üê Back to Lab</a>
            <a href="../index.html" class="btn btn-secondary">Script House ‚Üí</a>
        </nav>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                topic: "Automation",
                question: "Which of the following is a GOOD candidate for automation?",
                options: [
                    "A one-time server migration",
                    "Daily log rotation and cleanup",
                    "Deciding which employees to promote",
                    "Designing a new network architecture"
                ],
                correct: 1,
                explanation: "Daily log rotation is perfect for automation: it's repetitive, predictable, and follows consistent rules. One-time tasks, human judgment decisions, and creative design work are poor automation candidates."
            },
            {
                id: 2,
                topic: "Automation",
                question: "What does the Bash command <code class='code-inline'>set -e</code> do at the beginning of a script?",
                options: [
                    "Enables verbose output",
                    "Exports all variables",
                    "Exits the script if any command fails",
                    "Sets environment variables"
                ],
                correct: 2,
                explanation: "`set -e` makes the script exit immediately if any command returns a non-zero (error) exit status. This prevents scripts from continuing after failures and potentially causing more damage."
            },
            {
                id: 3,
                topic: "Logging",
                question: "Why is it important to include timestamps in log messages?",
                options: [
                    "It makes logs look more professional",
                    "It's required by all operating systems",
                    "It enables correlation of events and troubleshooting timing issues",
                    "It reduces log file size"
                ],
                correct: 2,
                explanation: "Timestamps allow you to correlate events across systems, identify when issues started, measure duration of operations, and troubleshoot timing-related problems like race conditions."
            },
            {
                id: 4,
                topic: "Log Analysis",
                question: "Which command would find all unique IP addresses that had failed SSH login attempts?",
                options: [
                    "cat auth.log | grep 'Failed'",
                    "grep 'Failed password' auth.log | awk '{print $(NF-3)}' | sort -u",
                    "find auth.log -name 'Failed'",
                    "ls -la auth.log"
                ],
                correct: 1,
                explanation: "This pipeline: 1) greps for 'Failed password' lines, 2) uses awk to extract the IP address (typically the 4th field from the end), 3) sorts and removes duplicates with sort -u."
            },
            {
                id: 5,
                topic: "Cron",
                question: "What does the cron expression <code class='code-inline'>0 2 * * *</code> mean?",
                options: [
                    "Every 2 minutes",
                    "At 2:00 AM every day",
                    "Every 2 hours",
                    "On the 2nd day of every month"
                ],
                correct: 1,
                explanation: "Cron format is: minute hour day month weekday. `0 2 * * *` means at minute 0, hour 2 (2 AM), every day (*), every month (*), every weekday (*). So: daily at 2:00 AM."
            },
            {
                id: 6,
                topic: "Cron",
                question: "What cron expression runs a task every 15 minutes?",
                options: [
                    "15 * * * *",
                    "*/15 * * * *",
                    "* 15 * * *",
                    "0-15 * * * *"
                ],
                correct: 1,
                explanation: "`*/15` means 'every 15 units'. In the first (minute) position, `*/15 * * * *` runs at minutes 0, 15, 30, 45 of every hour. `15 * * * *` would run only at minute 15 of each hour."
            },
            {
                id: 7,
                topic: "Backup",
                question: "What is the primary advantage of incremental backups over full backups?",
                options: [
                    "They're more secure",
                    "They use less storage space and complete faster",
                    "They're easier to restore",
                    "They don't require scheduling"
                ],
                correct: 1,
                explanation: "Incremental backups only copy files that changed since the last backup, using less storage and completing faster. The tradeoff is that restoration requires all incremental backups in sequence."
            },
            {
                id: 8,
                topic: "Backup",
                question: "What does <code class='code-inline'>rsync --link-dest</code> accomplish?",
                options: [
                    "Creates symbolic links to the destination",
                    "Uses hard links to unchanged files, saving disk space",
                    "Links to a remote server",
                    "Creates a backup of link files only"
                ],
                correct: 1,
                explanation: "`--link-dest` creates hard links to unchanged files from a reference directory. This gives you 'snapshot' backups that look like full backups but use minimal additional space for unchanged files."
            },
            {
                id: 9,
                topic: "Backup",
                question: "Why should backup scripts verify the backup after completion?",
                options: [
                    "To generate detailed reports",
                    "To ensure the backup is valid and can be restored when needed",
                    "To delete the source files",
                    "To encrypt the backup"
                ],
                correct: 1,
                explanation: "A backup is only useful if it can be restored. Verification (checking file counts, sizes, checksums) ensures data integrity. Many organizations have discovered corruption only when trying to restore from an unverified backup."
            },
            {
                id: 10,
                topic: "User Management",
                question: "What does <code class='code-inline'>chage -d 0 username</code> do on Linux?",
                options: [
                    "Deletes the user account",
                    "Forces password change on next login",
                    "Changes the user's home directory",
                    "Sets password to never expire"
                ],
                correct: 1,
                explanation: "`chage -d 0` sets the password's 'last changed' date to the epoch (Jan 1, 1970), making it appear expired. This forces the user to change their password on their next login."
            },
            {
                id: 11,
                topic: "User Management",
                question: "When deprovisioning a user account, what is the recommended order of operations?",
                options: [
                    "Delete account, then backup data",
                    "Disable account, backup data, then delete after retention period",
                    "Change password, then delete immediately",
                    "Delete immediately to prevent access"
                ],
                correct: 1,
                explanation: "Best practice: 1) Disable to prevent access, 2) Backup/archive data for legal/compliance, 3) Delete after retention period. Immediate deletion risks losing important data and may violate retention policies."
            },
            {
                id: 12,
                topic: "Monitoring",
                question: "What should an automated monitoring script do when it detects a critical issue?",
                options: [
                    "Log the issue and wait for manual review",
                    "Alert administrators immediately and log the incident",
                    "Automatically reboot the system",
                    "Delete the problematic files"
                ],
                correct: 1,
                explanation: "Monitoring scripts should alert immediately (email, SMS, ticket) for critical issues while logging details. Automatic remediation (like reboots) can be dangerous and may mask underlying problems."
            },
            {
                id: 13,
                topic: "Integration",
                question: "What format is commonly used when scripts need to exchange structured data?",
                options: [
                    "Plain text with spaces",
                    "JSON or CSV",
                    "Binary files",
                    "Microsoft Word documents"
                ],
                correct: 1,
                explanation: "JSON and CSV are standard interchange formats: machine-readable, text-based (easy to debug), and supported by virtually all programming languages. JSON is preferred for complex/nested data, CSV for tabular data."
            },
            {
                id: 14,
                topic: "Reporting",
                question: "Why generate HTML reports instead of plain text for system health data?",
                options: [
                    "HTML files are smaller",
                    "HTML allows conditional formatting, colors, and better readability",
                    "Plain text can't be emailed",
                    "HTML is more secure"
                ],
                correct: 1,
                explanation: "HTML enables visual cues: red for critical, yellow for warning, green for OK. Tables, charts, and formatting improve readability. Stakeholders can quickly scan for issues rather than parsing text."
            },
            {
                id: 15,
                topic: "Best Practices",
                question: "What is the most important practice when automating critical system tasks?",
                options: [
                    "Run scripts as fast as possible",
                    "Test thoroughly in a non-production environment first",
                    "Skip error handling to keep scripts simple",
                    "Avoid documentation to reduce maintenance"
                ],
                correct: 1,
                explanation: "Always test automation in non-production environments before deploying to production. Untested scripts can cause outages, data loss, or security issues. Error handling and documentation are also essential."
            }
        ];

        const STORAGE_KEY = 'hexworth_sysadmin_quiz_answers';
        const SCORE_KEY = 'hexworth_sysadmin_quiz_score';
        let userAnswers = {};
        let submitted = false;

        function loadState() {
            const saved = localStorage.getItem(STORAGE_KEY);
            const score = localStorage.getItem(SCORE_KEY);
            if (saved) {
                userAnswers = JSON.parse(saved);
            }
            if (score !== null) {
                submitted = true;
            }
        }

        function saveState() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(userAnswers));
        }

        function renderQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = questions.map((q, qIndex) => `
                <div class="question-card" id="question-${q.id}" data-question="${q.id}">
                    <div class="question-header">
                        <div class="question-number">${q.id}</div>
                        <div class="question-text">${q.question}</div>
                        <span class="topic-tag">${q.topic}</span>
                    </div>
                    <div class="options-list">
                        ${q.options.map((opt, oIndex) => `
                            <div class="option ${submitted ? 'disabled' : ''}"
                                 data-question="${q.id}"
                                 data-option="${oIndex}"
                                 onclick="selectOption(${q.id}, ${oIndex})">
                                <div class="option-marker">${String.fromCharCode(65 + oIndex)}</div>
                                <div class="option-text">${opt}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation-${q.id}">
                        <div class="explanation-title"></div>
                        <p>${q.explanation}</p>
                    </div>
                </div>
            `).join('');

            // Restore previous selections
            Object.entries(userAnswers).forEach(([qId, oIndex]) => {
                highlightOption(parseInt(qId), oIndex);
            });

            if (submitted) {
                showResults();
            }

            updateProgress();
        }

        function selectOption(questionId, optionIndex) {
            if (submitted) return;

            userAnswers[questionId] = optionIndex;
            saveState();

            // Clear previous selection
            document.querySelectorAll(`[data-question="${questionId}"]`).forEach(opt => {
                if (opt.classList.contains('option')) {
                    opt.classList.remove('selected');
                }
            });

            highlightOption(questionId, optionIndex);
            updateProgress();
        }

        function highlightOption(questionId, optionIndex) {
            const option = document.querySelector(`[data-question="${questionId}"][data-option="${optionIndex}"]`);
            if (option) {
                option.classList.add('selected');
            }
        }

        function updateProgress() {
            const answered = Object.keys(userAnswers).length;
            const correct = Object.entries(userAnswers).filter(([qId, answer]) => {
                const q = questions.find(q => q.id === parseInt(qId));
                return q && q.correct === answer;
            }).length;

            document.getElementById('progressFill').style.width = `${(answered / questions.length) * 100}%`;
            document.getElementById('answeredCount').textContent = `${answered} of ${questions.length} answered`;
            document.getElementById('correctCount').textContent = submitted ? `${correct} correct` : '';

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = answered < questions.length;
        }

        document.getElementById('submitBtn').addEventListener('click', () => {
            if (Object.keys(userAnswers).length < questions.length) {
                alert('Please answer all questions before submitting.');
                return;
            }

            submitted = true;
            showResults();
        });

        function showResults() {
            let correct = 0;

            questions.forEach(q => {
                const card = document.getElementById(`question-${q.id}`);
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.correct;

                if (isCorrect) {
                    correct++;
                    card.classList.add('correct');
                } else {
                    card.classList.add('incorrect');
                }

                // Show correct/wrong styling on options
                card.querySelectorAll('.option').forEach((opt, idx) => {
                    opt.classList.add('disabled');
                    if (idx === q.correct) {
                        opt.classList.add('correct-answer');
                    } else if (idx === userAnswer && !isCorrect) {
                        opt.classList.add('wrong-answer');
                    }
                });

                // Show explanation
                const explanation = document.getElementById(`explanation-${q.id}`);
                explanation.classList.add('show', isCorrect ? 'correct' : 'incorrect');
                explanation.querySelector('.explanation-title').textContent =
                    isCorrect ? '‚úì Correct!' : '‚úó Incorrect';
            });

            const score = Math.round((correct / questions.length) * 100);
            localStorage.setItem(SCORE_KEY, score);

            document.getElementById('finalScore').textContent = `${score}%`;
            document.getElementById('resultsMessage').textContent =
                score >= 70 ? 'üéâ Congratulations! You passed!' : 'üìö Keep practicing! Review the lab and try again.';
            document.getElementById('resultsMessage').className =
                `results-message ${score >= 70 ? 'passed' : 'failed'}`;

            document.getElementById('submitSection').style.display = 'none';
            document.getElementById('resultsSection').classList.add('show');

            updateProgress();
        }

        function retakeQuiz() {
            localStorage.removeItem(STORAGE_KEY);
            localStorage.removeItem(SCORE_KEY);
            userAnswers = {};
            submitted = false;

            document.getElementById('submitSection').style.display = 'block';
            document.getElementById('resultsSection').classList.remove('show');

            renderQuestions();
        }

        loadState();
        renderQuestions();
    </script>
</body>
</html>
