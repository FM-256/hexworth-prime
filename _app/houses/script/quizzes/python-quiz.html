<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Programming Quiz | Script House</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1025 50%, #0d0d15 100%);
            color: #e0e0e0;
            min-height: 100vh;
            line-height: 1.6;
        }

        .quiz-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(167, 139, 250, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%);
            border-radius: 16px;
            border: 1px solid rgba(167, 139, 250, 0.3);
        }

        .quiz-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .quiz-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            color: #9ca3af;
            font-size: 0.9rem;
            margin-top: 1rem;
        }

        .progress-section {
            background: rgba(30, 30, 40, 0.6);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .progress-bar {
            height: 8px;
            background: rgba(167, 139, 250, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #a78bfa 0%, #8b5cf6 100%);
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            color: #9ca3af;
            font-size: 0.9rem;
        }

        .question-card {
            background: rgba(30, 30, 40, 0.6);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(167, 139, 250, 0.2);
            transition: all 0.3s ease;
        }

        .question-card.answered {
            border-color: rgba(167, 139, 250, 0.4);
        }

        .question-card.correct {
            border-color: rgba(34, 197, 94, 0.5);
            background: rgba(34, 197, 94, 0.05);
        }

        .question-card.incorrect {
            border-color: rgba(239, 68, 68, 0.5);
            background: rgba(239, 68, 68, 0.05);
        }

        .question-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .question-number {
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .question-text {
            font-size: 1.1rem;
            color: #fff;
        }

        .code-block {
            background: #0d1117;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            border: 1px solid rgba(167, 139, 250, 0.2);
        }

        .code-block code {
            font-family: 'Fira Code', 'Consolas', monospace;
            color: #e6edf3;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(167, 139, 250, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option:hover:not(.disabled) {
            border-color: rgba(167, 139, 250, 0.5);
            background: rgba(167, 139, 250, 0.1);
        }

        .option.selected {
            border-color: #a78bfa;
            background: rgba(167, 139, 250, 0.15);
        }

        .option.correct-answer {
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.15);
        }

        .option.wrong-answer {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.15);
        }

        .option.disabled {
            cursor: default;
            opacity: 0.8;
        }

        .option-marker {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid rgba(167, 139, 250, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .option.selected .option-marker {
            background: #a78bfa;
            border-color: #a78bfa;
            color: white;
        }

        .option.correct-answer .option-marker {
            background: #22c55e;
            border-color: #22c55e;
            color: white;
        }

        .option.wrong-answer .option-marker {
            background: #ef4444;
            border-color: #ef4444;
            color: white;
        }

        .explanation {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            display: none;
        }

        .explanation.show {
            display: block;
        }

        .explanation.correct {
            background: rgba(34, 197, 94, 0.1);
            border-left: 4px solid #22c55e;
        }

        .explanation.incorrect {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
        }

        .explanation-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .explanation.correct .explanation-title { color: #22c55e; }
        .explanation.incorrect .explanation-title { color: #ef4444; }

        .results-section {
            background: linear-gradient(135deg, rgba(167, 139, 250, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            margin-top: 2rem;
            border: 1px solid rgba(167, 139, 250, 0.3);
            display: none;
        }

        .results-section.show {
            display: block;
        }

        .results-score {
            font-size: 4rem;
            font-weight: 700;
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .results-label {
            font-size: 1.2rem;
            color: #9ca3af;
            margin-bottom: 1rem;
        }

        .results-message {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }

        .results-message.passed { color: #22c55e; }
        .results-message.failed { color: #ef4444; }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(167, 139, 250, 0.4);
        }

        .btn-secondary {
            background: rgba(107, 114, 128, 0.2);
            color: #9ca3af;
            border: 1px solid rgba(107, 114, 128, 0.3);
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(167, 139, 250, 0.2);
        }

        .submit-section {
            text-align: center;
            margin-top: 2rem;
        }

        .topic-tag {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: rgba(167, 139, 250, 0.2);
            color: #a78bfa;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: auto;
        }

        @media (max-width: 768px) {
            .quiz-container { padding: 1rem; }
            .quiz-title { font-size: 1.5rem; }
            .question-card { padding: 1.5rem; }
            .quiz-meta { flex-wrap: wrap; gap: 1rem; }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <header class="quiz-header">
            <div class="quiz-icon">üêç</div>
            <h1 class="quiz-title">Python Programming Quiz</h1>
            <p>Test your Python knowledge from basics to OOP</p>
            <div class="quiz-meta">
                <span>üìù 15 Questions</span>
                <span>‚è±Ô∏è No Time Limit</span>
                <span>üéØ 70% to Pass</span>
            </div>
        </header>

        <div class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text">
                <span id="answeredCount">0 of 15 answered</span>
                <span id="correctCount">0 correct</span>
            </div>
        </div>

        <div id="questionsContainer">
            <!-- Questions will be dynamically inserted here -->
        </div>

        <div class="submit-section" id="submitSection">
            <button class="btn btn-primary" id="submitBtn" disabled>Submit Quiz</button>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="results-score" id="finalScore">0%</div>
            <div class="results-label">Final Score</div>
            <div class="results-message" id="resultsMessage"></div>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="retakeQuiz()">üîÑ Retake Quiz</button>
                <a href="python-lab.html" class="btn btn-secondary">üìö Review Lab</a>
            </div>
        </div>

        <nav class="nav-buttons">
            <a href="python-lab.html" class="btn btn-secondary">‚Üê Back to Lab</a>
            <a href="../index.html" class="btn btn-secondary">Script House ‚Üí</a>
        </nav>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                topic: "Basics",
                question: "What is the output of <code>type(3.14)</code> in Python?",
                options: [
                    "<class 'int'>",
                    "<class 'float'>",
                    "<class 'decimal'>",
                    "<class 'double'>"
                ],
                correct: 1,
                explanation: "In Python, decimal numbers are stored as `float` type. Unlike some languages that have separate `double` and `decimal` types, Python uses `float` for all floating-point numbers, which are 64-bit IEEE 754 doubles internally."
            },
            {
                id: 2,
                topic: "Basics",
                question: "Which of the following is NOT a valid Python variable name?",
                options: [
                    "_private_var",
                    "myVariable2",
                    "2ndVariable",
                    "__dunder__"
                ],
                correct: 2,
                explanation: "Variable names cannot start with a number in Python. They must start with a letter (a-z, A-Z) or underscore (_). `_private_var` and `__dunder__` are valid because they start with underscores."
            },
            {
                id: 3,
                topic: "Strings",
                question: "What does <code>'Python'[::-1]</code> return?",
                options: [
                    "'Python'",
                    "'nohtyP'",
                    "'Pytho'",
                    "An error"
                ],
                correct: 1,
                explanation: "The slice notation `[::-1]` reverses a sequence. The third parameter (-1) specifies a negative step, which iterates backwards through the string, producing 'nohtyP'."
            },
            {
                id: 4,
                topic: "Strings",
                question: "Which method would you use to check if a string contains only alphabetic characters?",
                options: [
                    ".isdigit()",
                    ".isalpha()",
                    ".isalnum()",
                    ".isword()"
                ],
                correct: 1,
                explanation: "`.isalpha()` returns True if all characters in the string are alphabetic letters (a-z, A-Z). `.isdigit()` checks for digits only, `.isalnum()` checks for alphanumeric (letters + digits), and `.isword()` doesn't exist in Python."
            },
            {
                id: 5,
                topic: "Control Flow",
                question: "What will this code print?<br><code>for i in range(3, 0, -1): print(i, end=' ')</code>",
                options: [
                    "0 1 2",
                    "3 2 1",
                    "3 2 1 0",
                    "1 2 3"
                ],
                correct: 1,
                explanation: "`range(3, 0, -1)` generates numbers from 3 down to 1 (not including 0), stepping by -1. The `end=' '` parameter prevents newlines, printing '3 2 1' on one line."
            },
            {
                id: 6,
                topic: "Control Flow",
                question: "What is the difference between <code>break</code> and <code>continue</code> in a loop?",
                options: [
                    "There is no difference",
                    "break skips one iteration; continue exits the loop",
                    "break exits the loop; continue skips to the next iteration",
                    "Both exit the loop but break is faster"
                ],
                correct: 2,
                explanation: "`break` completely terminates the loop and moves to the code after it. `continue` skips the rest of the current iteration and jumps to the next one. They serve opposite purposes in loop control."
            },
            {
                id: 7,
                topic: "Functions",
                question: "What does <code>*args</code> allow a function to accept?",
                options: [
                    "Exactly one argument",
                    "A variable number of keyword arguments",
                    "A variable number of positional arguments",
                    "A list as the only argument"
                ],
                correct: 2,
                explanation: "`*args` allows a function to accept any number of positional arguments, which are collected into a tuple. For variable keyword arguments, you would use `**kwargs` instead."
            },
            {
                id: 8,
                topic: "Functions",
                question: "What is the output of this code?<br><code>def greet(name='World'): return f'Hello, {name}!'<br>print(greet())</code>",
                options: [
                    "Hello, !",
                    "Hello, None!",
                    "Hello, World!",
                    "An error because no argument was passed"
                ],
                correct: 2,
                explanation: "The function has a default parameter `name='World'`. When called without arguments, it uses the default value, returning 'Hello, World!'. Default parameters are evaluated once at function definition."
            },
            {
                id: 9,
                topic: "Collections",
                question: "What is the key difference between a list and a tuple in Python?",
                options: [
                    "Lists can only contain numbers",
                    "Tuples are mutable, lists are immutable",
                    "Lists are mutable, tuples are immutable",
                    "There is no difference"
                ],
                correct: 2,
                explanation: "Lists are mutable (can be modified after creation), while tuples are immutable (cannot be changed). This makes tuples hashable and usable as dictionary keys, while lists cannot be used as keys."
            },
            {
                id: 10,
                topic: "Collections",
                question: "What is the output of <code>[x**2 for x in range(4)]</code>?",
                options: [
                    "[1, 4, 9, 16]",
                    "[0, 1, 4, 9]",
                    "[0, 2, 4, 6]",
                    "[1, 2, 3, 4]"
                ],
                correct: 1,
                explanation: "`range(4)` generates 0, 1, 2, 3. The list comprehension squares each value: 0¬≤=0, 1¬≤=1, 2¬≤=4, 3¬≤=9, resulting in [0, 1, 4, 9]."
            },
            {
                id: 11,
                topic: "Dictionaries",
                question: "What method safely retrieves a value from a dictionary, returning a default if the key doesn't exist?",
                options: [
                    "dict.find(key)",
                    "dict.get(key, default)",
                    "dict.fetch(key)",
                    "dict.retrieve(key)"
                ],
                correct: 1,
                explanation: "`.get(key, default)` returns the value for key if it exists, otherwise returns the default value. This avoids KeyError exceptions that would occur with `dict[key]` for missing keys."
            },
            {
                id: 12,
                topic: "Dictionaries",
                question: "What is the output of <code>set([1, 2, 2, 3, 3, 3])</code>?",
                options: [
                    "[1, 2, 2, 3, 3, 3]",
                    "{1, 2, 3}",
                    "{1: 1, 2: 2, 3: 3}",
                    "An error"
                ],
                correct: 1,
                explanation: "A set only stores unique elements and automatically removes duplicates. Converting the list to a set removes all duplicate values, leaving {1, 2, 3}. Note: sets use curly braces but are not dictionaries."
            },
            {
                id: 13,
                topic: "File Handling",
                question: "What does the <code>with</code> statement provide when working with files?",
                options: [
                    "Faster file reading",
                    "Automatic file closing and resource management",
                    "File encryption",
                    "Multi-threaded access"
                ],
                correct: 1,
                explanation: "The `with` statement is a context manager that automatically handles resource cleanup. For files, it ensures the file is properly closed when the block exits, even if an exception occurs."
            },
            {
                id: 14,
                topic: "OOP",
                question: "What is <code>self</code> in a Python class method?",
                options: [
                    "A Python keyword that must be used",
                    "A reference to the class itself",
                    "A reference to the current instance of the class",
                    "A way to make methods private"
                ],
                correct: 2,
                explanation: "`self` is a reference to the current instance of the class. It allows access to the instance's attributes and methods. While 'self' is a convention (not a keyword), using it is the standard Python practice."
            },
            {
                id: 15,
                topic: "OOP",
                question: "What does <code>super().__init__()</code> do in a child class?",
                options: [
                    "Creates a new parent class",
                    "Calls the parent class's constructor",
                    "Deletes the parent class",
                    "Makes the class abstract"
                ],
                correct: 1,
                explanation: "`super()` returns a proxy object that delegates method calls to the parent class. `super().__init__()` calls the parent class's constructor, ensuring proper initialization of inherited attributes."
            }
        ];

        const STORAGE_KEY = 'hexworth_python_quiz_answers';
        const SCORE_KEY = 'hexworth_python_quiz_score';
        let userAnswers = {};
        let submitted = false;

        function loadState() {
            const saved = localStorage.getItem(STORAGE_KEY);
            const score = localStorage.getItem(SCORE_KEY);
            if (saved) {
                userAnswers = JSON.parse(saved);
            }
            if (score !== null) {
                submitted = true;
            }
        }

        function saveState() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(userAnswers));
        }

        function renderQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = questions.map((q, qIndex) => `
                <div class="question-card" id="question-${q.id}" data-question="${q.id}">
                    <div class="question-header">
                        <div class="question-number">${q.id}</div>
                        <div class="question-text">${q.question}</div>
                        <span class="topic-tag">${q.topic}</span>
                    </div>
                    <div class="options-list">
                        ${q.options.map((opt, oIndex) => `
                            <div class="option ${submitted ? 'disabled' : ''}"
                                 data-question="${q.id}"
                                 data-option="${oIndex}"
                                 onclick="selectOption(${q.id}, ${oIndex})">
                                <div class="option-marker">${String.fromCharCode(65 + oIndex)}</div>
                                <div class="option-text">${opt}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation-${q.id}">
                        <div class="explanation-title"></div>
                        <p>${q.explanation}</p>
                    </div>
                </div>
            `).join('');

            // Restore previous selections
            Object.entries(userAnswers).forEach(([qId, oIndex]) => {
                highlightOption(parseInt(qId), oIndex);
            });

            if (submitted) {
                showResults();
            }

            updateProgress();
        }

        function selectOption(questionId, optionIndex) {
            if (submitted) return;

            userAnswers[questionId] = optionIndex;
            saveState();

            // Clear previous selection
            document.querySelectorAll(`[data-question="${questionId}"]`).forEach(opt => {
                if (opt.classList.contains('option')) {
                    opt.classList.remove('selected');
                }
            });

            highlightOption(questionId, optionIndex);
            updateProgress();
        }

        function highlightOption(questionId, optionIndex) {
            const option = document.querySelector(`[data-question="${questionId}"][data-option="${optionIndex}"]`);
            if (option) {
                option.classList.add('selected');
            }
        }

        function updateProgress() {
            const answered = Object.keys(userAnswers).length;
            const correct = Object.entries(userAnswers).filter(([qId, answer]) => {
                const q = questions.find(q => q.id === parseInt(qId));
                return q && q.correct === answer;
            }).length;

            document.getElementById('progressFill').style.width = `${(answered / questions.length) * 100}%`;
            document.getElementById('answeredCount').textContent = `${answered} of ${questions.length} answered`;
            document.getElementById('correctCount').textContent = submitted ? `${correct} correct` : '';

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = answered < questions.length;
        }

        document.getElementById('submitBtn').addEventListener('click', () => {
            if (Object.keys(userAnswers).length < questions.length) {
                alert('Please answer all questions before submitting.');
                return;
            }

            submitted = true;
            showResults();
        });

        function showResults() {
            let correct = 0;

            questions.forEach(q => {
                const card = document.getElementById(`question-${q.id}`);
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.correct;

                if (isCorrect) {
                    correct++;
                    card.classList.add('correct');
                } else {
                    card.classList.add('incorrect');
                }

                // Show correct/wrong styling on options
                card.querySelectorAll('.option').forEach((opt, idx) => {
                    opt.classList.add('disabled');
                    if (idx === q.correct) {
                        opt.classList.add('correct-answer');
                    } else if (idx === userAnswer && !isCorrect) {
                        opt.classList.add('wrong-answer');
                    }
                });

                // Show explanation
                const explanation = document.getElementById(`explanation-${q.id}`);
                explanation.classList.add('show', isCorrect ? 'correct' : 'incorrect');
                explanation.querySelector('.explanation-title').textContent =
                    isCorrect ? '‚úì Correct!' : '‚úó Incorrect';
            });

            const score = Math.round((correct / questions.length) * 100);
            localStorage.setItem(SCORE_KEY, score);

            document.getElementById('finalScore').textContent = `${score}%`;
            document.getElementById('resultsMessage').textContent =
                score >= 70 ? 'üéâ Congratulations! You passed!' : 'üìö Keep practicing! Review the lab and try again.';
            document.getElementById('resultsMessage').className =
                `results-message ${score >= 70 ? 'passed' : 'failed'}`;

            document.getElementById('submitSection').style.display = 'none';
            document.getElementById('resultsSection').classList.add('show');

            updateProgress();
        }

        function retakeQuiz() {
            localStorage.removeItem(STORAGE_KEY);
            localStorage.removeItem(SCORE_KEY);
            userAnswers = {};
            submitted = false;

            document.getElementById('submitSection').style.display = 'block';
            document.getElementById('resultsSection').classList.remove('show');

            renderQuestions();
        }

        loadState();
        renderQuestions();
    </script>
</body>
</html>
