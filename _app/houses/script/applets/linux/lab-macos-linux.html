<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab: macOS and Linux Fundamentals - CompTIA A+ Core 2</title>
    <style>
        /* ===== CSS CUSTOM PROPERTIES ===== */
        :root {
            --bg-primary: #0a0e27;
            --bg-secondary: #1a1f3a;
            --bg-tertiary: #252b4a;
            --bg-input: #1e2442;
            --accent-primary: #00d4ff;
            --accent-secondary: #0099cc;
            --accent-success: #00ff88;
            --accent-warning: #ffaa00;
            --text-primary: #e0e6ff;
            --text-secondary: #a0a8c8;
            --text-muted: #6b7299;
            --border-color: #2a3355;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --transition-fast: 0.2s ease;
            --transition-medium: 0.3s ease;
        }

        /* ===== GLOBAL RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #0d1230 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        /* ===== CONTAINER ===== */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        /* ===== HEADER ===== */
        .header {
            background: linear-gradient(135deg, #1a1f3a 0%, #252b4a 100%);
            padding: 30px;
            border-bottom: 3px solid var(--accent-primary);
            position: relative;
        }

        .nav-home {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--bg-tertiary);
            color: var(--accent-primary);
            text-decoration: none;
            padding: 10px 20px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            transition: all var(--transition-fast);
            border: 2px solid var(--accent-primary);
        }

        .nav-home:hover {
            background: var(--accent-primary);
            color: var(--bg-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .badge-container {
            text-align: center;
            margin-bottom: 20px;
        }

        .aplus-badge {
            display: inline-block;
            background: linear-gradient(135deg, #e30613 0%, #ff4444 100%);
            color: white;
            font-weight: 900;
            font-size: 24px;
            padding: 15px 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            letter-spacing: 2px;
            border: 3px solid white;
        }

        .header-title {
            text-align: center;
            font-size: 2.2em;
            margin-bottom: 15px;
            color: var(--accent-primary);
            text-shadow: 0 2px 10px rgba(0, 212, 255, 0.3);
        }

        .header-meta {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .meta-item {
            background: var(--bg-tertiary);
            padding: 10px 20px;
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--accent-primary);
        }

        .meta-label {
            font-size: 0.85em;
            color: var(--text-muted);
            display: block;
        }

        .meta-value {
            font-weight: 600;
            color: var(--accent-primary);
            font-size: 1.1em;
        }

        /* ===== OBJECTIVES SECTION ===== */
        .objectives-section {
            background: var(--bg-tertiary);
            padding: 25px 30px;
            margin: 20px;
            border-radius: var(--radius-md);
            border-left: 5px solid var(--accent-success);
        }

        .objectives-section h2 {
            color: var(--accent-success);
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .objectives-section ul {
            list-style: none;
            padding-left: 0;
        }

        .objectives-section li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
        }

        .objectives-section li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--accent-success);
            font-weight: bold;
            font-size: 1.2em;
        }

        /* ===== PROGRESS BAR ===== */
        .progress-container {
            margin: 20px;
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: var(--radius-md);
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .progress-bar-bg {
            background: var(--bg-input);
            height: 30px;
            border-radius: var(--radius-sm);
            overflow: hidden;
            border: 2px solid var(--border-color);
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-secondary) 0%, var(--accent-primary) 100%);
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9em;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* ===== EXERCISE SECTIONS ===== */
        .exercises-container {
            padding: 20px;
        }

        .exercise {
            background: var(--bg-tertiary);
            margin-bottom: 25px;
            border-radius: var(--radius-md);
            overflow: hidden;
            border: 2px solid var(--border-color);
            transition: all var(--transition-medium);
        }

        .exercise:hover {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-md);
        }

        .exercise-header {
            background: linear-gradient(135deg, #1e2442 0%, #252b4a 100%);
            padding: 20px 25px;
            border-bottom: 2px solid var(--accent-primary);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
        }

        .exercise-header:hover {
            background: linear-gradient(135deg, #252b4a 0%, #2d3458 100%);
        }

        .exercise-title {
            font-size: 1.4em;
            color: var(--accent-primary);
            font-weight: 700;
        }

        .exercise-toggle {
            font-size: 1.5em;
            color: var(--accent-primary);
            transition: transform var(--transition-fast);
        }

        .exercise.collapsed .exercise-toggle {
            transform: rotate(-90deg);
        }

        .exercise-content {
            padding: 25px;
            max-height: 5000px;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.4s ease;
        }

        .exercise.collapsed .exercise-content {
            max-height: 0;
            padding: 0 25px;
        }

        /* ===== TASKS ===== */
        .task {
            background: var(--bg-secondary);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--accent-secondary);
        }

        .task-header {
            font-size: 1.15em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .task-number {
            background: var(--accent-secondary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
            font-weight: 700;
        }

        .task-description {
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.8;
        }

        /* ===== FORM ELEMENTS ===== */
        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            background: var(--bg-input);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            padding: 10px 15px;
            border-radius: var(--radius-sm);
            font-size: 1em;
            transition: all var(--transition-fast);
            font-family: 'Consolas', 'Courier New', monospace;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background: var(--bg-input);
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }

        .checkbox-group:hover {
            background: #242a4a;
        }

        .checkbox-input {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--accent-primary);
        }

        .checkbox-label {
            color: var(--text-primary);
            cursor: pointer;
            flex: 1;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-input {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--accent-primary);
        }

        .radio-label {
            color: var(--text-primary);
            cursor: pointer;
        }

        /* ===== CODE/COMMAND STYLING ===== */
        .code-block {
            background: var(--bg-primary);
            color: var(--accent-success);
            padding: 12px 16px;
            border-radius: var(--radius-sm);
            font-family: 'Consolas', 'Courier New', monospace;
            border: 1px solid var(--border-color);
            margin: 10px 0;
            font-size: 0.95em;
        }

        .inline-code {
            background: var(--bg-primary);
            color: var(--accent-primary);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.9em;
        }

        /* ===== DOCUMENTATION CHALLENGE ===== */
        .documentation-section {
            background: linear-gradient(135deg, #2d1a3a 0%, #1a1f3a 100%);
            padding: 25px;
            margin: 20px;
            border-radius: var(--radius-md);
            border: 2px solid #8844ff;
        }

        .documentation-section h2 {
            color: #bb88ff;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .documentation-section textarea {
            width: 100%;
            min-height: 80px;
            background: var(--bg-input);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            padding: 12px;
            border-radius: var(--radius-sm);
            font-size: 1em;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            resize: vertical;
            transition: all var(--transition-fast);
        }

        .documentation-section textarea:focus {
            outline: none;
            border-color: #bb88ff;
            box-shadow: 0 0 0 3px rgba(187, 136, 255, 0.1);
        }

        /* ===== BUTTONS ===== */
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-secondary) 0%, var(--accent-primary) 100%);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--accent-primary);
            border: 2px solid var(--accent-primary);
        }

        .btn-secondary:hover {
            background: var(--accent-primary);
            color: var(--bg-primary);
        }

        .btn-danger {
            background: linear-gradient(135deg, #cc0000 0%, #ff3333 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* ===== MODAL ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--bg-secondary);
            padding: 40px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            max-width: 500px;
            text-align: center;
            border: 3px solid var(--accent-success);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 2em;
            color: var(--accent-success);
            margin-bottom: 15px;
        }

        .modal-message {
            color: var(--text-secondary);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        /* ===== FOOTER ===== */
        .footer {
            background: var(--bg-tertiary);
            padding: 20px;
            text-align: center;
            color: var(--text-muted);
            border-top: 2px solid var(--border-color);
        }

        .footer-links {
            margin-top: 10px;
        }

        .footer-link {
            color: var(--accent-primary);
            text-decoration: none;
            margin: 0 10px;
            transition: color var(--transition-fast);
        }

        .footer-link:hover {
            color: var(--accent-success);
            text-decoration: underline;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header {
                padding: 80px 20px 20px 20px;
            }

            .nav-home {
                top: 10px;
                left: 10px;
                padding: 8px 15px;
                font-size: 0.9em;
            }

            .header-title {
                font-size: 1.5em;
            }

            .aplus-badge {
                font-size: 18px;
                padding: 10px 20px;
            }

            .header-meta {
                gap: 15px;
            }

            .meta-item {
                padding: 8px 15px;
            }

            .exercise-title {
                font-size: 1.1em;
            }

            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .modal-content {
                margin: 20px;
                padding: 30px 20px;
            }
        }

        /* ===== PRINT STYLES ===== */
        @media print {
            body {
                background: white;
                color: black;
            }

            .container {
                box-shadow: none;
            }

            .nav-home,
            .button-group,
            .progress-container {
                display: none;
            }

            .exercise {
                page-break-inside: avoid;
            }

            .exercise-content {
                max-height: none !important;
                padding: 25px !important;
            }
        }

        /* ===== WARNING/NOTE BOXES ===== */
        .warning-box {
            background: rgba(255, 170, 0, 0.1);
            border: 2px solid var(--accent-warning);
            border-left: 5px solid var(--accent-warning);
            padding: 15px;
            border-radius: var(--radius-sm);
            margin: 15px 0;
        }

        .warning-box strong {
            color: var(--accent-warning);
        }

        .note-box {
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid var(--accent-primary);
            border-left: 5px solid var(--accent-primary);
            padding: 15px;
            border-radius: var(--radius-sm);
            margin: 15px 0;
        }

        .note-box strong {
            color: var(--accent-primary);
        }

        .os-label {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 8px;
        }

        .os-macos {
            background: rgba(0, 122, 255, 0.2);
            color: #4da6ff;
            border: 1px solid #4da6ff;
        }

        .os-linux {
            background: rgba(255, 184, 0, 0.2);
            color: #ffcc66;
            border: 1px solid #ffcc66;
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- HEADER -->
        <header class="header">
            <a href="../../../../index.html" class="nav-home">← Home</a>

            <div class="badge-container">
                <div class="aplus-badge">CompTIA A+</div>
            </div>

            <h1 class="header-title">Lab: macOS and Linux Fundamentals</h1>

            <div class="header-meta">
                <div class="meta-item">
                    <span class="meta-label">Estimated Time</span>
                    <span class="meta-value">60-90 minutes</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Difficulty</span>
                    <span class="meta-value">Beginner-Intermediate</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Prerequisites</span>
                    <span class="meta-value">macOS or Linux system (VM acceptable)</span>
                </div>
            </div>
        </header>

        <!-- OBJECTIVES -->
        <section class="objectives-section">
            <h2>Lab Objectives</h2>
            <ul>
                <li>Navigate the macOS/Linux file system using Terminal</li>
                <li>Execute common command-line operations</li>
                <li>Understand file permissions and ownership</li>
                <li>Compare macOS/Linux structure to Windows</li>
                <li>Practice package management basics</li>
            </ul>
        </section>

        <!-- PROGRESS BAR -->
        <div class="progress-container">
            <div class="progress-label">
                <span>Overall Progress</span>
                <span id="progress-text">0 / 24 tasks completed (0%)</span>
            </div>
            <div class="progress-bar-bg">
                <div class="progress-bar-fill" id="progress-bar">0%</div>
            </div>
        </div>

        <!-- EXERCISES -->
        <div class="exercises-container">

            <!-- EXERCISE 1: Terminal Basics -->
            <div class="exercise" data-exercise="1">
                <div class="exercise-header" onclick="toggleExercise(1)">
                    <h2 class="exercise-title">Exercise 1: Terminal Basics</h2>
                    <span class="exercise-toggle">▼</span>
                </div>
                <div class="exercise-content">

                    <!-- Task 1 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">1</span>
                            <span>Launch Terminal</span>
                        </div>
                        <div class="task-description">
                            Launch Terminal on your system:
                        </div>
                        <div class="note-box">
                            <strong><span class="os-macos">macOS</span></strong> Applications &gt; Utilities &gt; Terminal, or press <span class="inline-code">Cmd+Space</span>, type "Terminal"<br><br>
                            <strong><span class="os-linux">Linux</span></strong> Press <span class="inline-code">Ctrl+Alt+T</span>, or search in application menu
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-1-1" class="checkbox-input task-checkbox" data-task="1-1">
                            <label for="task-1-1" class="checkbox-label">Successfully launched Terminal</label>
                        </div>
                    </div>

                    <!-- Task 2 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">2</span>
                            <span>Record Shell Information</span>
                        </div>
                        <div class="task-description">
                            Run the following commands to gather information about your environment:
                        </div>
                        <div class="form-group">
                            <label class="form-label">Current shell (run: echo $SHELL):</label>
                            <input type="text" class="form-input" id="task-1-2-shell" placeholder="e.g., /bin/bash or /bin/zsh" data-task="1-2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Username (run: whoami):</label>
                            <input type="text" class="form-input" id="task-1-2-username" placeholder="e.g., john" data-task="1-2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Hostname (run: hostname):</label>
                            <input type="text" class="form-input" id="task-1-2-hostname" placeholder="e.g., johns-macbook or ubuntu-laptop" data-task="1-2">
                        </div>
                    </div>

                    <!-- Task 3 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">3</span>
                            <span>Basic Navigation</span>
                        </div>
                        <div class="task-description">
                            Practice basic directory navigation commands:
                        </div>
                        <div class="form-group">
                            <label class="form-label">Current directory (run: pwd):</label>
                            <input type="text" class="form-input" id="task-1-3-pwd" placeholder="e.g., /Users/john or /home/john" data-task="1-3">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Home directory (run: cd ~ && pwd):</label>
                            <input type="text" class="form-input" id="task-1-3-home" placeholder="e.g., /Users/john or /home/john" data-task="1-3">
                        </div>
                    </div>

                </div>
            </div>

            <!-- EXERCISE 2: File System Navigation -->
            <div class="exercise" data-exercise="2">
                <div class="exercise-header" onclick="toggleExercise(2)">
                    <h2 class="exercise-title">Exercise 2: File System Navigation</h2>
                    <span class="exercise-toggle">▼</span>
                </div>
                <div class="exercise-content">

                    <!-- Task 1 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">1</span>
                            <span>Explore Root Directory</span>
                        </div>
                        <div class="task-description">
                            Navigate to the root directory and explore its contents:
                        </div>
                        <div class="code-block">ls /</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-2-1-cmd" class="checkbox-input task-checkbox" data-task="2-1">
                            <label for="task-2-1-cmd" class="checkbox-label">Successfully ran ls / command</label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">List 5 directories you see in root (separated by commas):</label>
                            <input type="text" class="form-input" id="task-2-1-dirs" placeholder="e.g., bin, etc, home, usr, var" data-task="2-1">
                        </div>
                    </div>

                    <!-- Task 2 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">2</span>
                            <span>Key Directories Comparison</span>
                        </div>
                        <div class="task-description">
                            Identify important directory locations in your system:
                        </div>
                        <div class="form-group">
                            <label class="form-label">Where are user home directories located?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="task-2-2-users" name="home-location" class="radio-input" value="users" data-task="2-2">
                                    <label for="task-2-2-users" class="radio-label">/Users (macOS)</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-2-2-home" name="home-location" class="radio-input" value="home" data-task="2-2">
                                    <label for="task-2-2-home" class="radio-label">/home (Linux)</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Where are system applications? (macOS: /Applications, Linux: /usr/bin or /bin)</label>
                            <input type="text" class="form-input" id="task-2-2-apps" placeholder="e.g., /Applications or /usr/bin" data-task="2-2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Where are system logs stored?</label>
                            <input type="text" class="form-input" id="task-2-2-logs" placeholder="e.g., /var/log" data-task="2-2">
                        </div>
                    </div>

                    <!-- Task 3 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">3</span>
                            <span>Navigate and List</span>
                        </div>
                        <div class="task-description">
                            Navigate to the /etc directory and explore it:
                        </div>
                        <div class="code-block">cd /etc && ls</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-2-3-nav" class="checkbox-input task-checkbox" data-task="2-3">
                            <label for="task-2-3-nav" class="checkbox-label">Successfully navigated to /etc and listed contents</label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">What is the purpose of /etc?</label>
                            <input type="text" class="form-input" id="task-2-3-purpose" placeholder="Expected: system configuration files" data-task="2-3">
                        </div>
                    </div>

                </div>
            </div>

            <!-- EXERCISE 3: Working with Files and Directories -->
            <div class="exercise" data-exercise="3">
                <div class="exercise-header" onclick="toggleExercise(3)">
                    <h2 class="exercise-title">Exercise 3: Working with Files and Directories</h2>
                    <span class="exercise-toggle">▼</span>
                </div>
                <div class="exercise-content">

                    <!-- Task 1 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">1</span>
                            <span>Create Practice Directory</span>
                        </div>
                        <div class="task-description">
                            Create a directory for practice exercises:
                        </div>
                        <div class="code-block">mkdir ~/lab_practice</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-3-1-mkdir" class="checkbox-input task-checkbox" data-task="3-1">
                            <label for="task-3-1-mkdir" class="checkbox-label">Created ~/lab_practice directory</label>
                        </div>
                        <div class="code-block">cd ~/lab_practice</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-3-1-cd" class="checkbox-input task-checkbox" data-task="3-1">
                            <label for="task-3-1-cd" class="checkbox-label">Navigated to ~/lab_practice</label>
                        </div>
                    </div>

                    <!-- Task 2 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">2</span>
                            <span>Create and View Files</span>
                        </div>
                        <div class="task-description">
                            Create files and add content:
                        </div>
                        <div class="code-block">touch testfile.txt</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-3-2-touch" class="checkbox-input task-checkbox" data-task="3-2">
                            <label for="task-3-2-touch" class="checkbox-label">Created testfile.txt</label>
                        </div>
                        <div class="code-block">echo "Hello Linux/macOS" > testfile.txt</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-3-2-echo" class="checkbox-input task-checkbox" data-task="3-2">
                            <label for="task-3-2-echo" class="checkbox-label">Added text to testfile.txt</label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">What did cat testfile.txt show?</label>
                            <input type="text" class="form-input" id="task-3-2-cat" placeholder="Expected: Hello Linux/macOS" data-task="3-2">
                        </div>
                    </div>

                    <!-- Task 3 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">3</span>
                            <span>Copy, Move, Delete</span>
                        </div>
                        <div class="task-description">
                            Practice file manipulation commands:
                        </div>
                        <div class="code-block">cp testfile.txt backup.txt</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-3-3-cp" class="checkbox-input task-checkbox" data-task="3-3">
                            <label for="task-3-3-cp" class="checkbox-label">Copied testfile.txt to backup.txt</label>
                        </div>
                        <div class="code-block">mv backup.txt renamed.txt</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-3-3-mv" class="checkbox-input task-checkbox" data-task="3-3">
                            <label for="task-3-3-mv" class="checkbox-label">Renamed backup.txt to renamed.txt</label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">List the files now (run: ls):</label>
                            <input type="text" class="form-input" id="task-3-3-ls" placeholder="e.g., testfile.txt renamed.txt" data-task="3-3">
                        </div>
                        <div class="code-block">rm renamed.txt</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-3-3-rm" class="checkbox-input task-checkbox" data-task="3-3">
                            <label for="task-3-3-rm" class="checkbox-label">Deleted renamed.txt</label>
                        </div>
                    </div>

                </div>
            </div>

            <!-- EXERCISE 4: File Permissions -->
            <div class="exercise" data-exercise="4">
                <div class="exercise-header" onclick="toggleExercise(4)">
                    <h2 class="exercise-title">Exercise 4: File Permissions</h2>
                    <span class="exercise-toggle">▼</span>
                </div>
                <div class="exercise-content">

                    <!-- Task 1 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">1</span>
                            <span>View Permissions</span>
                        </div>
                        <div class="task-description">
                            View detailed file permissions:
                        </div>
                        <div class="code-block">ls -la ~/lab_practice</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-4-1-ls" class="checkbox-input task-checkbox" data-task="4-1">
                            <label for="task-4-1-ls" class="checkbox-label">Ran ls -la command</label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Record permissions for testfile.txt:</label>
                            <input type="text" class="form-input" id="task-4-1-perms" placeholder="e.g., -rw-r--r--" data-task="4-1">
                        </div>
                    </div>

                    <!-- Task 2 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">2</span>
                            <span>Understanding Permission Notation</span>
                        </div>
                        <div class="task-description">
                            Test your understanding of permission characters:
                        </div>
                        <div class="form-group">
                            <label class="form-label">What does 'r' mean in permissions?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="task-4-2-read" name="perm-r" class="radio-input" value="read" data-task="4-2">
                                    <label for="task-4-2-read" class="radio-label">Read</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-4-2-write-r" name="perm-r" class="radio-input" value="write" data-task="4-2">
                                    <label for="task-4-2-write-r" class="radio-label">Write</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-4-2-execute-r" name="perm-r" class="radio-input" value="execute" data-task="4-2">
                                    <label for="task-4-2-execute-r" class="radio-label">Execute</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">What does 'w' mean in permissions?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="task-4-2-read-w" name="perm-w" class="radio-input" value="read" data-task="4-2">
                                    <label for="task-4-2-read-w" class="radio-label">Read</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-4-2-write" name="perm-w" class="radio-input" value="write" data-task="4-2">
                                    <label for="task-4-2-write" class="radio-label">Write</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-4-2-execute-w" name="perm-w" class="radio-input" value="execute" data-task="4-2">
                                    <label for="task-4-2-execute-w" class="radio-label">Execute</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">What does 'x' mean in permissions?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="task-4-2-read-x" name="perm-x" class="radio-input" value="read" data-task="4-2">
                                    <label for="task-4-2-read-x" class="radio-label">Read</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-4-2-write-x" name="perm-x" class="radio-input" value="write" data-task="4-2">
                                    <label for="task-4-2-write-x" class="radio-label">Write</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-4-2-execute" name="perm-x" class="radio-input" value="execute" data-task="4-2">
                                    <label for="task-4-2-execute" class="radio-label">Execute</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Task 3 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">3</span>
                            <span>Change Permissions</span>
                        </div>
                        <div class="task-description">
                            Modify file permissions using chmod:
                        </div>
                        <div class="code-block">chmod 755 testfile.txt</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-4-3-chmod" class="checkbox-input task-checkbox" data-task="4-3">
                            <label for="task-4-3-chmod" class="checkbox-label">Changed permissions to 755</label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">New permissions (run ls -la):</label>
                            <input type="text" class="form-input" id="task-4-3-new" placeholder="Expected: -rwxr-xr-x" data-task="4-3">
                        </div>
                        <div class="form-group">
                            <label class="form-label">With 755 permissions, who can execute the file?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="task-4-3-owner" name="execute-who" class="radio-input" value="owner" data-task="4-3">
                                    <label for="task-4-3-owner" class="radio-label">Owner only</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-4-3-group" name="execute-who" class="radio-input" value="group" data-task="4-3">
                                    <label for="task-4-3-group" class="radio-label">Owner and group</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-4-3-everyone" name="execute-who" class="radio-input" value="everyone" data-task="4-3">
                                    <label for="task-4-3-everyone" class="radio-label">Everyone</label>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- EXERCISE 5: System Information Commands -->
            <div class="exercise" data-exercise="5">
                <div class="exercise-header" onclick="toggleExercise(5)">
                    <h2 class="exercise-title">Exercise 5: System Information Commands</h2>
                    <span class="exercise-toggle">▼</span>
                </div>
                <div class="exercise-content">

                    <!-- Task 1 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">1</span>
                            <span>Hardware Information</span>
                        </div>
                        <div class="task-description">
                            Get hardware information about your system:
                        </div>
                        <div class="note-box">
                            <strong><span class="os-macos">macOS</span></strong> Run: <span class="inline-code">system_profiler SPHardwareDataType</span><br><br>
                            <strong><span class="os-linux">Linux</span></strong> Run: <span class="inline-code">lscpu</span> (for CPU info) and <span class="inline-code">free -h</span> (for memory)
                        </div>
                        <div class="form-group">
                            <label class="form-label">Processor information:</label>
                            <input type="text" class="form-input" id="task-5-1-cpu" placeholder="e.g., Intel Core i5, 2.3 GHz, 4 cores" data-task="5-1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Memory information:</label>
                            <input type="text" class="form-input" id="task-5-1-mem" placeholder="e.g., 8 GB or 16 GB" data-task="5-1">
                        </div>
                    </div>

                    <!-- Task 2 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">2</span>
                            <span>Disk Usage</span>
                        </div>
                        <div class="task-description">
                            Check disk space usage:
                        </div>
                        <div class="code-block">df -h</div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-5-2-df" class="checkbox-input task-checkbox" data-task="5-2">
                            <label for="task-5-2-df" class="checkbox-label">Successfully ran df -h command</label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Root partition size (look for / or /System):</label>
                            <input type="text" class="form-input" id="task-5-2-size" placeholder="e.g., 250G or 500G" data-task="5-2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Root partition usage percentage:</label>
                            <input type="text" class="form-input" id="task-5-2-usage" placeholder="e.g., 45% or 78%" data-task="5-2">
                        </div>
                    </div>

                    <!-- Task 3 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">3</span>
                            <span>Running Processes</span>
                        </div>
                        <div class="task-description">
                            View running processes:
                        </div>
                        <div class="code-block">top</div>
                        <div class="note-box">
                            <strong>Note:</strong> The <span class="inline-code">top</span> command shows real-time process information. Press <span class="inline-code">q</span> to quit.
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-5-3-top" class="checkbox-input task-checkbox" data-task="5-3">
                            <label for="task-5-3-top" class="checkbox-label">Opened top successfully</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="task-5-3-quit" class="checkbox-input task-checkbox" data-task="5-3">
                            <label for="task-5-3-quit" class="checkbox-label">Pressed 'q' to quit top</label>
                        </div>
                    </div>

                </div>
            </div>

            <!-- EXERCISE 6: Package Management -->
            <div class="exercise" data-exercise="6">
                <div class="exercise-header" onclick="toggleExercise(6)">
                    <h2 class="exercise-title">Exercise 6: Package Management</h2>
                    <span class="exercise-toggle">▼</span>
                </div>
                <div class="exercise-content">

                    <!-- Task 1 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">1</span>
                            <span>Identify Your Package Manager</span>
                        </div>
                        <div class="task-description">
                            Select which package manager your system uses:
                        </div>
                        <div class="form-group">
                            <label class="form-label">My system uses:</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="task-6-1-brew" name="package-mgr" class="radio-input" value="brew" data-task="6-1">
                                    <label for="task-6-1-brew" class="radio-label">Homebrew (macOS)</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-6-1-apt" name="package-mgr" class="radio-input" value="apt" data-task="6-1">
                                    <label for="task-6-1-apt" class="radio-label">apt (Debian/Ubuntu)</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-6-1-dnf" name="package-mgr" class="radio-input" value="dnf" data-task="6-1">
                                    <label for="task-6-1-dnf" class="radio-label">dnf/yum (Fedora/RHEL)</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-6-1-pacman" name="package-mgr" class="radio-input" value="pacman" data-task="6-1">
                                    <label for="task-6-1-pacman" class="radio-label">pacman (Arch)</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Task 2 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">2</span>
                            <span>List Installed Packages (READ ONLY)</span>
                        </div>
                        <div class="task-description">
                            List currently installed packages:
                        </div>
                        <div class="warning-box">
                            <strong>Warning:</strong> DO NOT install or remove packages during this lab! Only view existing packages.
                        </div>
                        <div class="note-box">
                            <strong><span class="os-macos">macOS/Homebrew</span></strong> Run: <span class="inline-code">brew list</span><br><br>
                            <strong><span class="os-linux">Linux/apt</span></strong> Run: <span class="inline-code">apt list --installed | head -20</span><br><br>
                            <strong><span class="os-linux">Linux/dnf</span></strong> Run: <span class="inline-code">dnf list installed | head -20</span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Record 5 installed packages (comma-separated):</label>
                            <input type="text" class="form-input" id="task-6-2-packages" placeholder="e.g., git, python3, vim, curl, wget" data-task="6-2">
                        </div>
                    </div>

                    <!-- Task 3 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">3</span>
                            <span>Search for a Package (READ ONLY)</span>
                        </div>
                        <div class="task-description">
                            Search for the "vim" text editor in your package repository:
                        </div>
                        <div class="note-box">
                            <strong><span class="os-macos">macOS/Homebrew</span></strong> Run: <span class="inline-code">brew search vim</span><br><br>
                            <strong><span class="os-linux">Linux/apt</span></strong> Run: <span class="inline-code">apt search vim</span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Is vim available in your package repository?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="task-6-3-yes" name="vim-available" class="radio-input" value="yes" data-task="6-3">
                                    <label for="task-6-3-yes" class="radio-label">Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-6-3-no" name="vim-available" class="radio-input" value="no" data-task="6-3">
                                    <label for="task-6-3-no" class="radio-label">No</label>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- EXERCISE 7: Comparison with Windows -->
            <div class="exercise" data-exercise="7">
                <div class="exercise-header" onclick="toggleExercise(7)">
                    <h2 class="exercise-title">Exercise 7: Comparison with Windows</h2>
                    <span class="exercise-toggle">▼</span>
                </div>
                <div class="exercise-content">

                    <!-- Task 1 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">1</span>
                            <span>File Path Differences</span>
                        </div>
                        <div class="task-description">
                            Compare file path conventions between Windows and Unix-like systems:
                        </div>
                        <div class="form-group">
                            <label class="form-label">Windows path separator:</label>
                            <input type="text" class="form-input" id="task-7-1-win-sep" placeholder="Expected: backslash \" data-task="7-1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Linux/macOS path separator:</label>
                            <input type="text" class="form-input" id="task-7-1-unix-sep" placeholder="Expected: forward slash /" data-task="7-1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Windows home folder location:</label>
                            <input type="text" class="form-input" id="task-7-1-win-home" placeholder="e.g., C:\Users\username" data-task="7-1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Linux/macOS home folder location:</label>
                            <input type="text" class="form-input" id="task-7-1-unix-home" placeholder="e.g., /home/username or /Users/username" data-task="7-1">
                        </div>
                    </div>

                    <!-- Task 2 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">2</span>
                            <span>Command Equivalents</span>
                        </div>
                        <div class="task-description">
                            Match Windows commands to their Linux/macOS equivalents:
                        </div>
                        <div class="form-group">
                            <label class="form-label">Windows 'dir' equivalent:</label>
                            <input type="text" class="form-input" id="task-7-2-dir" placeholder="Expected: ls" data-task="7-2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Windows 'copy' equivalent:</label>
                            <input type="text" class="form-input" id="task-7-2-copy" placeholder="Expected: cp" data-task="7-2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Windows 'del' equivalent:</label>
                            <input type="text" class="form-input" id="task-7-2-del" placeholder="Expected: rm" data-task="7-2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Windows 'ipconfig' equivalent:</label>
                            <input type="text" class="form-input" id="task-7-2-ipconfig" placeholder="Expected: ifconfig or ip addr" data-task="7-2">
                        </div>
                    </div>

                    <!-- Task 3 -->
                    <div class="task">
                        <div class="task-header">
                            <span class="task-number">3</span>
                            <span>Key Differences Reflection</span>
                        </div>
                        <div class="task-description">
                            Test your understanding of fundamental differences:
                        </div>
                        <div class="form-group">
                            <label class="form-label">Are Linux/macOS file names case sensitive?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="task-7-3-case-yes" name="case-sensitive" class="radio-input" value="yes" data-task="7-3">
                                    <label for="task-7-3-case-yes" class="radio-label">Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-7-3-case-no" name="case-sensitive" class="radio-input" value="no" data-task="7-3">
                                    <label for="task-7-3-case-no" class="radio-label">No</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Are file extensions required in Linux/macOS?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="task-7-3-ext-yes" name="extensions-required" class="radio-input" value="yes" data-task="7-3">
                                    <label for="task-7-3-ext-yes" class="radio-label">Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="task-7-3-ext-no" name="extensions-required" class="radio-input" value="no" data-task="7-3">
                                    <label for="task-7-3-ext-no" class="radio-label">No</label>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>

        <!-- DOCUMENTATION CHALLENGE -->
        <section class="documentation-section">
            <h2>Documentation Challenge</h2>
            <p>Reflect on your lab experience by answering the following questions:</p>

            <div class="form-group">
                <label class="form-label">List 5 Terminal commands you learned today:</label>
                <textarea id="doc-commands" placeholder="Example: ls, pwd, cd, chmod, df..."></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">What is the biggest difference between Windows and Linux/macOS file systems?</label>
                <textarea id="doc-difference" placeholder="Describe the most significant difference you observed..."></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">Which command would you use to check disk space?</label>
                <textarea id="doc-diskspace" placeholder="Your answer..."></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">Describe the permission string "drwxr-xr-x":</label>
                <textarea id="doc-permissions" placeholder="Explain what each character means (d, rwx, r-x, r-x)..."></textarea>
            </div>
        </section>

        <!-- BUTTONS -->
        <div class="button-group">
            <button class="btn btn-primary" onclick="validateCompletion()">Complete Lab</button>
            <button class="btn btn-secondary" onclick="printLab()">Print Lab Sheet</button>
            <button class="btn btn-danger" onclick="resetLab()">Reset Lab</button>
        </div>

        <!-- FOOTER -->
        <footer class="footer">
            <p>&copy; 2025 CompTIA A+ Training Materials | macOS and Linux Fundamentals Lab</p>
            <div class="footer-links">
                <a href="#" class="footer-link">Unix/Linux Command Reference</a>
                <a href="../../../../index.html" class="footer-link">Home</a>
            </div>
        </footer>

    </div>

    <!-- COMPLETION MODAL -->
    <div class="modal" id="completion-modal">
        <div class="modal-content">
            <div class="modal-icon">🎉</div>
            <h2 class="modal-title">Lab Complete!</h2>
            <p class="modal-message">
                Congratulations! You've successfully completed the macOS and Linux Fundamentals lab.
                You've learned essential command-line skills that every IT professional should know.
            </p>
            <button class="btn btn-primary" onclick="closeModal()">Continue</button>
        </div>
    </div>

    <script>
        // ===== CONSTANTS =====
        const TOTAL_TASKS = 24;
        const STORAGE_KEY = 'aplus-lab-macos-linux';

        // ===== STATE MANAGEMENT =====
        let labState = {
            tasks: {},
            documentation: {}
        };

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            loadLabState();
            attachEventListeners();
            updateProgress();
        });

        // ===== LOAD & SAVE STATE =====
        function loadLabState() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                try {
                    labState = JSON.parse(saved);
                    restoreFormData();
                } catch (e) {
                    console.error('Error loading saved state:', e);
                }
            }
        }

        function saveLabState() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(labState));
        }

        function restoreFormData() {
            // Restore checkboxes
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                const taskId = checkbox.dataset.task;
                if (labState.tasks[taskId] && labState.tasks[taskId].checked) {
                    checkbox.checked = true;
                }
            });

            // Restore text inputs
            document.querySelectorAll('.form-input').forEach(input => {
                const taskId = input.dataset.task;
                const inputId = input.id;
                if (labState.tasks[taskId] && labState.tasks[taskId].inputs) {
                    const savedValue = labState.tasks[taskId].inputs[inputId];
                    if (savedValue) {
                        input.value = savedValue;
                    }
                }
            });

            // Restore radio buttons
            document.querySelectorAll('.radio-input').forEach(radio => {
                const taskId = radio.dataset.task;
                const radioName = radio.name;
                if (labState.tasks[taskId] && labState.tasks[taskId].radios) {
                    const savedValue = labState.tasks[taskId].radios[radioName];
                    if (savedValue === radio.value) {
                        radio.checked = true;
                    }
                }
            });

            // Restore documentation textareas
            Object.keys(labState.documentation).forEach(key => {
                const textarea = document.getElementById(key);
                if (textarea) {
                    textarea.value = labState.documentation[key];
                }
            });
        }

        // ===== EVENT LISTENERS =====
        function attachEventListeners() {
            // Checkboxes
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const taskId = this.dataset.task;
                    if (!labState.tasks[taskId]) {
                        labState.tasks[taskId] = {};
                    }
                    labState.tasks[taskId].checked = this.checked;
                    saveLabState();
                    updateProgress();
                });
            });

            // Text inputs
            document.querySelectorAll('.form-input').forEach(input => {
                input.addEventListener('input', function() {
                    const taskId = this.dataset.task;
                    const inputId = this.id;
                    if (!labState.tasks[taskId]) {
                        labState.tasks[taskId] = { inputs: {} };
                    }
                    if (!labState.tasks[taskId].inputs) {
                        labState.tasks[taskId].inputs = {};
                    }
                    labState.tasks[taskId].inputs[inputId] = this.value;
                    saveLabState();
                    updateProgress();
                });
            });

            // Radio buttons
            document.querySelectorAll('.radio-input').forEach(radio => {
                radio.addEventListener('change', function() {
                    const taskId = this.dataset.task;
                    const radioName = this.name;
                    if (!labState.tasks[taskId]) {
                        labState.tasks[taskId] = { radios: {} };
                    }
                    if (!labState.tasks[taskId].radios) {
                        labState.tasks[taskId].radios = {};
                    }
                    labState.tasks[taskId].radios[radioName] = this.value;
                    saveLabState();
                    updateProgress();
                });
            });

            // Documentation textareas
            ['doc-commands', 'doc-difference', 'doc-diskspace', 'doc-permissions'].forEach(id => {
                const textarea = document.getElementById(id);
                if (textarea) {
                    textarea.addEventListener('input', function() {
                        labState.documentation[id] = this.value;
                        saveLabState();
                    });
                }
            });
        }

        // ===== PROGRESS TRACKING =====
        function updateProgress() {
            const completedTasks = countCompletedTasks();
            const percentage = Math.round((completedTasks / TOTAL_TASKS) * 100);

            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');

            progressBar.style.width = percentage + '%';
            progressBar.textContent = percentage + '%';
            progressText.textContent = `${completedTasks} / ${TOTAL_TASKS} tasks completed (${percentage}%)`;
        }

        function countCompletedTasks() {
            let count = 0;

            // Count completed tasks based on their requirements
            const taskRequirements = {
                '1-1': () => {
                    const checkbox = document.getElementById('task-1-1');
                    return checkbox && checkbox.checked;
                },
                '1-2': () => {
                    const inputs = ['task-1-2-shell', 'task-1-2-username', 'task-1-2-hostname'];
                    return inputs.every(id => {
                        const input = document.getElementById(id);
                        return input && input.value.trim() !== '';
                    });
                },
                '1-3': () => {
                    const inputs = ['task-1-3-pwd', 'task-1-3-home'];
                    return inputs.every(id => {
                        const input = document.getElementById(id);
                        return input && input.value.trim() !== '';
                    });
                },
                '2-1': () => {
                    const checkbox = document.getElementById('task-2-1-cmd');
                    const input = document.getElementById('task-2-1-dirs');
                    return checkbox && checkbox.checked && input && input.value.trim() !== '';
                },
                '2-2': () => {
                    const radios = document.querySelector('input[name="home-location"]:checked');
                    const inputs = ['task-2-2-apps', 'task-2-2-logs'];
                    return radios && inputs.every(id => {
                        const input = document.getElementById(id);
                        return input && input.value.trim() !== '';
                    });
                },
                '2-3': () => {
                    const checkbox = document.getElementById('task-2-3-nav');
                    const input = document.getElementById('task-2-3-purpose');
                    return checkbox && checkbox.checked && input && input.value.trim() !== '';
                },
                '3-1': () => {
                    const checkboxes = ['task-3-1-mkdir', 'task-3-1-cd'];
                    return checkboxes.every(id => {
                        const checkbox = document.getElementById(id);
                        return checkbox && checkbox.checked;
                    });
                },
                '3-2': () => {
                    const checkboxes = ['task-3-2-touch', 'task-3-2-echo'];
                    const input = document.getElementById('task-3-2-cat');
                    return checkboxes.every(id => {
                        const checkbox = document.getElementById(id);
                        return checkbox && checkbox.checked;
                    }) && input && input.value.trim() !== '';
                },
                '3-3': () => {
                    const checkboxes = ['task-3-3-cp', 'task-3-3-mv', 'task-3-3-rm'];
                    const input = document.getElementById('task-3-3-ls');
                    return checkboxes.every(id => {
                        const checkbox = document.getElementById(id);
                        return checkbox && checkbox.checked;
                    }) && input && input.value.trim() !== '';
                },
                '4-1': () => {
                    const checkbox = document.getElementById('task-4-1-ls');
                    const input = document.getElementById('task-4-1-perms');
                    return checkbox && checkbox.checked && input && input.value.trim() !== '';
                },
                '4-2': () => {
                    const radios = [
                        document.querySelector('input[name="perm-r"]:checked'),
                        document.querySelector('input[name="perm-w"]:checked'),
                        document.querySelector('input[name="perm-x"]:checked')
                    ];
                    return radios.every(radio => radio !== null);
                },
                '4-3': () => {
                    const checkbox = document.getElementById('task-4-3-chmod');
                    const input = document.getElementById('task-4-3-new');
                    const radio = document.querySelector('input[name="execute-who"]:checked');
                    return checkbox && checkbox.checked && input && input.value.trim() !== '' && radio;
                },
                '5-1': () => {
                    const inputs = ['task-5-1-cpu', 'task-5-1-mem'];
                    return inputs.every(id => {
                        const input = document.getElementById(id);
                        return input && input.value.trim() !== '';
                    });
                },
                '5-2': () => {
                    const checkbox = document.getElementById('task-5-2-df');
                    const inputs = ['task-5-2-size', 'task-5-2-usage'];
                    return checkbox && checkbox.checked && inputs.every(id => {
                        const input = document.getElementById(id);
                        return input && input.value.trim() !== '';
                    });
                },
                '5-3': () => {
                    const checkboxes = ['task-5-3-top', 'task-5-3-quit'];
                    return checkboxes.every(id => {
                        const checkbox = document.getElementById(id);
                        return checkbox && checkbox.checked;
                    });
                },
                '6-1': () => {
                    const radio = document.querySelector('input[name="package-mgr"]:checked');
                    return radio !== null;
                },
                '6-2': () => {
                    const input = document.getElementById('task-6-2-packages');
                    return input && input.value.trim() !== '';
                },
                '6-3': () => {
                    const radio = document.querySelector('input[name="vim-available"]:checked');
                    return radio !== null;
                },
                '7-1': () => {
                    const inputs = ['task-7-1-win-sep', 'task-7-1-unix-sep', 'task-7-1-win-home', 'task-7-1-unix-home'];
                    return inputs.every(id => {
                        const input = document.getElementById(id);
                        return input && input.value.trim() !== '';
                    });
                },
                '7-2': () => {
                    const inputs = ['task-7-2-dir', 'task-7-2-copy', 'task-7-2-del', 'task-7-2-ipconfig'];
                    return inputs.every(id => {
                        const input = document.getElementById(id);
                        return input && input.value.trim() !== '';
                    });
                },
                '7-3': () => {
                    const radios = [
                        document.querySelector('input[name="case-sensitive"]:checked'),
                        document.querySelector('input[name="extensions-required"]:checked')
                    ];
                    return radios.every(radio => radio !== null);
                }
            };

            // Count completed tasks
            Object.keys(taskRequirements).forEach(taskId => {
                if (taskRequirements[taskId]()) {
                    count++;
                }
            });

            return count;
        }

        // ===== EXERCISE COLLAPSE/EXPAND =====
        function toggleExercise(exerciseNum) {
            const exercise = document.querySelector(`.exercise[data-exercise="${exerciseNum}"]`);
            if (exercise) {
                exercise.classList.toggle('collapsed');
            }
        }

        // ===== LAB COMPLETION =====
        function validateCompletion() {
            const completedTasks = countCompletedTasks();
            const percentage = Math.round((completedTasks / TOTAL_TASKS) * 100);

            if (percentage === 100) {
                showCompletionModal();
            } else {
                alert(`Lab Progress: ${completedTasks} / ${TOTAL_TASKS} tasks completed (${percentage}%)\n\nPlease complete all tasks before finishing the lab.`);
            }
        }

        function showCompletionModal() {
            const modal = document.getElementById('completion-modal');
            modal.classList.add('active');
        }

        function closeModal() {
            const modal = document.getElementById('completion-modal');
            modal.classList.remove('active');
        }

        // ===== RESET LAB =====
        function resetLab() {
            if (confirm('Are you sure you want to reset all lab data? This action cannot be undone.')) {
                // Clear localStorage
                localStorage.removeItem(STORAGE_KEY);

                // Clear all checkboxes
                document.querySelectorAll('.task-checkbox').forEach(cb => cb.checked = false);

                // Clear all text inputs
                document.querySelectorAll('.form-input').forEach(input => input.value = '');

                // Clear all radio buttons
                document.querySelectorAll('.radio-input').forEach(radio => radio.checked = false);

                // Clear all textareas
                document.querySelectorAll('textarea').forEach(textarea => textarea.value = '');

                // Reset state
                labState = { tasks: {}, documentation: {} };

                // Update progress
                updateProgress();

                alert('Lab has been reset successfully!');
            }
        }

        // ===== PRINT LAB =====
        function printLab() {
            window.print();
        }

        // ===== CLOSE MODAL ON OUTSIDE CLICK =====
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('completion-modal');
            if (e.target === modal) {
                closeModal();
            }
        });
    </script>

<script src="../../../../components/FluxCapacitor.js"></script>
</body>
</html>
