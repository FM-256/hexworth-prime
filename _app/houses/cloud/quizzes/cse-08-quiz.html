<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="../../../components/AccessGuard.js"></script>
    <script>AccessGuard.require('sorted');</script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSE-08 Quiz: Compliance & Governance - House of the Cloud</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --cloud-primary: #06b6d4; --cloud-light: #22d3ee; --cloud-dark: #0891b2;
            --dark-bg: #0f172a; --darker-bg: #020617; --card-bg: #1e293b;
            --light-text: #f1f5f9; --gray-text: #94a3b8;
            --correct: #10b981; --incorrect: #ef4444;
        }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: linear-gradient(135deg, var(--darker-bg) 0%, var(--dark-bg) 100%); color: var(--light-text); min-height: 100vh; line-height: 1.6; }
        .header { background: linear-gradient(135deg, var(--cloud-dark) 0%, var(--cloud-primary) 100%); padding: 1.25rem 2rem; position: sticky; top: 0; z-index: 100; }
        .header-content { max-width: 900px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; }
        .back-button { background: rgba(255, 255, 255, 0.15); border: 2px solid rgba(255, 255, 255, 0.25); color: white; padding: 0.5rem 1.25rem; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.3s ease; }
        .back-button:hover { background: rgba(255, 255, 255, 0.25); }
        .quiz-badge { background: white; color: var(--cloud-dark); padding: 0.5rem 1rem; border-radius: 20px; font-weight: 700; font-size: 0.85rem; }
        .container { max-width: 800px; margin: 0 auto; padding: 2rem; }
        .quiz-header { text-align: center; margin-bottom: 2rem; }
        .quiz-title { font-size: 1.75rem; color: var(--cloud-primary); margin-bottom: 0.5rem; }
        .quiz-subtitle { color: var(--gray-text); }
        .progress-bar { background: var(--card-bg); border-radius: 10px; height: 8px; margin-bottom: 2rem; overflow: hidden; }
        .progress-fill { background: linear-gradient(90deg, var(--cloud-primary), var(--cloud-light)); height: 100%; width: 0%; transition: width 0.3s ease; border-radius: 10px; }
        .question-card { background: var(--card-bg); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.05); }
        .question-number { color: var(--cloud-primary); font-size: 0.85rem; font-weight: 600; margin-bottom: 0.5rem; }
        .question-text { font-size: 1.1rem; margin-bottom: 1.5rem; color: var(--light-text); }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { background: rgba(255, 255, 255, 0.03); border: 2px solid rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 1rem 1.25rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.75rem; }
        .option:hover:not(.disabled) { border-color: var(--cloud-primary); background: rgba(6, 182, 212, 0.1); }
        .option.selected { border-color: var(--cloud-primary); background: rgba(6, 182, 212, 0.15); }
        .option.correct { border-color: var(--correct); background: rgba(16, 185, 129, 0.15); }
        .option.incorrect { border-color: var(--incorrect); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: not-allowed; opacity: 0.7; }
        .option-letter { width: 28px; height: 28px; border-radius: 50%; background: rgba(255, 255, 255, 0.1); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.85rem; flex-shrink: 0; }
        .option.selected .option-letter { background: var(--cloud-primary); color: var(--darker-bg); }
        .option.correct .option-letter { background: var(--correct); color: white; }
        .option.incorrect .option-letter { background: var(--incorrect); color: white; }
        .explanation { margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; border-left: 3px solid var(--correct); display: none; }
        .explanation.show { display: block; }
        .explanation-title { color: var(--correct); font-weight: 600; margin-bottom: 0.25rem; font-size: 0.9rem; }
        .explanation-text { color: var(--gray-text); font-size: 0.9rem; }
        .submit-btn { width: 100%; padding: 1rem; background: var(--cloud-primary); color: var(--darker-bg); border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; margin-top: 1rem; }
        .submit-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(6, 182, 212, 0.4); }
        .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results { background: var(--card-bg); border-radius: 16px; padding: 2rem; text-align: center; display: none; }
        .results.show { display: block; }
        .results-score { font-size: 3rem; font-weight: 700; color: var(--cloud-primary); margin-bottom: 0.5rem; }
        .results-text { color: var(--gray-text); margin-bottom: 1.5rem; }
        .results-bar { background: rgba(255, 255, 255, 0.1); border-radius: 10px; height: 12px; overflow: hidden; margin-bottom: 1.5rem; }
        .results-fill { height: 100%; border-radius: 10px; transition: width 0.5s ease; }
        .retry-btn { background: transparent; border: 2px solid var(--cloud-primary); color: var(--cloud-primary); padding: 0.75rem 2rem; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .retry-btn:hover { background: var(--cloud-primary); color: var(--darker-bg); }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="../index.html" class="back-button">< Cloud House</a>
            <span class="quiz-badge">CSE-08 Quiz - Final</span>
        </div>
    </header>

    <div class="container">
        <div class="quiz-header">
            <h1 class="quiz-title">Compliance & Governance</h1>
            <p class="quiz-subtitle">Final quiz - Test your knowledge of cloud compliance frameworks</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div id="quizContainer"></div>

        <button class="submit-btn" id="submitBtn" disabled onclick="submitQuiz()">Submit Answers</button>

        <div class="results" id="results">
            <div class="results-score" id="scoreText">0%</div>
            <p class="results-text" id="resultMessage">Keep studying!</p>
            <div class="results-bar">
                <div class="results-fill" id="resultsFill"></div>
            </div>
            <button class="retry-btn" onclick="retryQuiz()">Try Again</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "Which regulation protects data privacy for individuals within the European Union?",
                options: ["FISMA", "GDPR", "FERPA", "HIPAA"],
                correct: 1,
                explanation: "GDPR (General Data Protection Regulation) is an EU law on data protection and privacy for all individuals within the European Union and European Economic Area. It requires consent, data subject rights, and privacy by design."
            },
            {
                question: "What does FISMA establish cybersecurity standards for?",
                options: ["Healthcare organizations", "Payment processors", "U.S. government tech infrastructure", "Educational institutions"],
                correct: 2,
                explanation: "FISMA (Federal Information Security Management Act) is a U.S. federal law that establishes guidelines and cybersecurity standards for government tech infrastructure, protecting government information and operations."
            },
            {
                question: "Which industry compliance standard applies to organizations handling credit card data?",
                options: ["HIPAA", "SOX", "PCI-DSS", "GLBA"],
                correct: 2,
                explanation: "PCI-DSS (Payment Card Industry Data Security Standard) is the information security standard for organizations that handle credit cards from major card brands. It includes 12 requirements across 6 goals."
            },
            {
                question: "What are the five functions of the NIST Cybersecurity Framework?",
                options: ["Plan, Do, Check, Act, Monitor", "Identify, Protect, Detect, Respond, Recover", "Prevent, Detect, Contain, Eradicate, Recover", "Assess, Mitigate, Transfer, Accept, Monitor"],
                correct: 1,
                explanation: "The NIST Cybersecurity Framework Core consists of five Functions: Identify, Protect, Detect, Respond, and Recover. Each function contains Categories and Subcategories aligned to Informative References."
            },
            {
                question: "How many security controls are included in ISO 27001 Annex A?",
                options: ["50 controls in 7 domains", "93 controls in 10 domains", "114 controls in 14 domains", "197 controls in 17 domains"],
                correct: 2,
                explanation: "ISO 27001 Annex A provides a list of 114 security controls in 14 domains that can be applied to an Information Security Management System (ISMS), depending on risk assessment results."
            },
            {
                question: "What does CSA STAR Registry document?",
                options: ["Employee certifications", "Security and privacy controls of cloud providers", "Network configurations", "Penetration testing results"],
                correct: 1,
                explanation: "The CSA STAR (Security, Trust, Assurance, Risk) Registry is a publicly accessible registry that documents the security and privacy controls provided by popular cloud computing offerings."
            },
            {
                question: "How many control objectives are in the CSA Cloud Controls Matrix (CCM)?",
                options: ["114 in 14 domains", "150 in 15 domains", "197 in 17 domains", "250 in 20 domains"],
                correct: 2,
                explanation: "The CSA Cloud Controls Matrix (CCM) consists of 197 control objectives in 17 domains, mapped to various regulations, standards, and frameworks including ISO, NIST, PCI, HIPAA, and GDPR."
            },
            {
                question: "What are the four pillars of cloud security governance?",
                options: ["People, Process, Technology, Data", "Risk Management, Governance, Auditing, Continuous Monitoring", "Identify, Protect, Detect, Respond", "Confidentiality, Integrity, Availability, Accountability"],
                correct: 1,
                explanation: "The four pillars of cloud security governance are: Risk Management (strategy and framework), Governance (compliance and standards), Auditing & Assessment (resource compliance), and Continuous Monitoring (maintaining compliance)."
            },
            {
                question: "Which Azure service enforces organizational standards and assesses compliance?",
                options: ["Azure Monitor", "Azure Arc", "Azure Policy", "Azure Sentinel"],
                correct: 2,
                explanation: "Azure Policy is a service that helps you enforce organizational standards and assess compliance for your Azure resources by comparing resource properties to business rules (policy definitions)."
            },
            {
                question: "What does FedRAMP provide for federal agencies?",
                options: ["Free cloud storage", "Standardized approach to security for cloud services", "Network monitoring tools", "Employee training programs"],
                correct: 1,
                explanation: "FedRAMP (Federal Risk and Authorization Management Program) provides a standardized approach to security and risk assessment for cloud technologies and federal agencies, based on FISMA and NIST standards."
            }
        ];

        let selectedAnswers = {};
        let submitted = false;

        function renderQuiz() {
            const container = document.getElementById('quizContainer');
            container.innerHTML = questions.map((q, i) => `
                <div class="question-card" id="question${i}">
                    <div class="question-number">Question ${i + 1} of ${questions.length}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, j) => `
                            <div class="option" onclick="selectOption(${i}, ${j})" id="q${i}o${j}">
                                <span class="option-letter">${String.fromCharCode(65 + j)}</span>
                                <span>${opt}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="exp${i}">
                        <div class="explanation-title">Explanation</div>
                        <div class="explanation-text">${q.explanation}</div>
                    </div>
                </div>
            `).join('');
        }

        function selectOption(questionIndex, optionIndex) {
            if (submitted) return;
            document.querySelectorAll(`#question${questionIndex} .option`).forEach(opt => opt.classList.remove('selected'));
            document.getElementById(`q${questionIndex}o${optionIndex}`).classList.add('selected');
            selectedAnswers[questionIndex] = optionIndex;
            updateProgress();
            document.getElementById('submitBtn').disabled = Object.keys(selectedAnswers).length !== questions.length;
        }

        function updateProgress() {
            const progress = (Object.keys(selectedAnswers).length / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function submitQuiz() {
            submitted = true;
            let correct = 0;
            questions.forEach((q, i) => {
                const options = document.querySelectorAll(`#question${i} .option`);
                options.forEach(opt => opt.classList.add('disabled'));
                if (selectedAnswers[i] === q.correct) {
                    document.getElementById(`q${i}o${q.correct}`).classList.add('correct');
                    correct++;
                } else {
                    if (selectedAnswers[i] !== undefined) {
                        document.getElementById(`q${i}o${selectedAnswers[i]}`).classList.add('incorrect');
                    }
                    document.getElementById(`q${i}o${q.correct}`).classList.add('correct');
                }
                document.getElementById(`exp${i}`).classList.add('show');
            });
            const percentage = Math.round((correct / questions.length) * 100);
            document.getElementById('scoreText').textContent = percentage + '%';
            document.getElementById('resultsFill').style.width = percentage + '%';
            document.getElementById('resultsFill').style.background = percentage >= 70 ? 'var(--correct)' : 'var(--incorrect)';
            document.getElementById('resultMessage').textContent = percentage >= 70 ? 'Congratulations! You passed the final quiz!' : 'Keep studying and try again!';
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('results').classList.add('show');
            if (typeof ProgressManager !== 'undefined' && percentage >= 70) {
                ProgressManager.markProgress('cloud', 'cse-08-quiz', 'complete');
                ProgressManager.markProgress('cloud', 'cse-course-complete', 'complete');
            }
        }

        function retryQuiz() {
            submitted = false;
            selectedAnswers = {};
            document.getElementById('submitBtn').style.display = 'block';
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('results').classList.remove('show');
            renderQuiz();
            updateProgress();
        }

        renderQuiz();
    </script>
    <script src="../../../components/ProgressManager.js"></script>
</body>
</html>
