<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../../../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <!-- Achievement & Progress Integration -->
    <script src="../../../../../components/AchievementManager.js"></script>
    <script src="../../../../../components/ModuleProgress.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch 10: VPC Networking Quiz - AWS Cloud Practitioner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 2rem;
        }

        .home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #e94560;
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.3);
        }

        .home-btn:hover {
            background: #c13a50;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(233, 69, 96, 0.5);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding-top: 20px;
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: #e94560;
            text-shadow: 0 2px 10px rgba(233, 69, 96, 0.3);
        }

        .subtitle {
            text-align: center;
            font-size: 1.1rem;
            color: #a0a0a0;
            margin-bottom: 2rem;
        }

        .quiz-header {
            background: white;
            color: #1a1a2e;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e94560, #ff6b81);
            width: 0%;
            transition: width 0.3s ease;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stat-label {
            font-weight: bold;
            color: #555;
        }

        .stat-value {
            color: #e94560;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .question-card {
            background: white;
            color: #1a1a2e;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: none;
            animation: slideIn 0.5s ease;
        }

        .question-card.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .question-number {
            color: #e94560;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: #1a1a2e;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .option:hover {
            background: #e8f4ff;
            border-color: #e94560;
            transform: translateX(5px);
        }

        .option-letter {
            background: #e94560;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option-text {
            flex: 1;
            color: #333;
        }

        .option.selected {
            background: #fff3e0;
            border-color: #e94560;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .option.correct .option-letter {
            background: #28a745;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .option.incorrect .option-letter {
            background: #dc3545;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .explanation {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #e8f5e9;
            border-left: 4px solid #28a745;
            border-radius: 10px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .explanation-title {
            font-weight: bold;
            color: #28a745;
            margin-bottom: 0.5rem;
        }

        .explanation-text {
            color: #333;
            line-height: 1.6;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: #e94560;
            color: white;
        }

        .btn-primary:hover {
            background: #c13a50;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-card {
            background: white;
            color: #1a1a2e;
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: none;
        }

        .results-card.show {
            display: block;
            animation: scaleIn 0.5s ease;
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .results-icon {
            font-size: 5rem;
            margin-bottom: 1rem;
        }

        .results-title {
            font-size: 2rem;
            color: #e94560;
            margin-bottom: 1rem;
        }

        .results-score {
            font-size: 3rem;
            font-weight: bold;
            color: #e94560;
            margin-bottom: 2rem;
        }

        .results-message {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 2rem;
        }

        .results-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .breakdown-item {
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .breakdown-value {
            font-size: 2rem;
            font-weight: bold;
            color: #e94560;
        }

        .breakdown-label {
            color: #555;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .question-text {
                font-size: 1.1rem;
            }

            .option {
                padding: 1rem;
            }

            .button-container {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <a href="../../index.html" class="home-btn">üè† Home</a>

    <div class="container">
        <h1>VPC Networking Quiz</h1>
        <p class="subtitle">Chapter 10: Test Your Knowledge</p>

        <div class="quiz-header">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-label">Question:</span>
                    <span class="stat-value" id="currentQuestion">1</span>
                    <span class="stat-label">/ 10</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Score:</span>
                    <span class="stat-value" id="currentScore">0</span>
                    <span class="stat-label">/ 10</span>
                </div>
            </div>
        </div>

        <div id="quizContainer"></div>

        <div class="results-card" id="resultsCard">
            <div class="results-icon" id="resultsIcon">üéâ</div>
            <div class="results-title" id="resultsTitle">Quiz Complete!</div>
            <div class="results-score" id="resultsScore">0%</div>
            <div class="results-message" id="resultsMessage"></div>
            <div class="results-breakdown">
                <div class="breakdown-item">
                    <div class="breakdown-value" id="correctCount">0</div>
                    <div class="breakdown-label">Correct</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-value" id="incorrectCount">0</div>
                    <div class="breakdown-label">Incorrect</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-value" id="percentageScore">0%</div>
                    <div class="breakdown-label">Score</div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">Retake Quiz</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "What is an Amazon VPC?",
                options: [
                    "A virtual server in the cloud",
                    "A logically isolated virtual network in AWS",
                    "A database service for cloud storage",
                    "A content delivery network"
                ],
                correct: 1,
                explanation: "Amazon VPC (Virtual Private Cloud) is a logically isolated section of the AWS Cloud where you can launch AWS resources in a virtual network that you define. You have complete control over your virtual networking environment."
            },
            {
                question: "What is the primary difference between a public subnet and a private subnet?",
                options: [
                    "Public subnets are larger than private subnets",
                    "Public subnets have a route to an Internet Gateway",
                    "Private subnets cannot communicate with other subnets",
                    "Public subnets cost more than private subnets"
                ],
                correct: 1,
                explanation: "A public subnet has a route to an Internet Gateway in its route table, allowing resources with public IP addresses to communicate with the internet. A private subnet does not have a direct route to the Internet Gateway."
            },
            {
                question: "What does a NAT Gateway enable instances in a private subnet to do?",
                options: [
                    "Accept incoming connections from the internet",
                    "Connect to the internet for outbound traffic while preventing inbound connections",
                    "Connect to other AWS regions",
                    "Replicate data across Availability Zones"
                ],
                correct: 1,
                explanation: "A NAT Gateway enables instances in a private subnet to initiate outbound connections to the internet (for updates, downloads, etc.) while preventing the internet from initiating inbound connections to those instances."
            },
            {
                question: "Which statement is TRUE about security groups?",
                options: [
                    "They are stateless and operate at the subnet level",
                    "They are stateful and operate at the instance level",
                    "They can only have deny rules",
                    "They are applied at the VPC level"
                ],
                correct: 1,
                explanation: "Security groups are stateful firewalls that operate at the instance (ENI) level. Being stateful means that return traffic is automatically allowed, regardless of rules. Security groups only support allow rules, not explicit deny rules."
            },
            {
                question: "What is the key difference between Network ACLs and Security Groups?",
                options: [
                    "Network ACLs are for VPCs, Security Groups are for regions",
                    "Network ACLs are stateless, Security Groups are stateful",
                    "Network ACLs are more secure than Security Groups",
                    "Security Groups can only be used with EC2 instances"
                ],
                correct: 1,
                explanation: "Network ACLs are stateless (both inbound and outbound rules must be configured) and operate at the subnet level. Security Groups are stateful (return traffic is automatically allowed) and operate at the instance level."
            },
            {
                question: "How many Internet Gateways can be attached to a VPC?",
                options: [
                    "Unlimited",
                    "One per subnet",
                    "Only one",
                    "One per Availability Zone"
                ],
                correct: 2,
                explanation: "Only one Internet Gateway can be attached to a VPC at a time. The Internet Gateway is horizontally scaled, redundant, and highly available by default, so you don't need multiple IGWs for redundancy."
            },
            {
                question: "What type of load balancer operates at Layer 7 (Application Layer) and is best for HTTP/HTTPS traffic?",
                options: [
                    "Classic Load Balancer",
                    "Network Load Balancer",
                    "Application Load Balancer",
                    "Gateway Load Balancer"
                ],
                correct: 2,
                explanation: "Application Load Balancer (ALB) operates at Layer 7 and is designed for HTTP/HTTPS traffic. It provides advanced routing features like host-based and path-based routing, and can route to multiple target groups."
            },
            {
                question: "What is the purpose of VPC Peering?",
                options: [
                    "To load balance traffic across VPCs",
                    "To enable network connectivity between two VPCs using private IP addresses",
                    "To replicate data between VPCs automatically",
                    "To provide internet access to private subnets"
                ],
                correct: 1,
                explanation: "VPC Peering enables you to route traffic between two VPCs using private IP addresses. Instances in either VPC can communicate as if they were on the same network. VPC peering works across regions and AWS accounts."
            },
            {
                question: "What AWS service provides a dedicated network connection from your on-premises data center to AWS?",
                options: [
                    "VPN Connection",
                    "Internet Gateway",
                    "AWS Direct Connect",
                    "VPC Endpoint"
                ],
                correct: 2,
                explanation: "AWS Direct Connect provides a dedicated private connection from your on-premises location to AWS. It offers more consistent network performance than internet-based connections and can reduce network costs for large data transfers."
            },
            {
                question: "Which VPC component would you use to enable private access to S3 without requiring internet access?",
                options: [
                    "NAT Gateway",
                    "Internet Gateway",
                    "VPC Endpoint",
                    "Transit Gateway"
                ],
                correct: 2,
                explanation: "VPC Endpoints enable you to privately connect your VPC to supported AWS services without requiring an Internet Gateway, NAT device, VPN, or AWS Direct Connect. S3 and DynamoDB use Gateway Endpoints, while other services use Interface Endpoints (PrivateLink)."
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let selectedAnswer = null;

        function initQuiz() {
            renderQuestion();
        }

        function renderQuestion() {
            const container = document.getElementById('quizContainer');
            const question = questions[currentQuestionIndex];

            const questionHTML = `
                <div class="question-card active">
                    <div class="question-number">Question ${currentQuestionIndex + 1} of ${questions.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options" id="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectOption(${index})">
                                <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                                <div class="option-text">${option}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation">
                        <div class="explanation-title">‚úì Correct Answer</div>
                        <div class="explanation-text">${question.explanation}</div>
                    </div>
                    <div class="button-container">
                        <button class="btn btn-secondary" onclick="previousQuestion()" ${currentQuestionIndex === 0 ? 'style="visibility: hidden;"' : ''}>
                            ‚Üê Previous
                        </button>
                        <button class="btn btn-primary" id="submitBtn" onclick="submitAnswer()" disabled>
                            Submit Answer
                        </button>
                        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" style="display: none;">
                            ${currentQuestionIndex === questions.length - 1 ? 'View Results ‚Üí' : 'Next ‚Üí'}
                        </button>
                    </div>
                </div>
            `;

            container.innerHTML = questionHTML;
            updateProgress();
        }

        function selectOption(index) {
            if (selectedAnswer !== null) return;

            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');

            selectedAnswer = index;
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            if (selectedAnswer === null) return;

            const question = questions[currentQuestionIndex];
            const options = document.querySelectorAll('.option');

            options.forEach(opt => {
                opt.classList.add('disabled');
                opt.onclick = null;
            });

            if (selectedAnswer === question.correct) {
                options[selectedAnswer].classList.add('correct');
                score++;
                updateScore();
            } else {
                options[selectedAnswer].classList.add('incorrect');
                options[question.correct].classList.add('correct');
            }

            document.getElementById('explanation').classList.add('show');
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                selectedAnswer = null;
                renderQuestion();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                selectedAnswer = null;
                renderQuestion();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
        }

        function updateScore() {
            document.getElementById('currentScore').textContent = score;
        }

        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.querySelector('.quiz-header').style.display = 'none';

            const percentage = Math.round((score / questions.length) * 100);
            const resultsCard = document.getElementById('resultsCard');

            let icon, title, message;
            if (percentage >= 90) {
                icon = 'üèÜ';
                title = 'Outstanding!';
                message = 'You have an excellent understanding of VPC networking concepts!';
            } else if (percentage >= 70) {
                icon = 'üéâ';
                title = 'Great Job!';
                message = 'You have a solid grasp of AWS networking fundamentals.';
            } else if (percentage >= 50) {
                icon = 'üëç';
                title = 'Good Effort!';
                message = 'You\'re on the right track. Review the material and try again.';
            } else {
                icon = 'üìö';
                title = 'Keep Learning!';
                message = 'Consider reviewing the chapter material and retake the quiz.';
            }

            document.getElementById('resultsIcon').textContent = icon;
            document.getElementById('resultsTitle').textContent = title;
            document.getElementById('resultsScore').textContent = percentage + '%';
            document.getElementById('resultsMessage').textContent = message;
            document.getElementById('correctCount').textContent = score;
            document.getElementById('incorrectCount').textContent = questions.length - score;
            document.getElementById('percentageScore').textContent = percentage + '%';

            resultsCard.classList.add('show');

            // Trigger achievement system
            if (typeof ModuleProgress !== 'undefined') {
                ModuleProgress.completeQuiz('cloud', 'ch10-networking-quiz', percentage, {
                    maxScore: 100,
                    showNotification: true
                });
            }
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            selectedAnswer = null;

            document.getElementById('quizContainer').style.display = 'block';
            document.querySelector('.quiz-header').style.display = 'block';
            document.getElementById('resultsCard').classList.remove('show');

            updateScore();
            renderQuestion();
        }

        initQuiz();
    </script>
</body>
</html>
