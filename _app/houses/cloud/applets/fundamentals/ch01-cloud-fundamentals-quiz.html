<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <!-- Achievement & Progress Integration -->
    <script src="../../../../components/AchievementManager.js"></script>
    <script src="../../../../components/ModuleProgress.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Fundamentals Quiz - Hexworth Prime</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #333;
            padding-bottom: 50px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px 30px;
            color: white;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            font-size: 1em;
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            z-index: 1000;
            text-decoration: none;
            transition: all 0.3s;
        }

        .home-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .quiz-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        .progress-bar {
            background: #f0f0f0;
            height: 10px;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e94560, #ff6b81);
            width: 0%;
            transition: width 0.5s ease;
        }

        .quiz-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            font-size: 1.1em;
            color: #666;
        }

        .question-card {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .question-card.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-number {
            color: #e94560;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1.4em;
            margin-bottom: 30px;
            color: #333;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 20px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .option:hover {
            background: #e8f4f8;
            border-color: #e94560;
            transform: translateX(5px);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: #e94560;
            color: white;
            border-radius: 50%;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option.selected {
            background: #e8f4f8;
            border-color: #e94560;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
            pointer-events: none;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            pointer-events: none;
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        .explanation {
            margin-top: 20px;
            padding: 20px;
            background: #e8f4f8;
            border-left: 4px solid #e94560;
            border-radius: 10px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .explanation-title {
            font-weight: bold;
            color: #e94560;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .explanation-text {
            color: #555;
            line-height: 1.6;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: #e94560;
            color: white;
        }

        .btn-primary:hover {
            background: #d63651;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .results-card {
            display: none;
            text-align: center;
        }

        .results-card.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e94560, #ff6b81);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 30px auto;
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.3);
        }

        .score-percentage {
            font-size: 3em;
            font-weight: bold;
            color: white;
        }

        .score-label {
            color: white;
            font-size: 1.2em;
        }

        .score-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .score-stat {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px solid #e0e0e0;
        }

        .score-stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #e94560;
            margin-bottom: 5px;
        }

        .score-stat-label {
            color: #666;
        }

        .performance-message {
            font-size: 1.3em;
            margin: 20px 0;
            color: #333;
        }

        .retry-btn {
            background: #e94560;
            color: white;
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            margin-top: 20px;
        }

        .retry-btn:hover {
            background: #d63651;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.3);
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            .quiz-container {
                padding: 25px;
            }

            .question-text {
                font-size: 1.2em;
            }

            .option {
                padding: 15px;
                font-size: 1em;
            }

            .nav-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <a href="../../../../index.html" class="home-btn">üè† Home</a>

    <header>
        <h1>Cloud Fundamentals Quiz</h1>
        <p>Test Your Knowledge of Cloud Computing Concepts</p>
    </header>

    <div class="container">
        <div class="quiz-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="quiz-info">
                <span><strong>Question:</strong> <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span></span>
                <span><strong>Score:</strong> <span id="currentScore">0</span> / <span id="questionsAnswered">0</span></span>
            </div>

            <div id="quizContent"></div>

            <div class="results-card" id="resultsCard">
                <h2>Quiz Complete!</h2>
                <div class="score-circle">
                    <div class="score-percentage" id="finalPercentage">0%</div>
                    <div class="score-label">Final Score</div>
                </div>
                <p class="performance-message" id="performanceMessage"></p>
                <div class="score-details">
                    <div class="score-stat">
                        <div class="score-stat-value" id="finalCorrect">0</div>
                        <div class="score-stat-label">Correct</div>
                    </div>
                    <div class="score-stat">
                        <div class="score-stat-value" id="finalIncorrect">0</div>
                        <div class="score-stat-label">Incorrect</div>
                    </div>
                    <div class="score-stat">
                        <div class="score-stat-value" id="finalTotal">0</div>
                        <div class="score-stat-label">Total Questions</div>
                    </div>
                </div>
                <button class="retry-btn" onclick="restartQuiz()">Retry Quiz</button>
            </div>
        </div>
    </div>

    <script>
        const quizData = [
            {
                question: "What does 'Cloud Computing' fundamentally represent?",
                options: [
                    "Storing files on physical hard drives in your office",
                    "On-demand delivery of computing resources over the internet with pay-as-you-go pricing",
                    "A type of weather pattern that affects internet connectivity",
                    "A proprietary technology owned by a single company"
                ],
                correct: 1,
                explanation: "Cloud computing is the on-demand delivery of IT resources over the internet with pay-as-you-go pricing. Instead of buying, owning, and maintaining physical data centers and servers, you can access technology services on an as-needed basis from a cloud provider."
            },
            {
                question: "Which cloud service model provides the MOST control over the underlying infrastructure?",
                options: [
                    "Software as a Service (SaaS)",
                    "Platform as a Service (PaaS)",
                    "Infrastructure as a Service (IaaS)",
                    "Function as a Service (FaaS)"
                ],
                correct: 2,
                explanation: "Infrastructure as a Service (IaaS) provides the most control, giving you access to virtualized computing resources like servers, storage, and networking. You manage the operating system, middleware, runtime, and applications, while the provider manages the physical infrastructure."
            },
            {
                question: "Gmail and Salesforce are examples of which cloud service model?",
                options: [
                    "Infrastructure as a Service (IaaS)",
                    "Platform as a Service (PaaS)",
                    "Software as a Service (SaaS)",
                    "Desktop as a Service (DaaS)"
                ],
                correct: 2,
                explanation: "Gmail and Salesforce are SaaS (Software as a Service) offerings. SaaS provides complete software applications over the internet that are ready to use. Users don't need to worry about infrastructure, platforms, or software maintenance."
            },
            {
                question: "Which deployment model keeps all resources on-premises behind a corporate firewall?",
                options: [
                    "Public Cloud",
                    "Private Cloud",
                    "Hybrid Cloud",
                    "Community Cloud"
                ],
                correct: 1,
                explanation: "A Private Cloud is a cloud infrastructure operated solely for a single organization. It can be hosted on-premises or by a third party, but resources are not shared with other organizations, providing maximum control and security."
            },
            {
                question: "What is a key benefit of using Platform as a Service (PaaS)?",
                options: [
                    "You must manage all server hardware and networking",
                    "It only works with specific programming languages",
                    "Developers can focus on writing code without managing underlying infrastructure",
                    "It requires purchasing expensive software licenses upfront"
                ],
                correct: 2,
                explanation: "PaaS allows developers to focus on building and deploying applications without worrying about managing servers, storage, networking, and databases. The platform handles the infrastructure, letting developers concentrate on code and innovation."
            },
            {
                question: "Which cloud deployment model combines on-premises infrastructure with cloud services?",
                options: [
                    "Public Cloud",
                    "Private Cloud",
                    "Hybrid Cloud",
                    "Multi Cloud"
                ],
                correct: 2,
                explanation: "Hybrid Cloud combines on-premises infrastructure (or private cloud) with public cloud services, allowing data and applications to be shared between them. This provides greater flexibility and more deployment options while maintaining some on-premises control."
            },
            {
                question: "What is a primary advantage of cloud computing's 'elasticity'?",
                options: [
                    "Resources can automatically scale up or down based on demand",
                    "Data becomes physically stretchy and flexible",
                    "It makes applications run faster automatically",
                    "You pay the same price regardless of usage"
                ],
                correct: 0,
                explanation: "Elasticity means you can quickly scale resources up or down to match demand. During high traffic periods, you can add resources, and during low periods, you can reduce them. This ensures optimal performance while controlling costs."
            },
            {
                question: "Which of the following is NOT one of the essential characteristics of cloud computing?",
                options: [
                    "On-demand self-service",
                    "Broad network access",
                    "Physical hardware ownership",
                    "Rapid elasticity"
                ],
                correct: 2,
                explanation: "The NIST definition of cloud computing includes five essential characteristics: on-demand self-service, broad network access, resource pooling, rapid elasticity, and measured service. Physical hardware ownership is specifically what cloud computing eliminates."
            },
            {
                question: "What does 'pay-as-you-go' pricing in cloud computing mean?",
                options: [
                    "You must pay all costs upfront before using services",
                    "You pay a fixed monthly rate regardless of usage",
                    "You only pay for the computing resources you actually use",
                    "Payment is optional based on customer satisfaction"
                ],
                correct: 2,
                explanation: "Pay-as-you-go pricing means you only pay for the computing resources you consume, with no large upfront costs. This converts IT expenses from capital expenditure (CapEx) to operational expenditure (OpEx), improving cost efficiency and financial flexibility."
            },
            {
                question: "Which scenario would MOST benefit from using IaaS (Infrastructure as a Service)?",
                options: [
                    "A company wanting to use web-based email without managing servers",
                    "Developers needing to build and deploy applications quickly without managing infrastructure",
                    "A business requiring complete control over virtual machines, storage, and networking for custom configurations",
                    "End users accessing productivity software through a web browser"
                ],
                correct: 2,
                explanation: "IaaS is ideal when you need complete control over your computing infrastructure. This includes scenarios where you need custom configurations, specific operating systems, full control over networking, or the ability to run specialized applications that require specific infrastructure setups."
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let answeredQuestions = 0;
        let userAnswers = [];

        function initQuiz() {
            document.getElementById('totalQuestions').textContent = quizData.length;
            renderQuestion();
        }

        function renderQuestion() {
            const questionData = quizData[currentQuestionIndex];
            const quizContent = document.getElementById('quizContent');

            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateProgress();

            const optionLetters = ['A', 'B', 'C', 'D', 'E', 'F'];

            quizContent.innerHTML = `
                <div class="question-card active">
                    <div class="question-number">Question ${currentQuestionIndex + 1}</div>
                    <div class="question-text">${questionData.question}</div>
                    <div class="options">
                        ${questionData.options.map((option, index) => `
                            <div class="option" onclick="selectAnswer(${index})">
                                <span class="option-letter">${optionLetters[index]}</span>
                                <span>${option}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation">
                        <div class="explanation-title">Explanation:</div>
                        <div class="explanation-text">${questionData.explanation}</div>
                    </div>
                    <div class="nav-buttons">
                        <button class="btn btn-secondary" onclick="previousQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>
                            Previous
                        </button>
                        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>
                            ${currentQuestionIndex === quizData.length - 1 ? 'Finish' : 'Next Question'}
                        </button>
                    </div>
                </div>
            `;

            // Restore previous answer if exists
            if (userAnswers[currentQuestionIndex] !== undefined) {
                const selectedIndex = userAnswers[currentQuestionIndex];
                showAnswerFeedback(selectedIndex, questionData.correct);
                document.getElementById('nextBtn').disabled = false;
            }
        }

        function selectAnswer(selectedIndex) {
            if (userAnswers[currentQuestionIndex] !== undefined) return; // Already answered

            const questionData = quizData[currentQuestionIndex];
            userAnswers[currentQuestionIndex] = selectedIndex;

            if (selectedIndex === questionData.correct) {
                score++;
                answeredQuestions++;
            } else {
                answeredQuestions++;
            }

            updateScore();
            showAnswerFeedback(selectedIndex, questionData.correct);
            document.getElementById('nextBtn').disabled = false;
        }

        function showAnswerFeedback(selectedIndex, correctIndex) {
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.classList.add('disabled');
                if (index === correctIndex) {
                    option.classList.add('correct');
                } else if (index === selectedIndex) {
                    option.classList.add('incorrect');
                }
            });

            document.getElementById('explanation').classList.add('show');
        }

        function nextQuestion() {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function updateScore() {
            document.getElementById('currentScore').textContent = score;
            document.getElementById('questionsAnswered').textContent = answeredQuestions;
        }

        function showResults() {
            document.getElementById('quizContent').style.display = 'none';
            const resultsCard = document.getElementById('resultsCard');
            resultsCard.classList.add('show');

            const percentage = Math.round((score / quizData.length) * 100);
            document.getElementById('finalPercentage').textContent = percentage + '%';
            document.getElementById('finalCorrect').textContent = score;
            document.getElementById('finalIncorrect').textContent = quizData.length - score;
            document.getElementById('finalTotal').textContent = quizData.length;

            let message = '';
            if (percentage >= 90) {
                message = 'Outstanding! You have an excellent grasp of cloud fundamentals!';
            } else if (percentage >= 70) {
                message = 'Great job! You understand the core concepts of cloud computing.';
            } else if (percentage >= 50) {
                message = 'Good effort! Review the explanations to strengthen your understanding.';
            } else {
                message = 'Keep learning! Review the material and try again to improve your score.';
            }
            document.getElementById('performanceMessage').textContent = message;

            // Trigger achievement system
            if (typeof ModuleProgress !== 'undefined') {
                ModuleProgress.completeQuiz('cloud', 'ch01-cloud-fundamentals-quiz', percentage, {
                    maxScore: 100,
                    showNotification: true
                });
            }
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            answeredQuestions = 0;
            userAnswers = [];

            document.getElementById('resultsCard').classList.remove('show');
            document.getElementById('quizContent').style.display = 'block';

            updateScore();
            renderQuestion();
        }

        // Initialize quiz on page load
        initQuiz();
    </script>
</body>
</html>
