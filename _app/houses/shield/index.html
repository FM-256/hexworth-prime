<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House of the Shield - Hexworth Prime</title>
    <style>
        :root {
            --house-primary: #f87171;
            --house-secondary: #dc2626;
            --house-glow: rgba(248, 113, 113, 0.3);
            --house-bg: rgba(248, 113, 113, 0.05);
            --house-border: rgba(248, 113, 113, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: #0a0a0f;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #e0e0e0;
            overflow-x: hidden;
        }

        /* Ambient background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, var(--house-bg) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(220, 38, 38, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        /* Header */
        .house-header {
            padding: 20px 40px;
            border-bottom: 1px solid var(--house-border);
            background: rgba(10, 10, 15, 0.95);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #888;
            font-size: 0.8rem;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .house-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 20px;
            background: var(--house-bg);
            border: 1px solid var(--house-border);
            border-radius: 25px;
        }

        .house-icon {
            font-size: 1.5rem;
        }

        .house-badge-text {
            font-size: 0.75rem;
            letter-spacing: 0.2em;
            color: var(--house-primary);
            text-transform: uppercase;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cert-badge {
            padding: 6px 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            font-size: 0.7rem;
            color: #888;
            letter-spacing: 0.1em;
        }

        /* Main content */
        .house-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px;
            position: relative;
            z-index: 10;
        }

        /* Hero section */
        .hero-section {
            text-align: center;
            padding: 60px 20px;
            margin-bottom: 50px;
            position: relative;
        }

        .hero-icon {
            font-size: 5rem;
            margin-bottom: 25px;
            filter: drop-shadow(0 0 30px var(--house-glow));
        }

        .hero-title {
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: 0.15em;
            color: #fff;
            margin-bottom: 10px;
        }

        .hero-title span {
            color: var(--house-primary);
        }

        .hero-domain {
            font-size: 1rem;
            color: var(--house-primary);
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        .hero-description {
            font-size: 1rem;
            color: #888;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.8;
        }

        /* Stats bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            padding: 25px;
            background: rgba(15, 15, 20, 0.6);
            border: 1px solid var(--house-border);
            border-radius: 12px;
            margin-bottom: 50px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 300;
            color: var(--house-primary);
        }

        .stat-label {
            font-size: 0.7rem;
            color: #666;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-top: 5px;
        }

        /* Content sections */
        .content-section {
            margin-bottom: 50px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .section-title {
            font-size: 0.8rem;
            color: #666;
            letter-spacing: 0.25em;
            text-transform: uppercase;
        }

        .section-count {
            font-size: 0.75rem;
            color: #444;
            padding: 4px 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
        }

        /* Category grid */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .category-card {
            background: rgba(15, 15, 20, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--house-primary), var(--house-secondary));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px);
            border-color: var(--house-border);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .category-card:hover::before {
            opacity: 1;
        }

        .category-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .category-name {
            font-size: 1.1rem;
            color: #fff;
            margin-bottom: 8px;
        }

        .category-description {
            font-size: 0.8rem;
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .category-meta {
            display: flex;
            gap: 15px;
            font-size: 0.7rem;
            color: #555;
        }

        .category-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Module grid */
        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .module-card {
            background: rgba(15, 15, 20, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .module-card:hover {
            border-color: var(--house-border);
            background: rgba(20, 20, 25, 0.6);
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .module-icon {
            font-size: 1.4rem;
        }

        .module-status {
            padding: 3px 10px;
            border-radius: 8px;
            font-size: 0.6rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .module-status.available {
            background: rgba(34, 197, 94, 0.15);
            color: #4ade80;
        }

        .module-status.coming-soon {
            background: rgba(255, 255, 255, 0.05);
            color: #666;
        }

        .module-status.completed {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .module-title {
            font-size: 0.95rem;
            color: #ddd;
            margin-bottom: 8px;
        }

        .module-description {
            font-size: 0.75rem;
            color: #666;
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .module-components {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .component-tag {
            padding: 4px 10px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
            font-size: 0.65rem;
            color: #888;
        }

        /* Learning paths section */
        .paths-section {
            background: rgba(15, 15, 20, 0.4);
            border: 1px solid var(--house-border);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 50px;
        }

        .paths-title {
            font-size: 0.8rem;
            color: var(--house-primary);
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        .paths-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .path-card {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .path-card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--house-border);
        }

        .path-icon {
            font-size: 1.5rem;
        }

        .path-info {
            flex: 1;
        }

        .path-name {
            font-size: 0.9rem;
            color: #ddd;
            margin-bottom: 3px;
        }

        .path-cert {
            font-size: 0.7rem;
            color: #666;
        }

        .path-progress {
            width: 50px;
            height: 50px;
            position: relative;
        }

        .path-progress-ring {
            transform: rotate(-90deg);
        }

        .path-progress-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.05);
            stroke-width: 4;
        }

        .path-progress-fill {
            fill: none;
            stroke: var(--house-primary);
            stroke-width: 4;
            stroke-linecap: round;
            stroke-dasharray: 126;
            stroke-dashoffset: 126;
            transition: stroke-dashoffset 0.5s ease;
        }

        .path-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.7rem;
            color: #888;
        }

        /* Footer */
        .house-footer {
            text-align: center;
            padding: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.03);
            margin-top: 50px;
        }

        .footer-text {
            font-size: 0.65rem;
            color: #333;
            letter-spacing: 0.2em;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .house-header {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }

            .house-content {
                padding: 20px;
            }

            .hero-title {
                font-size: 1.8rem;
            }

            .stats-bar {
                flex-wrap: wrap;
                gap: 20px;
            }

            .stat-item {
                flex: 1 1 45%;
            }
        }
    </style>
</head>
<body>
    <header class="house-header">
        <div class="header-left">
            <a href="../../dashboard.html" class="back-btn">
                <span>‚Üê</span>
                <span>Dashboard</span>
            </a>
            <div class="house-badge">
                <span class="house-icon">üõ°Ô∏è</span>
                <span class="house-badge-text">House of the Shield</span>
            </div>
        </div>
        <div class="header-right">
            <span class="cert-badge">Security+</span>
            <span class="cert-badge">CySA+</span>
        </div>
    </header>

    <main class="house-content">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-icon">üõ°Ô∏è</div>
            <h1 class="hero-title">House of the <span>Shield</span></h1>
            <p class="hero-domain">Security & Defense</p>
            <p class="hero-description">
                Stand as the guardian between systems and those who would breach them.
                Master the arts of defense, from fundamental principles to advanced threat mitigation.
            </p>
        </section>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value" id="totalModules">0</div>
                <div class="stat-label">Total Modules</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="completedModules">0</div>
                <div class="stat-label">Completed</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="hoursContent">0</div>
                <div class="stat-label">Hours of Content</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="certPaths">2</div>
                <div class="stat-label">Cert Paths</div>
            </div>
        </div>

        <!-- Learning Paths -->
        <section class="paths-section">
            <h2 class="paths-title">Certification Paths</h2>
            <div class="paths-grid">
                <div class="path-card" onclick="openPath('security-plus')">
                    <div class="path-icon">üîê</div>
                    <div class="path-info">
                        <div class="path-name">Security Fundamentals</div>
                        <div class="path-cert">CompTIA Security+</div>
                    </div>
                    <div class="path-progress">
                        <svg class="path-progress-ring" width="50" height="50">
                            <circle class="path-progress-bg" cx="25" cy="25" r="20"/>
                            <circle class="path-progress-fill" cx="25" cy="25" r="20" style="stroke-dashoffset: 126"/>
                        </svg>
                        <span class="path-progress-text">0%</span>
                    </div>
                </div>
                <div class="path-card" onclick="openPath('cysa-plus')">
                    <div class="path-icon">üîç</div>
                    <div class="path-info">
                        <div class="path-name">Security Analysis</div>
                        <div class="path-cert">CompTIA CySA+</div>
                    </div>
                    <div class="path-progress">
                        <svg class="path-progress-ring" width="50" height="50">
                            <circle class="path-progress-bg" cx="25" cy="25" r="20"/>
                            <circle class="path-progress-fill" cx="25" cy="25" r="20" style="stroke-dashoffset: 126"/>
                        </svg>
                        <span class="path-progress-text">0%</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content by Category -->
        <section class="content-section">
            <div class="section-header">
                <h2 class="section-title">Content Categories</h2>
                <span class="section-count" id="categoryCount">6 categories</span>
            </div>
            <div class="category-grid" id="categoryGrid">
                <!-- Categories populated by JS -->
            </div>
        </section>

        <!-- Featured Modules -->
        <section class="content-section">
            <div class="section-header">
                <h2 class="section-title">Featured Modules</h2>
                <span class="section-count" id="moduleCount">Loading...</span>
            </div>
            <div class="module-grid" id="moduleGrid">
                <!-- Modules populated by JS -->
            </div>
        </section>
    </main>

    <footer class="house-footer">
        <p class="footer-text">HEXWORTH PRIME // HOUSE OF THE SHIELD</p>
    </footer>

    <script>
        // ============================================
        // SHIELD HOUSE CONFIGURATION
        // ============================================

        const HOUSE_ID = 'shield';

        // Content categories for Shield house - reflects migrated content
        const CATEGORIES = [
            {
                id: 'fundamentals',
                name: 'Security Fundamentals',
                icon: 'üîê',
                description: 'Core security concepts: CIA triad, 5 pillars, security controls',
                count: 9,
                topics: ['cia-triad', 'five-pillars', 'security-controls'],
                path: 'applets/fundamentals/'
            },
            {
                id: 'threats',
                name: 'Threats & Attacks',
                icon: '‚öîÔ∏è',
                description: 'Malware types, social engineering, and attack vectors',
                count: 14,
                topics: ['malware', 'social-engineering', 'injection'],
                path: 'applets/threats/'
            },
            {
                id: 'cryptography',
                name: 'Cryptography',
                icon: 'üîë',
                description: 'Encryption, hashing, PKI, and digital signatures',
                count: 14,
                topics: ['encryption', 'hashing', 'pki', 'rsa'],
                path: 'applets/crypto/'
            },
            {
                id: 'network-security',
                name: 'Network Security',
                icon: 'üåê',
                description: 'Firewalls, IDS/IPS, VPNs, and network defense',
                count: 9,
                topics: ['firewalls', 'ids-ips', 'vpn'],
                path: 'applets/network/'
            },
            {
                id: 'access-control',
                name: 'Access Control',
                icon: 'üö™',
                description: 'Authentication, authorization, and identity management',
                count: 3,
                topics: ['authentication', 'biometrics', 'mfa'],
                path: 'applets/access/'
            },
            {
                id: 'risk-management',
                name: 'Risk Management',
                icon: 'üìä',
                description: 'Risk assessment, analysis, and mitigation strategies',
                count: 7,
                topics: ['risk-analysis', 'vulnerability', 'assessment'],
                path: 'applets/risk/'
            }
        ];

        // Modules from content-registry.js - reflects migrated Security+ content
        const SAMPLE_MODULES = [
            {
                id: 'shield-yara-training',
                title: 'YARA Rules Training Lab',
                description: 'Write malware detection rules. Interactive rule builder with simulated samples.',
                icon: 'üõ°Ô∏è',
                status: 'available',
                components: ['presentation', 'applet', 'lab', 'quiz'],
                category: 'threats',
                href: 'tools/yara-training.html'
            },
            {
                id: 'shield-cia-triad',
                title: 'CIA Triad',
                description: 'Confidentiality, Integrity, and Availability - the foundation of security',
                icon: 'üî∫',
                status: 'available',
                components: ['presentation', 'applet', 'lab'],
                category: 'fundamentals',
                href: 'presentations/cia-triad.html'
            },
            {
                id: 'shield-security-fundamentals',
                title: 'Security Fundamentals',
                description: 'Core security concepts: 5 pillars, controls, and frameworks',
                icon: 'üèõÔ∏è',
                status: 'available',
                components: ['presentation', 'applet'],
                category: 'fundamentals',
                href: 'applets/fundamentals/five_pillars/FivePillars.html'
            },
            {
                id: 'shield-threat-types',
                title: 'Threats & Attacks',
                description: 'Common attack vectors, malware types, and threat actors',
                icon: '‚öîÔ∏è',
                status: 'available',
                components: ['applet'],
                category: 'threats',
                href: 'applets/threats/attacks_malware/attacks.html'
            },
            {
                id: 'shield-social-engineering',
                title: 'Social Engineering',
                description: 'Phishing, pretexting, baiting, and human-based attacks',
                icon: 'üé≠',
                status: 'available',
                components: ['applet'],
                category: 'threats',
                href: 'applets/threats/social_engineering/social_engineering.html'
            },
            {
                id: 'shield-web-attacks',
                title: 'Web Application Attacks',
                description: 'XSS, SQL injection, CSRF, and web vulnerabilities',
                icon: 'üåê',
                status: 'available',
                components: ['applet'],
                category: 'threats',
                href: 'applets/threats/sql_injection/SQLinjection.html'
            },
            {
                id: 'shield-cryptography',
                title: 'Cryptography Essentials',
                description: 'Encryption algorithms, hashing, and PKI concepts',
                icon: 'üîê',
                status: 'available',
                components: ['applet'],
                category: 'cryptography',
                href: 'applets/crypto/cryptography/cryptography.html'
            },
            {
                id: 'shield-network-security',
                title: 'Network Security',
                description: 'Firewalls, IDS/IPS, VPNs, and network defense',
                icon: 'üß±',
                status: 'available',
                components: ['applet'],
                category: 'network-security',
                href: 'applets/network/firewalls/Firewalls.html'
            },
            {
                id: 'shield-access-control',
                title: 'Access Control',
                description: 'Authentication, authorization, and identity management',
                icon: 'üö™',
                status: 'available',
                components: ['applet'],
                category: 'access-control',
                href: 'applets/access/access_control/access_control.html'
            },
            {
                id: 'shield-risk-management',
                title: 'Risk Management',
                description: 'Risk assessment, analysis, and mitigation strategies',
                icon: 'üìä',
                status: 'available',
                components: ['applet'],
                category: 'risk-management',
                href: 'applets/risk/risk_management/risk_management.html'
            },
            {
                id: 'shield-osint-dorking',
                title: 'OSINT: Google Dorking Lab',
                description: 'Learn Google search operators for security reconnaissance - find exposed files, configs & vulnerabilities',
                icon: 'üîç',
                status: 'available',
                components: ['lab', 'applet'],
                category: 'threats',
                href: 'labs/osint-google-dorking.html'
            },
            {
                id: 'shield-security-fundamentals-complete',
                title: 'Security Fundamentals (Complete)',
                description: 'Comprehensive: CIA Triad, threats, authentication, cryptography, network security with 15-question quiz',
                icon: 'üìö',
                status: 'available',
                components: ['presentation', 'quiz'],
                category: 'fundamentals',
                href: 'presentations/security-fundamentals.html'
            },
            {
                id: 'shield-social-engineering',
                title: 'Social Engineering Defense',
                description: 'Phishing, vishing, pretexting attacks. Psychological principles, real-world cases, and "Spot the Phish" quiz',
                icon: 'üé≠',
                status: 'available',
                components: ['presentation', 'quiz'],
                category: 'threats',
                href: 'presentations/social-engineering.html'
            },
            // Previously orphaned - Access Control
            {id: 'shield-biometrics', title: 'Biometrics', description: 'Biometric authentication methods', icon: 'üëÅÔ∏è', status: 'available', components: ['applet'], href: 'applets/access/biometrics/Biometrics.html'},
            {id: 'shield-kerberos', title: 'Kerberos', description: 'Kerberos authentication protocol', icon: 'üé´', status: 'available', components: ['applet'], href: 'applets/access/kerberos/kerberos.html'},
            // Compliance - CMMC
            {id: 'shield-cmmc-ac', title: 'CMMC Access Control', description: 'CMMC access control domain', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_access_control/ACv2.html'},
            {id: 'shield-cmmc-au', title: 'CMMC Audit & Accountability', description: 'Audit and accountability controls', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_audit_accountability/AUv2.html'},
            {id: 'shield-cmmc-at', title: 'CMMC Awareness Training', description: 'Security awareness training', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_awareness_training/ATv2.html'},
            {id: 'shield-cmmc-cm', title: 'CMMC Config Management', description: 'Configuration management controls', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_config_management/CMv2.html'},
            {id: 'shield-cmmc-cui', title: 'CMMC CUI', description: 'Controlled Unclassified Information', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_cui/CUI_2.html'},
            {id: 'shield-cmmc-framework', title: 'CMMC Framework', description: 'CMMC framework overview', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_framework/CMMCFrameworkv2.html'},
            {id: 'shield-cmmc-ia', title: 'CMMC Identification & Auth', description: 'Identification and authentication', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_identification_auth/IAv2.html'},
            {id: 'shield-cmmc-ir', title: 'CMMC Incident Response', description: 'Incident response controls', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_incident_response/IRv2.html'},
            {id: 'shield-cmmc-ma', title: 'CMMC Maintenance', description: 'System maintenance controls', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_maintenance/MAv2.html'},
            {id: 'shield-cmmc-mp', title: 'CMMC Media Protection', description: 'Media protection controls', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_media_protection/MPv2.html'},
            {id: 'shield-cmmc-ps', title: 'CMMC Personnel Security', description: 'Personnel security controls', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_personnel_security/PSv2.html'},
            {id: 'shield-cmmc-pe', title: 'CMMC Physical Protection', description: 'Physical protection controls', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_physical_protection/PEv2.html'},
            {id: 'shield-cmmc-quiz', title: 'CMMC Quiz', description: 'Test CMMC knowledge', icon: 'üìù', status: 'available', components: ['quiz'], href: 'applets/compliance/cmmc_quiz/CMMCTestKnowledge2.html'},
            {id: 'shield-cmmc-ra', title: 'CMMC Risk Assessment', description: 'Risk assessment controls', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_risk_assessment/RAv2.html'},
            {id: 'shield-cmmc-ca', title: 'CMMC Security Assessment', description: 'Security assessment controls', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_security_assessment/CAv2.html'},
            {id: 'shield-cmmc-sc', title: 'CMMC System/Comm Protection', description: 'System and communications protection', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_system_comm_protection/SCv2.html'},
            {id: 'shield-cmmc-si', title: 'CMMC System/Info Integrity', description: 'System and information integrity', icon: 'üìã', status: 'available', components: ['applet'], href: 'applets/compliance/cmmc_system_info_integrity/SIv2.html'},
            // Crypto
            {id: 'shield-block-mode', title: 'Block Cipher Modes', description: 'Block cipher encryption modes', icon: 'üîê', status: 'available', components: ['applet'], href: 'applets/crypto/block_mode/Block.html'},
            {id: 'shield-blockchain', title: 'Blockchain', description: 'Blockchain technology explained', icon: '‚õìÔ∏è', status: 'available', components: ['applet'], href: 'applets/crypto/blockchain/blockchain.html'},
            {id: 'shield-checksum', title: 'Checksum Verifier', description: 'File integrity verification', icon: '‚úÖ', status: 'available', components: ['applet'], href: 'applets/crypto/checksum-verifier.html'},
            {id: 'shield-cryptomatch', title: 'CryptoMatch Game', description: 'Match crypto concepts', icon: 'üéÆ', status: 'available', components: ['applet'], href: 'applets/crypto/cryptomatch/CryptoMatch.html'},
            {id: 'shield-diffie-hellman', title: 'Diffie-Hellman', description: 'Key exchange protocol', icon: 'ü§ù', status: 'available', components: ['applet'], href: 'applets/crypto/diffie_hellman/diffie_hellman.html'},
            {id: 'shield-digital-sig', title: 'Digital Signatures', description: 'Digital signature creation', icon: '‚úçÔ∏è', status: 'available', components: ['applet'], href: 'applets/crypto/digital_signatures/DigitalSignature.html'},
            {id: 'shield-encrypt-data', title: 'Encrypt Data', description: 'Data encryption exercise', icon: 'üîí', status: 'available', components: ['applet'], href: 'applets/crypto/encrypt_data/EncryptData.html'},
            {id: 'shield-encryption', title: 'Encryption Fundamentals', description: 'Encryption basics', icon: 'üîê', status: 'available', components: ['applet'], href: 'applets/crypto/encryption/encryption_jedit_6_1.html'},
            {id: 'shield-factor-prime', title: 'Prime Factorization', description: 'RSA prime factoring', icon: 'üî¢', status: 'available', components: ['applet'], href: 'applets/crypto/factor_prime/FactorPrime.html'},
            {id: 'shield-gpg-lab', title: 'GPG Encryption Lab', description: 'GPG encryption practice', icon: 'üîê', status: 'available', components: ['lab'], href: 'applets/crypto/gpg-encryption-lab.html'},
            {id: 'shield-hashing', title: 'Hashing', description: 'Hash function concepts', icon: '#Ô∏è‚É£', status: 'available', components: ['applet'], href: 'applets/crypto/hashing/Hashing.html'},
            {id: 'shield-hashing-vo', title: 'Hashing (Narrated)', description: 'Narrated hashing tutorial', icon: 'üîä', status: 'available', components: ['applet'], href: 'applets/crypto/hashing_narrated/Hashing_vo.html'},
            {id: 'shield-encryption2', title: 'Encryption II', description: 'Advanced encryption', icon: 'üîê', status: 'available', components: ['applet'], href: 'applets/crypto/hashing_steganography/Encryption_II.html'},
            {id: 'shield-hash-lab', title: 'Hash Lab', description: 'Hashing hands-on lab', icon: 'üß™', status: 'available', components: ['lab'], href: 'applets/crypto/hashing_steganography/Hash_Lab.html'},
            {id: 'shield-stego', title: 'Steganography', description: 'Hide data in images', icon: 'üñºÔ∏è', status: 'available', components: ['applet'], href: 'applets/crypto/hashing_steganography/Stego.html'},
            {id: 'shield-encrypt-task', title: 'Encryption Task', description: 'Encryption exercise', icon: 'üìù', status: 'available', components: ['applet'], href: 'applets/crypto/hashing_steganography/encryption_task.html'},
            {id: 'shield-hash-steg-pres', title: 'Hash & Steg Presentation', description: 'Hashing and steganography slides', icon: 'üìä', status: 'available', components: ['presentation'], href: 'applets/crypto/hashing_steganography/hash_steg_presentation.html'},
            {id: 'shield-hash-v3', title: 'Hashing v3', description: 'Updated hashing module', icon: '#Ô∏è‚É£', status: 'available', components: ['applet'], href: 'applets/crypto/hashing_steganography/hash_v3.html'},
            {id: 'shield-hashing-lab', title: 'Hashing Lab', description: 'Hashing practice lab', icon: 'üß™', status: 'available', components: ['lab'], href: 'applets/crypto/hashing_steganography/hashing_Lab.html'},
            {id: 'shield-pki', title: 'PKI', description: 'Public Key Infrastructure', icon: 'üîë', status: 'available', components: ['applet'], href: 'applets/crypto/pki/pki.html'},
            {id: 'shield-rsa', title: 'RSA', description: 'RSA encryption algorithm', icon: 'üîê', status: 'available', components: ['applet'], href: 'applets/crypto/rsa/RSA.html'},
            // Fundamentals
            {id: 'shield-career', title: 'Career Exploration', description: 'Cybersecurity career paths', icon: 'üíº', status: 'available', components: ['applet'], href: 'applets/fundamentals/career_exploration/index.html'},
            {id: 'shield-controls', title: 'Cybersecurity Controls', description: 'Security control types', icon: 'üõ°Ô∏è', status: 'available', components: ['applet'], href: 'applets/fundamentals/cybersecurity_controls/cybersecurity_controls.html'},
            {id: 'shield-data-roles', title: 'Data Roles', description: 'Data ownership and roles', icon: 'üë•', status: 'available', components: ['applet'], href: 'applets/fundamentals/data_roles/dataroles.html'},
            {id: 'shield-design-principles', title: 'Design Principles', description: 'Security design principles', icon: 'üìê', status: 'available', components: ['applet'], href: 'applets/fundamentals/design_principles/cybersecuritydesignprinciples.html'},
            {id: 'shield-ethics-challenge', title: 'Ethics Challenge', description: 'Cybersecurity ethics scenarios', icon: '‚öñÔ∏è', status: 'available', components: ['applet'], href: 'applets/fundamentals/ethics_challenge/ethics_challenge.html'},
            {id: 'shield-ethics-conduct', title: 'Ethics & Professional Conduct', description: 'Professional ethics in security', icon: 'üìú', status: 'available', components: ['applet'], href: 'applets/fundamentals/ethics_conduct/EthicsProfConduct.html'},
            {id: 'shield-physical', title: 'Physical Protection', description: 'Physical security controls', icon: 'üè¢', status: 'available', components: ['applet'], href: 'applets/fundamentals/physical_protection/physical_environmental.html'},
            {id: 'shield-privacy', title: 'Privacy', description: 'Privacy principles and laws', icon: 'üîè', status: 'available', components: ['applet'], href: 'applets/fundamentals/privacy/privacy.html'},
            {id: 'shield-best-practices', title: 'Security Best Practices', description: 'Security best practices guide', icon: '‚úÖ', status: 'available', components: ['applet'], href: 'applets/fundamentals/security-best-practices.html'},
            {id: 'shield-cube', title: 'The Cube', description: 'Cybersecurity cube concept', icon: 'üé≤', status: 'available', components: ['applet'], href: 'applets/fundamentals/the_cube/cube.html'},
            // Games
            {id: 'shield-cookie-caper', title: 'Cookie Caper', description: 'Web cookies security game', icon: 'üç™', status: 'available', components: ['applet'], href: 'applets/games/cookie_caper/cookies.html'},
            {id: 'shield-hat-match', title: 'Cyber Hat Match', description: 'Match hacker types', icon: 'üé©', status: 'available', components: ['applet'], href: 'applets/games/cyber_hat_match/hatmatch.html'},
            {id: 'shield-scramble', title: 'Cyber Scramble', description: 'Security term scramble', icon: 'üî§', status: 'available', components: ['applet'], href: 'applets/games/cyber_scramble/cyberscramble.html'},
            {id: 'shield-eh-case', title: 'Ethical Hacking Case', description: 'Ethical hacking scenario', icon: 'üïµÔ∏è', status: 'available', components: ['applet'], href: 'applets/games/ethical_hacking_case/EH_exam_1A.html'},
            {id: 'shield-hangman', title: 'Hacker Hangman', description: 'Security terms hangman', icon: 'üéÆ', status: 'available', components: ['applet'], href: 'applets/games/hacker_hangman/hangman.html'},
            {id: 'shield-crime', title: "What's My Crime", description: 'Identify cyber crimes', icon: 'üëÆ', status: 'available', components: ['applet'], href: 'applets/games/whats_my_crime/crime.html'},
            // Network Security
            {id: 'shield-browser', title: 'Browser Security Hardening', description: 'Secure browser configuration', icon: 'üåê', status: 'available', components: ['applet'], href: 'applets/network/browser-security-hardening.html'},
            {id: 'shield-eap', title: 'EAP', description: 'Extensible Authentication Protocol', icon: 'üîê', status: 'available', components: ['applet'], href: 'applets/network/eap/EAP.html'},
            {id: 'shield-home-network', title: 'Home Network Security', description: 'Secure your home network', icon: 'üè†', status: 'available', components: ['applet'], href: 'applets/network/home-network-security.html'},
            {id: 'shield-ids-ips', title: 'IDS/IPS', description: 'Intrusion detection/prevention', icon: 'üö®', status: 'available', components: ['applet'], href: 'applets/network/ids_ips/IDS_IPS.html'},
            {id: 'shield-linux-fw', title: 'Linux Firewall Builder', description: 'Build iptables rules', icon: 'üêß', status: 'available', components: ['applet'], href: 'applets/network/linux-firewall-builder.html'},
            {id: 'shield-nat-pat', title: 'NAT/PAT', description: 'Network address translation', icon: 'üîÑ', status: 'available', components: ['applet'], href: 'applets/network/nat_pat/NAT.html'},
            {id: 'shield-protocol', title: 'Protocol Analysis', description: 'Network protocol analysis', icon: 'üìä', status: 'available', components: ['applet'], href: 'applets/network/protocol_analysis/ProtocolAnalysis.html'},
            {id: 'shield-handshake', title: 'Three-Way Handshake', description: 'TCP handshake animation', icon: 'ü§ù', status: 'available', components: ['applet'], href: 'applets/network/threeway_handshake/threeway_handshake1_audio.html'},
            {id: 'shield-vpn', title: 'VPN', description: 'Virtual Private Networks', icon: 'üîí', status: 'available', components: ['applet'], href: 'applets/network/vpn/vpn.html'},
            {id: 'shield-wireless-sec', title: 'Wireless Security', description: 'WiFi security protocols', icon: 'üì∂', status: 'available', components: ['applet'], href: 'applets/network/wireless_security/WirelessSecurity.html'},
            // Risk
            {id: 'shield-change-mgmt', title: 'Change Management', description: 'Change management process', icon: 'üîÑ', status: 'available', components: ['applet'], href: 'applets/risk/change-management.html'},
            {id: 'shield-config-mgmt', title: 'Configuration Management', description: 'Config management controls', icon: '‚öôÔ∏è', status: 'available', components: ['applet'], href: 'applets/risk/config_management/ConfigMgmt.html'},
            {id: 'shield-scenario', title: 'Cybersecurity Scenario', description: 'Security scenario exercise', icon: 'üéØ', status: 'available', components: ['applet'], href: 'applets/risk/cybersecurity_scenario/cyber_scenario.html'},
            {id: 'shield-incident-sim', title: 'Incident Response Simulator', description: 'IR workflow practice', icon: 'üö®', status: 'available', components: ['applet'], href: 'applets/risk/incident-response-simulator.html'},
            {id: 'shield-pspg', title: 'Policies & Procedures', description: 'Security policies and procedures', icon: 'üìÑ', status: 'available', components: ['applet'], href: 'applets/risk/pspg/PSPG.html'},
            {id: 'shield-risk-analysis', title: 'Risk Analysis', description: 'Risk analysis methods', icon: 'üìà', status: 'available', components: ['applet'], href: 'applets/risk/risk_analysis/risk_analysis.html'},
            // Threats
            {id: 'shield-buffer-overflow', title: 'Buffer Overflow', description: 'Buffer overflow attacks', icon: 'üí•', status: 'available', components: ['applet'], href: 'applets/threats/buffer_overflow/bufferoverflow.html'},
            {id: 'shield-code-injection', title: 'Code Injection', description: 'Code injection attacks', icon: 'üíâ', status: 'available', components: ['applet'], href: 'applets/threats/code_injection/codeinjection.html'},
            {id: 'shield-xss', title: 'Cross-Site Scripting', description: 'XSS attack types', icon: 'üåê', status: 'available', components: ['applet'], href: 'applets/threats/cross_site_scripting/crosssitescripting.html'},
            {id: 'shield-google-hacking', title: 'Google Hacking', description: 'Google dorking techniques', icon: 'üîç', status: 'available', components: ['applet'], href: 'applets/threats/google_hacking/googlehacking.html'},
            {id: 'shield-heartbleed', title: 'Heartbleed', description: 'Heartbleed vulnerability', icon: 'üíî', status: 'available', components: ['applet'], href: 'applets/threats/heartbleed/heartbleed.html'},
            {id: 'shield-malware-ref', title: 'Malware Types Reference', description: 'Malware classification guide', icon: 'ü¶†', status: 'available', components: ['applet'], href: 'applets/threats/malware-types-reference.html'},
            {id: 'shield-meltdown', title: 'Meltdown & Spectre', description: 'CPU vulnerabilities', icon: 'üî•', status: 'available', components: ['applet'], href: 'applets/threats/meltdown_spectre/meltdown_spectre.html'},
            {id: 'shield-os-injection', title: 'OS Command Injection', description: 'Command injection attacks', icon: 'üíª', status: 'available', components: ['applet'], href: 'applets/threats/os_command_injection/oscommandinjection.html'},
            {id: 'shield-osint', title: 'OSINT', description: 'Open source intelligence', icon: 'üîé', status: 'available', components: ['applet'], href: 'applets/threats/osint/OSINT.html'},
            {id: 'shield-osint-challenge', title: 'OSINT Challenge', description: 'OSINT practice challenge', icon: 'üéØ', status: 'available', components: ['applet'], href: 'applets/threats/osint_challenge/OSINT_PD_Challenge.html'},
            {id: 'shield-pentest', title: 'Penetration Testing', description: 'Pen testing methodology', icon: 'üîì', status: 'available', components: ['applet'], href: 'applets/threats/pen_testing/pen_testing.html'},
            {id: 'shield-phishing', title: 'Phishing Mystery', description: 'Identify phishing attacks', icon: 'üé£', status: 'available', components: ['applet'], href: 'applets/threats/phishing_mystery/phishing.html'},
            {id: 'shield-ransomware', title: 'Ransomware', description: 'Ransomware attack simulation', icon: 'üí∞', status: 'available', components: ['applet'], href: 'applets/threats/ransomware/RansomwareAttack.html'},
            {id: 'shield-se-tactics', title: 'Social Engineering Tactics', description: 'SE attack techniques', icon: 'üé≠', status: 'available', components: ['applet'], href: 'applets/threats/social_engineering_tactics/SocialEngineeringTactics.html'},
            {id: 'shield-spoofing', title: 'Spoofing', description: 'Spoofing attack types', icon: 'üé≠', status: 'available', components: ['applet'], href: 'applets/threats/spoofing/spoofing1.html'},
            {id: 'shield-stuxnet', title: 'Stuxnet', description: 'Stuxnet case study', icon: 'üè≠', status: 'available', components: ['applet'], href: 'applets/threats/stuxnet/stuxnet.html'},
            {id: 'shield-threat-actors', title: 'Threat Actors', description: 'Types of threat actors', icon: 'üë§', status: 'available', components: ['applet'], href: 'applets/threats/threat_actors/ThreatActors.html'},
            // Presentations & Quizzes
            {id: 'shield-security-pres', title: 'Security Presentation', description: 'Security fundamentals slides', icon: 'üìä', status: 'available', components: ['presentation'], href: 'presentations/security-presentation.html'},
            {id: 'shield-cia-quiz', title: 'CIA Triad Quiz', description: 'Test CIA triad knowledge', icon: 'üìù', status: 'available', components: ['quiz'], href: 'quizzes/cia-triad-quiz.html'}
        ];

        // ============================================
        // INITIALIZATION
        // ============================================

        document.addEventListener('DOMContentLoaded', function() {
            populateCategories();
            populateModules();
            updateStats();
        });

        function populateCategories() {
            const grid = document.getElementById('categoryGrid');
            grid.innerHTML = '';

            CATEGORIES.forEach(cat => {
                const card = document.createElement('div');
                card.className = 'category-card';
                card.onclick = () => openCategory(cat.id);

                card.innerHTML = `
                    <div class="category-icon">${cat.icon}</div>
                    <div class="category-name">${cat.name}</div>
                    <div class="category-description">${cat.description}</div>
                    <div class="category-meta">
                        <span>üìö ${cat.count} items</span>
                        <span>üè∑Ô∏è ${cat.topics.length} topics</span>
                    </div>
                `;

                grid.appendChild(card);
            });

            document.getElementById('categoryCount').textContent = `${CATEGORIES.length} categories`;
        }

        function populateModules() {
            const grid = document.getElementById('moduleGrid');
            grid.innerHTML = '';

            SAMPLE_MODULES.forEach(mod => {
                const card = document.createElement('div');
                card.className = 'module-card';
                card.dataset.href = mod.href || '';  // For TrailHunter matching
                card.onclick = () => openModule(mod.id);

                card.innerHTML = `
                    <div class="module-header">
                        <span class="module-icon">${mod.icon}</span>
                        <span class="module-status ${mod.status}">${mod.status.replace('-', ' ')}</span>
                    </div>
                    <div class="module-title">${mod.title}</div>
                    <div class="module-description">${mod.description}</div>
                    <div class="module-components">
                        ${mod.components.map(c => `<span class="component-tag">${getComponentLabel(c)}</span>`).join('')}
                    </div>
                `;

                grid.appendChild(card);
            });

            document.getElementById('moduleCount').textContent = `${SAMPLE_MODULES.length} modules`;
        }

        function updateStats() {
            // Calculate stats from content
            const totalModules = CATEGORIES.reduce((sum, cat) => sum + cat.count, 0);
            const completedModules = 0; // Would come from localStorage
            const hoursContent = Math.round(totalModules * 0.75); // Estimate 45min per module

            document.getElementById('totalModules').textContent = totalModules;
            document.getElementById('completedModules').textContent = completedModules;
            document.getElementById('hoursContent').textContent = hoursContent;
        }

        function getComponentLabel(component) {
            const labels = {
                presentation: 'üìä Slides',
                applet: 'üéÆ Interactive',
                lab: 'üß™ Lab',
                quiz: 'üìù Quiz'
            };
            return labels[component] || component;
        }

        // ============================================
        // NAVIGATION
        // ============================================

        // Track current filter
        let activeFilter = null;

        function openCategory(categoryId) {
            const category = CATEGORIES.find(c => c.id === categoryId);
            if (!category) {
                console.warn('Category not found:', categoryId);
                return;
            }

            // Toggle filter if clicking same category
            if (activeFilter === categoryId) {
                activeFilter = null;
                showAllModules();
                updateCategoryHighlight(null);
                return;
            }

            activeFilter = categoryId;
            const categoryPath = category.path;

            // Filter modules by category path
            const moduleCards = document.querySelectorAll('.module-card');
            let matchCount = 0;

            moduleCards.forEach(card => {
                const href = card.dataset.href || '';
                const matches = href.startsWith(categoryPath);

                if (matches) {
                    card.style.display = '';
                    card.style.animation = 'fadeIn 0.3s ease';
                    matchCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            // Update category highlight
            updateCategoryHighlight(categoryId);

            // Scroll to modules section
            const modulesSection = document.getElementById('moduleGrid');
            if (modulesSection) {
                modulesSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            // Update module count display
            const moduleCount = document.getElementById('moduleCount');
            if (moduleCount) {
                moduleCount.textContent = `${matchCount} modules in ${category.name}`;
            }

            console.log(`Filtered to ${matchCount} modules in ${category.name}`);
        }

        function showAllModules() {
            const moduleCards = document.querySelectorAll('.module-card');
            moduleCards.forEach(card => {
                card.style.display = '';
            });

            const moduleCount = document.getElementById('moduleCount');
            if (moduleCount) {
                moduleCount.textContent = `${SAMPLE_MODULES.length} modules`;
            }
        }

        function updateCategoryHighlight(activeId) {
            const categoryCards = document.querySelectorAll('.category-card');
            categoryCards.forEach(card => {
                if (activeId && card.onclick.toString().includes(activeId)) {
                    card.style.boxShadow = '0 0 20px var(--house-primary)';
                    card.style.borderColor = 'var(--house-primary)';
                } else {
                    card.style.boxShadow = '';
                    card.style.borderColor = '';
                }
            });
        }

        function openModule(moduleId) {
            const module = SAMPLE_MODULES.find(m => m.id === moduleId);
            if (module && module.status === 'available' && module.href) {
                window.location.href = module.href;
            } else if (module && module.status === 'coming-soon') {
                alert('This module is coming soon!');
            } else {
                alert('Module not found');
            }
        }

        function openPath(pathId) {
            // Would navigate to the learning path view
            console.log('Opening path:', pathId);
            alert(`Learning Path: ${pathId}\n\nPath navigation coming soon!`);
        }

        // Console message
        console.log('%cüõ°Ô∏è House of the Shield', 'color: #f87171; font-size: 14px;');
        console.log('%cDefend. Protect. Prevail.', 'color: #888; font-size: 10px;');
    </script>

    <!-- Progress Tracking System -->
    <script src="../../components/SkillTreeData.js"></script>
    <script src="../../components/LearningPaths.js"></script>
    <script src="../../components/AchievementSystem.js"></script>
    <script src="../../components/ProgressManager.js"></script>
    <script src="../../components/HouseProgressPanel.js"></script>

    <!-- Flux Capacitor - House Navigation -->
    <script src="../../components/FluxCapacitor.js"></script>

    <!-- Trail Hunter - Patronus Guide System -->
    <script src="../../components/TrailHunter.js"></script>

</body>
</html>
