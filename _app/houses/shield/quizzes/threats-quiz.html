<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threats & Attack Vectors Quiz - Shield House</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%); color: #e0e0e0; min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 30px; background: linear-gradient(135deg, rgba(248, 113, 113, 0.1), rgba(248, 113, 113, 0.05)); border-radius: 16px; border: 1px solid rgba(248, 113, 113, 0.3); }
        .header h1 { font-size: 2rem; color: #f87171; margin-bottom: 10px; }
        .header p { color: #a0a0a0; }
        .back-link { display: inline-flex; align-items: center; gap: 8px; color: #888; text-decoration: none; margin-bottom: 20px; }
        .back-link:hover { color: #f87171; }
        .question-card { background: rgba(255, 255, 255, 0.03); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 20px; padding: 25px; }
        .question-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .question-number { background: #f87171; color: #000; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9rem; }
        .question-category { background: rgba(248, 113, 113, 0.2); color: #f87171; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; text-transform: uppercase; }
        .question-text { font-size: 1.1rem; margin-bottom: 20px; line-height: 1.6; }
        .options { display: flex; flex-direction: column; gap: 10px; }
        .option { display: flex; align-items: center; gap: 12px; padding: 15px; background: rgba(255, 255, 255, 0.02); border: 2px solid rgba(255, 255, 255, 0.1); border-radius: 10px; cursor: pointer; transition: all 0.2s; }
        .option:hover { background: rgba(255, 255, 255, 0.05); border-color: rgba(248, 113, 113, 0.3); }
        .option.selected { background: rgba(248, 113, 113, 0.1); border-color: #f87171; }
        .option.correct { background: rgba(74, 222, 128, 0.15); border-color: #4ade80; }
        .option.incorrect { background: rgba(248, 113, 113, 0.15); border-color: #f87171; }
        .option input { display: none; }
        .option-marker { width: 24px; height: 24px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.8rem; flex-shrink: 0; }
        .option.selected .option-marker { background: #f87171; border-color: #f87171; color: #000; }
        .option.correct .option-marker { background: #4ade80; border-color: #4ade80; color: #000; }
        .explanation { display: none; margin-top: 15px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; border-radius: 0 8px 8px 0; }
        .explanation.show { display: block; }
        .explanation h4 { color: #60a5fa; margin-bottom: 8px; }
        .submit-section { text-align: center; margin-top: 30px; }
        .submit-btn { background: linear-gradient(135deg, #f87171, #fb923c); color: #000; border: none; padding: 15px 40px; border-radius: 10px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(248, 113, 113, 0.4); }
        .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .results { display: none; text-align: center; padding: 40px; background: rgba(255, 255, 255, 0.03); border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.1); margin-top: 30px; }
        .results.show { display: block; animation: fadeIn 0.5s ease; }
        .score-circle { width: 150px; height: 150px; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 2.5rem; font-weight: bold; }
        .score-circle.pass { background: linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(34, 197, 94, 0.1)); border: 3px solid #4ade80; color: #4ade80; }
        .score-circle.fail { background: linear-gradient(135deg, rgba(248, 113, 113, 0.2), rgba(239, 68, 68, 0.1)); border: 3px solid #f87171; color: #f87171; }
        .score-label { font-size: 0.9rem; margin-top: 5px; }
        .results h2 { margin-bottom: 15px; }
        .results p { color: #888; margin-bottom: 20px; }
        .results-actions { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
        .results-actions a, .results-actions button { display: inline-block; padding: 12px 25px; border-radius: 8px; text-decoration: none; font-weight: 600; cursor: pointer; border: none; font-size: 1rem; }
        .btn-primary { background: #f87171; color: #000; }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #fff; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .progress-indicator { display: flex; justify-content: center; gap: 8px; margin-bottom: 20px; }
        .progress-dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); }
        .progress-dot.answered { background: #f87171; }
        .progress-dot.correct { background: #4ade80; }
        .progress-dot.incorrect { background: #ef4444; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">‚Üê Back to Shield House</a>
        <div class="header">
            <h1>‚öîÔ∏è Threats & Attack Vectors Quiz</h1>
            <p>15 questions on malware, social engineering, web attacks, OSINT, and pentesting</p>
            <p style="margin-top: 10px; color: #f87171;">Passing score: 70% (11/15)</p>
        </div>
        <div class="progress-indicator" id="progressDots"></div>
        <div id="quizContainer"></div>
        <div class="submit-section">
            <button class="submit-btn" id="submitBtn" onclick="submitQuiz()">Submit Quiz</button>
        </div>
        <div class="results" id="results">
            <div class="score-circle" id="scoreCircle">
                <span id="scorePercent">0%</span>
                <span class="score-label" id="scoreLabel">0/15</span>
            </div>
            <h2 id="resultTitle">Quiz Complete!</h2>
            <p id="resultMessage"></p>
            <div class="results-actions">
                <button class="btn-secondary" onclick="retryQuiz()">Try Again</button>
                <a href="../labs/threats-lab.html" class="btn-secondary">üìö Review Lab</a>
                <a href="../index.html" class="btn-primary">üõ°Ô∏è Back to Shield</a>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            {
                question: "Which threat actor type is characterized by unlimited resources and sophisticated, persistent attacks targeting critical infrastructure?",
                options: ["Script kiddies", "Hacktivists", "Cybercriminals", "Nation-state actors (APT)"],
                correct: 3,
                category: "Threat Actors",
                explanation: "Nation-state actors or Advanced Persistent Threats (APTs) have virtually unlimited resources backed by governments. They conduct sophisticated, long-term campaigns targeting critical infrastructure, intellectual property, and political targets."
            },
            {
                question: "What distinguishes a worm from a virus?",
                options: ["Worms are larger in file size", "Worms can self-replicate without a host file", "Worms only affect servers", "Viruses are more dangerous"],
                correct: 1,
                category: "Malware",
                explanation: "The key distinction is that worms can self-replicate and spread across networks without needing to attach to a host file. Viruses require a host program to spread and must be executed by the user."
            },
            {
                question: "What is the primary goal of ransomware?",
                options: ["Steal sensitive data", "Encrypt files and demand payment", "Spy on user activity", "Create a botnet"],
                correct: 1,
                category: "Malware",
                explanation: "Ransomware encrypts victim files (or locks the system) and demands payment (usually cryptocurrency) for the decryption key. While some variants also steal data, encryption and extortion are the primary goals."
            },
            {
                question: "What makes fileless malware particularly difficult to detect?",
                options: ["It's encrypted with strong algorithms", "It lives only in memory and uses legitimate system tools", "It changes its signature constantly", "It only activates at night"],
                correct: 1,
                category: "Malware",
                explanation: "Fileless malware operates entirely in memory without writing files to disk. It often uses legitimate tools like PowerShell or WMI, making it hard to detect with traditional file-based antivirus solutions."
            },
            {
                question: "Which psychological principle is exploited when a phishing email creates artificial time pressure?",
                options: ["Authority", "Reciprocity", "Urgency", "Social proof"],
                correct: 2,
                category: "Social Engineering",
                explanation: "Urgency is the principle exploited when attackers create time pressure (e.g., 'Act now or your account will be suspended'). This prevents victims from thinking carefully and seeking verification."
            },
            {
                question: "What is spear phishing?",
                options: ["Phishing that uses phone calls", "Targeted phishing aimed at specific individuals", "Phishing that steals fishing industry data", "Phishing through social media"],
                correct: 1,
                category: "Social Engineering",
                explanation: "Spear phishing is targeted phishing that focuses on specific individuals or organizations. The attacker researches the target to craft convincing, personalized messages, unlike generic mass phishing campaigns."
            },
            {
                question: "What is a Business Email Compromise (BEC) attack?",
                options: ["Hacking into a company's email server", "Impersonating an executive to trick employees into transfers", "Installing malware through email attachments", "Stealing email contact lists"],
                correct: 1,
                category: "Social Engineering",
                explanation: "BEC attacks involve impersonating executives, vendors, or trusted parties to trick employees into making wire transfers or sharing sensitive information. They often don't use malware, relying purely on social engineering."
            },
            {
                question: "In SQL injection, what does the input `' OR '1'='1` typically accomplish?",
                options: ["Deletes the database", "Creates an always-true condition to bypass authentication", "Encrypts the database", "Lists all database tables"],
                correct: 1,
                category: "Web Attacks",
                explanation: "The payload `' OR '1'='1` creates an always-true condition in the WHERE clause. When used in login forms, this can bypass authentication because the query returns all rows, effectively logging in as the first user."
            },
            {
                question: "What type of XSS attack stores malicious scripts in a database to be executed by other users?",
                options: ["Reflected XSS", "Stored XSS", "DOM-based XSS", "Self-XSS"],
                correct: 1,
                category: "Web Attacks",
                explanation: "Stored (or Persistent) XSS stores malicious scripts in the application's database. When other users view the affected page, the script executes in their browsers. This is more dangerous than reflected XSS because it affects all users."
            },
            {
                question: "Which defense prevents SQL injection by separating data from SQL commands?",
                options: ["Input validation", "Parameterized queries (prepared statements)", "Output encoding", "WAF"],
                correct: 1,
                category: "Web Attacks",
                explanation: "Parameterized queries (prepared statements) are the most effective defense against SQL injection. They ensure user input is always treated as data, never as executable SQL commands, regardless of what the input contains."
            },
            {
                question: "What is Google dorking?",
                options: ["A method to hack Google accounts", "Using advanced search operators for OSINT", "A type of DDoS attack on Google", "A vulnerability in Google Chrome"],
                correct: 1,
                category: "OSINT",
                explanation: "Google dorking uses advanced search operators (site:, filetype:, inurl:, etc.) to find sensitive information indexed by Google. Attackers use this for reconnaissance to find exposed files, login pages, or vulnerable systems."
            },
            {
                question: "Which of these is a passive reconnaissance technique?",
                options: ["Port scanning", "WHOIS lookups", "Vulnerability scanning", "Banner grabbing"],
                correct: 1,
                category: "OSINT",
                explanation: "WHOIS lookups are passive because they query public registrar databases without any direct contact with the target. Port scanning, vulnerability scanning, and banner grabbing all involve direct interaction with the target's systems."
            },
            {
                question: "What is the first phase of a penetration test?",
                options: ["Scanning", "Exploitation", "Planning and scoping", "Reporting"],
                correct: 2,
                category: "Pentesting",
                explanation: "Planning and scoping is the first phase, where the tester defines what systems are in scope, rules of engagement, and gets legal authorization. Testing without proper scope and authorization is illegal."
            },
            {
                question: "What distinguishes black box testing from white box testing?",
                options: ["Black box is done at night", "Black box tester has no prior knowledge of the target", "White box uses automated tools only", "Black box is illegal"],
                correct: 1,
                category: "Pentesting",
                explanation: "In black box testing, the tester has no prior knowledge of the target (simulating an external attacker). In white box testing, the tester has full knowledge including source code and architecture. Gray box is in between."
            },
            {
                question: "What vulnerability did Heartbleed exploit?",
                options: ["A Windows kernel bug", "A buffer over-read in OpenSSL's heartbeat extension", "A SQL injection in web servers", "A flaw in password hashing"],
                correct: 1,
                category: "Vulnerabilities",
                explanation: "Heartbleed was a buffer over-read vulnerability in OpenSSL's TLS heartbeat extension. It allowed attackers to read server memory, potentially exposing private keys, session data, and passwords from affected servers."
            }
        ];

        let userAnswers = new Array(questions.length).fill(null);
        let submitted = false;

        function initQuiz() {
            const container = document.getElementById('quizContainer');
            const progressDots = document.getElementById('progressDots');
            progressDots.innerHTML = questions.map((_, i) => `<div class="progress-dot" id="dot${i}"></div>`).join('');
            container.innerHTML = questions.map((q, i) => `
                <div class="question-card" id="question${i}">
                    <div class="question-header">
                        <div class="question-number">${i + 1}</div>
                        <span class="question-category">${q.category}</span>
                    </div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, j) => `
                            <label class="option" id="opt${i}-${j}" onclick="selectOption(${i}, ${j})">
                                <input type="radio" name="q${i}" value="${j}">
                                <span class="option-marker">${String.fromCharCode(65 + j)}</span>
                                <span>${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                    <div class="explanation" id="exp${i}"><h4>üí° Explanation</h4><p>${q.explanation}</p></div>
                </div>
            `).join('');
        }

        function selectOption(qi, oi) {
            if (submitted) return;
            document.querySelectorAll(`[id^="opt${qi}-"]`).forEach(o => o.classList.remove('selected'));
            document.getElementById(`opt${qi}-${oi}`).classList.add('selected');
            userAnswers[qi] = oi;
            document.getElementById(`dot${qi}`).classList.add('answered');
        }

        function submitQuiz() {
            const unanswered = userAnswers.filter(a => a === null).length;
            if (unanswered > 0) { alert(`Please answer all questions. ${unanswered} remaining.`); return; }
            submitted = true;
            document.getElementById('submitBtn').disabled = true;
            let correct = 0;
            questions.forEach((q, i) => {
                const ua = userAnswers[i];
                if (ua === q.correct) { correct++; document.getElementById(`opt${i}-${ua}`).classList.add('correct'); document.getElementById(`dot${i}`).classList.add('correct'); }
                else { document.getElementById(`opt${i}-${ua}`).classList.add('incorrect'); document.getElementById(`opt${i}-${q.correct}`).classList.add('correct'); document.getElementById(`dot${i}`).classList.add('incorrect'); }
                document.getElementById(`exp${i}`).classList.add('show');
            });
            const percent = Math.round((correct / questions.length) * 100);
            const passed = percent >= 70;
            document.getElementById('scorePercent').textContent = percent + '%';
            document.getElementById('scoreLabel').textContent = `${correct}/${questions.length}`;
            document.getElementById('scoreCircle').classList.add(passed ? 'pass' : 'fail');
            document.getElementById('resultTitle').textContent = passed ? 'üéâ Congratulations!' : 'üìö Keep Learning!';
            document.getElementById('resultMessage').textContent = passed ? 'You have solid understanding of threats and attack vectors.' : 'Review the lab and focus on explanations for missed questions.';
            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            const results = JSON.parse(localStorage.getItem('shield_quiz_results') || '{}');
            results['threats'] = { score: correct, total: questions.length, percent, passed, date: new Date().toISOString() };
            localStorage.setItem('shield_quiz_results', JSON.stringify(results));
        }

        function retryQuiz() {
            userAnswers = new Array(questions.length).fill(null);
            submitted = false;
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('results').classList.remove('show');
            document.getElementById('scoreCircle').classList.remove('pass', 'fail');
            document.querySelectorAll('.option').forEach(o => o.classList.remove('selected', 'correct', 'incorrect'));
            document.querySelectorAll('.progress-dot').forEach(d => d.classList.remove('answered', 'correct', 'incorrect'));
            document.querySelectorAll('.explanation').forEach(e => e.classList.remove('show'));
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
</html>
