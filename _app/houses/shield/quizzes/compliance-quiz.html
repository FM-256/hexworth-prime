<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compliance & Governance Quiz - Shield House</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 800px; margin: 0 auto; }
        .header {
            text-align: center; margin-bottom: 30px; padding: 30px;
            background: linear-gradient(135deg, rgba(248, 113, 113, 0.1), rgba(248, 113, 113, 0.05));
            border-radius: 16px; border: 1px solid rgba(248, 113, 113, 0.3);
        }
        .header h1 { font-size: 2rem; color: #f87171; margin-bottom: 10px; }
        .header p { color: #a0a0a0; }
        .back-link { display: inline-flex; align-items: center; gap: 8px; color: #888; text-decoration: none; margin-bottom: 20px; }
        .back-link:hover { color: #f87171; }
        .question-card {
            background: rgba(255, 255, 255, 0.03); border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 20px; padding: 25px;
        }
        .question-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .question-number {
            background: #f87171; color: #000; width: 32px; height: 32px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9rem;
        }
        .question-category {
            background: rgba(248, 113, 113, 0.2); color: #f87171;
            padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; text-transform: uppercase;
        }
        .question-text { font-size: 1.1rem; margin-bottom: 20px; line-height: 1.6; }
        .options { display: flex; flex-direction: column; gap: 10px; }
        .option {
            display: flex; align-items: center; gap: 12px; padding: 15px;
            background: rgba(255, 255, 255, 0.02); border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px; cursor: pointer; transition: all 0.2s;
        }
        .option:hover { background: rgba(255, 255, 255, 0.05); border-color: rgba(248, 113, 113, 0.3); }
        .option.selected { background: rgba(248, 113, 113, 0.1); border-color: #f87171; }
        .option.correct { background: rgba(74, 222, 128, 0.15); border-color: #4ade80; }
        .option.incorrect { background: rgba(248, 113, 113, 0.15); border-color: #f87171; }
        .option input { display: none; }
        .option-marker {
            width: 24px; height: 24px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.8rem; flex-shrink: 0;
        }
        .option.selected .option-marker { background: #f87171; border-color: #f87171; color: #000; }
        .option.correct .option-marker { background: #4ade80; border-color: #4ade80; color: #000; }
        .explanation { display: none; margin-top: 15px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; border-radius: 0 8px 8px 0; }
        .explanation.show { display: block; }
        .explanation h4 { color: #60a5fa; margin-bottom: 8px; }
        .submit-section { text-align: center; margin-top: 30px; }
        .submit-btn {
            background: linear-gradient(135deg, #f87171, #fb923c); color: #000; border: none;
            padding: 15px 40px; border-radius: 10px; font-size: 1.1rem; font-weight: 600;
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
        }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(248, 113, 113, 0.4); }
        .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .results {
            display: none; text-align: center; padding: 40px; background: rgba(255, 255, 255, 0.03);
            border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.1); margin-top: 30px;
        }
        .results.show { display: block; animation: fadeIn 0.5s ease; }
        .score-circle {
            width: 150px; height: 150px; border-radius: 50%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            margin: 0 auto 20px; font-size: 2.5rem; font-weight: bold;
        }
        .score-circle.pass { background: linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(34, 197, 94, 0.1)); border: 3px solid #4ade80; color: #4ade80; }
        .score-circle.fail { background: linear-gradient(135deg, rgba(248, 113, 113, 0.2), rgba(239, 68, 68, 0.1)); border: 3px solid #f87171; color: #f87171; }
        .score-label { font-size: 0.9rem; margin-top: 5px; }
        .results h2 { margin-bottom: 15px; }
        .results p { color: #888; margin-bottom: 20px; }
        .results-actions { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
        .results-actions a, .results-actions button {
            display: inline-block; padding: 12px 25px; border-radius: 8px;
            text-decoration: none; font-weight: 600; cursor: pointer; border: none; font-size: 1rem;
        }
        .btn-primary { background: #f87171; color: #000; }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #fff; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .progress-indicator { display: flex; justify-content: center; gap: 8px; margin-bottom: 20px; }
        .progress-dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); }
        .progress-dot.answered { background: #f87171; }
        .progress-dot.correct { background: #4ade80; }
        .progress-dot.incorrect { background: #ef4444; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">‚Üê Back to Shield House</a>
        <div class="header">
            <h1>üìã Compliance & Governance Quiz</h1>
            <p>15 questions on GDPR, HIPAA, PCI-DSS, CMMC, and compliance programs</p>
            <p style="margin-top: 10px; color: #f87171;">Passing score: 70% (11/15)</p>
        </div>
        <div class="progress-indicator" id="progressDots"></div>
        <div id="quizContainer"></div>
        <div class="submit-section">
            <button class="submit-btn" id="submitBtn" onclick="submitQuiz()">Submit Quiz</button>
        </div>
        <div class="results" id="results">
            <div class="score-circle" id="scoreCircle">
                <span id="scorePercent">0%</span>
                <span class="score-label" id="scoreLabel">0/15</span>
            </div>
            <h2 id="resultTitle">Quiz Complete!</h2>
            <p id="resultMessage"></p>
            <div class="results-actions">
                <button class="btn-secondary" onclick="retryQuiz()">Try Again</button>
                <a href="../labs/compliance-lab.html" class="btn-secondary">üìö Review Lab</a>
                <a href="../index.html" class="btn-primary">üõ°Ô∏è Back to Shield</a>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            {
                question: "Which regulation applies to ANY organization that processes data of EU residents, regardless of where the organization is located?",
                options: ["HIPAA", "GDPR", "PCI-DSS", "SOX"],
                correct: 1,
                category: "GDPR",
                explanation: "GDPR has extraterritorial scope - it applies to any organization worldwide that processes personal data of EU residents, not just companies based in the EU."
            },
            {
                question: "Under GDPR, within how many hours must a data breach be reported to the supervisory authority?",
                options: ["24 hours", "48 hours", "72 hours", "1 week"],
                correct: 2,
                category: "GDPR",
                explanation: "GDPR requires breach notification to the supervisory authority within 72 hours of becoming aware of a breach, unless the breach is unlikely to result in risk to individuals' rights."
            },
            {
                question: "What is the GDPR 'Right to Erasure' also known as?",
                options: ["Right to Object", "Right to be Forgotten", "Right to Portability", "Right to Rectification"],
                correct: 1,
                category: "GDPR",
                explanation: "The Right to Erasure, commonly called the 'Right to be Forgotten,' allows individuals to request deletion of their personal data under certain circumstances."
            },
            {
                question: "Which HIPAA rule specifically addresses the protection of electronic Protected Health Information (ePHI)?",
                options: ["Privacy Rule", "Security Rule", "Breach Notification Rule", "Omnibus Rule"],
                correct: 1,
                category: "HIPAA",
                explanation: "The HIPAA Security Rule specifically addresses ePHI and requires administrative, physical, and technical safeguards. The Privacy Rule covers all PHI (paper and electronic)."
            },
            {
                question: "What is a Business Associate Agreement (BAA) under HIPAA?",
                options: [
                    "A contract between two healthcare providers",
                    "A contract between a covered entity and a vendor handling PHI",
                    "An agreement between patients and providers",
                    "A license to access patient records"
                ],
                correct: 1,
                category: "HIPAA",
                explanation: "A BAA is required between covered entities and their business associates (vendors, contractors) who will have access to PHI. It extends HIPAA requirements to these third parties."
            },
            {
                question: "Under HIPAA, which of the following is NOT one of the 18 identifiers that make data PHI?",
                options: ["Name", "Social Security Number", "Credit Score", "Medical Record Number"],
                correct: 2,
                category: "HIPAA",
                explanation: "Credit score is not one of the 18 HIPAA identifiers. The identifiers include names, dates, geographic data, phone numbers, SSN, medical record numbers, and others that can identify an individual."
            },
            {
                question: "According to PCI-DSS, which data element should NEVER be stored after payment authorization?",
                options: ["PAN (Primary Account Number)", "Cardholder Name", "CVV/CVC", "Expiration Date"],
                correct: 2,
                category: "PCI-DSS",
                explanation: "Sensitive authentication data (CVV/CVC, full magnetic stripe data, PIN) must NEVER be stored after authorization, even if encrypted. PAN can be stored if properly protected."
            },
            {
                question: "What is the primary purpose of tokenization in PCI-DSS compliance?",
                options: [
                    "Encrypt cardholder data during transmission",
                    "Replace sensitive data with non-sensitive tokens to reduce scope",
                    "Verify cardholder identity",
                    "Log all access to payment systems"
                ],
                correct: 1,
                category: "PCI-DSS",
                explanation: "Tokenization replaces cardholder data with tokens that have no exploitable value. This removes the tokenized systems from PCI-DSS scope since they no longer handle actual card data."
            },
            {
                question: "How many requirements does PCI-DSS have?",
                options: ["6", "10", "12", "15"],
                correct: 2,
                category: "PCI-DSS",
                explanation: "PCI-DSS has 12 requirements organized into 6 control objectives: Build secure networks, protect cardholder data, vulnerability management, access control, monitoring, and security policy."
            },
            {
                question: "What does CMMC stand for?",
                options: [
                    "Cybersecurity Management and Compliance Model",
                    "Cybersecurity Maturity Model Certification",
                    "Certified Maturity Model for Cybersecurity",
                    "Compliance Management Model Certification"
                ],
                correct: 1,
                category: "CMMC",
                explanation: "CMMC stands for Cybersecurity Maturity Model Certification. It's required for DoD contractors and builds on NIST 800-171 requirements with third-party certification."
            },
            {
                question: "What type of information is CMMC primarily designed to protect?",
                options: [
                    "Personal Health Information (PHI)",
                    "Cardholder Data",
                    "Controlled Unclassified Information (CUI)",
                    "Personally Identifiable Information (PII)"
                ],
                correct: 2,
                category: "CMMC",
                explanation: "CMMC is designed to protect CUI (Controlled Unclassified Information) and FCI (Federal Contract Information) in the Defense Industrial Base. Different levels apply based on data sensitivity."
            },
            {
                question: "Which CMMC level requires third-party assessment by a C3PAO?",
                options: ["Level 1", "Level 2", "Level 3", "All levels"],
                correct: 1,
                category: "CMMC",
                explanation: "CMMC Level 2 (Advanced) requires third-party assessment by a CMMC Third-Party Assessor Organization (C3PAO). Level 1 allows self-assessment, and Level 3 requires government assessment."
            },
            {
                question: "What is the primary purpose of a Data Protection Impact Assessment (DPIA)?",
                options: [
                    "Calculate the cost of data breaches",
                    "Assess risks of processing activities before they begin",
                    "Audit existing security controls",
                    "Train employees on data protection"
                ],
                correct: 1,
                category: "Compliance Programs",
                explanation: "A DPIA is a proactive risk assessment required under GDPR for high-risk processing activities. It must be conducted before processing begins to identify and mitigate privacy risks."
            },
            {
                question: "What is 'compliance inheritance' in cloud computing?",
                options: [
                    "Automatically becoming compliant by using a certified cloud provider",
                    "Sharing compliance responsibilities between cloud provider and customer",
                    "Inheriting security controls from parent organizations",
                    "Passing compliance requirements to subcontractors"
                ],
                correct: 1,
                category: "Compliance Programs",
                explanation: "Compliance inheritance refers to how cloud customers can 'inherit' certain compliance controls from their cloud provider (shared responsibility model), but they remain responsible for their own controls."
            },
            {
                question: "What is the purpose of a GRC (Governance, Risk, Compliance) platform?",
                options: [
                    "Encrypt sensitive data",
                    "Centralize and automate compliance management activities",
                    "Perform penetration testing",
                    "Train employees on security awareness"
                ],
                correct: 1,
                category: "Compliance Programs",
                explanation: "GRC platforms centralize compliance activities including policy management, risk assessments, control tracking, evidence collection, and audit management across multiple frameworks."
            }
        ];

        let userAnswers = new Array(questions.length).fill(null);
        let submitted = false;

        function initQuiz() {
            const container = document.getElementById('quizContainer');
            const progressDots = document.getElementById('progressDots');
            progressDots.innerHTML = questions.map((_, i) => `<div class="progress-dot" id="dot${i}"></div>`).join('');
            container.innerHTML = questions.map((q, i) => `
                <div class="question-card" id="question${i}">
                    <div class="question-header">
                        <div class="question-number">${i + 1}</div>
                        <span class="question-category">${q.category}</span>
                    </div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, j) => `
                            <label class="option" id="opt${i}-${j}" onclick="selectOption(${i}, ${j})">
                                <input type="radio" name="q${i}" value="${j}">
                                <span class="option-marker">${String.fromCharCode(65 + j)}</span>
                                <span>${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                    <div class="explanation" id="exp${i}"><h4>üí° Explanation</h4><p>${q.explanation}</p></div>
                </div>
            `).join('');
        }

        function selectOption(qi, oi) {
            if (submitted) return;
            document.querySelectorAll(`[id^="opt${qi}-"]`).forEach(o => o.classList.remove('selected'));
            document.getElementById(`opt${qi}-${oi}`).classList.add('selected');
            userAnswers[qi] = oi;
            document.getElementById(`dot${qi}`).classList.add('answered');
        }

        function submitQuiz() {
            const unanswered = userAnswers.filter(a => a === null).length;
            if (unanswered > 0) { alert(`Please answer all questions. ${unanswered} remaining.`); return; }
            submitted = true;
            document.getElementById('submitBtn').disabled = true;
            let correct = 0;
            questions.forEach((q, i) => {
                const ua = userAnswers[i];
                if (ua === q.correct) { correct++; document.getElementById(`opt${i}-${ua}`).classList.add('correct'); document.getElementById(`dot${i}`).classList.add('correct'); }
                else { document.getElementById(`opt${i}-${ua}`).classList.add('incorrect'); document.getElementById(`opt${i}-${q.correct}`).classList.add('correct'); document.getElementById(`dot${i}`).classList.add('incorrect'); }
                document.getElementById(`exp${i}`).classList.add('show');
            });
            const percent = Math.round((correct / questions.length) * 100);
            const passed = percent >= 70;
            document.getElementById('scorePercent').textContent = percent + '%';
            document.getElementById('scoreLabel').textContent = `${correct}/${questions.length}`;
            document.getElementById('scoreCircle').classList.add(passed ? 'pass' : 'fail');
            document.getElementById('resultTitle').textContent = passed ? 'üéâ Congratulations!' : 'üìö Keep Learning!';
            document.getElementById('resultMessage').textContent = passed ? 'You have solid understanding of compliance frameworks.' : 'Review the lab and focus on explanations for missed questions.';
            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            const results = JSON.parse(localStorage.getItem('shield_quiz_results') || '{}');
            results['compliance'] = { score: correct, total: questions.length, percent, passed, date: new Date().toISOString() };
            localStorage.setItem('shield_quiz_results', JSON.stringify(results));
        }

        function retryQuiz() {
            userAnswers = new Array(questions.length).fill(null);
            submitted = false;
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('results').classList.remove('show');
            document.getElementById('scoreCircle').classList.remove('pass', 'fail');
            document.querySelectorAll('.option').forEach(o => o.classList.remove('selected', 'correct', 'incorrect'));
            document.querySelectorAll('.progress-dot').forEach(d => d.classList.remove('answered', 'correct', 'incorrect'));
            document.querySelectorAll('.explanation').forEach(e => e.classList.remove('show'));
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
</html>
