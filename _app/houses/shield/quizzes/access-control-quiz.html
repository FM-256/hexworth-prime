<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Control Quiz - Shield House</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 800px; margin: 0 auto; }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(248, 113, 113, 0.1), rgba(248, 113, 113, 0.05));
            border-radius: 16px;
            border: 1px solid rgba(248, 113, 113, 0.3);
        }
        .header h1 { font-size: 2rem; color: #f87171; margin-bottom: 10px; }
        .header p { color: #a0a0a0; }
        .back-link {
            display: inline-flex; align-items: center; gap: 8px;
            color: #888; text-decoration: none; margin-bottom: 20px;
        }
        .back-link:hover { color: #f87171; }
        .question-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            padding: 25px;
        }
        .question-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .question-number {
            background: #f87171; color: #000;
            width: 32px; height: 32px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 0.9rem;
        }
        .question-category {
            background: rgba(248, 113, 113, 0.2); color: #f87171;
            padding: 4px 12px; border-radius: 20px;
            font-size: 0.75rem; text-transform: uppercase;
        }
        .question-text { font-size: 1.1rem; margin-bottom: 20px; line-height: 1.6; }
        .options { display: flex; flex-direction: column; gap: 10px; }
        .option {
            display: flex; align-items: center; gap: 12px; padding: 15px;
            background: rgba(255, 255, 255, 0.02);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px; cursor: pointer; transition: all 0.2s;
        }
        .option:hover { background: rgba(255, 255, 255, 0.05); border-color: rgba(248, 113, 113, 0.3); }
        .option.selected { background: rgba(248, 113, 113, 0.1); border-color: #f87171; }
        .option.correct { background: rgba(74, 222, 128, 0.15); border-color: #4ade80; }
        .option.incorrect { background: rgba(248, 113, 113, 0.15); border-color: #f87171; }
        .option input { display: none; }
        .option-marker {
            width: 24px; height: 24px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 0.8rem; flex-shrink: 0;
        }
        .option.selected .option-marker { background: #f87171; border-color: #f87171; color: #000; }
        .option.correct .option-marker { background: #4ade80; border-color: #4ade80; color: #000; }
        .explanation {
            display: none; margin-top: 15px; padding: 15px;
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6; border-radius: 0 8px 8px 0;
        }
        .explanation.show { display: block; }
        .explanation h4 { color: #60a5fa; margin-bottom: 8px; }
        .submit-section { text-align: center; margin-top: 30px; }
        .submit-btn {
            background: linear-gradient(135deg, #f87171, #fb923c);
            color: #000; border: none; padding: 15px 40px;
            border-radius: 10px; font-size: 1.1rem; font-weight: 600;
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
        }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(248, 113, 113, 0.4); }
        .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .results {
            display: none; text-align: center; padding: 40px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 30px;
        }
        .results.show { display: block; animation: fadeIn 0.5s ease; }
        .score-circle {
            width: 150px; height: 150px; border-radius: 50%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            margin: 0 auto 20px; font-size: 2.5rem; font-weight: bold;
        }
        .score-circle.pass {
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(34, 197, 94, 0.1));
            border: 3px solid #4ade80; color: #4ade80;
        }
        .score-circle.fail {
            background: linear-gradient(135deg, rgba(248, 113, 113, 0.2), rgba(239, 68, 68, 0.1));
            border: 3px solid #f87171; color: #f87171;
        }
        .score-label { font-size: 0.9rem; margin-top: 5px; }
        .results h2 { margin-bottom: 15px; }
        .results p { color: #888; margin-bottom: 20px; }
        .results-actions { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
        .results-actions a, .results-actions button {
            display: inline-block; padding: 12px 25px; border-radius: 8px;
            text-decoration: none; font-weight: 600; cursor: pointer;
            border: none; font-size: 1rem;
        }
        .btn-primary { background: #f87171; color: #000; }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #fff; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .progress-indicator { display: flex; justify-content: center; gap: 8px; margin-bottom: 20px; }
        .progress-dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); }
        .progress-dot.answered { background: #f87171; }
        .progress-dot.correct { background: #4ade80; }
        .progress-dot.incorrect { background: #ef4444; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">‚Üê Back to Shield House</a>

        <div class="header">
            <h1>üîí Access Control Quiz</h1>
            <p>15 questions on authentication, authorization, Kerberos, and IAM</p>
            <p style="margin-top: 10px; color: #f87171;">Passing score: 70% (11/15)</p>
        </div>

        <div class="progress-indicator" id="progressDots"></div>
        <div id="quizContainer"></div>

        <div class="submit-section">
            <button class="submit-btn" id="submitBtn" onclick="submitQuiz()">Submit Quiz</button>
        </div>

        <div class="results" id="results">
            <div class="score-circle" id="scoreCircle">
                <span id="scorePercent">0%</span>
                <span class="score-label" id="scoreLabel">0/15</span>
            </div>
            <h2 id="resultTitle">Quiz Complete!</h2>
            <p id="resultMessage"></p>
            <div class="results-actions">
                <button class="btn-secondary" onclick="retryQuiz()">Try Again</button>
                <a href="../labs/access-control-lab.html" class="btn-secondary">üìö Review Lab</a>
                <a href="../index.html" class="btn-primary">üõ°Ô∏è Back to Shield</a>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "Which access control model allows the resource owner to grant permissions to others?",
                options: ["Mandatory Access Control (MAC)", "Discretionary Access Control (DAC)", "Role-Based Access Control (RBAC)", "Rule-Based Access Control"],
                correct: 1,
                category: "Access Models",
                explanation: "Discretionary Access Control (DAC) gives the resource owner discretion over who can access their resources. This is used in Windows NTFS and Unix file permissions where owners can modify permissions."
            },
            {
                question: "In a MAC system, what determines access permissions?",
                options: ["The resource owner's preference", "Security labels assigned by the system", "The user's role in the organization", "Time of day and location"],
                correct: 1,
                category: "Access Models",
                explanation: "Mandatory Access Control uses security labels (like Top Secret, Secret, Confidential) assigned by administrators. Users cannot change these labels - access is system-enforced based on clearance levels."
            },
            {
                question: "Which access control model is most commonly used in enterprise environments?",
                options: ["DAC", "MAC", "RBAC", "ABAC"],
                correct: 2,
                category: "Access Models",
                explanation: "Role-Based Access Control (RBAC) is the most common in enterprises because it maps well to organizational structures. Users are assigned roles (like 'HR Manager' or 'Developer'), and roles have permissions."
            },
            {
                question: "What are the three factors of authentication?",
                options: ["Username, password, and email", "Something you know, have, and are", "Public key, private key, and certificate", "Encryption, decryption, and hashing"],
                correct: 1,
                category: "Authentication",
                explanation: "The three authentication factors are: Something you know (password, PIN), Something you have (phone, smart card), and Something you are (biometrics). True MFA requires factors from different categories."
            },
            {
                question: "In biometrics, what does FAR (False Accept Rate) measure?",
                options: ["The rate at which authorized users are incorrectly rejected", "The rate at which unauthorized users are incorrectly accepted", "The accuracy of the biometric sensor", "The speed of biometric verification"],
                correct: 1,
                category: "Biometrics",
                explanation: "FAR measures how often an unauthorized person is incorrectly accepted (a security failure). FRR (False Reject Rate) measures how often authorized users are incorrectly rejected (a usability issue)."
            },
            {
                question: "What is the CER (Crossover Error Rate) in biometrics?",
                options: ["The maximum error rate allowed by policy", "The point where FAR equals FRR", "The minimum detectable change in biometric data", "The calibration error of the sensor"],
                correct: 1,
                category: "Biometrics",
                explanation: "CER is the point where the False Accept Rate equals the False Reject Rate. It's used to compare biometric systems - a lower CER indicates a more accurate biometric system."
            },
            {
                question: "In Kerberos, what does the TGT (Ticket Granting Ticket) allow a user to do?",
                options: ["Access any service directly", "Request service tickets without re-entering credentials", "Bypass the KDC entirely", "Modify other users' permissions"],
                correct: 1,
                category: "Kerberos",
                explanation: "The TGT is obtained after initial authentication and allows the user to request service tickets from the TGS without re-authenticating. This enables Single Sign-On (SSO) in Active Directory environments."
            },
            {
                question: "Why is the user's password never sent over the network in Kerberos?",
                options: ["It's too long to transmit", "The password is used locally to decrypt the TGT", "Kerberos doesn't use passwords", "The password is hashed before transmission"],
                correct: 1,
                category: "Kerberos",
                explanation: "Kerberos is designed so the password never leaves the client. The password (or its hash) is used to decrypt the TGT locally. This prevents password interception during network transmission."
            },
            {
                question: "What is a Golden Ticket attack in Active Directory?",
                options: ["Stealing a user's session cookie", "Forging a TGT using the krbtgt account hash", "Brute-forcing the domain admin password", "Exploiting a vulnerability in the KDC"],
                correct: 1,
                category: "Kerberos",
                explanation: "A Golden Ticket attack involves forging a TGT using the krbtgt account's password hash. With this forged ticket, attackers can impersonate any user, including Domain Admins, for as long as the hash remains unchanged."
            },
            {
                question: "What is the Principle of Least Privilege?",
                options: ["Users should share accounts to minimize license costs", "Users should have only the minimum access needed for their job", "Administrators should have access to everything", "All access should require manager approval"],
                correct: 1,
                category: "Least Privilege",
                explanation: "The Principle of Least Privilege states that users, programs, and processes should have only the minimum permissions necessary to perform their tasks. This limits the damage from compromised accounts or malware."
            },
            {
                question: "What is permission creep?",
                options: ["Gradual accumulation of unnecessary privileges over time", "Slow response time when checking permissions", "Permissions that expire automatically", "Gradual improvement in access control policies"],
                correct: 0,
                category: "Least Privilege",
                explanation: "Permission creep occurs when users accumulate permissions over time as they change roles, but old permissions are never revoked. Regular access reviews help identify and remediate permission creep."
            },
            {
                question: "What is an orphaned account?",
                options: ["An account without a password", "An account belonging to someone who has left the organization", "A newly created account", "An account locked due to failed login attempts"],
                correct: 1,
                category: "IAM",
                explanation: "Orphaned accounts belong to former employees, contractors, or vendors who no longer work with the organization. These accounts are a security risk if not promptly disabled during offboarding."
            },
            {
                question: "What is the purpose of access recertification?",
                options: ["To renew user licenses", "To periodically verify that access permissions are still appropriate", "To upgrade security certificates", "To reset all passwords"],
                correct: 1,
                category: "IAM",
                explanation: "Access recertification (or access reviews) is a periodic process where managers verify that users still need their assigned access. It helps identify and remove stale or inappropriate permissions."
            },
            {
                question: "Which authentication protocol uses security tokens in a federated identity model?",
                options: ["Kerberos", "LDAP", "SAML", "NTLM"],
                correct: 2,
                category: "Federation",
                explanation: "SAML (Security Assertion Markup Language) is commonly used for federated single sign-on. It allows an Identity Provider (IdP) to pass authentication tokens to Service Providers (SPs), enabling SSO across organizations."
            },
            {
                question: "What is Just-In-Time (JIT) access?",
                options: ["Immediate account creation when needed", "Temporary elevated privileges granted only when needed and for a limited time", "Real-time access monitoring", "Instant password reset capability"],
                correct: 1,
                category: "Privileged Access",
                explanation: "JIT access provides elevated privileges only when needed, for a specific task, and for a limited time. Instead of having permanent admin access, users request temporary privileges that automatically expire."
            }
        ];

        let userAnswers = new Array(questions.length).fill(null);
        let submitted = false;

        function initQuiz() {
            const container = document.getElementById('quizContainer');
            const progressDots = document.getElementById('progressDots');
            progressDots.innerHTML = questions.map((_, i) => `<div class="progress-dot" id="dot${i}"></div>`).join('');
            container.innerHTML = questions.map((q, i) => `
                <div class="question-card" id="question${i}">
                    <div class="question-header">
                        <div class="question-number">${i + 1}</div>
                        <span class="question-category">${q.category}</span>
                    </div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, j) => `
                            <label class="option" id="opt${i}-${j}" onclick="selectOption(${i}, ${j})">
                                <input type="radio" name="q${i}" value="${j}">
                                <span class="option-marker">${String.fromCharCode(65 + j)}</span>
                                <span>${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                    <div class="explanation" id="exp${i}">
                        <h4>üí° Explanation</h4>
                        <p>${q.explanation}</p>
                    </div>
                </div>
            `).join('');
        }

        function selectOption(questionIndex, optionIndex) {
            if (submitted) return;
            document.querySelectorAll(`[id^="opt${questionIndex}-"]`).forEach(opt => opt.classList.remove('selected'));
            document.getElementById(`opt${questionIndex}-${optionIndex}`).classList.add('selected');
            userAnswers[questionIndex] = optionIndex;
            document.getElementById(`dot${questionIndex}`).classList.add('answered');
        }

        function submitQuiz() {
            const unanswered = userAnswers.filter(a => a === null).length;
            if (unanswered > 0) { alert(`Please answer all questions. ${unanswered} remaining.`); return; }
            submitted = true;
            document.getElementById('submitBtn').disabled = true;
            let correct = 0;
            questions.forEach((q, i) => {
                const userAnswer = userAnswers[i];
                const isCorrect = userAnswer === q.correct;
                if (isCorrect) { correct++; document.getElementById(`opt${i}-${userAnswer}`).classList.add('correct'); document.getElementById(`dot${i}`).classList.add('correct'); }
                else { document.getElementById(`opt${i}-${userAnswer}`).classList.add('incorrect'); document.getElementById(`opt${i}-${q.correct}`).classList.add('correct'); document.getElementById(`dot${i}`).classList.add('incorrect'); }
                document.getElementById(`exp${i}`).classList.add('show');
            });
            const percent = Math.round((correct / questions.length) * 100);
            const passed = percent >= 70;
            document.getElementById('scorePercent').textContent = percent + '%';
            document.getElementById('scoreLabel').textContent = `${correct}/${questions.length}`;
            document.getElementById('scoreCircle').classList.add(passed ? 'pass' : 'fail');
            document.getElementById('resultTitle').textContent = passed ? 'üéâ Congratulations!' : 'üìö Keep Learning!';
            document.getElementById('resultMessage').textContent = passed ? 'You have solid understanding of access control concepts.' : 'Review the lab and focus on explanations for missed questions.';
            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            const results = JSON.parse(localStorage.getItem('shield_quiz_results') || '{}');
            results['access-control'] = { score: correct, total: questions.length, percent, passed, date: new Date().toISOString() };
            localStorage.setItem('shield_quiz_results', JSON.stringify(results));
        }

        function retryQuiz() {
            userAnswers = new Array(questions.length).fill(null);
            submitted = false;
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('results').classList.remove('show');
            document.getElementById('scoreCircle').classList.remove('pass', 'fail');
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
            document.querySelectorAll('.progress-dot').forEach(dot => dot.classList.remove('answered', 'correct', 'incorrect'));
            document.querySelectorAll('.explanation').forEach(exp => exp.classList.remove('show'));
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
</html>
