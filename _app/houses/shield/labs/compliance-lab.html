<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compliance & Governance Lab - Shield House</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(248, 113, 113, 0.1), rgba(248, 113, 113, 0.05));
            border-radius: 16px;
            border: 1px solid rgba(248, 113, 113, 0.3);
        }
        .header h1 { font-size: 2.2rem; color: #f87171; margin-bottom: 10px; }
        .header p { color: #a0a0a0; font-size: 1.1rem; }
        .progress-bar {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            height: 12px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f87171, #fb923c);
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }
        .progress-text { text-align: center; color: #888; font-size: 0.9rem; }
        .exercise {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 25px;
            overflow: hidden;
        }
        .exercise-header {
            background: rgba(248, 113, 113, 0.1);
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .exercise-header:hover { background: rgba(248, 113, 113, 0.15); }
        .exercise-title { display: flex; align-items: center; gap: 15px; }
        .exercise-number {
            background: #f87171;
            color: #000;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .exercise-name { font-size: 1.2rem; color: #fff; }
        .exercise-status { padding: 5px 15px; border-radius: 20px; font-size: 0.85rem; }
        .status-pending { background: rgba(100, 100, 100, 0.3); color: #888; }
        .status-complete { background: rgba(74, 222, 128, 0.2); color: #4ade80; }
        .exercise-content { padding: 25px; display: none; }
        .exercise.active .exercise-content { display: block; }
        .scenario {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
        }
        .scenario h4 { color: #60a5fa; margin-bottom: 8px; }
        .task-list { list-style: none; margin: 20px 0; }
        .task-item {
            padding: 12px 15px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .task-item input[type="checkbox"] { width: 20px; height: 20px; accent-color: #f87171; }
        .task-item.checked { background: rgba(74, 222, 128, 0.05); border-color: rgba(74, 222, 128, 0.2); }
        .task-item.checked label { text-decoration: line-through; color: #666; }
        .applet-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(248, 113, 113, 0.15);
            color: #f87171;
            padding: 10px 18px;
            border-radius: 8px;
            text-decoration: none;
            margin: 10px 10px 10px 0;
            border: 1px solid rgba(248, 113, 113, 0.3);
            transition: all 0.3s;
        }
        .applet-link:hover { background: rgba(248, 113, 113, 0.25); transform: translateY(-2px); }
        .question-section {
            background: rgba(168, 85, 247, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .question-section h4 { color: #a855f7; margin-bottom: 15px; }
        .question-section textarea {
            width: 100%;
            min-height: 100px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 8px;
            padding: 12px;
            color: #e0e0e0;
            font-family: inherit;
            resize: vertical;
        }
        .question-section textarea:focus { outline: none; border-color: #a855f7; }
        .complete-btn {
            background: linear-gradient(135deg, #f87171, #fb923c);
            color: #000;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .complete-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(248, 113, 113, 0.4); }
        .complete-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.85rem;
        }
        .comparison-table th, .comparison-table td {
            border: 1px solid rgba(255,255,255,0.1);
            padding: 10px;
            text-align: left;
        }
        .comparison-table th { background: rgba(248, 113, 113, 0.2); color: #f87171; }
        .comparison-table tr:nth-child(even) { background: rgba(255,255,255,0.02); }
        .concept-box {
            background: rgba(251, 191, 36, 0.1);
            border-left: 3px solid #fbbf24;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .concept-box h4 { color: #fbbf24; margin-bottom: 10px; }
        .diagram {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            white-space: pre;
            color: #4ade80;
        }
        .completion-badge {
            display: none;
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.1), rgba(34, 197, 94, 0.05));
            border-radius: 16px;
            border: 2px solid rgba(74, 222, 128, 0.3);
            margin-top: 30px;
        }
        .completion-badge.show { display: block; animation: fadeIn 0.5s ease; }
        .completion-badge h2 { color: #4ade80; font-size: 2rem; margin-bottom: 10px; }
        .badge-icon { font-size: 4rem; margin-bottom: 15px; }
        .next-steps { margin-top: 20px; }
        .next-steps a {
            display: inline-block;
            background: #f87171;
            color: #000;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            margin: 5px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #888;
            text-decoration: none;
            margin-bottom: 20px;
        }
        .back-link:hover { color: #f87171; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† Back to Shield House</a>

        <div class="header">
            <h1>ğŸ“‹ Compliance & Governance Lab</h1>
            <p>Hands-on exercises in regulatory frameworks, privacy laws, and security standards</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text"><span id="completedCount">0</span> of 6 exercises completed</div>
        </div>

        <!-- Exercise 1: Understanding Compliance Landscape -->
        <div class="exercise active" data-exercise="1">
            <div class="exercise-header" onclick="toggleExercise(1)">
                <div class="exercise-title">
                    <div class="exercise-number">1</div>
                    <div class="exercise-name">The Compliance Landscape</div>
                </div>
                <span class="exercise-status status-pending" id="status1">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>ğŸ“‹ Why Compliance Matters</h4>
                    <p>Compliance frameworks translate legal and regulatory requirements into actionable security controls. Understanding which frameworks apply to your organization is the first step.</p>
                </div>

                <table class="comparison-table">
                    <tr>
                        <th>Framework</th>
                        <th>Applies To</th>
                        <th>Focus Area</th>
                        <th>Penalties</th>
                    </tr>
                    <tr>
                        <td><strong>GDPR</strong></td>
                        <td>Any org handling EU citizen data</td>
                        <td>Data privacy and individual rights</td>
                        <td>Up to â‚¬20M or 4% global revenue</td>
                    </tr>
                    <tr>
                        <td><strong>HIPAA</strong></td>
                        <td>Healthcare providers, insurers, associates</td>
                        <td>Protected Health Information (PHI)</td>
                        <td>$100 - $50,000 per violation</td>
                    </tr>
                    <tr>
                        <td><strong>PCI-DSS</strong></td>
                        <td>Anyone processing payment cards</td>
                        <td>Cardholder data protection</td>
                        <td>$5,000 - $100,000/month + loss of processing</td>
                    </tr>
                    <tr>
                        <td><strong>SOX</strong></td>
                        <td>Publicly traded US companies</td>
                        <td>Financial reporting integrity</td>
                        <td>Fines + imprisonment for executives</td>
                    </tr>
                    <tr>
                        <td><strong>CMMC</strong></td>
                        <td>DoD contractors</td>
                        <td>Controlled Unclassified Information (CUI)</td>
                        <td>Loss of government contracts</td>
                    </tr>
                </table>

                <h4>ğŸ¯ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t1-1" onchange="checkTask(1)">
                        <label for="t1-1">Identify which compliance frameworks would apply to a healthcare SaaS company</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t1-2" onchange="checkTask(1)">
                        <label for="t1-2">Research the difference between prescriptive (PCI-DSS) vs risk-based (NIST) frameworks</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t1-3" onchange="checkTask(1)">
                        <label for="t1-3">Understand the concept of compliance inheritance in cloud environments</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t1-4" onchange="checkTask(1)">
                        <label for="t1-4">Review the CMMC Framework Explorer to understand maturity levels</label>
                    </li>
                </ul>

                <a href="../applets/compliance/cmmc_framework/cmmc_framework.html" class="applet-link">ğŸ›ï¸ CMMC Framework Explorer</a>

                <div class="question-section">
                    <h4>ğŸ’­ Scenario Analysis</h4>
                    <p>A US-based e-commerce company sells products to European customers, accepts credit card payments, and is publicly traded. List ALL compliance frameworks that would apply and explain why.</p>
                    <textarea id="q1" placeholder="List applicable frameworks and justification..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(1)" id="btn1">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 2: GDPR Deep Dive -->
        <div class="exercise" data-exercise="2">
            <div class="exercise-header" onclick="toggleExercise(2)">
                <div class="exercise-title">
                    <div class="exercise-number">2</div>
                    <div class="exercise-name">GDPR: Privacy by Design</div>
                </div>
                <span class="exercise-status status-pending" id="status2">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>ğŸ“‹ The General Data Protection Regulation</h4>
                    <p>GDPR is the world's strongest privacy law. It applies to ANY organization processing EU resident data, regardless of where the organization is located.</p>
                </div>

                <div class="diagram">
GDPR KEY PRINCIPLES (Article 5):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. LAWFULNESS, FAIRNESS, TRANSPARENCY                          â”‚
â”‚    - Legal basis required (consent, contract, legal obligation) â”‚
â”‚    - Clear privacy notices                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. PURPOSE LIMITATION                                           â”‚
â”‚    - Collect only for specified, explicit purposes              â”‚
â”‚    - No secondary use without consent                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. DATA MINIMIZATION                                            â”‚
â”‚    - Collect only what's necessary                              â”‚
â”‚    - "Need to know" principle for access                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. ACCURACY                                                     â”‚
â”‚    - Keep data accurate and up to date                          â”‚
â”‚    - Provide mechanisms for correction                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. STORAGE LIMITATION                                           â”‚
â”‚    - Retain only as long as necessary                           â”‚
â”‚    - Implement retention schedules and deletion                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 6. INTEGRITY AND CONFIDENTIALITY                                â”‚
â”‚    - Appropriate security measures                              â”‚
â”‚    - Protection against unauthorized access                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

                <div class="concept-box">
                    <h4>Data Subject Rights Under GDPR</h4>
                    <ul style="margin-left: 20px;">
                        <li><strong>Right to Access:</strong> Request a copy of their data</li>
                        <li><strong>Right to Rectification:</strong> Correct inaccurate data</li>
                        <li><strong>Right to Erasure:</strong> "Right to be forgotten"</li>
                        <li><strong>Right to Portability:</strong> Receive data in machine-readable format</li>
                        <li><strong>Right to Object:</strong> Opt out of certain processing</li>
                        <li><strong>Right to Restrict:</strong> Limit how data is used</li>
                    </ul>
                </div>

                <h4>ğŸ¯ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t2-1" onchange="checkTask(2)">
                        <label for="t2-1">Identify the 6 lawful bases for processing under GDPR</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t2-2" onchange="checkTask(2)">
                        <label for="t2-2">Understand when a Data Protection Impact Assessment (DPIA) is required</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t2-3" onchange="checkTask(2)">
                        <label for="t2-3">Research the 72-hour breach notification requirement</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t2-4" onchange="checkTask(2)">
                        <label for="t2-4">Explore the role of Data Protection Officer (DPO)</label>
                    </li>
                </ul>

                <div class="question-section">
                    <h4>ğŸ’­ Design Challenge</h4>
                    <p>Design a process for handling a "Right to Erasure" request. What data needs to be deleted, what can be retained (legal obligations), and how do you verify the requester's identity?</p>
                    <textarea id="q2" placeholder="Design your erasure request process..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(2)" id="btn2">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 3: HIPAA and Healthcare -->
        <div class="exercise" data-exercise="3">
            <div class="exercise-header" onclick="toggleExercise(3)">
                <div class="exercise-title">
                    <div class="exercise-number">3</div>
                    <div class="exercise-name">HIPAA: Healthcare Security</div>
                </div>
                <span class="exercise-status status-pending" id="status3">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>ğŸ“‹ Health Insurance Portability and Accountability Act</h4>
                    <p>HIPAA protects Protected Health Information (PHI). It applies to Covered Entities (providers, insurers) and Business Associates (vendors handling PHI).</p>
                </div>

                <table class="comparison-table">
                    <tr>
                        <th>HIPAA Rule</th>
                        <th>Purpose</th>
                        <th>Key Requirements</th>
                    </tr>
                    <tr>
                        <td><strong>Privacy Rule</strong></td>
                        <td>Protect PHI usage and disclosure</td>
                        <td>Minimum necessary, patient rights, authorization</td>
                    </tr>
                    <tr>
                        <td><strong>Security Rule</strong></td>
                        <td>Protect electronic PHI (ePHI)</td>
                        <td>Administrative, physical, technical safeguards</td>
                    </tr>
                    <tr>
                        <td><strong>Breach Notification</strong></td>
                        <td>Report breaches of unsecured PHI</td>
                        <td>Notify individuals, HHS, media (if >500)</td>
                    </tr>
                    <tr>
                        <td><strong>Omnibus Rule</strong></td>
                        <td>Extends to Business Associates</td>
                        <td>BAAs required, direct liability</td>
                    </tr>
                </table>

                <div class="diagram">
HIPAA Security Rule Safeguards:

ADMINISTRATIVE SAFEGUARDS
â”œâ”€â”€ Risk Analysis and Management
â”œâ”€â”€ Workforce Security (training, clearances)
â”œâ”€â”€ Security Awareness Training
â”œâ”€â”€ Incident Response Procedures
â””â”€â”€ Contingency Planning

PHYSICAL SAFEGUARDS
â”œâ”€â”€ Facility Access Controls
â”œâ”€â”€ Workstation Use Policies
â”œâ”€â”€ Device and Media Controls
â””â”€â”€ Disposal of PHI

TECHNICAL SAFEGUARDS
â”œâ”€â”€ Access Controls (unique IDs, role-based)
â”œâ”€â”€ Audit Controls (logging)
â”œâ”€â”€ Integrity Controls (checksums, signatures)
â”œâ”€â”€ Transmission Security (encryption)
â””â”€â”€ Authentication (verify identity)
                </div>

                <h4>ğŸ¯ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t3-1" onchange="checkTask(3)">
                        <label for="t3-1">Define the 18 HIPAA identifiers that make data PHI</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t3-2" onchange="checkTask(3)">
                        <label for="t3-2">Understand the "Minimum Necessary" standard for PHI access</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t3-3" onchange="checkTask(3)">
                        <label for="t3-3">Research BAA (Business Associate Agreement) requirements</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t3-4" onchange="checkTask(3)">
                        <label for="t3-4">Explore de-identification methods (Safe Harbor vs Expert Determination)</label>
                    </li>
                </ul>

                <div class="question-section">
                    <h4>ğŸ’­ Incident Response</h4>
                    <p>A hospital's billing system was breached, potentially exposing 5,000 patient records. Walk through the breach notification process: Who must be notified, within what timeframe, and what information must be included?</p>
                    <textarea id="q3" placeholder="Outline the breach notification process..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(3)" id="btn3">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 4: PCI-DSS -->
        <div class="exercise" data-exercise="4">
            <div class="exercise-header" onclick="toggleExercise(4)">
                <div class="exercise-title">
                    <div class="exercise-number">4</div>
                    <div class="exercise-name">PCI-DSS: Payment Card Security</div>
                </div>
                <span class="exercise-status status-pending" id="status4">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>ğŸ“‹ Payment Card Industry Data Security Standard</h4>
                    <p>PCI-DSS is a prescriptive standard with 12 requirements organized into 6 control objectives. Any organization that stores, processes, or transmits cardholder data must comply.</p>
                </div>

                <div class="diagram">
PCI-DSS 12 REQUIREMENTS:

BUILD AND MAINTAIN A SECURE NETWORK
  1. Install and maintain a firewall
  2. Do not use vendor-supplied defaults

PROTECT CARDHOLDER DATA
  3. Protect stored cardholder data
  4. Encrypt transmission of cardholder data

MAINTAIN A VULNERABILITY MANAGEMENT PROGRAM
  5. Use and regularly update anti-virus
  6. Develop and maintain secure systems

IMPLEMENT STRONG ACCESS CONTROL MEASURES
  7. Restrict access to cardholder data
  8. Assign unique ID to each person
  9. Restrict physical access

REGULARLY MONITOR AND TEST NETWORKS
  10. Track and monitor all access
  11. Regularly test security systems

MAINTAIN AN INFORMATION SECURITY POLICY
  12. Maintain a policy for information security
                </div>

                <div class="concept-box">
                    <h4>Cardholder Data Elements</h4>
                    <ul style="margin-left: 20px;">
                        <li><strong>PAN (Primary Account Number):</strong> The 16-digit card number - MUST protect</li>
                        <li><strong>Cardholder Name:</strong> Protect if stored with PAN</li>
                        <li><strong>Service Code:</strong> 3-digit code on magnetic stripe</li>
                        <li><strong>Expiration Date:</strong> Protect if stored with PAN</li>
                        <li><strong>CVV/CVC:</strong> NEVER store after authorization</li>
                        <li><strong>PIN/PIN Block:</strong> NEVER store after authorization</li>
                    </ul>
                </div>

                <h4>ğŸ¯ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t4-1" onchange="checkTask(4)">
                        <label for="t4-1">Understand PCI-DSS scope reduction strategies (tokenization, P2PE)</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t4-2" onchange="checkTask(4)">
                        <label for="t4-2">Research the different SAQ (Self-Assessment Questionnaire) types</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t4-3" onchange="checkTask(4)">
                        <label for="t4-3">Identify what can and cannot be stored after payment authorization</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t4-4" onchange="checkTask(4)">
                        <label for="t4-4">Explore the quarterly vulnerability scan requirements</label>
                    </li>
                </ul>

                <div class="question-section">
                    <h4>ğŸ’­ Architecture Review</h4>
                    <p>An e-commerce company wants to reduce PCI-DSS scope. Compare the security benefits and implementation considerations of tokenization vs hosted payment pages. Which would you recommend and why?</p>
                    <textarea id="q4" placeholder="Compare scope reduction approaches..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(4)" id="btn4">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 5: CMMC -->
        <div class="exercise" data-exercise="5">
            <div class="exercise-header" onclick="toggleExercise(5)">
                <div class="exercise-title">
                    <div class="exercise-number">5</div>
                    <div class="exercise-name">CMMC: Defense Contractor Security</div>
                </div>
                <span class="exercise-status status-pending" id="status5">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>ğŸ“‹ Cybersecurity Maturity Model Certification</h4>
                    <p>CMMC is required for DoD contractors. It builds on NIST 800-171 and adds third-party certification requirements. Protecting Controlled Unclassified Information (CUI) is the primary goal.</p>
                </div>

                <table class="comparison-table">
                    <tr>
                        <th>Level</th>
                        <th>Name</th>
                        <th>Practices</th>
                        <th>Assessment</th>
                    </tr>
                    <tr>
                        <td><strong>Level 1</strong></td>
                        <td>Foundational</td>
                        <td>17 practices (FCI only)</td>
                        <td>Self-assessment</td>
                    </tr>
                    <tr>
                        <td><strong>Level 2</strong></td>
                        <td>Advanced</td>
                        <td>110 practices (CUI)</td>
                        <td>Third-party (C3PAO)</td>
                    </tr>
                    <tr>
                        <td><strong>Level 3</strong></td>
                        <td>Expert</td>
                        <td>110+ practices</td>
                        <td>Government assessment</td>
                    </tr>
                </table>

                <h4>ğŸ¯ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t5-1" onchange="checkTask(5)">
                        <label for="t5-1">Explore the CMMC domains using the framework visualizers</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t5-2" onchange="checkTask(5)">
                        <label for="t5-2">Understand the difference between FCI and CUI</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t5-3" onchange="checkTask(5)">
                        <label for="t5-3">Review Access Control and Identification/Authentication domains</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t5-4" onchange="checkTask(5)">
                        <label for="t5-4">Take the CMMC Quiz to test your understanding</label>
                    </li>
                </ul>

                <a href="../applets/compliance/cmmc_access_control/cmmc_access_control.html" class="applet-link">ğŸ” CMMC Access Control</a>
                <a href="../applets/compliance/cmmc_identification_auth/cmmc_identification_auth.html" class="applet-link">ğŸ†” CMMC Identification</a>
                <a href="../applets/compliance/cmmc_incident_response/cmmc_incident_response.html" class="applet-link">ğŸš¨ CMMC Incident Response</a>
                <a href="../applets/compliance/cmmc_quiz/cmmc_quiz.html" class="applet-link">ğŸ“ CMMC Quiz</a>

                <div class="question-section">
                    <h4>ğŸ’­ Gap Analysis</h4>
                    <p>A small manufacturing company wants to bid on DoD contracts requiring Level 2 CMMC. They currently have no formal security program. What are the top 5 controls they should implement first?</p>
                    <textarea id="q5" placeholder="Prioritize CMMC implementation steps..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(5)" id="btn5">Mark Complete</button>
            </div>
        </div>

        <!-- Exercise 6: Building a Compliance Program -->
        <div class="exercise" data-exercise="6">
            <div class="exercise-header" onclick="toggleExercise(6)">
                <div class="exercise-title">
                    <div class="exercise-number">6</div>
                    <div class="exercise-name">Building a Compliance Program</div>
                </div>
                <span class="exercise-status status-pending" id="status6">Pending</span>
            </div>
            <div class="exercise-content">
                <div class="scenario">
                    <h4>ğŸ“‹ Operationalizing Compliance</h4>
                    <p>Compliance is not a one-time project - it's an ongoing program. Successful compliance programs integrate controls into daily operations and continuously monitor effectiveness.</p>
                </div>

                <div class="diagram">
COMPLIANCE PROGRAM LIFECYCLE:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   1. ASSESS    â”‚  â†â”€â”€â”€ Identify requirements, gap analysis
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   2. DESIGN    â”‚  â†â”€â”€â”€ Control selection, policies, procedures
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. IMPLEMENT   â”‚  â†â”€â”€â”€ Deploy controls, train staff
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  4. MONITOR    â”‚  â†â”€â”€â”€ Continuous monitoring, metrics
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  5. AUDIT      â”‚  â†â”€â”€â”€ Internal/external assessments
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  6. IMPROVE    â”‚  â†â”€â”€â”€ Remediation, lessons learned
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Return to ASSESS (continuous cycle)
                </div>

                <h4>ğŸ¯ Tasks</h4>
                <ul class="task-list">
                    <li class="task-item">
                        <input type="checkbox" id="t6-1" onchange="checkTask(6)">
                        <label for="t6-1">Design a control mapping matrix for overlapping frameworks</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t6-2" onchange="checkTask(6)">
                        <label for="t6-2">Develop key performance indicators (KPIs) for compliance monitoring</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t6-3" onchange="checkTask(6)">
                        <label for="t6-3">Research GRC (Governance, Risk, Compliance) tools and platforms</label>
                    </li>
                    <li class="task-item">
                        <input type="checkbox" id="t6-4" onchange="checkTask(6)">
                        <label for="t6-4">Understand the role of evidence collection for audits</label>
                    </li>
                </ul>

                <div class="concept-box">
                    <h4>Compliance Program Best Practices</h4>
                    <ul style="margin-left: 20px;">
                        <li><strong>Executive Sponsorship:</strong> Compliance needs top-level support</li>
                        <li><strong>Risk-Based Approach:</strong> Prioritize controls by risk level</li>
                        <li><strong>Documentation:</strong> If it's not documented, it didn't happen</li>
                        <li><strong>Automation:</strong> Automate evidence collection and monitoring</li>
                        <li><strong>Training:</strong> Regular security awareness for all staff</li>
                        <li><strong>Continuous Improvement:</strong> Learn from audits and incidents</li>
                    </ul>
                </div>

                <div class="question-section">
                    <h4>ğŸ’­ Program Design</h4>
                    <p>Design a compliance program for a startup that will need to comply with SOC 2, GDPR, and PCI-DSS within 12 months. Include: governance structure, priority order, resource needs, and key milestones.</p>
                    <textarea id="q6" placeholder="Design your multi-framework compliance program..."></textarea>
                </div>

                <button class="complete-btn" onclick="completeExercise(6)" id="btn6">Mark Complete</button>
            </div>
        </div>

        <!-- Completion Badge -->
        <div class="completion-badge" id="completionBadge">
            <div class="badge-icon">ğŸ†</div>
            <h2>Compliance & Governance Lab Complete!</h2>
            <p>You've mastered GDPR, HIPAA, PCI-DSS, CMMC, and compliance program management.</p>
            <div class="next-steps">
                <a href="../quizzes/compliance-quiz.html">ğŸ“ Take the Quiz</a>
                <a href="../index.html">ğŸ›¡ï¸ Back to Shield</a>
            </div>
        </div>
    </div>

    <script>
        const TOTAL_EXERCISES = 6;
        let completedExercises = new Set();

        document.addEventListener('DOMContentLoaded', () => { loadProgress(); updateProgressBar(); });

        function toggleExercise(num) {
            const exercise = document.querySelector(`[data-exercise="${num}"]`);
            const wasActive = exercise.classList.contains('active');
            document.querySelectorAll('.exercise').forEach(ex => ex.classList.remove('active'));
            if (!wasActive) exercise.classList.add('active');
        }

        function checkTask(exerciseNum) {
            const exercise = document.querySelector(`[data-exercise="${exerciseNum}"]`);
            exercise.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                const taskItem = cb.closest('.task-item');
                taskItem.classList.toggle('checked', cb.checked);
            });
            saveProgress();
        }

        function completeExercise(num) {
            completedExercises.add(num);
            document.getElementById(`status${num}`).textContent = 'Complete';
            document.getElementById(`status${num}`).className = 'exercise-status status-complete';
            document.getElementById(`btn${num}`).textContent = 'âœ“ Completed';
            document.getElementById(`btn${num}`).disabled = true;
            updateProgressBar();
            saveProgress();
            if (num < TOTAL_EXERCISES) setTimeout(() => toggleExercise(num + 1), 500);
            if (completedExercises.size === TOTAL_EXERCISES) {
                document.getElementById('completionBadge').classList.add('show');
            }
        }

        function updateProgressBar() {
            const progress = (completedExercises.size / TOTAL_EXERCISES) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('completedCount').textContent = completedExercises.size;
        }

        function saveProgress() {
            const data = { completed: Array.from(completedExercises), checkboxes: {}, answers: {} };
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => { data.checkboxes[cb.id] = cb.checked; });
            document.querySelectorAll('textarea').forEach(ta => { data.answers[ta.id] = ta.value; });
            localStorage.setItem('shield_compliance_lab', JSON.stringify(data));
        }

        function loadProgress() {
            const saved = localStorage.getItem('shield_compliance_lab');
            if (!saved) return;
            const data = JSON.parse(saved);
            if (data.completed) {
                data.completed.forEach(num => {
                    completedExercises.add(num);
                    document.getElementById(`status${num}`).textContent = 'Complete';
                    document.getElementById(`status${num}`).className = 'exercise-status status-complete';
                    document.getElementById(`btn${num}`).textContent = 'âœ“ Completed';
                    document.getElementById(`btn${num}`).disabled = true;
                });
            }
            if (data.checkboxes) {
                Object.entries(data.checkboxes).forEach(([id, checked]) => {
                    const cb = document.getElementById(id);
                    if (cb) { cb.checked = checked; if (checked) cb.closest('.task-item').classList.add('checked'); }
                });
            }
            if (data.answers) {
                Object.entries(data.answers).forEach(([id, value]) => {
                    const ta = document.getElementById(id);
                    if (ta) ta.value = value;
                });
            }
            if (completedExercises.size === TOTAL_EXERCISES) document.getElementById('completionBadge').classList.add('show');
        }
    </script>
</body>
</html>
