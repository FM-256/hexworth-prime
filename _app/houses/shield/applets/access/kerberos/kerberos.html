<!DOCTYPE html>
<html>
  <head><br>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z91PVQTWCZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z91PVQTWCZ');
</script>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" /><br>
	<meta name="keyword" content="authentication, protocol, network, encrypt, key, trust, server, domain, hash, three-headed dog" />
		<meta name="description" content="The EMATE illustrates the network authentication protocol that uses encryption, Kerberos. " />
	<title>kerberos</title>
	<style>
		html {
			height:100%;
		}
		body {
			background-color:#FFF;
			margin:0;
			height:100%;
		}
	
/* Hexworth Academy - House of Shield Branding */
.hexworth-wrapper {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #0a0a0a 0%, #1a0a0a 50%, #0a0a0a 100%);
    min-height: 100vh;
    padding: 0;
    margin: 0;
}
.hexworth-header {
    background: linear-gradient(135deg, #1a0a0a 0%, #8b0000 50%, #dc143c 100%);
    padding: 12px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 4px 20px rgba(220, 20, 60, 0.3);
}
.hexworth-logo {
    display: flex;
    align-items: center;
    gap: 12px;
    color: white;
    text-decoration: none;
}
.hexworth-logo-icon { font-size: 28px; }
.hexworth-logo-text { font-size: 18px; font-weight: 600; letter-spacing: 1px; }
.hexworth-badge {
    background: linear-gradient(135deg, #1a1a1a, #333333);
    color: #dc143c;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    border: 1px solid #dc143c;
}
.hexworth-content { display: flex; justify-content: center; padding: 20px; }
.hexworth-footer {
    background: rgba(26, 10, 10, 0.8);
    color: rgba(255,255,255,0.7);
    text-align: center;
    padding: 12px;
    font-size: 12px;
}
.hexworth-footer a { color: #dc143c; text-decoration: none; }
.hexworth-footer a:hover { color: #ff6b6b; }

	</style>
	<!-- copy these lines to your document head: -->

	<meta name="viewport" content="user-scalable=yes, width=800" />
	<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:600&subset=latin' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro&subset=latin' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="kerberos.hyperesources/jquery-3.3.1.js"></script>
	<script type="text/javascript" src="kerberos.hyperesources/jquery-ui.js"></script>
	<script type="text/javascript" src="kerberos.hyperesources/jquery.ui.touch-punch.min.js"></script>

	<!-- end copy -->
  </head>
  <body>
<div class="hexworth-wrapper">
    <header class="hexworth-header">
        <a href="../../../catalog.html?theme=academy" class="hexworth-logo">
            <span class="hexworth-logo-icon">üè∞</span>
            <span class="hexworth-logo-text">Hexworth Academy</span>
        </a>
        <span class="hexworth-badge">üõ°Ô∏è House of Shield</span>
    </header>
    <div class="hexworth-content">

<!-- copy these lines to your document: -->

	<div id="kerberos_hype_container" class="HYPE_document" style="margin:auto;position:relative;width:800px;height:600px;overflow:hidden;">
		<script type="text/javascript" charset="utf-8" src="kerberos.hyperesources/kerberos_hype_generated_script.js"></script>
	</div>

	<!-- end copy -->
	


	<!-- text content for search engines: -->

	<div style="display:none" aria-hidden=true>

		<div>Kerberos</div>
		<div>1/16</div>
		<div></div>
		<div>This material was developed with funding from the
National Science Foundation under Grant # DUE 1601612
</div>
		<div>Next</div>
		<div>Restart</div>
		<div>Back</div>
		<div>Kerberos Overview</div>
		<div>ACME Corp Application
Server
</div>
		<div>2/16</div>
		<div>Authentication is the process used to determine whether a user is, in fact, who or what he or she claims to be. Let‚Äôs say Bob, a client, wants to access resources on an application server at ACME Corp. To do this, Bob will use his username and provide a password. Since the network is built on TCP/IP, an unsecure protocol suite, Bob does not necessarily trust the network he‚Äôs on and he does not know who might be able to listen in on his communication. This is where Kerberos comes in.</div>
		<div>3/16</div>
		<div>Kerberos is a network authentication protocol that uses strong encryption to provide authentication for client-server applications. The protocol‚Äôs name was derived from the Greek mythology character, Cerberus, the ferocious three-headed guard dog of Hades that prevents the dead from escaping.</div>
		<div>The Kerberos Name</div>
		<div>The Application Server, the Service</div>
		<div>The three heads of the Kerberos protocol include the client, a service and the Key Distribution Center (KDC), a third-party that both the client and service trust. The KDC contains an Authentication Server (AS) and a Ticket Granting Server (TGS).¬†The Kerberos protocol uses strong cryptography so that Bob, the client, can prove his identity to a server and the server proves its identity to Bob. Kerberos issues tickets as part of this process.¬†</div>
		<div>Key Distribution Center (KDC)
</div>
		<div>4/16</div>
		<div>APP1</div>
		<div>AS
</div>
		<div>The ‚Äúthree heads‚Äù of Kerberos</div>
		<div>TGS
</div>
		<div>Close¬†</div>
		<div>Domain Controller

a server that runs a version of the Windows Server operating system and has Active Directory installed</div>
		<div>5/16</div>
		<div>2/8</div>
		<div>Secret keys</div>
		<div>Kerberos Platforms</div>
		<div>Active Directory

a hierarchical structure that stores information about objects on the network to make it easier for administrators and users to find and use.¬†</div>
		<div>In a Windows environment, Kerberos is part of its Active Directory. The KDC processes run on all Domain Controllers, and Kerberos uses the Active Directory database. The KDC stores the secret keys for user machines and services in its database.

KDC‚Äôs and Kerberos clients can be run on many platforms such as Linux and Apple. The secret keys are symmetric‚Äîwhatever a key encrypts is the same key used to decrypt. The application server that Bob is requesting access to never communicates directly with the KDC.</div>
		<div>Hashing function

used to generate a value from a string of text using a mathematical algorithm to protect the security of the text string.¬†</div>
		<div>Keytab

a file containing a collection of Principles (such as Service Principal Names or User Principal Names) and associated keys</div>
		<div>G00dDog</div>
		<div>Bob enters his password, and that password is sent through a hashing function resulting in a long-lived symmetric key (a password‚Äôs lifetime is typically 90 days).

The application server has a symmetric key stored in a keytab file. The keytab file contains a randomly generated long-lived symmetric key. The ticket granting server also has a long-lived symmetric key.

The authentication server maintains a copy of all the keys in KDC‚Äôs realm: the keys generated by Bob, the application server and TGS.</div>
		<div>6/16</div>
		<div>Password:</div>
		<div>Login</div>
		<div>#</div>
		<div>Bob needs access to the application server. After entering his password that creates his key, Bob‚Äôs computer constructs a package that consists of his user ID, the service he is requesting, and his IP address, all in cleartext. To prove that he is Bob, a timestamp (ts) is generated and encrypted.¬†
Drag and drop Bob‚Äôs key on the timestamp to encrypt it.

</div>
		<div>The entire package is sent over the unsecured network to the authentication server.
When the AS receives the package, it sees someone claiming to be Bob.
Use the proper key to decrypt the timestamp.</div>
		<div>7/16</div>
		<div>Drag and drop the appropriate key to decrypt the timestamp</div>
		<div>Does Bob Exist?</div>
		<div>Drag and drop Bob's key on the timestamp to encrypt it.</div>
		<div>Drag and drop the appropriate AS key on the first package to encrypt it.</div>
		<div>The authentication server creates two packages. The first package contains a random short-lived session key shown in red, a timestamp, the TGS name and an expiration. This package is going back to Bob. Drag and drop the proper AS key on the first package to encrypt it.

The second package is the ticket granting ticket (TGT). The TGT consists of the red session key, Bob‚Äôs user ID, the TGS name, a timestamp, Bob‚Äôs IP address, and an expiration. Session keys and encryption both require an imposed lifetime. The more time available to a hacker to decipher encryption keys or ciphertext, the more likely the chance of success. Timestamps also mitigate the risk of a hacker capturing Kerberos traffic and replaying it back to the KDC later.</div>
		<div>Generating the TGT</div>
		<div>Session key

a randomly generated key to ensure the security of a series of interactions between two communication endpoints (a user and computer)¬†</div>
		<div>8/16</div>
		<div>The authentication server uses the TGS‚Äôs black key to encrypt and protect the TGT. Both packages are sent to Bob.

Bob receives the packages.

Decrypt the first package using the appropriate key.
</div>
		<div>Drag and drop the appropriate key to decrypt the first package.</div>
		<div>Yes</div>
		<div>No</div>
		<div>The TGS Session Key</div>
		<div>Bob now has the red session key and the name of the ticket granting server.</div>
		<div>Q: Can Bob decrypt the TGT?</div>
		<div>Bob cannot decrypt the TGT since it was encrypted with the ticket granting server‚Äôs black key.</div>
		<div>9/16</div>
		<div>10/16</div>
		<div>Requesting Access to a Service</div>
		<div>Bob creates a new package with his user ID and a timestamp and encrypts this package with the red session key. Bob also creates a cleartext message stating that he needs access to the application server. All three packages go on to the ticket granting server (TGS). Bob keeps a copy of the red session key and the TGT.</div>
		<div>I need access to APP1</div>
		<div>Drag and drop the appropriate key¬†to decrypt the packages at the TGS</div>
		<div>11/16</div>
		<div>Q: Which package gets decrypted first at the TGS?</div>
		<div>Perform the next step by using the appropriate key to decrypt the packages at the TGS.

Now that the ticket granting server also has a copy of the red session key, the TGS uses it to decrypt Bob‚Äôs message.

The ticket granting server compares the two packages. If they match, it means that Bob sent the packages AND Bob properly checked out with the authentication server.</div>
		<div>user package</div>
		<div>TGT</div>
		<div>Verify the Service Request</div>
		<div>service request</div>
		<div>The Service Session Key</div>
		<div>The TGS will fulfill Bob‚Äôs request to access the application server, APP1. The TGS gets the application server‚Äôs gold key from the AS. The TGS then creates two packages. The first one, the Service Ticket, contains a second randomly generated session key (the green key), Bob‚Äôs ID, his IP address, the timestamp, and the expiration. The TGS uses APP1‚Äôs gold key to encrypt the package.

The second package contains the green session key, the application server name, a timestamp and an expiration. Both packages are going back to Bob.
Drag and drop the appropriate key from the TGS to encrypt the second package.</div>
		<div>12/16</div>
		<div>Drag and drop the appropriate key¬†to encrypt the second package</div>
		<div>service ticket</div>
		<div>13/16</div>
		<div>Use the appropriate key to decrypt the necessary package.

After decrypting the package, Bob gets the green session key. Now Bob needs to prove to the application server that he is user BobV.</div>
		<div>Q: What package should Bob decrypt first?</div>
		<div>Package containing APP server name</div>
		<div>Drag and drop the appropriate key¬†to decrypt the necessary package</div>
		<div>14/16</div>
		<div>I am Bob</div>
		<div>Bob creates a new package with his user ID and a timestamp. This package will be sent to APP1.

Use the appropriate key to encrypt the new package.

Both packages get sent to the application server. Bob maintains a copy of the Service Ticket and the session key just in case he needs to repeat the process in the near future.

¬†At all stages, only the KDC can read the TGT and only the service, APP1, can read the Service Ticket.</div>
		<div>Drag and drop the appropriate key¬†to encrypt the new package</div>
		<div>Drag and drop the appropriate keys in the proper sequence to decrypt the packages.</div>
		<div>HINT</div>
		<div>First decrypt the Service Ticket using the gold key. APP1 now has the green session key, so you can decrypt the second package proving that the user on the other end is BobV.</div>
		<div>Drag and drop the appropriate key ito decrypt the package.</div>
		<div>It is Bob</div>
		<div>The application server now has both packages.

Use the appropriate keys in the proper sequence to decrypt the packages.</div>
		<div>15/16</div>
		<div>16/16</div>
		<div>Bob now knows that the application server, APP1, is on the other end. Since Bob cached the Service Ticket, he can use that to re-authenticate for any subsequent visits back to APP1 if he is within the expiration time period. Bob also cached the TGT which means that if he authenticates to another application server, he can present that TGT back to the ticket granting server. The process to issue a service ticket would be repeated in the background and Bob does not have to enter his password again if he is within the expiration period.</div>
		<div>Drag and drop the appropriate key to decrypt the package.</div>
		<div>To prove its identity to Bob, the application server creates a new package.
Encrypt the new package with the appropriate key.
</div>
		<div>Proving the Identity of APP1</div>
		<div>Drag and drop the appropriate key to encrypt the package.</div>
		<div>Bob receives the package.
Use the appropriate key when Bob receives it to decrypt.
</div>

	</div>

	<!-- end text content: -->

    </div>
    <footer class="hexworth-footer">
        <p>Educational content powered by <a href="https://www.myemates.com" target="_blank">myEMATES</a> |
        NSF Grant #DUE 1601612 |
        <a href="../../../catalog.html">‚Üê Back to Catalog</a></p>
    </footer>
</div>
</body>
</html>
