<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows Edition Selector - House of the Forge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #0d0d12 0%, #1a1520 50%, #0d0d12 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #c4b5d4;
        }

        /* Header */
        .app-header {
            padding: 20px 40px;
            background: rgba(10, 10, 15, 0.9);
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .back-btn {
            padding: 8px 16px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 6px;
            color: #a78bfa;
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .app-title {
            font-size: 1.1rem;
            color: #e8d5f5;
            font-weight: 400;
        }

        .house-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.75rem;
            color: #8b7a9e;
            letter-spacing: 0.1em;
        }

        /* Main Content */
        .main-content {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .intro-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .intro-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .intro-title {
            font-size: 2rem;
            font-weight: 300;
            color: #e8d5f5;
            margin-bottom: 10px;
        }

        .intro-subtitle {
            font-size: 1rem;
            color: #8b7a9e;
        }

        /* Questionnaire */
        .questionnaire {
            background: rgba(20, 15, 30, 0.6);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 16px;
            padding: 30px;
        }

        .question-card {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .question-card.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-number {
            font-size: 0.75rem;
            color: #a78bfa;
            letter-spacing: 0.15em;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1.3rem;
            color: #e8d5f5;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .options-grid {
            display: grid;
            gap: 12px;
        }

        .option-btn {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 18px 20px;
            background: rgba(30, 25, 40, 0.6);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 10px;
            color: #c4b5d4;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .option-btn:hover {
            background: rgba(139, 92, 246, 0.1);
            border-color: rgba(139, 92, 246, 0.4);
            transform: translateX(5px);
        }

        .option-btn.selected {
            background: rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.6);
        }

        .option-icon {
            font-size: 1.5rem;
            width: 40px;
            text-align: center;
        }

        .option-content {
            flex: 1;
        }

        .option-title {
            font-weight: 500;
            color: #e8d5f5;
            margin-bottom: 3px;
        }

        .option-desc {
            font-size: 0.8rem;
            color: #8b7a9e;
        }

        /* Progress */
        .progress-section {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-bar-container {
            flex: 1;
            max-width: 300px;
            margin-right: 20px;
        }

        .progress-label {
            font-size: 0.75rem;
            color: #6b5b7e;
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 6px;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #a78bfa);
            transition: width 0.5s ease;
        }

        .nav-buttons {
            display: flex;
            gap: 12px;
        }

        .nav-btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn.secondary {
            background: transparent;
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #a78bfa;
        }

        .nav-btn.secondary:hover {
            background: rgba(139, 92, 246, 0.1);
        }

        .nav-btn.primary {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border: none;
            color: white;
        }

        .nav-btn.primary:hover {
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3);
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Results */
        .results-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .results-section.active {
            display: block;
        }

        .result-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .result-badge {
            display: inline-block;
            padding: 8px 20px;
            background: rgba(52, 211, 153, 0.15);
            border: 1px solid rgba(52, 211, 153, 0.3);
            border-radius: 20px;
            color: #34d399;
            font-size: 0.8rem;
            letter-spacing: 0.1em;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 2rem;
            color: #e8d5f5;
            margin-bottom: 10px;
        }

        .result-edition {
            font-size: 2.5rem;
            font-weight: 600;
            margin: 20px 0;
        }

        .result-edition.home { color: #60a5fa; }
        .result-edition.pro { color: #34d399; }
        .result-edition.enterprise { color: #f59e0b; }
        .result-edition.education { color: #ec4899; }

        .result-confidence {
            font-size: 0.9rem;
            color: #8b7a9e;
        }

        .result-details {
            background: rgba(30, 25, 40, 0.6);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .detail-section {
            margin-bottom: 25px;
        }

        .detail-section:last-child {
            margin-bottom: 0;
        }

        .detail-title {
            font-size: 0.9rem;
            color: #a78bfa;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .reason-list {
            list-style: none;
        }

        .reason-list li {
            padding: 10px 0;
            padding-left: 25px;
            position: relative;
            color: #c4b5d4;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(139, 92, 246, 0.1);
        }

        .reason-list li:last-child {
            border-bottom: none;
        }

        .reason-list li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #34d399;
        }

        .warning-list li::before {
            content: '‚ö†';
            color: #f59e0b;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(139, 92, 246, 0.05);
            border-radius: 8px;
            font-size: 0.85rem;
        }

        .feature-icon {
            font-size: 1.2rem;
        }

        /* Comparison Preview */
        .comparison-preview {
            margin-top: 30px;
        }

        .comparison-title {
            font-size: 1rem;
            color: #a78bfa;
            margin-bottom: 15px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .comparison-card {
            background: rgba(30, 25, 40, 0.6);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .comparison-card.recommended {
            border-color: #34d399;
            background: rgba(52, 211, 153, 0.1);
        }

        .comparison-card-name {
            font-size: 0.9rem;
            color: #e8d5f5;
            margin-bottom: 5px;
        }

        .comparison-card-price {
            font-size: 0.75rem;
            color: #6b5b7e;
        }

        .comparison-card-tag {
            display: inline-block;
            margin-top: 8px;
            padding: 3px 10px;
            background: rgba(52, 211, 153, 0.2);
            border-radius: 10px;
            font-size: 0.7rem;
            color: #34d399;
        }

        /* Actions */
        .result-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .action-btn {
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border: none;
            color: white;
        }

        .action-btn.secondary {
            background: transparent;
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #a78bfa;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .app-header {
                flex-direction: column;
                gap: 15px;
                padding: 15px 20px;
            }

            .main-content {
                padding: 20px 15px;
            }

            .questionnaire {
                padding: 20px;
            }

            .progress-section {
                flex-direction: column;
                gap: 20px;
            }

            .progress-bar-container {
                max-width: 100%;
                margin-right: 0;
            }

            .comparison-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .result-actions {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header class="app-header">
        <div class="header-left">
            <a href="../../dashboard.html" class="back-btn">‚Üê Back</a>
            <span class="app-title">Windows Edition Selector</span>
        </div>
        <div class="house-badge">
            <span>‚öíÔ∏è</span>
            <span>HOUSE OF THE FORGE</span>
        </div>
    </header>

    <main class="main-content">
        <section class="intro-section">
            <div class="intro-icon">ü™ü</div>
            <h1 class="intro-title">Find Your Perfect Windows Edition</h1>
            <p class="intro-subtitle">Answer a few questions and we'll recommend the best edition for your needs</p>
        </section>

        <div class="questionnaire" id="questionnaire">
            <!-- Question 1: Use Case -->
            <div class="question-card active" data-question="1">
                <div class="question-number">QUESTION 1 OF 6</div>
                <h2 class="question-text">What will this Windows installation primarily be used for?</h2>
                <div class="options-grid">
                    <button class="option-btn" data-value="personal" onclick="selectOption(this, 'useCase')">
                        <span class="option-icon">üè†</span>
                        <div class="option-content">
                            <div class="option-title">Personal / Home Use</div>
                            <div class="option-desc">Gaming, web browsing, personal projects</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="small-business" onclick="selectOption(this, 'useCase')">
                        <span class="option-icon">üíº</span>
                        <div class="option-content">
                            <div class="option-title">Small Business</div>
                            <div class="option-desc">1-50 employees, basic IT needs</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="enterprise" onclick="selectOption(this, 'useCase')">
                        <span class="option-icon">üè¢</span>
                        <div class="option-content">
                            <div class="option-title">Enterprise / Large Organization</div>
                            <div class="option-desc">50+ employees, dedicated IT team</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="education" onclick="selectOption(this, 'useCase')">
                        <span class="option-icon">üéì</span>
                        <div class="option-content">
                            <div class="option-title">Education</div>
                            <div class="option-desc">School, college, or university</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Question 2: Encryption -->
            <div class="question-card" data-question="2">
                <div class="question-number">QUESTION 2 OF 6</div>
                <h2 class="question-text">Do you need full-disk encryption (BitLocker)?</h2>
                <div class="options-grid">
                    <button class="option-btn" data-value="yes" onclick="selectOption(this, 'encryption')">
                        <span class="option-icon">üîê</span>
                        <div class="option-content">
                            <div class="option-title">Yes, encryption is required</div>
                            <div class="option-desc">Sensitive data, compliance requirements, or mobile devices</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="maybe" onclick="selectOption(this, 'encryption')">
                        <span class="option-icon">ü§î</span>
                        <div class="option-content">
                            <div class="option-title">Nice to have, but not required</div>
                            <div class="option-desc">Would use it if available</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="no" onclick="selectOption(this, 'encryption')">
                        <span class="option-icon">‚ùå</span>
                        <div class="option-content">
                            <div class="option-title">No encryption needed</div>
                            <div class="option-desc">Desktop computer, no sensitive data</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Question 3: Domain -->
            <div class="question-card" data-question="3">
                <div class="question-number">QUESTION 3 OF 6</div>
                <h2 class="question-text">Will this computer join an Active Directory domain?</h2>
                <div class="options-grid">
                    <button class="option-btn" data-value="yes" onclick="selectOption(this, 'domain')">
                        <span class="option-icon">üîó</span>
                        <div class="option-content">
                            <div class="option-title">Yes, domain-joined</div>
                            <div class="option-desc">Managed by Active Directory, Group Policy</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="azure" onclick="selectOption(this, 'domain')">
                        <span class="option-icon">‚òÅÔ∏è</span>
                        <div class="option-content">
                            <div class="option-title">Azure AD only</div>
                            <div class="option-desc">Cloud-based identity, no on-premises domain</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="no" onclick="selectOption(this, 'domain')">
                        <span class="option-icon">üè†</span>
                        <div class="option-content">
                            <div class="option-title">No domain (workgroup)</div>
                            <div class="option-desc">Standalone or home network</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Question 4: Remote Desktop -->
            <div class="question-card" data-question="4">
                <div class="question-number">QUESTION 4 OF 6</div>
                <h2 class="question-text">Do you need to host Remote Desktop connections TO this computer?</h2>
                <div class="options-grid">
                    <button class="option-btn" data-value="yes" onclick="selectOption(this, 'rdp')">
                        <span class="option-icon">üñ•Ô∏è</span>
                        <div class="option-content">
                            <div class="option-title">Yes, others will connect to this PC</div>
                            <div class="option-desc">Remote workers accessing office PC</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="no" onclick="selectOption(this, 'rdp')">
                        <span class="option-icon">üë§</span>
                        <div class="option-content">
                            <div class="option-title">No, or only connecting FROM this PC</div>
                            <div class="option-desc">Using RDP client to connect elsewhere</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Question 5: Advanced Security -->
            <div class="question-card" data-question="5">
                <div class="question-number">QUESTION 5 OF 6</div>
                <h2 class="question-text">Do you need advanced security features like AppLocker or Credential Guard?</h2>
                <div class="options-grid">
                    <button class="option-btn" data-value="yes" onclick="selectOption(this, 'advancedSecurity')">
                        <span class="option-icon">üõ°Ô∏è</span>
                        <div class="option-content">
                            <div class="option-title">Yes, we have strict security requirements</div>
                            <div class="option-desc">Regulatory compliance, high-security environment</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="no" onclick="selectOption(this, 'advancedSecurity')">
                        <span class="option-icon">‚úÖ</span>
                        <div class="option-content">
                            <div class="option-title">No, standard security is sufficient</div>
                            <div class="option-desc">Windows Defender and basic policies are enough</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Question 6: Budget -->
            <div class="question-card" data-question="6">
                <div class="question-number">QUESTION 6 OF 6</div>
                <h2 class="question-text">What's your budget consideration?</h2>
                <div class="options-grid">
                    <button class="option-btn" data-value="lowest" onclick="selectOption(this, 'budget')">
                        <span class="option-icon">üí∞</span>
                        <div class="option-content">
                            <div class="option-title">Lowest cost possible</div>
                            <div class="option-desc">Only pay for what's absolutely needed</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="balanced" onclick="selectOption(this, 'budget')">
                        <span class="option-icon">‚öñÔ∏è</span>
                        <div class="option-content">
                            <div class="option-title">Balanced - value for money</div>
                            <div class="option-desc">Willing to pay for necessary features</div>
                        </div>
                    </button>
                    <button class="option-btn" data-value="notConcern" onclick="selectOption(this, 'budget')">
                        <span class="option-icon">üíé</span>
                        <div class="option-content">
                            <div class="option-title">Budget is not a primary concern</div>
                            <div class="option-desc">Focus on getting the right features</div>
                        </div>
                    </button>
                </div>
            </div>

            <div class="progress-section">
                <div class="progress-bar-container">
                    <div class="progress-label">Progress</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="nav-buttons">
                    <button class="nav-btn secondary" id="prevBtn" onclick="prevQuestion()" disabled>‚Üê Back</button>
                    <button class="nav-btn primary" id="nextBtn" onclick="nextQuestion()" disabled>Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="results">
            <div class="result-header">
                <div class="result-badge">RECOMMENDATION</div>
                <h2 class="result-title">Based on your requirements, we recommend:</h2>
                <div class="result-edition" id="resultEdition">Windows Pro</div>
                <p class="result-confidence" id="resultConfidence">95% match for your needs</p>
            </div>

            <div class="result-details">
                <div class="detail-section">
                    <div class="detail-title">‚úÖ Why This Edition</div>
                    <ul class="reason-list" id="reasonList">
                        <!-- Populated by JS -->
                    </ul>
                </div>

                <div class="detail-section">
                    <div class="detail-title">üîß Key Features You'll Get</div>
                    <div class="feature-grid" id="featureGrid">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <div class="detail-section" id="warningSection" style="display: none;">
                    <div class="detail-title">‚ö†Ô∏è Things to Consider</div>
                    <ul class="reason-list warning-list" id="warningList">
                        <!-- Populated by JS -->
                    </ul>
                </div>
            </div>

            <div class="comparison-preview">
                <h3 class="comparison-title">Edition Comparison</h3>
                <div class="comparison-grid" id="comparisonGrid">
                    <!-- Populated by JS -->
                </div>
            </div>

            <div class="result-actions">
                <button class="action-btn secondary" onclick="restart()">
                    üîÑ Start Over
                </button>
                <a href="../presentations/windows-editions.html" class="action-btn primary">
                    üìö Learn More About Editions
                </a>
            </div>
        </div>
    </main>

    <script>
        // State
        let currentQuestion = 1;
        const totalQuestions = 6;
        const answers = {};

        // Edition data
        const editions = {
            home: {
                name: 'Windows Home',
                price: '~$139',
                features: ['Core Windows Experience', 'Microsoft Store', 'Windows Security', 'Cortana & Edge'],
                missing: ['BitLocker', 'Domain Join', 'Remote Desktop Host', 'Group Policy', 'Hyper-V']
            },
            pro: {
                name: 'Windows Pro',
                price: '~$199',
                features: ['Everything in Home', 'BitLocker Encryption', 'Remote Desktop Host', 'Domain Join', 'Group Policy', 'Hyper-V', 'Windows Sandbox'],
                missing: ['AppLocker', 'DirectAccess', 'Credential Guard (full)']
            },
            enterprise: {
                name: 'Windows Enterprise',
                price: 'Volume License',
                features: ['Everything in Pro', 'AppLocker', 'DirectAccess', 'Credential Guard', 'Windows Defender ATP', 'Branch Cache'],
                missing: []
            },
            education: {
                name: 'Windows Education',
                price: 'Academic License',
                features: ['Same as Enterprise', 'Academic Pricing', 'Education-optimized Settings'],
                missing: []
            }
        };

        function selectOption(button, questionKey) {
            // Remove previous selection
            const options = button.parentElement.querySelectorAll('.option-btn');
            options.forEach(opt => opt.classList.remove('selected'));

            // Select this option
            button.classList.add('selected');
            answers[questionKey] = button.dataset.value;

            // Enable next button
            document.getElementById('nextBtn').disabled = false;

            // Auto-advance after short delay
            setTimeout(() => {
                if (currentQuestion < totalQuestions) {
                    nextQuestion();
                } else {
                    showResults();
                }
            }, 300);
        }

        function nextQuestion() {
            if (currentQuestion < totalQuestions) {
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('active');
                currentQuestion++;
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.add('active');
                updateProgress();
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('prevBtn').disabled = false;
            } else {
                showResults();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 1) {
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('active');
                currentQuestion--;
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.add('active');
                updateProgress();
                document.getElementById('prevBtn').disabled = currentQuestion === 1;
                document.getElementById('nextBtn').disabled = false;
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion - 1) / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function calculateRecommendation() {
            let scores = { home: 0, pro: 0, enterprise: 0, education: 0 };
            let reasons = [];
            let warnings = [];

            // Use case scoring
            if (answers.useCase === 'personal') {
                scores.home += 3;
                reasons.push('Perfect for personal and home use');
            } else if (answers.useCase === 'small-business') {
                scores.pro += 3;
                reasons.push('Ideal for small business environments');
            } else if (answers.useCase === 'enterprise') {
                scores.enterprise += 3;
                reasons.push('Designed for large organizational needs');
            } else if (answers.useCase === 'education') {
                scores.education += 5;
                reasons.push('Education edition offers Enterprise features at academic pricing');
            }

            // Encryption requirement
            if (answers.encryption === 'yes') {
                scores.home -= 5; // Disqualify home
                scores.pro += 2;
                scores.enterprise += 2;
                scores.education += 2;
                reasons.push('BitLocker encryption is included');
            } else if (answers.encryption === 'maybe') {
                scores.pro += 1;
                scores.enterprise += 1;
            }

            // Domain requirement
            if (answers.domain === 'yes') {
                scores.home -= 5; // Disqualify home
                scores.pro += 2;
                scores.enterprise += 2;
                scores.education += 2;
                reasons.push('Supports Active Directory domain join');
            } else if (answers.domain === 'azure') {
                scores.pro += 1;
                scores.enterprise += 1;
            }

            // Remote Desktop Host
            if (answers.rdp === 'yes') {
                scores.home -= 5; // Disqualify home
                scores.pro += 2;
                scores.enterprise += 2;
                scores.education += 2;
                reasons.push('Can host Remote Desktop connections');
            }

            // Advanced Security
            if (answers.advancedSecurity === 'yes') {
                scores.home -= 3;
                scores.pro -= 1;
                scores.enterprise += 3;
                scores.education += 3;
                reasons.push('Includes AppLocker and Credential Guard');
            }

            // Budget consideration
            if (answers.budget === 'lowest') {
                scores.home += 2;
                scores.enterprise -= 1;
                if (scores.home > 0) {
                    warnings.push('Home edition may lack features you need - verify requirements');
                }
            } else if (answers.budget === 'balanced') {
                scores.pro += 1;
            }

            // Find winner
            let winner = 'pro'; // default
            let maxScore = scores.pro;

            for (let edition in scores) {
                if (scores[edition] > maxScore) {
                    maxScore = scores[edition];
                    winner = edition;
                }
            }

            // Add edition-specific warnings
            if (winner === 'home') {
                if (answers.encryption === 'maybe') {
                    warnings.push('Consider Pro if encryption becomes important later');
                }
            } else if (winner === 'enterprise') {
                warnings.push('Requires volume licensing agreement - not available for individual purchase');
            } else if (winner === 'education') {
                warnings.push('Requires proof of educational institution affiliation');
            }

            // Calculate confidence
            const totalScore = Object.values(scores).reduce((a, b) => Math.abs(a) + Math.abs(b), 0);
            const confidence = Math.min(95, Math.round((maxScore / totalScore) * 100 + 50));

            return { recommendation: winner, confidence, reasons, warnings, scores };
        }

        function showResults() {
            const result = calculateRecommendation();

            // Hide questionnaire, show results
            document.getElementById('questionnaire').style.display = 'none';
            document.getElementById('results').classList.add('active');

            // Set edition name
            const editionEl = document.getElementById('resultEdition');
            editionEl.textContent = editions[result.recommendation].name;
            editionEl.className = 'result-edition ' + result.recommendation;

            // Set confidence
            document.getElementById('resultConfidence').textContent = `${result.confidence}% match for your needs`;

            // Populate reasons
            const reasonList = document.getElementById('reasonList');
            reasonList.innerHTML = result.reasons.map(r => `<li>${r}</li>`).join('');

            // Populate features
            const featureGrid = document.getElementById('featureGrid');
            const features = editions[result.recommendation].features;
            featureGrid.innerHTML = features.map(f => `
                <div class="feature-item">
                    <span class="feature-icon">‚úì</span>
                    <span>${f}</span>
                </div>
            `).join('');

            // Populate warnings
            if (result.warnings.length > 0) {
                document.getElementById('warningSection').style.display = 'block';
                document.getElementById('warningList').innerHTML = result.warnings.map(w => `<li>${w}</li>`).join('');
            }

            // Populate comparison
            const comparisonGrid = document.getElementById('comparisonGrid');
            comparisonGrid.innerHTML = ['home', 'pro', 'enterprise', 'education'].map(ed => `
                <div class="comparison-card ${ed === result.recommendation ? 'recommended' : ''}">
                    <div class="comparison-card-name">${editions[ed].name.replace('Windows ', '')}</div>
                    <div class="comparison-card-price">${editions[ed].price}</div>
                    ${ed === result.recommendation ? '<span class="comparison-card-tag">Recommended</span>' : ''}
                </div>
            `).join('');

            // Save to progress
            saveProgress(result.recommendation);
        }

        function restart() {
            currentQuestion = 1;
            Object.keys(answers).forEach(key => delete answers[key]);

            document.querySelectorAll('.question-card').forEach(card => card.classList.remove('active'));
            document.querySelector('[data-question="1"]').classList.add('active');
            document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));

            document.getElementById('questionnaire').style.display = 'block';
            document.getElementById('results').classList.remove('active');
            document.getElementById('prevBtn').disabled = true;
            document.getElementById('nextBtn').disabled = true;

            updateProgress();
        }

        function saveProgress(recommendation) {
            const progress = JSON.parse(localStorage.getItem('hexworth_progress') || '{}');
            progress.forge = progress.forge || {};
            progress.forge.editionSelector = {
                completed: true,
                recommendation: recommendation,
                date: new Date().toISOString()
            };
            localStorage.setItem('hexworth_progress', JSON.stringify(progress));
        }

        // Initialize
        updateProgress();
    </script>
</body>
</html>
