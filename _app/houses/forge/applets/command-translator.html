<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-Platform Command Translator | A+ Core 2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(30, 30, 45, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .aplus-badge {
            background: #ff6b6b;
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        h1 {
            color: white;
            font-size: 28px;
            font-weight: 600;
        }

        .home-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 10px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .home-btn:hover {
            background: white;
            color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.3);
        }

        /* Control Panel */
        .control-panel {
            padding: 30px;
            background: rgba(40, 40, 60, 0.5);
            border-bottom: 2px solid rgba(102, 126, 234, 0.3);
        }

        .controls {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .control-group {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #a0a0ff;
        }

        select, input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(50, 50, 70, 0.8);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.4);
        }

        .mode-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 10px 20px;
            background: rgba(102, 126, 234, 0.2);
            border: 2px solid rgba(102, 126, 234, 0.5);
            color: #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .mode-btn:hover {
            background: rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
        }

        .mode-btn.active {
            background: #667eea;
            border-color: #667eea;
            color: white;
        }

        /* Category Tabs */
        .category-tabs {
            display: flex;
            gap: 10px;
            padding: 20px 30px 0;
            overflow-x: auto;
            background: rgba(30, 30, 45, 0.5);
        }

        .category-tab {
            padding: 12px 24px;
            background: rgba(50, 50, 70, 0.6);
            border: none;
            border-radius: 8px 8px 0 0;
            color: #a0a0a0;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-weight: 600;
        }

        .category-tab:hover {
            background: rgba(102, 126, 234, 0.3);
            color: #e0e0e0;
        }

        .category-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        /* Output Section */
        .output-section {
            padding: 30px;
            min-height: 400px;
        }

        .translation-output {
            background: rgba(50, 50, 70, 0.4);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .translation-output h2 {
            color: #a0a0ff;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .command-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .command-box {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .os-label {
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .command-text {
            background: rgba(0, 0, 0, 0.4);
            padding: 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            color: #4ade80;
            font-size: 14px;
            margin-bottom: 10px;
            word-break: break-all;
            min-height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .copy-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .copy-btn:active {
            transform: translateY(0);
        }

        /* Command Table */
        .command-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .command-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .command-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
        }

        .command-table tr {
            background: rgba(50, 50, 70, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .command-table tr:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateX(5px);
        }

        .command-table code {
            background: rgba(0, 0, 0, 0.4);
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #4ade80;
        }

        .favorite-btn {
            background: transparent;
            border: none;
            color: #fbbf24;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .favorite-btn:hover {
            transform: scale(1.3);
        }

        .favorite-btn.active {
            color: #f59e0b;
            text-shadow: 0 0 10px #fbbf24;
        }

        /* Detail Panel */
        .detail-panel {
            background: rgba(50, 50, 70, 0.6);
            border: 2px solid rgba(102, 126, 234, 0.4);
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
            display: none;
        }

        .detail-panel.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .detail-panel h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 22px;
        }

        .detail-section {
            margin-bottom: 20px;
        }

        .detail-section h4 {
            color: #a0a0ff;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .detail-section pre {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            color: #4ade80;
            font-family: 'Courier New', monospace;
        }

        .close-detail {
            float: right;
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Quick Reference */
        .quick-reference {
            background: rgba(40, 40, 60, 0.5);
            padding: 30px;
            border-top: 2px solid rgba(102, 126, 234, 0.3);
        }

        .quick-reference h3 {
            color: #a0a0ff;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .quick-commands {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .quick-command {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 15px;
        }

        .quick-command strong {
            color: #667eea;
            display: block;
            margin-bottom: 8px;
        }

        .quick-command code {
            background: rgba(0, 0, 0, 0.4);
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #4ade80;
            font-size: 12px;
        }

        /* Exam Tips */
        .exam-tips {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .exam-tips h4 {
            color: white;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .exam-tips ul {
            list-style: none;
            padding-left: 0;
        }

        .exam-tips li {
            color: white;
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .exam-tips li:before {
            content: "✓";
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        /* Quiz Mode */
        .quiz-container {
            background: rgba(50, 50, 70, 0.6);
            border: 2px solid rgba(102, 126, 234, 0.4);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
        }

        .quiz-question {
            font-size: 24px;
            color: #a0a0ff;
            margin-bottom: 20px;
        }

        .quiz-command {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            color: #4ade80;
            font-size: 20px;
            margin-bottom: 30px;
        }

        .quiz-input {
            width: 100%;
            max-width: 500px;
            margin: 10px auto;
        }

        .quiz-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .quiz-result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
        }

        .quiz-result.correct {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
            border: 2px solid #4ade80;
        }

        .quiz-result.incorrect {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 2px solid #ef4444;
        }

        /* Export Button */
        .export-btn {
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 222, 128, 0.4);
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 40px;
            color: #a0a0a0;
            font-size: 18px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                padding: 20px;
            }

            h1 {
                font-size: 22px;
            }

            .command-grid {
                grid-template-columns: 1fr;
            }

            .control-group {
                min-width: 100%;
            }

            .category-tabs {
                padding: 15px;
            }

            .command-table {
                font-size: 14px;
            }

            .command-table th,
            .command-table td {
                padding: 8px;
            }

            .quick-commands {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: rgba(0, 0, 0, 0.9);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <div class="aplus-badge">A+</div>
                <h1>Cross-Platform Command Translator</h1>
            </div>
            <a href="../../../index.html" class="home-btn">Home</a>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <div class="controls">
                <div class="control-group">
                    <label for="sourceOS">Source Operating System:</label>
                    <select id="sourceOS">
                        <option value="windows">Windows</option>
                        <option value="macos">macOS</option>
                        <option value="linux">Linux</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="searchCommand">Search Command:</label>
                    <input type="text" id="searchCommand" placeholder="Type a command (e.g., ipconfig, ls, grep)">
                </div>
            </div>
            <div class="mode-buttons">
                <button class="mode-btn active" data-mode="browse">Browse Commands</button>
                <button class="mode-btn" data-mode="quiz">Quiz Mode</button>
                <button class="mode-btn" data-mode="favorites">Favorites</button>
                <button class="export-btn" id="exportBtn">Export Cheat Sheet</button>
            </div>
        </div>

        <!-- Category Tabs -->
        <div class="category-tabs" id="categoryTabs">
            <button class="category-tab active" data-category="all">All Commands</button>
            <button class="category-tab" data-category="file">File Operations</button>
            <button class="category-tab" data-category="system">System Info</button>
            <button class="category-tab" data-category="network">Network</button>
            <button class="category-tab" data-category="user">User Management</button>
            <button class="category-tab" data-category="disk">Disk & Storage</button>
            <button class="category-tab" data-category="service">Service/Process</button>
        </div>

        <!-- Output Section -->
        <div class="output-section" id="outputSection">
            <!-- Translation Output (shown when command selected) -->
            <div class="translation-output" id="translationOutput" style="display: none;">
                <h2>Command Translation</h2>
                <div class="command-grid">
                    <div class="command-box">
                        <div class="os-label">Windows</div>
                        <div class="command-text" id="windowsCmd">-</div>
                        <button class="copy-btn" onclick="copyCommand('windows')">Copy</button>
                    </div>
                    <div class="command-box">
                        <div class="os-label">macOS</div>
                        <div class="command-text" id="macosCmd">-</div>
                        <button class="copy-btn" onclick="copyCommand('macos')">Copy</button>
                    </div>
                    <div class="command-box">
                        <div class="os-label">Linux</div>
                        <div class="command-text" id="linuxCmd">-</div>
                        <button class="copy-btn" onclick="copyCommand('linux')">Copy</button>
                    </div>
                </div>
            </div>

            <!-- Detail Panel -->
            <div class="detail-panel" id="detailPanel">
                <button class="close-detail" onclick="closeDetail()">Close</button>
                <h3 id="detailTitle">Command Details</h3>
                <div class="detail-section">
                    <h4>Description:</h4>
                    <p id="detailDescription"></p>
                </div>
                <div class="detail-section">
                    <h4>Syntax & Examples:</h4>
                    <pre id="detailExamples"></pre>
                </div>
                <div class="detail-section">
                    <h4>OS-Specific Notes:</h4>
                    <p id="detailNotes"></p>
                </div>
            </div>

            <!-- Command Table -->
            <div id="commandTableContainer">
                <table class="command-table" id="commandTable">
                    <thead>
                        <tr>
                            <th style="width: 40px;">⭐</th>
                            <th>Windows</th>
                            <th>macOS</th>
                            <th>Linux</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody id="commandTableBody">
                        <!-- Commands will be inserted here -->
                    </tbody>
                </table>
            </div>

            <!-- Quiz Mode Container -->
            <div class="quiz-container" id="quizContainer" style="display: none;">
                <div class="quiz-question" id="quizQuestion"></div>
                <div class="quiz-command" id="quizCommand"></div>
                <div>
                    <input type="text" class="quiz-input" id="quizInput1" placeholder="Enter equivalent command">
                    <input type="text" class="quiz-input" id="quizInput2" placeholder="Enter equivalent command">
                </div>
                <div>
                    <button class="quiz-btn" onclick="checkQuizAnswer()">Check Answer</button>
                    <button class="quiz-btn" onclick="skipQuiz()">Skip</button>
                    <button class="quiz-btn" onclick="revealAnswer()">Reveal Answer</button>
                </div>
                <div class="quiz-result" id="quizResult"></div>
            </div>
        </div>

        <!-- Quick Reference -->
        <div class="quick-reference">
            <h3>Top 10 Essential Commands for A+ Exam</h3>
            <div class="quick-commands">
                <div class="quick-command">
                    <strong>Network Configuration</strong>
                    <div>Win: <code>ipconfig</code> | Mac/Linux: <code>ifconfig / ip addr</code></div>
                </div>
                <div class="quick-command">
                    <strong>List Files</strong>
                    <div>Win: <code>dir</code> | Mac/Linux: <code>ls</code></div>
                </div>
                <div class="quick-command">
                    <strong>Check Connectivity</strong>
                    <div>All: <code>ping [host]</code></div>
                </div>
                <div class="quick-command">
                    <strong>View Processes</strong>
                    <div>Win: <code>tasklist</code> | Mac/Linux: <code>ps aux</code></div>
                </div>
                <div class="quick-command">
                    <strong>Copy Files</strong>
                    <div>Win: <code>copy</code> | Mac/Linux: <code>cp</code></div>
                </div>
                <div class="quick-command">
                    <strong>DNS Lookup</strong>
                    <div>Win: <code>nslookup</code> | Mac/Linux: <code>dig / nslookup</code></div>
                </div>
                <div class="quick-command">
                    <strong>Trace Route</strong>
                    <div>Win: <code>tracert</code> | Mac/Linux: <code>traceroute</code></div>
                </div>
                <div class="quick-command">
                    <strong>System Info</strong>
                    <div>Win: <code>systeminfo</code> | Mac: <code>system_profiler</code> | Linux: <code>uname -a</code></div>
                </div>
                <div class="quick-command">
                    <strong>Delete File</strong>
                    <div>Win: <code>del</code> | Mac/Linux: <code>rm</code></div>
                </div>
                <div class="quick-command">
                    <strong>Run as Admin/Root</strong>
                    <div>Win: <code>runas</code> | Mac/Linux: <code>sudo</code></div>
                </div>
            </div>

            <div class="exam-tips">
                <h4>A+ Core 2 Exam Tips:</h4>
                <ul>
                    <li>Know the difference between ipconfig (Windows) and ifconfig/ip addr (Unix-like)</li>
                    <li>Remember: tracert (Windows) vs traceroute (Mac/Linux)</li>
                    <li>Understand sudo for Mac/Linux privilege escalation vs runas for Windows</li>
                    <li>Know when to use /s switch in Windows vs -r flag in Unix commands</li>
                    <li>Be familiar with netstat, nslookup, and ping across all platforms</li>
                    <li>Remember that some commands are OS-specific (nbtstat is Windows only)</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Command Database
        const commandDatabase = [
            // File Operations
            { category: 'file', windows: 'dir', macos: 'ls', linux: 'ls', description: 'List directory contents',
              details: 'Lists files and directories in the current location.',
              examples: 'Windows: dir\nWindows: dir /w (wide format)\n\nmacOS/Linux: ls\nmacOS/Linux: ls -l (long format)',
              notes: 'Windows dir shows more details by default. Unix ls needs -l flag for detailed view.' },

            { category: 'file', windows: 'dir /a', macos: 'ls -la', linux: 'ls -la', description: 'List all files including hidden',
              details: 'Shows all files including hidden system files.',
              examples: 'Windows: dir /a\nWindows: dir /a:h (hidden only)\n\nmacOS/Linux: ls -la\nmacOS/Linux: ls -a (hidden only)',
              notes: 'Hidden files start with . on Unix systems. Windows uses file attributes.' },

            { category: 'file', windows: 'copy', macos: 'cp', linux: 'cp', description: 'Copy file',
              details: 'Copies files from one location to another.',
              examples: 'Windows: copy source.txt dest.txt\nWindows: copy *.txt backup\\\n\nmacOS/Linux: cp source.txt dest.txt\nmacOS/Linux: cp *.txt backup/',
              notes: 'Use xcopy or cp -r for directories.' },

            { category: 'file', windows: 'xcopy /e', macos: 'cp -r', linux: 'cp -r', description: 'Copy directory recursively',
              details: 'Copies entire directory structure including subdirectories.',
              examples: 'Windows: xcopy /e /i source dest\nWindows: xcopy /s (skip empty dirs)\n\nmacOS/Linux: cp -r source dest\nmacOS/Linux: cp -a (preserve attributes)',
              notes: 'xcopy has many switches. cp -r is simpler but powerful.' },

            { category: 'file', windows: 'move', macos: 'mv', linux: 'mv', description: 'Move or rename file',
              details: 'Moves files to new location or renames them.',
              examples: 'Windows: move file.txt newdir\\\nWindows: move old.txt new.txt\n\nmacOS/Linux: mv file.txt newdir/\nmacOS/Linux: mv old.txt new.txt',
              notes: 'Same command for move and rename on all systems.' },

            { category: 'file', windows: 'del', macos: 'rm', linux: 'rm', description: 'Delete file',
              details: 'Permanently deletes files.',
              examples: 'Windows: del file.txt\nWindows: del /f (force)\n\nmacOS/Linux: rm file.txt\nmacOS/Linux: rm -f (force)',
              notes: 'BE CAREFUL! Deletion is usually permanent. No recycle bin from command line.' },

            { category: 'file', windows: 'rmdir /s', macos: 'rm -rf', linux: 'rm -rf', description: 'Delete directory recursively',
              details: 'Removes directory and all its contents.',
              examples: 'Windows: rmdir /s /q dirname\n(/q for quiet)\n\nmacOS/Linux: rm -rf dirname\n(r=recursive, f=force)',
              notes: 'EXTREMELY DANGEROUS! Double-check before using. Can delete entire systems.' },

            { category: 'file', windows: 'mkdir', macos: 'mkdir', linux: 'mkdir', description: 'Create directory',
              details: 'Creates a new directory.',
              examples: 'Windows: mkdir newdir\nWindows: mkdir "dir with spaces"\n\nmacOS/Linux: mkdir newdir\nmacOS/Linux: mkdir -p path/to/dir',
              notes: 'Use -p flag in Unix to create parent directories if needed.' },

            { category: 'file', windows: 'type', macos: 'cat', linux: 'cat', description: 'Display file contents',
              details: 'Outputs the entire contents of a text file.',
              examples: 'Windows: type file.txt\nWindows: type file.txt | more\n\nmacOS/Linux: cat file.txt\nmacOS/Linux: cat file1.txt file2.txt',
              notes: 'cat can concatenate multiple files. type shows one file at a time.' },

            { category: 'file', windows: 'more', macos: 'more / less', linux: 'more / less', description: 'Page through file',
              details: 'Displays file contents one screen at a time.',
              examples: 'Windows: more file.txt\nWindows: type file.txt | more\n\nmacOS/Linux: less file.txt\n(less has more features)',
              notes: 'less is better than more on Unix - allows backward navigation.' },

            { category: 'file', windows: 'find "text" file', macos: 'grep "text" file', linux: 'grep "text" file', description: 'Search in file',
              details: 'Searches for text within files.',
              examples: 'Windows: find "error" log.txt\nWindows: find /i "error" (ignore case)\n\nmacOS/Linux: grep "error" log.txt\nmacOS/Linux: grep -i "error" (ignore case)',
              notes: 'grep is more powerful with regex support.' },

            { category: 'file', windows: 'findstr', macos: 'grep', linux: 'grep', description: 'Search pattern in files',
              details: 'Searches for patterns across multiple files.',
              examples: 'Windows: findstr /s "error" *.log\nWindows: findstr /i (ignore case)\n\nmacOS/Linux: grep -r "error" *.log\nmacOS/Linux: grep -E (extended regex)',
              notes: 'findstr supports basic regex. grep is more feature-rich.' },

            { category: 'file', windows: 'ren', macos: 'mv', linux: 'mv', description: 'Rename file',
              details: 'Renames a file or directory.',
              examples: 'Windows: ren oldname.txt newname.txt\n\nmacOS/Linux: mv oldname.txt newname.txt',
              notes: 'Windows has separate ren command. Unix uses mv for both move and rename.' },

            { category: 'file', windows: 'attrib', macos: 'chmod', linux: 'chmod', description: 'Change file attributes/permissions',
              details: 'Modifies file attributes or permissions.',
              examples: 'Windows: attrib +r file.txt (read-only)\nWindows: attrib +h (hidden)\n\nmacOS/Linux: chmod 755 file.txt\nmacOS/Linux: chmod u+x file.txt',
              notes: 'Windows uses attributes (+r, +h). Unix uses numeric or symbolic permissions.' },

            { category: 'file', windows: 'tree', macos: 'find . -type d', linux: 'tree', description: 'Display directory tree',
              details: 'Shows directory structure in tree format.',
              examples: 'Windows: tree\nWindows: tree /f (include files)\n\nLinux: tree\nmacOS: find . -type d (or install tree)',
              notes: 'tree may need to be installed on macOS/Linux via package manager.' },

            // System Information
            { category: 'system', windows: 'systeminfo', macos: 'system_profiler', linux: 'uname -a', description: 'System information',
              details: 'Displays detailed system configuration information.',
              examples: 'Windows: systeminfo\nWindows: systeminfo | findstr OS\n\nmacOS: system_profiler SPHardwareDataType\n\nLinux: uname -a\nLinux: lsb_release -a',
              notes: 'Each OS has different output format. systeminfo is most detailed.' },

            { category: 'system', windows: 'hostname', macos: 'hostname', linux: 'hostname', description: 'Display computer name',
              details: 'Shows the network name of the computer.',
              examples: 'All systems: hostname\n\nWindows: hostname\n\nmacOS/Linux: hostname -f (FQDN)',
              notes: 'Same command across all platforms. Very useful for network identification.' },

            { category: 'system', windows: 'ver', macos: 'sw_vers', linux: 'uname -r', description: 'OS version',
              details: 'Displays operating system version information.',
              examples: 'Windows: ver\n\nmacOS: sw_vers\nmacOS: sw_vers -productVersion\n\nLinux: uname -r\nLinux: cat /etc/os-release',
              notes: 'Each OS has different version reporting mechanisms.' },

            { category: 'system', windows: 'whoami', macos: 'whoami', linux: 'whoami', description: 'Current username',
              details: 'Shows the currently logged-in user.',
              examples: 'All systems: whoami\n\nWindows: whoami /user (SID info)\n\nmacOS/Linux: whoami\nmacOS/Linux: id (more details)',
              notes: 'Universal command. Windows version has additional options.' },

            { category: 'system', windows: 'tasklist', macos: 'ps aux', linux: 'ps aux', description: 'List running processes',
              details: 'Shows all currently running processes.',
              examples: 'Windows: tasklist\nWindows: tasklist /v (verbose)\n\nmacOS/Linux: ps aux\nmacOS/Linux: ps -ef\nmacOS/Linux: top (interactive)',
              notes: 'ps aux shows all processes for all users. tasklist is Windows-specific.' },

            { category: 'system', windows: 'taskkill', macos: 'kill', linux: 'kill', description: 'Terminate process',
              details: 'Forcefully ends a running process.',
              examples: 'Windows: taskkill /PID 1234\nWindows: taskkill /IM process.exe /F\n\nmacOS/Linux: kill 1234\nmacOS/Linux: kill -9 1234 (force)',
              notes: 'taskkill uses process name or PID. kill uses PID or process name with pkill.' },

            { category: 'system', windows: 'shutdown /s', macos: 'shutdown -h now', linux: 'shutdown -h now', description: 'Shutdown computer',
              details: 'Powers off the computer.',
              examples: 'Windows: shutdown /s /t 0\nWindows: shutdown /s /t 60 (60 sec delay)\n\nmacOS/Linux: shutdown -h now\nmacOS/Linux: sudo shutdown -h +10',
              notes: 'Windows uses /s flag. Unix uses -h (halt). Requires admin/root privileges.' },

            { category: 'system', windows: 'shutdown /r', macos: 'shutdown -r now', linux: 'reboot', description: 'Restart computer',
              details: 'Reboots the system.',
              examples: 'Windows: shutdown /r /t 0\nWindows: shutdown /r /t 30\n\nmacOS: shutdown -r now\n\nLinux: reboot\nLinux: shutdown -r now',
              notes: 'Windows uses /r. macOS uses -r. Linux can use reboot command.' },

            // Network Commands
            { category: 'network', windows: 'ipconfig', macos: 'ifconfig / ip addr', linux: 'ip addr', description: 'Network configuration',
              details: 'Displays network interface configuration.',
              examples: 'Windows: ipconfig\nWindows: ipconfig /all\n\nmacOS: ifconfig\nmacOS: ifconfig en0\n\nLinux: ip addr\nLinux: ip addr show',
              notes: 'CRITICAL for A+ exam! ipconfig is Windows-only. Modern Linux uses ip command.' },

            { category: 'network', windows: 'ipconfig /all', macos: 'ifconfig -a', linux: 'ip addr show', description: 'Detailed network info',
              details: 'Shows complete network adapter details including MAC, DNS, DHCP.',
              examples: 'Windows: ipconfig /all\n\nmacOS: ifconfig -a\n\nLinux: ip addr show\nLinux: ifconfig -a',
              notes: 'Shows MAC addresses, DNS servers, DHCP status - essential for troubleshooting.' },

            { category: 'network', windows: 'ipconfig /release', macos: 'sudo dhclient -r', linux: 'sudo dhclient -r', description: 'Release DHCP lease',
              details: 'Releases the current DHCP IP address.',
              examples: 'Windows: ipconfig /release\n\nmacOS/Linux: sudo dhclient -r\nmacOS: sudo ipconfig set en0 DHCP (alternative)',
              notes: 'Used for network troubleshooting. Often followed by /renew or dhclient.' },

            { category: 'network', windows: 'ipconfig /renew', macos: 'sudo dhclient', linux: 'sudo dhclient', description: 'Renew DHCP lease',
              details: 'Requests a new IP address from DHCP server.',
              examples: 'Windows: ipconfig /renew\n\nmacOS/Linux: sudo dhclient\nmacOS: sudo ipconfig set en0 DHCP',
              notes: 'Common troubleshooting step. Release then renew to refresh IP.' },

            { category: 'network', windows: 'ping', macos: 'ping', linux: 'ping', description: 'Test network connectivity',
              details: 'Tests reachability of a host and measures round-trip time.',
              examples: 'All systems: ping google.com\n\nWindows: ping -t (continuous)\n\nmacOS/Linux: ping -c 4 (count)\nmacOS/Linux: ping -i 2 (interval)',
              notes: 'Universal command. Windows pings 4 times by default. Unix continues until stopped.' },

            { category: 'network', windows: 'tracert', macos: 'traceroute', linux: 'traceroute', description: 'Trace network route',
              details: 'Shows the path packets take to reach a destination.',
              examples: 'Windows: tracert google.com\n\nmacOS/Linux: traceroute google.com\nmacOS/Linux: traceroute -I (use ICMP)',
              notes: 'IMPORTANT: tracert vs traceroute! Common A+ exam question.' },

            { category: 'network', windows: 'nslookup', macos: 'nslookup / dig', linux: 'dig', description: 'DNS lookup',
              details: 'Queries DNS to resolve domain names to IP addresses.',
              examples: 'All systems: nslookup google.com\n\nWindows: nslookup google.com 8.8.8.8\n\nUnix: dig google.com\nUnix: dig @8.8.8.8 google.com',
              notes: 'nslookup works on all platforms. dig is more powerful but Unix-only.' },

            { category: 'network', windows: 'netstat', macos: 'netstat', linux: 'ss / netstat', description: 'Network statistics',
              details: 'Shows active connections, listening ports, and routing tables.',
              examples: 'All: netstat -a (all connections)\n\nWindows: netstat -ano\n\nmacOS/Linux: netstat -tulpn\nLinux: ss -tulpn (modern)',
              notes: 'ss is replacing netstat on Linux. Shows sockets and connections.' },

            { category: 'network', windows: 'arp -a', macos: 'arp -a', linux: 'arp -a', description: 'Display ARP cache',
              details: 'Shows the ARP table mapping IP addresses to MAC addresses.',
              examples: 'All systems: arp -a\n\nWindows: arp -a\n\nmacOS/Linux: arp -a\nLinux: ip neigh (modern)',
              notes: 'Universal command. Shows IP to MAC address mappings on local network.' },

            { category: 'network', windows: 'route print', macos: 'netstat -rn', linux: 'ip route', description: 'Display routing table',
              details: 'Shows the routing table used for network traffic decisions.',
              examples: 'Windows: route print\nWindows: route add (add route)\n\nmacOS: netstat -rn\n\nLinux: ip route\nLinux: ip route show',
              notes: 'Different commands per OS. Shows how packets are routed.' },

            { category: 'network', windows: 'nbtstat -a', macos: 'N/A', linux: 'N/A', description: 'NetBIOS statistics (Windows only)',
              details: 'Displays NetBIOS over TCP/IP statistics.',
              examples: 'Windows: nbtstat -a hostname\nWindows: nbtstat -c (cache)\nWindows: nbtstat -r (resolution stats)',
              notes: 'Windows-only command. Used for NetBIOS name resolution troubleshooting.' },

            { category: 'network', windows: 'ipconfig /flushdns', macos: 'sudo dscacheutil -flushcache', linux: 'sudo systemd-resolve --flush-caches', description: 'Flush DNS cache',
              details: 'Clears the DNS resolver cache.',
              examples: 'Windows: ipconfig /flushdns\n\nmacOS: sudo dscacheutil -flushcache\nmacOS: sudo killall -HUP mDNSResponder\n\nLinux: sudo systemd-resolve --flush-caches',
              notes: 'Common troubleshooting step when DNS changes are not being recognized.' },

            // User Management
            { category: 'user', windows: 'net user', macos: 'dscl . list /Users', linux: 'cat /etc/passwd', description: 'List users',
              details: 'Displays all user accounts on the system.',
              examples: 'Windows: net user\nWindows: net user username (details)\n\nmacOS: dscl . list /Users\n\nLinux: cat /etc/passwd\nLinux: cut -d: -f1 /etc/passwd',
              notes: 'Different approaches per OS. Windows uses net command. Unix uses files/dscl.' },

            { category: 'user', windows: 'net user name /add', macos: 'sysadminctl -addUser', linux: 'useradd', description: 'Add user',
              details: 'Creates a new user account.',
              examples: 'Windows: net user john P@ssw0rd /add\n\nmacOS: sudo sysadminctl -addUser john -password -\n\nLinux: sudo useradd john\nLinux: sudo adduser john (interactive)',
              notes: 'Requires administrator/root privileges. Syntax varies significantly.' },

            { category: 'user', windows: 'net user name /delete', macos: 'sysadminctl -deleteUser', linux: 'userdel', description: 'Delete user',
              details: 'Removes a user account from the system.',
              examples: 'Windows: net user john /delete\n\nmacOS: sudo sysadminctl -deleteUser john\n\nLinux: sudo userdel john\nLinux: sudo userdel -r john (remove home)',
              notes: 'BE CAREFUL! Deleting users can remove their data. Use -r carefully on Linux.' },

            { category: 'user', windows: 'net localgroup', macos: 'dscl . list /Groups', linux: 'cat /etc/group', description: 'List groups',
              details: 'Shows all security groups on the system.',
              examples: 'Windows: net localgroup\nWindows: net localgroup Administrators\n\nmacOS: dscl . list /Groups\n\nLinux: cat /etc/group\nLinux: getent group',
              notes: 'Groups control permissions and access rights.' },

            { category: 'user', windows: 'runas', macos: 'sudo', linux: 'sudo', description: 'Run as administrator/root',
              details: 'Executes commands with elevated privileges.',
              examples: 'Windows: runas /user:Administrator cmd\n\nmacOS/Linux: sudo command\nmacOS/Linux: sudo -i (login shell)\nmacOS/Linux: sudo su (switch user)',
              notes: 'CRITICAL DIFFERENCE! runas vs sudo is a common exam question.' },

            { category: 'user', windows: 'net localgroup Administrators user /add', macos: 'sudo dseditgroup -o edit -a user -t user admin', linux: 'sudo usermod -aG sudo user', description: 'Add user to admin group',
              details: 'Grants administrative privileges to a user.',
              examples: 'Windows: net localgroup Administrators john /add\n\nmacOS: sudo dseditgroup -o edit -a john -t user admin\n\nLinux: sudo usermod -aG sudo john',
              notes: 'Gives user full system access. Use with caution.' },

            // Disk & Storage
            { category: 'disk', windows: 'chkdsk', macos: 'diskutil verifyDisk', linux: 'fsck', description: 'Check disk for errors',
              details: 'Scans and repairs file system errors.',
              examples: 'Windows: chkdsk C:\nWindows: chkdsk C: /f /r (fix & recover)\n\nmacOS: diskutil verifyDisk /dev/disk0\n\nLinux: sudo fsck /dev/sda1\nLinux: sudo fsck -y /dev/sda1 (auto-yes)',
              notes: 'Requires admin privileges. Often needs system restart on Windows.' },

            { category: 'disk', windows: 'format', macos: 'diskutil eraseDisk', linux: 'mkfs', description: 'Format disk',
              details: 'Erases and creates a new file system on a disk.',
              examples: 'Windows: format D: /fs:NTFS\n\nmacOS: diskutil eraseDisk JHFS+ MyDisk /dev/disk2\n\nLinux: sudo mkfs.ext4 /dev/sda1\nLinux: sudo mkfs -t ntfs /dev/sda1',
              notes: 'DESTRUCTIVE! All data will be lost. Double-check drive letters/paths.' },

            { category: 'disk', windows: 'diskpart', macos: 'diskutil', linux: 'fdisk / parted', description: 'Disk partitioning',
              details: 'Manages disk partitions, volumes, and virtual disks.',
              examples: 'Windows: diskpart (interactive)\n\nmacOS: diskutil list\nmacOS: diskutil partitionDisk\n\nLinux: sudo fdisk /dev/sda\nLinux: sudo parted /dev/sda',
              notes: 'Advanced tool. Can destroy data if misused. diskpart is interactive on Windows.' },

            { category: 'disk', windows: 'vol', macos: 'diskutil info /', linux: 'df -h', description: 'Display disk information',
              details: 'Shows volume label and serial number or disk usage.',
              examples: 'Windows: vol C:\nWindows: vol (current drive)\n\nmacOS: diskutil info /\n\nLinux: df -h\nLinux: df -i (inode info)',
              notes: 'df shows disk free space. vol shows volume information.' },

            { category: 'disk', windows: 'tree', macos: 'find . -type d', linux: 'tree', description: 'Display directory tree',
              details: 'Shows directory structure in hierarchical tree format.',
              examples: 'Windows: tree\nWindows: tree /f (include files)\n\nLinux: tree\nLinux: tree -L 2 (depth limit)\n\nmacOS: find . -type d (or install tree)',
              notes: 'tree may need installation on macOS/Linux via package manager.' },

            { category: 'disk', windows: 'compact', macos: 'diskutil secureErase', linux: 'dd', description: 'Disk compression/wiping',
              details: 'Compresses files (Windows) or securely erases disks (Unix).',
              examples: 'Windows: compact /c /s:C:\\folder\n\nmacOS: diskutil secureErase 0 /dev/disk2\n\nLinux: sudo dd if=/dev/zero of=/dev/sda bs=1M',
              notes: 'Different purposes! compact compresses. dd/secureErase wipe data.' },

            // Service/Process Management
            { category: 'service', windows: 'sc query', macos: 'launchctl list', linux: 'systemctl status', description: 'Query service status',
              details: 'Lists services and their current states.',
              examples: 'Windows: sc query\nWindows: sc query "Service Name"\n\nmacOS: launchctl list\n\nLinux: systemctl status\nLinux: systemctl status nginx',
              notes: 'Different service managers: Windows Services, launchd (macOS), systemd (Linux).' },

            { category: 'service', windows: 'net start', macos: 'launchctl start', linux: 'systemctl start', description: 'Start service',
              details: 'Starts a stopped service.',
              examples: 'Windows: net start "Service Name"\nWindows: net start Spooler\n\nmacOS: launchctl start com.apple.service\n\nLinux: sudo systemctl start nginx',
              notes: 'Requires admin/root privileges. Service must be enabled to start.' },

            { category: 'service', windows: 'net stop', macos: 'launchctl stop', linux: 'systemctl stop', description: 'Stop service',
              details: 'Stops a running service.',
              examples: 'Windows: net stop "Service Name"\nWindows: net stop Spooler\n\nmacOS: launchctl stop com.apple.service\n\nLinux: sudo systemctl stop nginx',
              notes: 'Some critical services cannot be stopped without force.' },

            { category: 'service', windows: 'services.msc', macos: 'N/A', linux: 'N/A', description: 'Services management GUI (Windows)',
              details: 'Opens the Windows Services graphical management console.',
              examples: 'Windows: services.msc\n(Run from Win+R or command prompt)',
              notes: 'Windows-only GUI tool. macOS/Linux typically use command-line tools.' },

            { category: 'service', windows: 'sc config', macos: 'launchctl load', linux: 'systemctl enable', description: 'Configure service startup',
              details: 'Sets service to start automatically or manually.',
              examples: 'Windows: sc config "Service" start= auto\n\nmacOS: launchctl load /path/to/plist\n\nLinux: sudo systemctl enable nginx',
              notes: 'Enable = start on boot. Load/config sets service properties.' },
        ];

        // State Management
        let currentCategory = 'all';
        let currentMode = 'browse';
        let selectedCommand = null;
        let favorites = JSON.parse(localStorage.getItem('commandFavorites')) || [];
        let quizQueue = [];
        let currentQuiz = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderCommandTable();
            attachEventListeners();
        });

        // Event Listeners
        function attachEventListeners() {
            // Category tabs
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentCategory = this.dataset.category;
                    renderCommandTable();
                });
            });

            // Mode buttons
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentMode = this.dataset.mode;
                    switchMode(currentMode);
                });
            });

            // Search input
            document.getElementById('searchCommand').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                filterCommands(searchTerm);
            });

            // Source OS change
            document.getElementById('sourceOS').addEventListener('change', function() {
                if (selectedCommand) {
                    displayTranslation(selectedCommand);
                }
            });

            // Export button
            document.getElementById('exportBtn').addEventListener('click', exportCheatSheet);
        }

        // Render Command Table
        function renderCommandTable(filter = '') {
            const tbody = document.getElementById('commandTableBody');
            tbody.innerHTML = '';

            let commands = commandDatabase;

            // Filter by category
            if (currentCategory !== 'all') {
                commands = commands.filter(cmd => cmd.category === currentCategory);
            }

            // Filter by search
            if (filter) {
                commands = commands.filter(cmd =>
                    cmd.windows.toLowerCase().includes(filter) ||
                    cmd.macos.toLowerCase().includes(filter) ||
                    cmd.linux.toLowerCase().includes(filter) ||
                    cmd.description.toLowerCase().includes(filter)
                );
            }

            // Filter by favorites
            if (currentMode === 'favorites') {
                commands = commands.filter((cmd, idx) => favorites.includes(getCommandId(cmd)));
            }

            if (commands.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" class="no-results">No commands found. Try a different search or category.</td></tr>';
                return;
            }

            commands.forEach((cmd, idx) => {
                const commandId = getCommandId(cmd);
                const isFavorite = favorites.includes(commandId);

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <button class="favorite-btn ${isFavorite ? 'active' : ''}" onclick="toggleFavorite('${commandId}')">
                            ${isFavorite ? '★' : '☆'}
                        </button>
                    </td>
                    <td><code>${cmd.windows}</code></td>
                    <td><code>${cmd.macos}</code></td>
                    <td><code>${cmd.linux}</code></td>
                    <td>${cmd.description}</td>
                `;

                row.addEventListener('click', function(e) {
                    if (!e.target.classList.contains('favorite-btn')) {
                        selectCommand(cmd);
                    }
                });

                tbody.appendChild(row);
            });
        }

        // Filter Commands
        function filterCommands(searchTerm) {
            renderCommandTable(searchTerm);
        }

        // Select Command
        function selectCommand(cmd) {
            selectedCommand = cmd;
            displayTranslation(cmd);
            displayDetails(cmd);
        }

        // Display Translation
        function displayTranslation(cmd) {
            document.getElementById('translationOutput').style.display = 'block';
            document.getElementById('windowsCmd').textContent = cmd.windows;
            document.getElementById('macosCmd').textContent = cmd.macos;
            document.getElementById('linuxCmd').textContent = cmd.linux;
        }

        // Display Details
        function displayDetails(cmd) {
            document.getElementById('detailPanel').classList.add('active');
            document.getElementById('detailTitle').textContent = cmd.description;
            document.getElementById('detailDescription').textContent = cmd.details;
            document.getElementById('detailExamples').textContent = cmd.examples;
            document.getElementById('detailNotes').textContent = cmd.notes;

            // Scroll to detail panel
            document.getElementById('detailPanel').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Close Detail Panel
        function closeDetail() {
            document.getElementById('detailPanel').classList.remove('active');
        }

        // Copy Command
        function copyCommand(os) {
            if (!selectedCommand) return;

            let text = '';
            switch(os) {
                case 'windows': text = selectedCommand.windows; break;
                case 'macos': text = selectedCommand.macos; break;
                case 'linux': text = selectedCommand.linux; break;
            }

            navigator.clipboard.writeText(text).then(() => {
                // Visual feedback
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = 'linear-gradient(135deg, #4ade80 0%, #22c55e 100%)';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 1500);
            });
        }

        // Toggle Favorite
        function toggleFavorite(commandId) {
            const index = favorites.indexOf(commandId);
            if (index > -1) {
                favorites.splice(index, 1);
            } else {
                favorites.push(commandId);
            }
            localStorage.setItem('commandFavorites', JSON.stringify(favorites));
            renderCommandTable();
        }

        // Get Command ID
        function getCommandId(cmd) {
            return `${cmd.windows}-${cmd.macos}-${cmd.linux}`.replace(/\s+/g, '-');
        }

        // Switch Mode
        function switchMode(mode) {
            const tableContainer = document.getElementById('commandTableContainer');
            const quizContainer = document.getElementById('quizContainer');
            const translationOutput = document.getElementById('translationOutput');
            const detailPanel = document.getElementById('detailPanel');

            // Hide all
            tableContainer.style.display = 'none';
            quizContainer.style.display = 'none';
            detailPanel.classList.remove('active');

            if (mode === 'browse' || mode === 'favorites') {
                tableContainer.style.display = 'block';
                renderCommandTable();
            } else if (mode === 'quiz') {
                quizContainer.style.display = 'block';
                translationOutput.style.display = 'none';
                initQuiz();
            }
        }

        // Quiz Mode Functions
        function initQuiz() {
            quizQueue = [...commandDatabase].sort(() => Math.random() - 0.5);
            loadNextQuiz();
        }

        function loadNextQuiz() {
            if (quizQueue.length === 0) {
                document.getElementById('quizQuestion').textContent = 'Quiz Complete! 🎉';
                document.getElementById('quizCommand').textContent = 'You have completed all commands.';
                document.getElementById('quizInput1').style.display = 'none';
                document.getElementById('quizInput2').style.display = 'none';
                document.getElementById('quizResult').innerHTML = '<button class="quiz-btn" onclick="initQuiz()">Restart Quiz</button>';
                return;
            }

            currentQuiz = quizQueue.shift();
            const sourceOS = ['windows', 'macos', 'linux'][Math.floor(Math.random() * 3)];
            const targetOSes = ['windows', 'macos', 'linux'].filter(os => os !== sourceOS);

            currentQuiz.sourceOS = sourceOS;
            currentQuiz.targetOSes = targetOSes;

            document.getElementById('quizQuestion').textContent = `What is the equivalent command on ${targetOSes[0]} and ${targetOSes[1]}?`;
            document.getElementById('quizCommand').textContent = `${sourceOS}: ${currentQuiz[sourceOS]}`;
            document.getElementById('quizInput1').value = '';
            document.getElementById('quizInput2').value = '';
            document.getElementById('quizInput1').placeholder = `Enter ${targetOSes[0]} equivalent`;
            document.getElementById('quizInput2').placeholder = `Enter ${targetOSes[1]} equivalent`;
            document.getElementById('quizResult').textContent = '';
            document.getElementById('quizResult').className = 'quiz-result';
            document.getElementById('quizInput1').style.display = 'block';
            document.getElementById('quizInput2').style.display = 'block';
        }

        function checkQuizAnswer() {
            if (!currentQuiz) return;

            const input1 = document.getElementById('quizInput1').value.trim().toLowerCase();
            const input2 = document.getElementById('quizInput2').value.trim().toLowerCase();

            const answer1 = currentQuiz[currentQuiz.targetOSes[0]].toLowerCase();
            const answer2 = currentQuiz[currentQuiz.targetOSes[1]].toLowerCase();

            const correct1 = input1 === answer1 || answer1.includes(input1) || input1.includes(answer1.split(' ')[0]);
            const correct2 = input2 === answer2 || answer2.includes(input2) || input2.includes(answer2.split(' ')[0]);

            const resultDiv = document.getElementById('quizResult');

            if (correct1 && correct2) {
                resultDiv.className = 'quiz-result correct';
                resultDiv.textContent = '✓ Correct! Well done!';
                setTimeout(loadNextQuiz, 2000);
            } else {
                resultDiv.className = 'quiz-result incorrect';
                resultDiv.innerHTML = `✗ Not quite right.<br>Correct answers: ${currentQuiz.targetOSes[0]}: <code>${currentQuiz[currentQuiz.targetOSes[0]]}</code>, ${currentQuiz.targetOSes[1]}: <code>${currentQuiz[currentQuiz.targetOSes[1]]}</code>`;
            }
        }

        function skipQuiz() {
            loadNextQuiz();
        }

        function revealAnswer() {
            if (!currentQuiz) return;

            const resultDiv = document.getElementById('quizResult');
            resultDiv.className = 'quiz-result';
            resultDiv.innerHTML = `Answers: ${currentQuiz.targetOSes[0]}: <code>${currentQuiz[currentQuiz.targetOSes[0]]}</code>, ${currentQuiz.targetOSes[1]}: <code>${currentQuiz[currentQuiz.targetOSes[1]]}</code><br>${currentQuiz.description}`;
        }

        // Export Cheat Sheet
        function exportCheatSheet() {
            let content = 'CROSS-PLATFORM COMMAND REFERENCE - A+ CORE 2\n';
            content += '=' .repeat(80) + '\n\n';

            const categories = {
                'file': 'FILE OPERATIONS',
                'system': 'SYSTEM INFORMATION',
                'network': 'NETWORK COMMANDS',
                'user': 'USER MANAGEMENT',
                'disk': 'DISK & STORAGE',
                'service': 'SERVICE/PROCESS MANAGEMENT'
            };

            for (const [category, title] of Object.entries(categories)) {
                content += title + '\n';
                content += '-'.repeat(80) + '\n';

                const commands = commandDatabase.filter(cmd => cmd.category === category);

                commands.forEach(cmd => {
                    content += `\n${cmd.description}\n`;
                    content += `  Windows: ${cmd.windows}\n`;
                    content += `  macOS:   ${cmd.macos}\n`;
                    content += `  Linux:   ${cmd.linux}\n`;
                });

                content += '\n\n';
            }

            content += 'A+ EXAM TIPS\n';
            content += '=' .repeat(80) + '\n';
            content += '- ipconfig (Windows) vs ifconfig/ip addr (Unix)\n';
            content += '- tracert (Windows) vs traceroute (Unix)\n';
            content += '- runas (Windows) vs sudo (Unix)\n';
            content += '- tasklist (Windows) vs ps aux (Unix)\n';
            content += '- dir (Windows) vs ls (Unix)\n';
            content += '- Remember: nbtstat is Windows-only\n';
            content += '- Know when to use /s (Windows) vs -r (Unix) flags\n';

            // Create download
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'aplus-command-reference.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            // Visual feedback
            const btn = document.getElementById('exportBtn');
            const originalText = btn.textContent;
            btn.textContent = 'Downloaded!';
            setTimeout(() => {
                btn.textContent = originalText;
            }, 2000);
        }
    </script>
</body>
</html>