<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Networking Textbook (Ch.7‚Äì20) - Hexworth Prime</title>
<style>
  :root{
    --bg:#0f1220; --bg2:#0b0f22; --card:#161a31; --ink:#eef2ff; --muted:#aab2d5;
    --accent:#6ee7ff; --accent2:#c084fc; --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444;
    --border:#21295b; --chip:#0c1a2e; --chipb:#1f3556;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
    background:radial-gradient(1200px 600px at 70% -10%, #14204a 0%, var(--bg) 45%, var(--bg2) 100%);
    color:var(--ink); line-height:1.5;
  }
  header{padding:26px 16px 10px; text-align:center}
  h1{margin:0; font-size:clamp(24px,3.4vw,38px); letter-spacing:.3px}
  .sub{color:var(--muted); margin-top:6px}
  .wrap{max-width:1220px; margin:0 auto; padding:16px}
  .nav{
    position:sticky; top:0; z-index:20; background:linear-gradient(180deg,#0e142e, #0b0f22);
    border-bottom:1px solid #1e2757; padding:10px 12px; display:flex; gap:8px; flex-wrap:wrap; justify-content:center
  }
  .nav a{color:#cde3ff; text-decoration:none; font-size:14px; padding:6px 10px; border:1px solid #223165; border-radius:999px; background:#0e1836}
  .nav a:hover{filter:brightness(1.15)}
  .card{
    background:linear-gradient(180deg,#141938, #10142d);
    border:1px solid var(--border); border-radius:16px; padding:18px; margin:14px 0;
    box-shadow:0 10px 28px rgba(0,0,0,.35)
  }
  .title{display:flex; gap:10px; align-items:center; font-weight:800; letter-spacing:.3px}
  h2{margin:0; font-size:clamp(18px,2.2vw,26px)}
  .tag{font-size:12px; padding:2px 8px; border-radius:999px; background:#0f2340; color:#9edcff; border:1px solid #204a72}
  .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#0e1937;color:#cde3ff;border:1px solid #243060;font-size:12px}
  .row{display:flex; flex-wrap:wrap; gap:10px; margin:10px 0}
  .muted{color:var(--muted)}
  .chips{display:flex; flex-wrap:wrap; gap:8px; margin:8px 0}
  .chip{background:var(--chip); border:1px solid var(--chipb); border-radius:999px; padding:6px 10px; font-size:13px}
  details{border:1px solid #232b59;background:#0e1430;border-radius:12px;padding:10px}
  details>summary{cursor:pointer; font-weight:700}
  .kv{display:grid;grid-template-columns: 200px 1fr; gap:8px; margin-top:10px}
  .badge{font-weight:800; font-size:12px; padding:2px 8px; border-radius:6px; background:#0e233f; color:#bfe7ff; border:1px solid #23496d; display:inline-block}
  .svgbox{background:#0e1430; border:1px solid #232b59; border-radius:14px; padding:12px; text-align:center; margin-top:8px}
  .note{font-size:12px; color:#9cc4ff; margin-top:6px}
  .code{display:inline-flex;align-items:center;gap:8px;background:#0b1628;border:1px solid #1d3452;color:#d7e8ff;border-radius:10px;padding:6px 10px;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
  button.copy, .btn{cursor:pointer;border:1px solid #2a3c6b;background:#0e2244;color:#def;border-radius:10px;padding:8px 12px;font-weight:700}
  .btn:hover, button.copy:hover{filter:brightness(1.1)}
  .flash{animation:flash .6s ease}
  @keyframes flash{0%{box-shadow:0 0 0 rgba(110,231,255,0)}50%{box-shadow:0 0 0 8px rgba(110,231,255,.15)}100%{box-shadow:0 0 0 rgba(110,231,255,0)}}

  /* Flashcards */
  .flashcards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
  .cardflip{perspective:1200px}
  .fc{
    position:relative; height:150px; transform-style:preserve-3d; transition:transform .6s cubic-bezier(.2,.7,.2,1);
    border-radius:14px; outline:none;
  }
  .fc:focus-visible{box-shadow:0 0 0 3px #5ac8ff66}
  .fc .side{
    position:absolute; inset:0; display:grid; place-items:center; padding:12px;
    border:1px solid #26306a; border-radius:14px; background:#10173a;
    backface-visibility:hidden; -webkit-backface-visibility:hidden;
    transform:rotateY(0deg);
  }
  .fc .front{font-weight:800}
  .fc .back{background:#0f2047; border-color:#2a3d7a; transform:rotateY(180deg)}
  .fc.flip{transform:rotateY(180deg)}
  .fc[aria-pressed="true"]{transform:rotateY(180deg)}

  /* Subnet calc */
  .calc-grid{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
  @media (max-width:780px){ .calc-grid{grid-template-columns:1fr} }
  .calc-out{display:grid;grid-template-columns:220px 1fr;gap:6px}
  .score{font-weight:900}
  .scorebar{height:10px; border-radius:6px; background:#1b2f5e; overflow:hidden}
  .scorebar>span{display:block; height:100%; width:0%}

  /* VLAN visualizer */
  .vlan-ports{display:grid; grid-template-columns:repeat(6,1fr); gap:8px; margin-top:10px}
  .port{border:1px solid #2a3c6b; background:#0e1f41; border-radius:10px; padding:8px; text-align:center; cursor:pointer}
  .port[data-vlan="10"]{outline:2px solid #60a5fa}
  .port[data-vlan="20"]{outline:2px solid #a78bfa}
  .legend{display:flex; gap:10px; align-items:center; margin:6px 0}
  .sw{display:inline-block; width:12px; height:12px; border-radius:3px; margin-right:4px}
  .sw.v10{background:#60a5fa}.sw.v20{background:#a78bfa}.sw.trunk{background:#22d3ee}

  /* Wi-Fi channels */
  .wifi-bars{display:grid;grid-template-columns:repeat(11,1fr);gap:4px; align-items:end; margin:10px 0}
  .bar{height:60px; background:#1b2f5e; border-radius:4px; position:relative}
  .bar.active::after{content:""; position:absolute; left:0; right:0; bottom:0; height:100%; background:linear-gradient(0deg,#6ee7ff,transparent)}

  /* CIA Triad wheel */
  .cia{display:flex; gap:10px; flex-wrap:wrap}
  .cia button{flex:1 1 120px}

  /* Toggles/checklist */
  .checkgrid{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:8px}
  .check{display:flex; gap:8px; align-items:flex-start; background:#0e1b3a; border:1px solid #223165; border-radius:10px; padding:8px}

  footer{color:#90a3d7; font-size:12px; text-align:center; padding:24px}

  /* Hexworth Additions */
  .page-header {
    padding: 15px 30px;
    background: rgba(0, 0, 0, 0.4);
    border-bottom: 1px solid rgba(255,255,255,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .page-header a {
    color: var(--muted);
    text-decoration: none;
    font-size: 0.9rem;
    transition: color 0.2s;
  }
  .page-header a:hover { color: var(--accent); }
  .brand {
    font-weight: 600;
    color: var(--ink);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .brand-icon { font-size: 1.2rem; }

  /* Gating Overlay */
  .gate-overlay {
    position: fixed;
    inset: 0;
    background: rgba(10, 10, 15, 0.98);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    text-align: center;
    padding: 40px;
  }
  .gate-overlay.unlocked { display: none; }
  .gate-box {
    background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
    border: 2px solid var(--accent);
    border-radius: 20px;
    padding: 40px;
    max-width: 500px;
    box-shadow: 0 0 60px rgba(34, 211, 238, 0.2);
  }
  .gate-box h2 {
    font-size: 1.8rem;
    margin-bottom: 20px;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .gate-box p { color: var(--muted); margin-bottom: 20px; }
  .gate-icon { font-size: 4rem; margin-bottom: 20px; }
  .gate-btn {
    display: inline-block;
    padding: 14px 30px;
    background: linear-gradient(135deg, var(--accent), #0ea5e9);
    border: none;
    border-radius: 10px;
    color: #0a0a0f;
    font-weight: 700;
    font-size: 1.1rem;
    text-decoration: none;
    cursor: pointer;
    transition: transform 0.2s;
  }
  .gate-btn:hover { transform: translateY(-2px); }
  .gate-requirements {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid rgba(255,255,255,0.1);
  }
  .gate-requirements h4 { color: var(--accent); margin-bottom: 10px; }
  .gate-requirements ul { list-style: none; text-align: left; }
  .gate-requirements li { padding: 6px 0; color: var(--muted); }
  .gate-requirements li::before { content: "‚úì "; color: var(--ok); }
</style>
</head>
<body>

<!-- Gating Overlay -->
<div class="gate-overlay" id="gateOverlay">
  <div class="gate-box">
    <div class="gate-icon">üîí</div>
    <h2>Content Locked</h2>
    <p>The Interactive Networking Textbook is a reward for completing the Web House Certification Path.</p>
    <a href="../exams/networking-midterm.html" class="gate-btn">Take Midterm Exam ‚Üí</a>
    <div class="gate-requirements">
      <h4>To unlock this resource:</h4>
      <ul>
        <li>Complete the Networking Fundamentals Quiz</li>
        <li>Study the IP Addressing Module</li>
        <li>Review with Networking Flashcards</li>
        <li>Pass the Midterm Exam (70% or higher)</li>
      </ul>
    </div>
  </div>
</div>

<!-- Hexworth Header -->
<header class="page-header">
  <a href="../index.html">‚Üê Back to Web House</a>
  <span class="brand">
    <span class="brand-icon">üåê</span>
    Hexworth Prime
  </span>
</header>

<header style="padding:26px 16px 10px; text-align:center">
  <h1>üìñ Networking Interactive Textbook</h1>
  <div class="sub">Chapters 7‚Äì20 ‚Ä¢ üéñÔ∏è Network Master Resource</div>
</header>

<nav class="nav" aria-label="Chapter navigation">
  <a href="#ch7">7 IP Addressing</a>
  <a href="#ch8">8 Subnet & Troubleshoot</a>
  <a href="#ch9">9 IP Routing</a>
  <a href="#ch10">10 Routing Protocols</a>
  <a href="#ch11">11 Switching & VLANs</a>
  <a href="#ch12">12 Wireless</a>
  <a href="#ch13">13 Metrics & SNMP</a>
  <a href="#ch14">14 Docs & Policies</a>
  <a href="#ch15">15 High Availability</a>
  <a href="#ch16">16 Security Concepts</a>
  <a href="#ch17">17 Attacks</a>
  <a href="#ch18">18 Hardening</a>
  <a href="#ch19">19 Remote Access</a>
  <a href="#ch20">20 Physical Security</a>
</nav>

<div class="wrap" role="main">

  
   <!-- 7 -->
  <section class="card" id="ch7" aria-labelledby="t7">
    <div class="title">
      <h2 id="t7">Chapter 7 ‚Ä¢ IP Addressing</h2>
      <span class="tag">IPv4 ‚Ä¢ IPv6 ‚Ä¢ Practice</span>
    </div>

    <p class="muted">
      IP addressing defines how devices locate and communicate across networks.
      IPv4 uses 32-bit addresses in dotted decimal form, while IPv6 uses 128-bit hexadecimal notation.
    </p>

    <!-- TAB CONTROLS -->
    <div class="row" style="margin-bottom:12px;">
      <button class="btn iptab" data-tab="ipv4">IPv4</button>
      <button class="btn iptab" data-tab="ipv6">IPv6</button>
      <button class="btn iptab" data-tab="practice">Practice</button>
    </div>

    <!-- IPv4 CONTENT -->
    <div class="ipcontent" id="ipv4" style="display:block;">
      <h3>IPv4 Essentials</h3>
      <ul>
        <li>32 bits, divided into 4 octets (0‚Äì255 each)</li>
        <li>Address classes (A‚ÄìE) define ranges and purpose</li>
        <li>Private ranges: 10.0.0.0/8, 172.16.0.0‚Äì172.31.255.255, 192.168.0.0/16</li>
        <li>APIPA (169.254.0.0/16) self-assigns when no DHCP is found</li>
      </ul>
      <details>
        <summary>Interactive IPv4 Binary Converter</summary>
        <div class="row">
          <label>Enter IPv4 Address:
            <input id="ipInput4" type="text" placeholder="e.g., 192.168.1.10" style="width:180px;padding:6px;border-radius:8px;border:1px solid #233466;background:#0b1628;color:#d7e8ff">
          </label>
          <button class="btn" id="convertBin">Convert</button>
        </div>
        <div id="binaryOut" class="muted" style="margin-top:8px"></div>
      </details>
      <div class="svgbox" aria-label="IPv4 vs IPv6 comparison">
        <svg viewBox="0 0 650 160" width="100%" height="150">
          <rect x="20" y="60" width="250" height="25" rx="6" fill="#1d2b55"/>
          <rect x="20" y="100" width="580" height="25" rx="6" fill="#253a7a"/>
          <text x="30" y="77" fill="#e0eaff" font-size="13">IPv4 ‚Äî 4.3 billion addresses</text>
          <text x="30" y="117" fill="#f0d5ff" font-size="13">IPv6 ‚Äî 3.4√ó10¬≥‚Å∏ addresses (virtually unlimited)</text>
        </svg>
        <p class="note">IPv6 provides sufficient address space for every grain of sand on Earth ‚Äî several times over.</p>
      </div>
    </div>

    <!-- IPv6 CONTENT -->
    <div class="ipcontent" id="ipv6" style="display:none;">
      <h3>IPv6 Essentials</h3>
      <ul>
        <li>128 bits, written as eight 16-bit hexadecimal blocks (0000‚ÄìFFFF)</li>
        <li>Leading zeros can be omitted; one ‚Äú::‚Äù compression per address allowed</li>
      </ul>
      <div class="chips" role="list">
        <span class="chip" title="Used on the public Internet">2000::/3 ‚Äî Global Unicast</span>
        <span class="chip" title="Private internal networks">fc00::/7 ‚Äî Unique Local</span>
        <span class="chip" title="Auto-configured per interface">fe80::/10 ‚Äî Link-Local</span>
        <span class="chip" title="Multicast groups">ff00::/8 ‚Äî Multicast</span>
        <span class="chip" title="Loopback testing">::1 ‚Äî Loopback</span>
      </div>
      <div class="dyk">
        <strong>Did You Know?</strong> IPv6 removes NAT ‚Äî every device can have its own global address.
      </div>
    </div>

    <!-- PRACTICE CONTENT -->
    <div class="ipcontent" id="practice" style="display:none;">
      <h3>Test Your IP Knowledge</h3>
      <p>Decide whether each address is <b>Private</b> or <b>Public</b>.</p>
      <div id="quiz7">
        <label><input type="radio" name="ip1" value="private"> 192.168.1.1</label><br>
        <label><input type="radio" name="ip1" value="public"> 192.168.1.1</label><br><br>

        <label><input type="radio" name="ip2" value="private"> 172.20.5.100</label><br>
        <label><input type="radio" name="ip2" value="public"> 172.20.5.100</label><br><br>

        <label><input type="radio" name="ip3" value="private"> 8.8.8.8</label><br>
        <label><input type="radio" name="ip3" value="public"> 8.8.8.8</label><br><br>

        <button class="btn" id="gradeIP">Check Answers</button>
        <span id="scoreIP" class="score"></span>
      </div>
    </div>
  </section>

  <script>
    // --- Tab switcher ---
    document.querySelectorAll('.iptab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const tab=btn.dataset.tab;
        document.querySelectorAll('.ipcontent').forEach(div=>div.style.display='none');
        document.getElementById(tab).style.display='block';
      });
    });

    // --- Binary converter ---
    const ipInput4=document.getElementById('ipInput4');
    const binaryOut=document.getElementById('binaryOut');
    document.getElementById('convertBin').addEventListener('click',()=>{
      const val=ipInput4.value.trim();
      const parts=val.split('.');
      if(parts.length!==4 || parts.some(p=>isNaN(p)||p<0||p>255)){
        binaryOut.textContent='‚ùå Invalid IPv4 address.';
        binaryOut.style.color='var(--bad)';
        return;
      }
      const bin=parts.map(p=>parseInt(p).toString(2).padStart(8,'0')).join('.');
      binaryOut.textContent='Binary: '+bin;
      binaryOut.style.color='var(--ink)';
    });

    // --- Practice quiz ---
    const gradeBtn=document.getElementById('gradeIP');
    const scoreIP=document.getElementById('scoreIP');
    gradeBtn.addEventListener('click',()=>{
      const answers={ip1:'private', ip2:'private', ip3:'public'};
      let correct=0;
      for(const q in answers){
        const chosen=document.querySelector(`input[name="${q}"]:checked`);
        if(chosen && chosen.value===answers[q]) correct++;
      }
      const total=Object.keys(answers).length;
      scoreIP.textContent=`Score: ${correct}/${total}`;
      scoreIP.style.color=correct===total?'var(--ok)':'var(--warn)';
    });
  </script>


  <!-- 8 -->  <!-- 8 -->
  <section class="card" id="ch8" aria-labelledby="t8">
    <div class="title">
      <h2 id="t8">Chapter 8 ‚Ä¢ Subnetting & Troubleshooting</h2>
      <span class="tag">CIDR ‚Ä¢ NAT ‚Ä¢ Troubleshooting</span>
    </div>

    <p class="muted">
      Subnetting divides large networks into smaller, manageable segments, improving efficiency and security.
      Troubleshooting ensures connectivity by isolating failures using structured steps.
    </p>

    <!-- Enhanced Subnet Calculator -->
    <details open>
      <summary>Interactive Subnet Calculator</summary>
      <div class="calc-grid">
        <label>
          IPv4 Address:
          <input type="text" id="ipAddr" placeholder="e.g., 192.168.10.5" style="width:180px;padding:6px;border-radius:8px;border:1px solid #233466;background:#0b1628;color:#d7e8ff">
        </label>
        <label>
          Prefix Length (/):
          <input type="number" id="cidr" min="1" max="32" value="24" style="width:80px;padding:6px;border-radius:8px;border:1px solid #233466;background:#0b1628;color:#d7e8ff">
        </label>
      </div>
      <button class="btn" id="calcSub">Calculate</button>
      <div id="subResults" class="muted" style="margin-top:8px"></div>

      <div id="maskVisual" class="svgbox" style="margin-top:10px" aria-label="Subnet mask visual"></div>
    </details>

    <!-- CIDR Range Visual -->
    <details>
      <summary>Subnet Class & CIDR Visual</summary>
      <svg viewBox="0 0 600 80" width="100%" height="80" aria-label="CIDR range visual">
        <rect x="20" y="30" width="100" height="20" fill="#3b82f6"></rect>
        <text x="40" y="45" fill="#fff" font-size="12">Class A</text>
        <rect x="140" y="30" width="120" height="20" fill="#60a5fa"></rect>
        <text x="170" y="45" fill="#fff" font-size="12">Class B</text>
        <rect x="280" y="30" width="140" height="20" fill="#93c5fd"></rect>
        <text x="320" y="45" fill="#000" font-size="12">Class C</text>
        <rect x="440" y="30" width="120" height="20" fill="#bfdbfe"></rect>
        <text x="470" y="45" fill="#000" font-size="12">Class D/E</text>
      </svg>
      <p class="note">IPv4 classes define address ranges; CIDR (/x) refines subnet precision beyond traditional classes.</p>
    </details>

    <!-- Troubleshooting Lab -->
    <details>
      <summary>Interactive Troubleshooting Lab</summary>
      <p>Follow the troubleshooting decision flow. Click the symptom you encounter.</p>
      <div id="troubleFlow" style="margin-top:6px;">
        <button class="btn step" data-step="1">Ping fails to localhost (127.0.0.1)</button>
        <button class="btn step" data-step="2">Ping fails to my IP</button>
        <button class="btn step" data-step="3">Ping fails to Default Gateway</button>
        <button class="btn step" data-step="4">Ping fails to remote host</button>
      </div>
      <p id="troubleHint" class="muted" style="margin-top:8px">Choose a step to begin...</p>
    </details>

    <!-- Mini Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz8" style="margin-top:8px;">
        <label>What is the subnet mask for /26? <br>
          <input type="text" name="mask" placeholder="e.g., 255.255.255.0" style="width:180px;padding:6px;border-radius:8px;border:1px solid #233466;background:#0b1628;color:#d7e8ff">
        </label><br><br>
        <label>How many usable hosts per subnet? <br>
          <input type="number" name="hosts" placeholder="e.g., 62" style="width:80px;padding:6px;border-radius:8px;border:1px solid #233466;background:#0b1628;color:#d7e8ff">
        </label><br><br>
        <button type="button" class="btn" id="grade8">Check Answers</button>
        <span id="score8" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Subnet Calculator ---
    const ipAddr=document.getElementById('ipAddr');
    const cidr=document.getElementById('cidr');
    const subResults=document.getElementById('subResults');
    const maskVisual=document.getElementById('maskVisual');
    document.getElementById('calcSub').addEventListener('click',()=>{
      const ip=ipAddr.value.trim();
      if(!/^(\d{1,3}\.){3}\d{1,3}$/.test(ip)) {
        subResults.textContent='‚ùå Invalid IPv4 address.';
        subResults.style.color='var(--bad)';
        return;
      }
      const prefix=parseInt(cidr.value);
      const maskBits='1'.repeat(prefix).padEnd(32,'0');
      const mask=[0,1,2,3].map(i=>parseInt(maskBits.slice(i*8,(i+1)*8),2)).join('.');
      const total=Math.pow(2,32-prefix);
      const usable=prefix<=30?total-2:0;

      const firstOct=parseInt(ip.split('.')[0]);
      let cls='Class A';
      if(firstOct>=128&&firstOct<=191)cls='Class B';
      else if(firstOct>=192&&firstOct<=223)cls='Class C';
      else if(firstOct>=224)cls='Class D/E';

      subResults.innerHTML=`<b>${cls}</b><br>Mask: <code>${mask}</code><br>Usable Hosts: ${usable.toLocaleString()}<br>Total Addresses: ${total.toLocaleString()}`;
      subResults.style.color='var(--ink)';

      // Binary visual
      maskVisual.innerHTML=`<svg width="100%" height="40" viewBox="0 0 512 40">
        ${maskBits.split('').map((b,i)=>`
          <rect x="${i*16/2}" y="10" width="8" height="20" fill="${b==='1'?'#60a5fa':'#1e3a8a'}"></rect>
        `).join('')}
      </svg>
      <p class='note'>Blue = network bits, dark = host bits</p>`;
    });

    // --- Troubleshooting Flow ---
    const troubleHint=document.getElementById('troubleHint');
    const tips={
      1:'‚ùå Check your TCP/IP stack or reinstall NIC drivers.',
      2:'‚ö†Ô∏è Verify IP configuration with <code>ipconfig</code> or <code>ifconfig</code>.',
      3:'üîÑ Check gateway IP and physical connectivity to router/switch.',
      4:'üåê Verify DNS, firewall rules, or ISP outage.'
    };
    document.querySelectorAll('.step').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const step=btn.dataset.step;
        troubleHint.innerHTML=tips[step];
        troubleHint.style.color='var(--ink)';
      });
    });

    // --- Quiz ---
    document.getElementById('grade8').addEventListener('click',()=>{
      const form=new FormData(document.getElementById('quiz8'));
      const mask=form.get('mask').trim();
      const hosts=parseInt(form.get('hosts'));
      const score8=document.getElementById('score8');
      if(mask==='255.255.255.192'&&hosts===62){
        score8.textContent='‚úÖ Perfect! /26 = 62 hosts.';
        score8.style.color='var(--ok)';
      } else {
        score8.textContent='‚ùå Try again. Hint: /26 means 6 host bits.';
        score8.style.color='var(--bad)';
      }
    });
  </script>

  <!-- 9 -->  <!-- 9 -->
  <section class="card" id="ch9" aria-labelledby="t9">
    <div class="title">
      <h2 id="t9">Chapter 9 ‚Ä¢ IP Routing</h2>
      <span class="tag">Static ‚Ä¢ Dynamic ‚Ä¢ Routing Tables</span>
    </div>

    <p class="muted">
      Routing determines how packets travel from one network to another.
      Static routes are manually defined, while dynamic protocols such as RIP, OSPF, and BGP learn paths automatically.
    </p>

    <!-- Routing Visualizer -->
    <details open>
      <summary>Interactive Routing Visualizer</summary>
      <div class="svgbox" id="routeSim" aria-label="Routing simulation diagram"></div>
      <div class="row" style="margin-top:8px;">
        <button class="btn routeBtn" data-mode="static">Static</button>
        <button class="btn routeBtn" data-mode="dynamic">Dynamic</button>
        <button class="btn routeBtn" data-mode="ospf">OSPF</button>
        <button class="btn routeBtn" data-mode="bgp">BGP</button>
      </div>
      <p id="routeNote" class="muted" style="margin-top:6px;">Select a routing mode to visualize packet flow.</p>
    </details>

    <!-- Routing Table Emulator -->
    <details>
      <summary>Routing Table Emulator</summary>
      <table id="routeTable" style="width:100%;border-collapse:collapse;margin-top:8px;font-size:14px;">
        <thead>
          <tr style="background:#16214a;color:#dbeafe">
            <th style="padding:6px;border:1px solid #2a3570;">Destination</th>
            <th style="padding:6px;border:1px solid #2a3570;">Next Hop</th>
            <th style="padding:6px;border:1px solid #2a3570;">Metric</th>
            <th style="padding:6px;border:1px solid #2a3570;">Protocol</th>
          </tr>
        </thead>
        <tbody>
          <tr><td style="padding:4px;border:1px solid #2a3570;">192.168.1.0/24</td><td style="padding:4px;border:1px solid #2a3570;">‚Äì</td><td>1</td><td>Connected</td></tr>
          <tr><td style="padding:4px;border:1px solid #2a3570;">0.0.0.0/0</td><td>‚Äì</td><td>‚Äì</td><td>‚Äì</td></tr>
        </tbody>
      </table>
    </details>

    <!-- Quick Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz9" style="margin-top:8px;">
        <label>Which protocol uses hop count as its metric?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option>
            <option>RIP</option>
            <option>OSPF</option>
            <option>BGP</option>
          </select>
        </label><br><br>
        <label>Which protocol uses link-state updates?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option>
            <option>RIP</option>
            <option>OSPF</option>
            <option>BGP</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade9">Check Answers</button>
        <span id="score9" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Routing Visualizer ---
    const routeSim=document.getElementById('routeSim');
    const routeNote=document.getElementById('routeNote');
    function drawRoute(mode){
      const color="#6ee7ff";
      let path='',desc='';
      switch(mode){
        case 'static':
          path=`<line x1="120" y1="70" x2="300" y2="70" stroke="${color}" stroke-width="3" />`;
          desc="Manual path from Router A ‚Üí Router B.";
          break;
        case 'dynamic':
          path=`<path d="M120 70 C 180 20, 240 20, 300 70" stroke="${color}" stroke-width="3" fill="none" />
                <path d="M120 70 C 180 120, 240 120, 300 70" stroke="${color}" stroke-width="3" fill="none" />`;
          desc="Dynamic protocols discover multiple routes automatically.";
          break;
        case 'ospf':
          path=`<circle cx="210" cy="70" r="40" stroke="${color}" stroke-width="3" fill="none" />
                <text x="180" y="75" fill="#cfdcff" font-size="12">Area 0</text>`;
          desc="OSPF forms areas and uses link-state advertisements.";
          break;
        case 'bgp':
          path=`<line x1="80" y1="70" x2="340" y2="70" stroke-dasharray="6 3" stroke="${color}" stroke-width="3" />
                <text x="150" y="50" fill="#cfdcff" font-size="12">AS 65001</text>
                <text x="240" y="90" fill="#cfdcff" font-size="12">AS 65002</text>`;
          desc="BGP connects autonomous systems using path vector logic.";
          break;
      }
      routeSim.innerHTML=`<svg viewBox="0 0 420 140" width="100%" height="120">
        <circle cx="80" cy="70" r="25" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/>
        <circle cx="340" cy="70" r="25" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/>
        <text x="67" y="75" fill="#e2e8f0" font-size="12">A</text>
        <text x="335" y="75" fill="#e2e8f0" font-size="12">B</text>
        ${path}
      </svg>`;
      routeNote.innerHTML=desc;
    }
    document.querySelectorAll('.routeBtn').forEach(btn=>{
      btn.addEventListener('click',()=>drawRoute(btn.dataset.mode));
    });
    drawRoute('static');

    // --- Routing Table Emulator ---
    const routeTable=document.getElementById('routeTable').querySelector('tbody');
    document.querySelectorAll('.routeBtn').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const mode=btn.dataset.mode;
        let rows='';
        if(mode==='static'){
          rows=`<tr><td>10.0.0.0/24</td><td>192.168.1.1</td><td>1</td><td>Static</td></tr>`;
        } else if(mode==='dynamic'){
          rows=`<tr><td>10.0.0.0/24</td><td>192.168.1.1</td><td>2</td><td>RIP</td></tr>
                <tr><td>172.16.0.0/16</td><td>192.168.1.2</td><td>3</td><td>OSPF</td></tr>`;
        } else if(mode==='ospf'){
          rows=`<tr><td>172.16.0.0/16</td><td>192.168.1.2</td><td>10 (cost)</td><td>OSPF</td></tr>`;
        } else if(mode==='bgp'){
          rows=`<tr><td>203.0.113.0/24</td><td>198.51.100.1</td><td>20 (path)</td><td>BGP</td></tr>`;
        }
        routeTable.innerHTML=rows;
      });
    });

    // --- Quiz ---
    document.getElementById('grade9').addEventListener('click',()=>{
      const form=new FormData(document.getElementById('quiz9'));
      const q1=form.get('q1'), q2=form.get('q2');
      const s=document.getElementById('score9');
      if(q1==='RIP'&&q2==='OSPF'){
        s.textContent='‚úÖ Correct!';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review metrics and protocol types.';
        s.style.color='var(--bad)';
      }
    });
  </script>


  <!-- 10 -->
  <!-- 10 -->
  <section class="card" id="ch10" aria-labelledby="t10">
    <div class="title">
      <h2 id="t10">Chapter 10 ‚Ä¢ Routing Protocols</h2>
      <span class="tag">RIP ‚Ä¢ OSPF ‚Ä¢ BGP ‚Ä¢ EIGRP</span>
    </div>

    <p class="muted">
      Routing protocols share route information between routers.
      Interior Gateway Protocols (IGPs) operate within an autonomous system, while Exterior Gateway Protocols (EGPs) connect different systems.
    </p>

    <!-- Protocol Visualizer -->
    <details open>
      <summary>Routing Protocol Visualizer</summary>
      <div class="row" style="margin-bottom:8px;">
        <button class="btn protoBtn" data-proto="rip">RIP</button>
        <button class="btn protoBtn" data-proto="ospf">OSPF</button>
        <button class="btn protoBtn" data-proto="bgp">BGP</button>
      </div>
      <div class="svgbox" id="protoViz" aria-label="Routing protocol visualization"></div>
      <p id="protoNote" class="muted">Select a protocol to visualize its behavior.</p>
    </details>

    <!-- CLI Simulator -->
    <details>
      <summary>Simulated CLI Output</summary>
      <div class="svgbox" style="text-align:left;white-space:pre;font-family:monospace;font-size:13px;background:#0b1628;color:#dbeafe;border:1px solid #2a3c6b;border-radius:8px;padding:10px;" id="cliOutput">
        Router# show ip route
      </div>
    </details>

    <!-- Protocol Comparison Table -->
    <details>
      <summary>Protocol Quick Reference</summary>
      <table style="width:100%;border-collapse:collapse;margin-top:6px;font-size:14px;">
        <thead>
          <tr style="background:#16214a;color:#dbeafe">
            <th style="padding:6px;border:1px solid #2a3570;">Protocol</th>
            <th style="padding:6px;border:1px solid #2a3570;">Type</th>
            <th style="padding:6px;border:1px solid #2a3570;">Metric</th>
            <th style="padding:6px;border:1px solid #2a3570;">Updates</th>
          </tr>
        </thead>
        <tbody>
          <tr><td style="padding:4px;border:1px solid #2a3570;">RIP</td><td>IGP (Distance Vector)</td><td>Hop Count</td><td>Every 30s</td></tr>
          <tr><td style="padding:4px;border:1px solid #2a3570;">OSPF</td><td>IGP (Link-State)</td><td>Cost</td><td>Triggered / LSAs</td></tr>
          <tr><td style="padding:4px;border:1px solid #2a3570;">BGP</td><td>EGP (Path Vector)</td><td>AS Path</td><td>As Needed</td></tr>
        </tbody>
      </table>
    </details>

    <!-- Quick Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz10" style="margin-top:8px;">
        <label>Which protocol uses hop count as a metric?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option>
            <option>RIP</option><option>OSPF</option><option>BGP</option>
          </select>
        </label><br><br>
        <label>Which protocol connects different autonomous systems?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option>
            <option>RIP</option><option>OSPF</option><option>BGP</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade10">Check Answers</button>
        <span id="score10" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Protocol Visualizer ---
    const protoViz=document.getElementById('protoViz');
    const protoNote=document.getElementById('protoNote');
    const cliOutput=document.getElementById('cliOutput');

    function drawProto(proto){
      let svg='',note='',cli='';
      const color='#6ee7ff';

      if(proto==='rip'){
        svg=`<svg viewBox="0 0 420 160" width="100%" height="120">
                <circle cx="80" cy="70" r="25" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/>
                <circle cx="210" cy="70" r="25" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/>
                <circle cx="340" cy="70" r="25" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/>
                <text x="70" y="75" fill="#e2e8f0" font-size="12">R1</text>
                <text x="200" y="75" fill="#e2e8f0" font-size="12">R2</text>
                <text x="330" y="75" fill="#e2e8f0" font-size="12">R3</text>
                <line x1="105" y1="70" x2="185" y2="70" stroke="${color}" stroke-width="3"/>
                <line x1="235" y1="70" x2="315" y2="70" stroke="${color}" stroke-width="3"/>
              </svg>`;
        note="RIP (Routing Information Protocol) shares entire routing tables every 30 seconds using hop count as its metric.";
        cli=`Router# show ip route rip
R* 0.0.0.0/0 [120/1] via 192.168.1.1, 00:00:23, Ethernet0
R  10.0.0.0/24 [120/2] via 192.168.1.2, 00:00:10, Ethernet0
R  172.16.0.0/16 [120/3] via 192.168.1.3, 00:00:05, Ethernet0`;
      }
      else if(proto==='ospf'){
        svg=`<svg viewBox="0 0 420 160" width="100%" height="120">
                <circle cx="210" cy="70" r="40" stroke="${color}" stroke-width="3" fill="none"/>
                <circle cx="80" cy="70" r="20" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/>
                <circle cx="340" cy="70" r="20" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/>
                <text x="60" y="75" fill="#e2e8f0" font-size="12">R1</text>
                <text x="200" y="75" fill="#e2e8f0" font-size="12">Area 0</text>
                <text x="330" y="75" fill="#e2e8f0" font-size="12">R2</text>
              </svg>`;
        note="OSPF (Open Shortest Path First) builds a complete topology map using link-state advertisements (LSAs) and Dijkstra‚Äôs SPF algorithm.";
        cli=`Router# show ip route ospf
O  10.0.0.0/24 [110/10] via 192.168.1.1, 00:00:12, Ethernet0
O  172.16.0.0/16 [110/20] via 192.168.1.2, 00:00:08, Ethernet0
O*E2 0.0.0.0/0 [110/1] via 192.168.1.254, 00:00:45, Ethernet0`;
      }
      else if(proto==='bgp'){
        svg=`<svg viewBox="0 0 480 160" width="100%" height="120">
                <rect x="50" y="40" width="130" height="60" rx="10" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/>
                <rect x="300" y="40" width="130" height="60" rx="10" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/>
                <text x="80" y="75" fill="#dbeafe" font-size="12">AS 65001</text>
                <text x="330" y="75" fill="#dbeafe" font-size="12">AS 65002</text>
                <line x1="180" y1="70" x2="300" y2="70" stroke-dasharray="6 3" stroke="${color}" stroke-width="3"/>
              </svg>`;
        note="BGP (Border Gateway Protocol) operates between autonomous systems using AS paths and policies for Internet routing.";
        cli=`Router# show ip bgp summary
BGP router identifier 203.0.113.1, local AS number 65001
Neighbor        AS     MsgRcvd MsgSent State/PfxRcd
198.51.100.1    65002  202     210     Established`;
      }

      protoViz.innerHTML=svg;
      protoNote.innerHTML=note;
      cliOutput.textContent=cli;
    }

    document.querySelectorAll('.protoBtn').forEach(btn=>{
      btn.addEventListener('click',()=>drawProto(btn.dataset.proto));
    });
    drawProto('rip'); // default

    // --- Quiz ---
    document.getElementById('grade10').addEventListener('click',()=>{
      const form=new FormData(document.getElementById('quiz10'));
      const q1=form.get('q1'), q2=form.get('q2');
      const s=document.getElementById('score10');
      if(q1==='RIP'&&q2==='BGP'){
        s.textContent='‚úÖ Excellent! You understand protocol types.';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review IGP vs EGP differences.';
        s.style.color='var(--bad)';
      }
    });
  </script>

  <!-- 11 Switching & VLANs -->
    <!-- 11 -->
  <section class="card" id="ch11" aria-labelledby="t11">
    <div class="title">
      <h2 id="t11">Chapter 11 ‚Ä¢ Switching & VLANs</h2>
      <span class="tag">MAC Learning ‚Ä¢ VLAN Tagging ‚Ä¢ STP ‚Ä¢ Port Security</span>
    </div>

    <p class="muted">
      Switches operate at Layer 2 of the OSI model, forwarding frames based on MAC addresses.
      VLANs segment broadcast domains, Spanning Tree prevents loops, and Port Security controls device access.
    </p>

    <!-- VLAN Simulation -->
    <details open>
      <summary>Interactive VLAN & Port Simulator</summary>
      <p>Click a port to toggle VLAN assignment. Observe frame tagging below.</p>
      <div id="vlanLab" class="vlan-ports" aria-label="Switch VLAN simulator">
        <div class="port" data-vlan="10" tabindex="0">Fa0/1<br><small>VLAN 10</small></div>
        <div class="port" data-vlan="20" tabindex="0">Fa0/2<br><small>VLAN 20</small></div>
        <div class="port" data-vlan="10" tabindex="0">Fa0/3<br><small>VLAN 10</small></div>
        <div class="port" data-vlan="20" tabindex="0">Fa0/4<br><small>VLAN 20</small></div>
        <div class="port" data-vlan="10" tabindex="0">Fa0/5<br><small>VLAN 10</small></div>
        <div class="port" data-vlan="20" tabindex="0">Fa0/6<br><small>VLAN 20</small></div>
      </div>
      <div class="row" style="margin-top:8px;">
        <button class="btn" id="trunkToggle">Toggle Trunk (Gi0/1)</button>
        <span id="trunkStatus" class="pill">Trunk: OFF</span>
      </div>
      <div class="svgbox" id="frameFlow" aria-label="Frame flow diagram"></div>
    </details>

    <!-- Spanning Tree Visualization -->
    <details>
      <summary>Spanning Tree Protocol (STP) Visual</summary>
      <p>STP elects a root bridge and blocks redundant links to prevent loops.</p>
      <div class="svgbox" id="stpViz" aria-label="STP topology diagram"></div>
      <button class="btn" id="stpRun">Run STP Simulation</button>
      <p id="stpNote" class="muted" style="margin-top:8px;">Click to visualize how STP blocks redundant links.</p>
    </details>

    <!-- Port Security Simulation -->
    <details>
      <summary>Port Security Demo</summary>
      <p>Try connecting a device to a secured port. Observe allowed vs. violation states.</p>
      <div class="row">
        <button class="btn" id="securePort">Connect Known MAC</button>
        <button class="btn" id="unknownPort">Connect Unknown MAC</button>
      </div>
      <p id="secStatus" class="muted" style="margin-top:8px;">Awaiting connection...</p>
    </details>

    <!-- Quick Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz11" style="margin-top:8px;">
        <label>Which IEEE standard defines VLAN tagging?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>802.1Q</option><option>802.11</option><option>802.3</option>
          </select>
        </label><br><br>
        <label>Which protocol prevents switching loops?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>VTP</option><option>STP</option><option>LLDP</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade11">Check Answers</button>
        <span id="score11" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- VLAN Simulation ---
    const vlanPorts=document.querySelectorAll('#vlanLab .port');
    const frameFlow=document.getElementById('frameFlow');
    const trunkBtn=document.getElementById('trunkToggle');
    const trunkStatus=document.getElementById('trunkStatus');
    let trunkActive=false;

    vlanPorts.forEach(p=>{
      p.addEventListener('click',()=>{
        const v=p.getAttribute('data-vlan')==='10'?'20':'10';
        p.setAttribute('data-vlan',v);
        p.querySelector('small').textContent='VLAN '+v;
        renderFlow();
      });
    });

    trunkBtn.addEventListener('click',()=>{
      trunkActive=!trunkActive;
      trunkStatus.textContent='Trunk: '+(trunkActive?'ON':'OFF');
      renderFlow();
    });

    function renderFlow(){
      const color10='#60a5fa', color20='#a78bfa';
      frameFlow.innerHTML=`
        <svg viewBox="0 0 600 150" width="100%" height="140">
          <rect x="20" y="60" width="100" height="40" rx="8" fill="#16214a" stroke="#2a3c6b"/>
          <text x="40" y="85" fill="#dbeafe" font-size="12">Switch</text>
          <line x1="120" y1="80" x2="480" y2="80" stroke="${trunkActive?'#22d3ee':'#334155'}" stroke-width="3"/>
          <circle cx="500" cy="80" r="20" fill="${trunkActive?'#0e2244':'#1e293b'}" stroke="${trunkActive?'#22d3ee':'#334155'}" stroke-width="2"/>
          <text x="490" y="85" fill="#dbeafe" font-size="11">${trunkActive?'Trunk Link':'No Trunk'}</text>
          <text x="160" y="40" fill="${color10}">VLAN 10 ‚Üí Blue Frames</text>
          <text x="160" y="120" fill="${color20}">VLAN 20 ‚Üí Purple Frames</text>
        </svg>`;
    }
    renderFlow();

    // --- STP Visualization ---
    const stpViz=document.getElementById('stpViz');
    const stpNote=document.getElementById('stpNote');
    document.getElementById('stpRun').addEventListener('click',()=>{
      stpViz.innerHTML=`
        <svg viewBox="0 0 400 150" width="100%" height="140">
          <circle cx="80" cy="70" r="20" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/><text x="70" y="75" fill="#e2e8f0">S1</text>
          <circle cx="210" cy="70" r="20" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/><text x="200" y="75" fill="#e2e8f0">S2</text>
          <circle cx="340" cy="70" r="20" fill="#16214a" stroke="#1e3a8a" stroke-width="2"/><text x="330" y="75" fill="#e2e8f0">S3</text>
          <line x1="100" y1="70" x2="190" y2="70" stroke="#6ee7ff" stroke-width="3"/>
          <line x1="230" y1="70" x2="320" y2="70" stroke="#6ee7ff" stroke-width="3"/>
          <line x1="80" y1="90" x2="340" y2="90" stroke-dasharray="5 4" stroke="#f59e0b" stroke-width="3"/>
        </svg>`;
      stpNote.innerHTML="STP elected S2 as the Root Bridge. The lower link (dashed) was blocked to prevent loops.";
    });

    // --- Port Security Simulation ---
    const secStatus=document.getElementById('secStatus');
    document.getElementById('securePort').addEventListener('click',()=>{
      secStatus.innerHTML='‚úÖ Known MAC connected successfully (Port remains active).';
      secStatus.style.color='var(--ok)';
    });
    document.getElementById('unknownPort').addEventListener('click',()=>{
      secStatus.innerHTML='üö´ Unknown MAC detected ‚Äî Port Security Violation triggered!';
      secStatus.style.color='var(--bad)';
    });

    // --- Quiz ---
    document.getElementById('grade11').addEventListener('click',()=>{
      const form=new FormData(document.getElementById('quiz11'));
      const q1=form.get('q1'), q2=form.get('q2');
      const s=document.getElementById('score11');
      if(q1==='802.1Q'&&q2==='STP'){
        s.textContent='‚úÖ Excellent!';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review VLAN tagging (802.1Q) and STP basics.';
        s.style.color='var(--bad)';
      }
    });
  </script>


  <!-- 12 Wireless -->
   <!-- 12 -->
  <section class="card" id="ch12" aria-labelledby="t12">
    <div class="title">
      <h2 id="t12">Chapter 12 ‚Ä¢ Wireless Technology</h2>
      <span class="tag">Wi-Fi ‚Ä¢ Channels ‚Ä¢ IoT ‚Ä¢ Security</span>
    </div>

    <p class="muted">
      Wireless networking enables mobility through radio waves instead of cables.
      IEEE 802.11 standards define how devices communicate over 2.4 GHz and 5 GHz frequencies,
      while wireless security protocols ensure data confidentiality and integrity.
    </p>

    <!-- Tabs -->
    <div class="row" style="margin-bottom:10px;">
      <button class="btn wtab" data-tab="wifi">Wi-Fi Standards</button>
      <button class="btn wtab" data-tab="channels">Channels</button>
      <button class="btn wtab" data-tab="iot">IoT & Security</button>
    </div>

    <!-- Wi-Fi Standards Panel -->
    <div id="wifi" class="wpanel" style="display:block;">
      <h3>Wi-Fi Standards Overview</h3>
      <p>Select a standard to see its band and maximum speed.</p>
      <div class="row" style="gap:4px;flex-wrap:wrap;">
        <button class="btn std" data-std="a">802.11a</button>
        <button class="btn std" data-std="b">802.11b</button>
        <button class="btn std" data-std="g">802.11g</button>
        <button class="btn std" data-std="n">802.11n</button>
        <button class="btn std" data-std="ac">802.11ac</button>
        <button class="btn std" data-std="ax">802.11ax</button>
      </div>
      <div id="wifiInfo" class="muted" style="margin-top:10px;">
        Click a standard above to learn more.
      </div>
      <div class="svgbox" id="freqChart" aria-label="Wi-Fi frequency bands"></div>
    </div>

    <!-- Channel Spectrum Panel -->
    <div id="channels" class="wpanel" style="display:none;">
      <h3>2.4 GHz Channel Overlap</h3>
      <p>Only channels 1, 6, and 11 are non-overlapping. Hover to view range.</p>
      <svg id="chSpectrum" viewBox="0 0 600 150" width="100%" height="140" aria-label="Wi-Fi channel spectrum">
        <defs>
          <linearGradient id="grad1" x1="0" y1="0" x2="1" y2="0">
            <stop offset="0%" stop-color="#60a5fa" stop-opacity="0.8"/>
            <stop offset="100%" stop-color="#1d4ed8" stop-opacity="0.1"/>
          </linearGradient>
        </defs>
        <rect x="50" y="70" width="100" height="20" rx="4" fill="url(#grad1)"/>
        <rect x="150" y="70" width="100" height="20" rx="4" fill="url(#grad1)"/>
        <rect x="250" y="70" width="100" height="20" rx="4" fill="url(#grad1)"/>
        <rect x="350" y="70" width="100" height="20" rx="4" fill="url(#grad1)"/>
        <rect x="450" y="70" width="100" height="20" rx="4" fill="url(#grad1)"/>
        <text x="65" y="65" fill="#e2e8f0">Ch 1</text>
        <text x="165" y="65" fill="#e2e8f0">Ch 3</text>
        <text x="265" y="65" fill="#e2e8f0">Ch 6</text>
        <text x="365" y="65" fill="#e2e8f0">Ch 9</text>
        <text x="465" y="65" fill="#e2e8f0">Ch 11</text>
      </svg>
      <p class="note">Use non-overlapping channels (1, 6, 11) for stable 2.4 GHz WLANs.</p>
    </div>

    <!-- IoT & Security Panel -->
    <div id="iot" class="wpanel" style="display:none;">
      <h3>IoT Devices & Wireless Security</h3>
      <p>Wireless networks support many short-range technologies.</p>
      <div class="chips">
        <span class="chip" title="Personal devices, 10 m range">Bluetooth</span>
        <span class="chip" title="Smart tags, payments">NFC</span>
        <span class="chip" title="Infrared remotes and sensors">IR</span>
        <span class="chip" title="Home automation, low power">Zigbee</span>
      </div>

      <h4 style="margin-top:12px;">Security Protocol Comparison</h4>
      <table style="width:100%;border-collapse:collapse;margin-top:6px;font-size:14px;">
        <thead>
          <tr style="background:#16214a;color:#dbeafe">
            <th style="padding:6px;border:1px solid #2a3570;">Protocol</th>
            <th style="padding:6px;border:1px solid #2a3570;">Encryption</th>
            <th style="padding:6px;border:1px solid #2a3570;">Status</th>
          </tr>
        </thead>
        <tbody>
          <tr><td style="padding:4px;border:1px solid #2a3570;">WEP</td><td>RC4</td><td>‚ùå Obsolete</td></tr>
          <tr><td style="padding:4px;border:1px solid #2a3570;">WPA</td><td>TKIP</td><td>‚ö†Ô∏è Legacy</td></tr>
          <tr><td style="padding:4px;border:1px solid #2a3570;">WPA2</td><td>AES-CCMP</td><td>‚úÖ Secure</td></tr>
          <tr><td style="padding:4px;border:1px solid #2a3570;">WPA3</td><td>SAE / 192-bit</td><td>üü¢ Recommended</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz12" style="margin-top:8px;">
        <label>Which channels are non-overlapping in 2.4 GHz?<br>
          <input type="text" name="ch" placeholder="e.g., 1,6,11"
            style="width:100px;padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
        </label><br><br>
        <label>Which Wi-Fi standard introduced 5 GHz support?<br>
          <select name="std" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>802.11a</option><option>802.11b</option><option>802.11g</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade12">Check Answers</button>
        <span id="score12" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Tabs ---
    document.querySelectorAll('.wtab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const t=btn.dataset.tab;
        document.querySelectorAll('.wpanel').forEach(p=>p.style.display='none');
        document.getElementById(t).style.display='block';
      });
    });

    // --- Wi-Fi Standard Info ---
    const wifiInfo=document.getElementById('wifiInfo');
    const freqChart=document.getElementById('freqChart');
    const wifiData={
      a:{band:'5 GHz',speed:'54 Mbps',range:'Short',year:'1999'},
      b:{band:'2.4 GHz',speed:'11 Mbps',range:'Long',year:'1999'},
      g:{band:'2.4 GHz',speed:'54 Mbps',range:'Medium',year:'2003'},
      n:{band:'2.4 GHz / 5 GHz',speed:'600 Mbps',range:'High',year:'2009'},
      ac:{band:'5 GHz',speed:'1.3 Gbps',range:'High',year:'2013'},
      ax:{band:'2.4 GHz / 5 GHz',speed:'>9 Gbps',range:'High',year:'2019'}
    };
    document.querySelectorAll('.std').forEach(b=>{
      b.addEventListener('click',()=>{
        const d=wifiData[b.dataset.std];
        wifiInfo.innerHTML=`<b>${b.textContent}</b><br>
          Band: ${d.band} | Max Speed: ${d.speed}<br>
          Range: ${d.range} | Introduced: ${d.year}`;
        freqChart.innerHTML=`<svg viewBox="0 0 400 80" width="100%" height="70">
          <rect x="50" y="30" width="${d.band.includes('5')?250:150}" height="20"
            rx="6" fill="${d.band.includes('5')?'#60a5fa':'#a78bfa'}"/>
          <text x="60" y="45" fill="#fff">${d.band}</text>
        </svg>`;
      });
    });

    // --- Quiz ---
    document.getElementById('grade12').addEventListener('click',()=>{
      const form=new FormData(document.getElementById('quiz12'));
      const ch=form.get('ch').replace(/\s/g,'');
      const std=form.get('std');
      const s=document.getElementById('score12');
      if(ch==='1,6,11'&&std==='802.11a'){
        s.textContent='‚úÖ Correct! Non-overlapping: 1,6,11 ‚Ä¢ 802.11a added 5 GHz.';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review channels and early 802.11 standards.';
        s.style.color='var(--bad)';
      }
    });
  </script>


  <!-- 13 Metrics & SNMP -->
   <!-- 13 -->
  <section class="card" id="ch13" aria-labelledby="t13">
    <div class="title">
      <h2 id="t13">Chapter 13 ‚Ä¢ Using Statistics & Sensors to Ensure Network Availability</h2>
      <span class="tag">Monitoring ‚Ä¢ SNMP ‚Ä¢ Sensors ‚Ä¢ Alerts</span>
    </div>

    <p class="muted">
      Network availability is maintained through performance monitoring, SNMP-based management, 
      and environmental sensors that detect issues before outages occur.
    </p>

    <!-- Tabs -->
    <div class="row" style="margin-bottom:10px;">
      <button class="btn monTab" data-tab="perf">Performance</button>
      <button class="btn monTab" data-tab="snmp">SNMP</button>
      <button class="btn monTab" data-tab="sensors">Sensors</button>
    </div>

    <!-- Performance Panel -->
    <div id="perf" class="monPanel" style="display:block;">
      <h3>Performance Metrics Dashboard</h3>
      <p>Monitor CPU, bandwidth, and uptime dynamically.</p>
      <div id="metrics" class="row" style="justify-content:space-around;margin-top:10px;">
        <div class="meter">
          <h4>CPU</h4>
          <div class="dial" id="cpuDial" data-value="32">32%</div>
        </div>
        <div class="meter">
          <h4>Bandwidth</h4>
          <div class="dial" id="bwDial" data-value="57">57%</div>
        </div>
        <div class="meter">
          <h4>Uptime</h4>
          <div class="dial" id="upDial" data-value="99.9">99.9%</div>
        </div>
      </div>
      <button class="btn" id="refreshMetrics" style="margin-top:10px;">Refresh Metrics</button>
    </div>

    <!-- SNMP Panel -->
    <div id="snmp" class="monPanel" style="display:none;">
      <h3>SNMP Monitoring Visual</h3>
      <p>Simple Network Management Protocol (SNMP) enables monitoring via agents and managers.</p>
      <div class="svgbox" id="snmpViz" aria-label="SNMP communication diagram"></div>
      <button class="btn" id="trapSend" style="margin-top:10px;">Send SNMP Trap</button>
      <p id="trapMsg" class="muted" style="margin-top:6px;">No traps received yet.</p>
    </div>

    <!-- Sensors Panel -->
    <div id="sensors" class="monPanel" style="display:none;">
      <h3>Environmental Sensor Simulation</h3>
      <p>Simulate server room temperature or humidity thresholds triggering alerts.</p>
      <div class="row">
        <button class="btn" id="tempUp">Increase Temperature</button>
        <button class="btn" id="humidUp">Increase Humidity</button>
      </div>
      <p id="sensorRead" class="muted" style="margin-top:8px;">Normal conditions (22¬∞C / 40% RH)</p>
    </div>

    <!-- Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz13" style="margin-top:8px;">
        <label>Which SNMP component sends alerts to the manager?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>Agent</option><option>Trap</option><option>MIB</option>
          </select>
        </label><br><br>
        <label>What metric indicates system reliability over time?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>Uptime</option><option>Latency</option><option>Throughput</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade13">Check Answers</button>
        <span id="score13" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Tab Switching ---
    document.querySelectorAll('.monTab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const t=btn.dataset.tab;
        document.querySelectorAll('.monPanel').forEach(p=>p.style.display='none');
        document.getElementById(t).style.display='block';
      });
    });

    // --- Metrics Refresh ---
    const cpuDial=document.getElementById('cpuDial');
    const bwDial=document.getElementById('bwDial');
    const upDial=document.getElementById('upDial');
    document.getElementById('refreshMetrics').addEventListener('click',()=>{
      function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
      const cpu=rand(10,95), bw=rand(20,90), up=99+(Math.random()/10);
      cpuDial.textContent=cpu+'%';
      bwDial.textContent=bw+'%';
      upDial.textContent=up.toFixed(2)+'%';
      cpuDial.dataset.value=cpu; bwDial.dataset.value=bw; upDial.dataset.value=up;
      [cpuDial,bwDial,upDial].forEach(d=>{
        d.style.background=`conic-gradient(var(--accent) ${d.dataset.value*3.6}deg, #1e293b 0deg)`;
      });
    });

    // --- SNMP Visualization ---
    const snmpViz=document.getElementById('snmpViz');
    const trapMsg=document.getElementById('trapMsg');
    document.getElementById('trapSend').addEventListener('click',()=>{
      snmpViz.innerHTML=`
        <svg viewBox="0 0 500 150" width="100%" height="130">
          <rect x="40" y="40" width="120" height="60" rx="10" fill="#16214a" stroke="#2563eb" stroke-width="2"/>
          <rect x="340" y="40" width="120" height="60" rx="10" fill="#16214a" stroke="#9333ea" stroke-width="2"/>
          <text x="70" y="75" fill="#dbeafe" font-size="12">Agent</text>
          <text x="375" y="75" fill="#dbeafe" font-size="12">Manager</text>
          <line x1="160" y1="70" x2="340" y2="70" stroke="#6ee7ff" stroke-width="3" marker-end="url(#arrow)"/>
          <text x="220" y="60" fill="#dbeafe" font-size="11">SNMP Trap</text>
        </svg>`;
      trapMsg.textContent='‚ö†Ô∏è SNMP Trap Received: High CPU Utilization on Router01';
      trapMsg.style.color='var(--warn)';
    });

    // --- Sensor Simulation ---
    const sensorRead=document.getElementById('sensorRead');
    let temp=22, humid=40;
    function updateSensor(){
      let msg=`Temp: ${temp}¬∞C ‚Ä¢ Humidity: ${humid}%`;
      if(temp>35||humid>70){
        msg=`üö® ALERT ‚Äî ${temp>35?'Overheating':''}${humid>70?' High Humidity':''}! (${temp}¬∞C / ${humid}%)`;
        sensorRead.style.color='var(--bad)';
      } else sensorRead.style.color='var(--ink)';
      sensorRead.textContent=msg;
    }
    document.getElementById('tempUp').addEventListener('click',()=>{temp+=3;updateSensor();});
    document.getElementById('humidUp').addEventListener('click',()=>{humid+=5;updateSensor();});

    // --- Quiz ---
    document.getElementById('grade13').addEventListener('click',()=>{
      const f=new FormData(document.getElementById('quiz13'));
      const q1=f.get('q1'), q2=f.get('q2');
      const s=document.getElementById('score13');
      if(q1==='Trap'&&q2==='Uptime'){
        s.textContent='‚úÖ Correct! SNMP Traps alert managers, and uptime measures reliability.';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review SNMP components and metrics.';
        s.style.color='var(--bad)';
      }
    });
  </script>

  <style>
    .meter h4{text-align:center;margin-bottom:6px;}
    .dial{
      width:70px;height:70px;
      display:flex;align-items:center;justify-content:center;
      border-radius:50%;
      background:conic-gradient(var(--accent) 115deg,#1e293b 0deg);
      font-weight:bold;font-size:14px;color:#dbeafe;
      border:2px solid #334155;
    }
  </style>


  <!-- 14 Docs & Policies -->
    <!-- 14 -->
  <section class="card" id="ch14" aria-labelledby="t14">
    <div class="title">
      <h2 id="t14">Chapter 14 ‚Ä¢ Organizational Documents & Policies</h2>
      <span class="tag">Governance ‚Ä¢ Compliance ‚Ä¢ Incident Response</span>
    </div>

    <p class="muted">
      Policies and plans guide how organizations prepare for, respond to, and recover from incidents.
      They ensure consistency, accountability, and compliance across technical and business operations.
    </p>

    <!-- Policy Hierarchy -->
    <details open>
      <summary>Organizational Policy Hierarchy</summary>
      <p>The following diagram shows how strategic, tactical, and operational plans align:</p>
      <div class="svgbox" id="policyMap" aria-label="Policy hierarchy diagram"></div>
    </details>

    <!-- Policy Browser -->
    <details>
      <summary>Policy Browser</summary>
      <div id="policyGrid" class="grid3" style="margin-top:10px;">
        <div class="pCard" data-doc="bcp">Business Continuity Plan (BCP)</div>
        <div class="pCard" data-doc="drp">Disaster Recovery Plan (DRP)</div>
        <div class="pCard" data-doc="irp">Incident Response Plan (IRP)</div>
        <div class="pCard" data-doc="aup">Acceptable Use Policy (AUP)</div>
        <div class="pCard" data-doc="sla">Service Level Agreement (SLA)</div>
        <div class="pCard" data-doc="ndap">Network Diagram & Asset Policy</div>
      </div>
      <div id="policyInfo" class="muted" style="margin-top:8px;">Click a policy to view its purpose.</div>
    </details>

    <!-- Incident Response Simulator -->
    <details>
      <summary>Incident Response Playbook Simulator</summary>
      <p>Simulate the phases of an incident response plan by following each step in sequence.</p>
      <div id="irSteps" class="row" style="flex-wrap:wrap;gap:6px;">
        <button class="btn irBtn" data-step="1">1Ô∏è‚É£ Identification</button>
        <button class="btn irBtn" data-step="2">2Ô∏è‚É£ Containment</button>
        <button class="btn irBtn" data-step="3">3Ô∏è‚É£ Eradication</button>
        <button class="btn irBtn" data-step="4">4Ô∏è‚É£ Recovery</button>
        <button class="btn irBtn" data-step="5">5Ô∏è‚É£ Lessons Learned</button>
      </div>
      <p id="irStatus" class="muted" style="margin-top:8px;">Start with identification.</p>
    </details>

    <!-- Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz14" style="margin-top:8px;">
        <label>Which plan ensures IT systems can be restored after a disaster?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>BCP</option><option>DRP</option><option>IRP</option>
          </select>
        </label><br><br>
        <label>Which document defines acceptable employee behavior?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>AUP</option><option>SLA</option><option>DRP</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade14">Check Answers</button>
        <span id="score14" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Policy Hierarchy Map ---
    const policyMap=document.getElementById('policyMap');
    policyMap.innerHTML=`
      <svg viewBox="0 0 600 200" width="100%" height="180">
        <rect x="230" y="10" width="140" height="30" rx="6" fill="#1e3a8a"/>
        <text x="250" y="30" fill="#e2e8f0" font-size="12">Strategic (Governance)</text>
        <line x1="300" y1="40" x2="300" y2="70" stroke="#93c5fd" stroke-width="2"/>
        <rect x="190" y="70" width="220" height="30" rx="6" fill="#2563eb"/>
        <text x="210" y="90" fill="#e2e8f0" font-size="12">Tactical (BCP / DRP / IRP)</text>
        <line x1="300" y1="100" x2="300" y2="140" stroke="#93c5fd" stroke-width="2"/>
        <rect x="150" y="140" width="300" height="30" rx="6" fill="#3b82f6"/>
        <text x="180" y="160" fill="#e2e8f0" font-size="12">Operational (AUP / NDAP / SOP)</text>
      </svg>`;

    // --- Policy Browser ---
    const policyInfo=document.getElementById('policyInfo');
    const policyDetails={
      bcp:'BCP ‚Äì Ensures business functions continue during disruptions (owned by executive management).',
      drp:'DRP ‚Äì Focuses on restoring IT systems and data after major outages (owned by IT).',
      irp:'IRP ‚Äì Guides the detection, containment, and recovery from cybersecurity incidents (owned by security team).',
      aup:'AUP ‚Äì Defines proper employee technology use to prevent misuse (owned by HR & IT).',
      sla:'SLA ‚Äì Contractual agreement defining uptime, support, and performance expectations between provider and client.',
      ndap:'NDAP ‚Äì Maintains up-to-date network diagrams and asset inventories for audits and recovery.'
    };
    document.querySelectorAll('.pCard').forEach(c=>{
      c.addEventListener('click',()=>{
        const doc=c.dataset.doc;
        policyInfo.textContent=policyDetails[doc];
        document.querySelectorAll('.pCard').forEach(x=>x.classList.remove('active'));
        c.classList.add('active');
      });
    });

    // --- Incident Response Simulator ---
    const irStatus=document.getElementById('irStatus');
    const irPhases={
      1:'üïµÔ∏è Identification ‚Äì Detect and confirm the incident.',
      2:'üß© Containment ‚Äì Isolate affected systems to prevent spread.',
      3:'üßπ Eradication ‚Äì Remove malware or vulnerabilities.',
      4:'üîÅ Recovery ‚Äì Restore operations and monitor stability.',
      5:'üìò Lessons Learned ‚Äì Document findings and update plans.'
    };
    document.querySelectorAll('.irBtn').forEach(b=>{
      b.addEventListener('click',()=>{
        irStatus.textContent=irPhases[b.dataset.step];
        irStatus.style.color='var(--ink)';
      });
    });

    // --- Quiz ---
    document.getElementById('grade14').addEventListener('click',()=>{
      const f=new FormData(document.getElementById('quiz14'));
      const q1=f.get('q1'), q2=f.get('q2');
      const s=document.getElementById('score14');
      if(q1==='DRP'&&q2==='AUP'){
        s.textContent='‚úÖ Excellent! DRP restores IT systems; AUP governs employee behavior.';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review document purposes and hierarchy.';
        s.style.color='var(--bad)';
      }
    });
  </script>

  <style>
    .grid3{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:8px;
    }
    .pCard{
      padding:10px;
      border:1px solid #233466;
      background:#0b1628;
      text-align:center;
      border-radius:8px;
      cursor:pointer;
      color:#dbeafe;
      transition:0.2s;
    }
    .pCard.active{
      background:#1e3a8a;
      border-color:#60a5fa;
    }
  </style>


    <!-- 15 High Availability -->
  <section class="card" id="ch15" aria-labelledby="t15">
    <div class="title">
      <h2 id="t15">Chapter 15 ‚Ä¢ High Availability and Disaster Recovery</h2>
      <span class="tag">Load Balancing ‚Ä¢ Clusters ‚Ä¢ RTO/RPO</span>
    </div>

    <p class="muted">
      High Availability (HA) and Disaster Recovery (DR) ensure business continuity through redundancy,
      load balancing, fault tolerance, and rapid recovery planning.
    </p>

    <details open>
      <summary>Core HA Techniques</summary>
      <div class="chips">
        <span class="chip">Load Balancing (Round-Robin, Weighted, Affinity)</span>
        <span class="chip">Multipathing ‚Äì Multiple storage paths</span>
        <span class="chip">NIC Teaming ‚Äì Bandwidth + Failover</span>
        <span class="chip">Switch Stacking / Clustering (CMP)</span>
        <span class="chip">First-Hop Redundancy (HSRP / VRRP)</span>
      </div>
      <p class="muted">
        Redundant hardware and clusters combine to remove single points of failure across routers,
        switches, firewalls, and servers.
      </p>
    </details>

    <details>
      <summary>Recovery Site Tiers</summary>
      <div class="kv">
        <div><span class="badge">Hot Site</span></div>
        <div>Fully operational mirror site ‚Äî immediate failover capability.</div>
        <div><span class="badge">Warm Site</span></div>
        <div>Pre-configured equipment + recent backups ‚Äî moderate RTO.</div>
        <div><span class="badge">Cold Site</span></div>
        <div>Empty facility awaiting hardware ‚Äî long RTO.</div>
        <div><span class="badge">Cloud Site</span></div>
        <div>Provisioned through a CSP for elastic recovery capacity.</div>
      </div>
    </details>

    <details>
      <summary>Availability Modes</summary>
      <ul>
        <li><b>Active/Active ‚Äì</b> Maximizes availability through load distribution.</li>
        <li><b>Active/Passive ‚Äì</b> Provides fault tolerance with standby units.</li>
        <li><b>Diverse Paths ‚Äì</b> Multiple ISPs and physical routes for redundancy.</li>
      </ul>
    </details>

    <details>
      <summary>Reliability Metrics Visualizer</summary>
      <p class="muted">Hover bars represent relative durations or targets.</p>
      <div style="margin:8px 0">
        <div class="scorebar"><span style="width:40%;background:var(--accent)"></span></div>
        <p><b>MTTR</b> ‚Äì Mean Time to Repair (should be low)</p>
        <div class="scorebar"><span style="width:80%;background:var(--accent2)"></span></div>
        <p><b>MTBF</b> ‚Äì Mean Time Between Failures (should be high)</p>
        <div class="scorebar"><span style="width:30%;background:var(--ok)"></span></div>
        <p><b>RTO</b> ‚Äì Recovery Time Objective (target restoration window)</p>
        <div class="scorebar"><span style="width:20%;background:var(--warn)"></span></div>
        <p><b>RPO</b> ‚Äì Recovery Point Objective (data currency target)</p>
      </div>
    </details>

    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="haCheck" style="margin-top:6px">
        <label><input type="checkbox" name="hsrp" /> HSRP and VRRP provide gateway redundancy.</label><br>
        <label><input type="checkbox" name="activepassive" /> Active/Passive mode focuses on fault tolerance.</label><br>
        <label><input type="checkbox" name="nic" /> NIC teaming aggregates bandwidth and adds failover.</label><br>
        <label><input type="checkbox" name="cold" /> Cold sites provide immediate recovery with live data.</label><br>
        <button type="button" class="btn" id="gradeHA2">Grade</button>
        <span id="haCheckScore" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // Chapter 15 quiz grader
    const haBtn2=document.getElementById('gradeHA2');
    if(haBtn2){
      haBtn2.addEventListener('click',()=>{
        const c=document.querySelector('#haCheck');
        const correct={
          hsrp:true,
          activepassive:true,
          nic:true,
          cold:false
        };
        const picks=Object.fromEntries([...new FormData(c)].map(([k])=>[k,true]));
        const ok=Object.keys(correct).every(k=>!!correct[k]===!!picks[k]);
        const scoreEl=document.getElementById('haCheckScore');
        scoreEl.textContent=ok?'‚úÖ Excellent HA knowledge!':'‚ùå Review Recovery Site tiers and HA modes.';
        scoreEl.style.color=ok?'var(--ok)':'var(--bad)';
      });
    }
  </script>


  <!-- 16 Security Concepts -->
   <!-- 16 -->
  <section class="card" id="ch16" aria-labelledby="t16">
    <div class="title">
      <h2 id="t16">Chapter 16 ‚Ä¢ Common Security Concepts</h2>
      <span class="tag">CIA Triad ‚Ä¢ Authentication ‚Ä¢ Defense-in-Depth</span>
    </div>

    <p class="muted">
      Security concepts form the foundation of cybersecurity strategy. 
      They include the CIA Triad, authentication methods, and layered defense mechanisms 
      that work together to reduce risk and maintain resilience.
    </p>

    <!-- Tabs -->
    <div class="row" style="margin-bottom:10px;">
      <button class="btn secTab" data-tab="cia">CIA Triad</button>
      <button class="btn secTab" data-tab="auth">Authentication</button>
      <button class="btn secTab" data-tab="layers">Defense-in-Depth</button>
    </div>

    <!-- CIA Triad Panel -->
    <div id="cia" class="secPanel" style="display:block;">
      <h3>Interactive CIA Triad</h3>
      <p>Click each component of the CIA Triad to explore its meaning.</p>
      <div class="svgbox" id="ciaViz" aria-label="CIA Triad diagram"></div>
      <p id="ciaDesc" class="muted" style="margin-top:8px;">Confidentiality ensures only authorized access to data.</p>
    </div>

    <!-- Authentication Panel -->
    <div id="auth" class="secPanel" style="display:none;">
      <h3>Authentication Methods</h3>
      <p>Select a method to understand its strengths and weaknesses.</p>
      <div class="row" style="flex-wrap:wrap;gap:6px;">
        <button class="btn authBtn" data-method="password">Password</button>
        <button class="btn authBtn" data-method="mfa">Multi-Factor Authentication</button>
        <button class="btn authBtn" data-method="biometric">Biometric</button>
        <button class="btn authBtn" data-method="token">Hardware Token</button>
      </div>
      <div id="authInfo" class="muted" style="margin-top:8px;">
        Passwords rely on secrecy and complexity to protect accounts.
      </div>
    </div>

    <!-- Defense Layers Panel -->
    <div id="layers" class="secPanel" style="display:none;">
      <h3>Defense-in-Depth Strategy</h3>
      <p>Defense-in-Depth applies multiple layers of protection across systems and networks.</p>
      <div class="svgbox" id="defTower" aria-label="Defense layers visual tower"></div>
    </div>

    <!-- Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz16" style="margin-top:8px;">
        <label>Which part of the CIA Triad ensures information accuracy?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>Confidentiality</option><option>Integrity</option><option>Availability</option>
          </select>
        </label><br><br>
        <label>Which approach combines multiple protective measures across network layers?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>Defense-in-Depth</option><option>Least Privilege</option><option>Zero Trust</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade16">Check Answers</button>
        <span id="score16" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Tab Switching ---
    document.querySelectorAll('.secTab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const t=btn.dataset.tab;
        document.querySelectorAll('.secPanel').forEach(p=>p.style.display='none');
        document.getElementById(t).style.display='block';
      });
    });

    // --- CIA Triad Visualization ---
    const ciaViz=document.getElementById('ciaViz');
    ciaViz.innerHTML=`
      <svg viewBox="0 0 300 240" width="100%" height="220">
        <polygon points="150,40 260,200 40,200" fill="#1e3a8a" stroke="#60a5fa" stroke-width="2"/>
        <text x="140" y="60" fill="#e0eaff" font-size="13">C</text>
        <text x="260" y="195" fill="#e0eaff" font-size="13">A</text>
        <text x="35" y="195" fill="#e0eaff" font-size="13">I</text>
      </svg>`;
    const ciaDesc=document.getElementById('ciaDesc');
    ciaViz.addEventListener('click',(e)=>{
      if(e.offsetX>180&&e.offsetY>160){
        ciaDesc.textContent='üîπ Availability ‚Äì Systems must be operational and accessible when needed.';
      } else if(e.offsetX<120&&e.offsetY>160){
        ciaDesc.textContent='üîπ Integrity ‚Äì Data must remain accurate and unaltered.';
      } else {
        ciaDesc.textContent='üîπ Confidentiality ‚Äì Prevent unauthorized access to information.';
      }
    });

    // --- Authentication Info ---
    const authInfo=document.getElementById('authInfo');
    const authData={
      password:'Passwords rely on secrecy but are vulnerable to brute-force and reuse attacks.',
      mfa:'Multi-Factor Authentication adds additional verification factors for stronger protection.',
      biometric:'Biometric authentication uses unique physical traits, offering convenience and higher assurance.',
      token:'Hardware tokens generate one-time passwords and enhance security for critical systems.'
    };
    document.querySelectorAll('.authBtn').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const m=btn.dataset.method;
        authInfo.textContent=authData[m];
      });
    });

    // --- Defense-in-Depth Visual ---
    const defTower=document.getElementById('defTower');
    defTower.innerHTML=`
      <svg viewBox="0 0 300 250" width="100%" height="220">
        <rect x="80" y="200" width="140" height="30" fill="#1e40af"/><text x="105" y="220" fill="#e2e8f0" font-size="12">Physical Security</text>
        <rect x="80" y="160" width="140" height="30" fill="#1d4ed8"/><text x="105" y="180" fill="#e2e8f0" font-size="12">Network Security</text>
        <rect x="80" y="120" width="140" height="30" fill="#2563eb"/><text x="110" y="140" fill="#e2e8f0" font-size="12">Endpoint Security</text>
        <rect x="80" y="80" width="140" height="30" fill="#3b82f6"/><text x="120" y="100" fill="#e2e8f0" font-size="12">Application</text>
        <rect x="80" y="40" width="140" height="30" fill="#60a5fa"/><text x="110" y="60" fill="#1e293b" font-size="12">User Awareness</text>
      </svg>
    `;

    // --- Quiz ---
    document.getElementById('grade16').addEventListener('click',()=>{
      const f=new FormData(document.getElementById('quiz16'));
      const q1=f.get('q1'), q2=f.get('q2');
      const s=document.getElementById('score16');
      if(q1==='Integrity'&&q2==='Defense-in-Depth'){
        s.textContent='‚úÖ Correct! Integrity ensures data accuracy; layered defenses mitigate risk.';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review CIA principles and security layering.';
        s.style.color='var(--bad)';
      }
    });
  </script>


  <!-- 17 Attacks -->
     <!-- 17 -->
  <section class="card" id="ch17" aria-labelledby="t17">
    <div class="title">
      <h2 id="t17">Chapter 17 ‚Ä¢ Common Types of Attacks</h2>
      <span class="tag">Phishing ‚Ä¢ DoS ‚Ä¢ Spoofing ‚Ä¢ Injection</span>
    </div>

    <p class="muted">
      Cyber attacks exploit vulnerabilities in human behavior, networks, and applications.
      Understanding attack types helps professionals anticipate, detect, and prevent breaches.
    </p>

    <!-- Tabs -->
    <div class="row" style="margin-bottom:10px;">
      <button class="btn atkTab" data-tab="human">Human</button>
      <button class="btn atkTab" data-tab="network">Network</button>
      <button class="btn atkTab" data-tab="app">Application</button>
    </div>

    <!-- Human Attacks -->
    <div id="human" class="atkPanel" style="display:block;">
      <h3>Human-Based Attacks</h3>
      <p>Social engineering exploits trust, curiosity, or fear rather than system flaws.</p>
      <div id="humanAttacks" class="grid3">
        <div class="atkCard" data-type="phish">üé£ Phishing</div>
        <div class="atkCard" data-type="pretext">üé≠ Pretexting</div>
        <div class="atkCard" data-type="bait">üíæ Baiting</div>
      </div>
      <div id="atkInfoHuman" class="muted" style="margin-top:8px;">Click an attack to view details.</div>
      <div class="svgbox" id="atkVizHuman"></div>
    </div>

    <!-- Network Attacks -->
    <div id="network" class="atkPanel" style="display:none;">
      <h3>Network-Based Attacks</h3>
      <div id="netAttacks" class="grid3">
        <div class="atkCard" data-type="dos">üí• Denial of Service (DoS)</div>
        <div class="atkCard" data-type="mitm">üï∂Ô∏è Man-in-the-Middle (MitM)</div>
        <div class="atkCard" data-type="spoof">üé≠ IP Spoofing</div>
      </div>
      <div id="atkInfoNet" class="muted" style="margin-top:8px;">Select a network attack to visualize.</div>
      <div class="svgbox" id="atkVizNet"></div>
    </div>

    <!-- Application Attacks -->
    <div id="app" class="atkPanel" style="display:none;">
      <h3>Application-Level Attacks</h3>
      <div id="appAttacks" class="grid3">
        <div class="atkCard" data-type="sql">üß© SQL Injection</div>
        <div class="atkCard" data-type="xss">üí¨ Cross-Site Scripting (XSS)</div>
        <div class="atkCard" data-type="malware">ü¶† Malware / Ransomware</div>
      </div>
      <div id="atkInfoApp" class="muted" style="margin-top:8px;">Click an application attack to learn more.</div>
      <div class="svgbox" id="atkVizApp"></div>
    </div>

    <!-- Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz17" style="margin-top:8px;">
        <label>Which attack tricks users into revealing credentials?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>Phishing</option><option>DoS</option><option>SQL Injection</option>
          </select>
        </label><br><br>
        <label>Which network attack intercepts communications?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>MitM</option><option>XSS</option><option>Phishing</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade17">Check Answers</button>
        <span id="score17" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Tabs ---
    document.querySelectorAll('.atkTab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const t=btn.dataset.tab;
        document.querySelectorAll('.atkPanel').forEach(p=>p.style.display='none');
        document.getElementById(t).style.display='block';
      });
    });

    // --- Human Attacks ---
    const humanInfo=document.getElementById('atkInfoHuman');
    const humanViz=document.getElementById('atkVizHuman');
    const humanAttacks={
      phish:{
        desc:'Phishing: deceptive emails/websites trick users into revealing passwords or data.',
        vis:`<svg viewBox="0 0 400 120"><rect x="50" y="50" width="100" height="40" fill="#16214a" stroke="#2563eb"/><rect x="250" y="50" width="100" height="40" fill="#16214a" stroke="#9333ea"/><text x="70" y="75" fill="#dbeafe">User</text><text x="280" y="75" fill="#dbeafe">Attacker</text><line x1="150" y1="70" x2="250" y2="70" stroke="#f87171" stroke-width="2"/><text x="140" y="55" fill="#fca5a5" font-size="11">Fake Login Page</text></svg>`
      },
      pretext:{
        desc:'Pretexting: attacker fabricates scenarios to extract info (e.g., ‚ÄúIT needs your credentials‚Äù).',
        vis:`<svg viewBox="0 0 400 120"><rect x="50" y="50" width="120" height="40" fill="#16214a" stroke="#2563eb"/><rect x="240" y="50" width="120" height="40" fill="#16214a" stroke="#9333ea"/><text x="70" y="75" fill="#dbeafe">Employee</text><text x="270" y="75" fill="#dbeafe">Impersonator</text><line x1="170" y1="70" x2="240" y2="70" stroke="#fbbf24" stroke-width="2"/></svg>`
      },
      bait:{
        desc:'Baiting: attacker tempts users with ‚Äúfree‚Äù media or downloads carrying malware.',
        vis:`<svg viewBox="0 0 400 120"><circle cx="100" cy="70" r="20" fill="#2563eb"/><rect x="220" y="50" width="120" height="40" fill="#16214a" stroke="#9333ea"/><text x="60" y="75" fill="#dbeafe">USB</text><text x="250" y="75" fill="#dbeafe">Infected System</text><line x1="120" y1="70" x2="220" y2="70" stroke="#f87171" stroke-width="2"/></svg>`
      }
    };
    document.querySelectorAll('#humanAttacks .atkCard').forEach(c=>{
      c.addEventListener('click',()=>{
        const d=humanAttacks[c.dataset.type];
        humanInfo.textContent=d.desc;
        humanViz.innerHTML=d.vis;
      });
    });

    // --- Network Attacks ---
    const netInfo=document.getElementById('atkInfoNet');
    const netViz=document.getElementById('atkVizNet');
    const netAttacks={
      dos:{
        desc:'DoS: floods a target with excessive traffic to cause downtime.',
        vis:`<svg viewBox="0 0 400 120"><circle cx="80" cy="70" r="20" fill="#2563eb"/><rect x="260" y="50" width="100" height="40" fill="#16214a" stroke="#9333ea"/><line x1="100" y1="70" x2="260" y2="60" stroke="#f87171" stroke-width="3"/><line x1="100" y1="70" x2="260" y2="70" stroke="#f87171" stroke-width="3"/><line x1="100" y1="70" x2="260" y2="80" stroke="#f87171" stroke-width="3"/><text x="65" y="75" fill="#dbeafe">Botnet</text><text x="280" y="75" fill="#dbeafe">Server</text></svg>`
      },
      mitm:{
        desc:'Man-in-the-Middle: attacker secretly intercepts traffic between user and server.',
        vis:`<svg viewBox="0 0 400 120"><circle cx="80" cy="70" r="20" fill="#2563eb"/><circle cx="200" cy="70" r="20" fill="#f59e0b"/><circle cx="320" cy="70" r="20" fill="#9333ea"/><line x1="100" y1="70" x2="180" y2="70" stroke="#f59e0b" stroke-width="2"/><line x1="220" y1="70" x2="300" y2="70" stroke="#f59e0b" stroke-width="2"/><text x="70" y="75" fill="#dbeafe">User</text><text x="190" y="75" fill="#fcd34d">Hacker</text><text x="310" y="75" fill="#dbeafe">Server</text></svg>`
      },
      spoof:{
        desc:'IP Spoofing: attacker forges source IP to masquerade as a trusted host.',
        vis:`<svg viewBox="0 0 400 120"><rect x="60" y="50" width="100" height="40" fill="#16214a" stroke="#2563eb"/><rect x="260" y="50" width="100" height="40" fill="#16214a" stroke="#9333ea"/><line x1="160" y1="70" x2="260" y2="70" stroke="#f87171" stroke-width="2"/><text x="80" y="75" fill="#dbeafe">Attacker (Fake IP)</text><text x="280" y="75" fill="#dbeafe">Server</text></svg>`
      }
    };
    document.querySelectorAll('#netAttacks .atkCard').forEach(c=>{
      c.addEventListener('click',()=>{
        const d=netAttacks[c.dataset.type];
        netInfo.textContent=d.desc;
        netViz.innerHTML=d.vis;
      });
    });

    // --- Application Attacks ---
    const appInfo=document.getElementById('atkInfoApp');
    const appViz=document.getElementById('atkVizApp');
    const appAttacks={
      sql:{
        desc:'SQL Injection: attacker inserts malicious SQL code into input fields to manipulate databases.',
        vis:`<svg viewBox="0 0 400 120"><rect x="60" y="50" width="100" height="40" fill="#16214a" stroke="#2563eb"/><rect x="240" y="50" width="100" height="40" fill="#16214a" stroke="#9333ea"/><line x1="160" y1="70" x2="240" y2="70" stroke="#f87171" stroke-width="2"/><text x="100" y="45" fill="#fca5a5" font-size="11">' OR 1=1;--</text></svg>`
      },
      xss:{
        desc:'Cross-Site Scripting (XSS): attacker injects malicious code into websites viewed by other users.',
        vis:`<svg viewBox="0 0 400 120"><rect x="80" y="50" width="100" height="40" fill="#16214a" stroke="#2563eb"/><rect x="260" y="50" width="100" height="40" fill="#16214a" stroke="#9333ea"/><line x1="180" y1="70" x2="260" y2="70" stroke="#f87171" stroke-width="2"/><text x="110" y="45" fill="#fca5a5" font-size="11">&lt;script&gt;alert('XSS')&lt;/script&gt;</text></svg>`
      },
      malware:{
        desc:'Malware: harmful software designed to disrupt, damage, or steal information.',
        vis:`<svg viewBox="0 0 400 120"><circle cx="90" cy="70" r="20" fill="#2563eb"/><rect x="240" y="50" width="100" height="40" fill="#16214a" stroke="#9333ea"/><line x1="110" y1="70" x2="240" y2="70" stroke="#f87171" stroke-width="3"/><text x="150" y="45" fill="#fca5a5" font-size="11">Payload Transmission</text></svg>`
      }
    };
    document.querySelectorAll('#appAttacks .atkCard').forEach(c=>{
      c.addEventListener('click',()=>{
        const d=appAttacks[c.dataset.type];
        appInfo.textContent=d.desc;
        appViz.innerHTML=d.vis;
      });
    });

    // --- Quiz ---
    document.getElementById('grade17').addEventListener('click',()=>{
      const f=new FormData(document.getElementById('quiz17'));
      const q1=f.get('q1'), q2=f.get('q2');
      const s=document.getElementById('score17');
      if(q1==='Phishing'&&q2==='MitM'){
        s.textContent='‚úÖ Correct! Phishing targets people; MitM intercepts network traffic.';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review attack types and vectors.';
        s.style.color='var(--bad)';
      }
    });
  </script>

  <style>
    .atkCard {
      padding:10px;
      border:1px solid #233466;
      background:#0b1628;
      text-align:center;
      border-radius:8px;
      cursor:pointer;
      color:#dbeafe;
      transition:0.2s;
    }
    .atkCard:hover {background:#1e3a8a;border-color:#60a5fa;}
  </style>


  <!-- 18 Hardening -->
   <!-- 18 -->
  <section class="card" id="ch18" aria-labelledby="t18">
    <div class="title">
      <h2 id="t18">Chapter 18 ‚Ä¢ Network Hardening Techniques</h2>
      <span class="tag">Firewalls ‚Ä¢ Baselines ‚Ä¢ Patch Management</span>
    </div>

    <p class="muted">
      Network hardening strengthens systems against attacks by reducing vulnerabilities,
      applying patches, enforcing policies, and configuring protective technologies like firewalls and intrusion prevention systems.
    </p>

    <!-- Hardening Checklist -->
    <details open>
      <summary>Interactive Hardening Checklist</summary>
      <p>Click to apply security controls and see their cumulative effect.</p>
      <div id="hardChecklist" class="grid3">
        <label><input type="checkbox" class="chk" value="pw"> Change Default Passwords</label>
        <label><input type="checkbox" class="chk" value="fw"> Enable Host Firewall</label>
        <label><input type="checkbox" class="chk" value="svcs"> Disable Unused Services</label>
        <label><input type="checkbox" class="chk" value="patch"> Apply OS & Firmware Updates</label>
        <label><input type="checkbox" class="chk" value="acl"> Configure Access Control Lists</label>
        <label><input type="checkbox" class="chk" value="ids"> Enable IDS/IPS Monitoring</label>
      </div>
      <div class="svgbox" id="secureViz" aria-label="Network security visual"></div>
      <p id="secureStatus" class="muted" style="margin-top:8px;">System baseline security: LOW</p>
    </details>

    <!-- Firewall Rule Builder -->
    <details>
      <summary>Firewall Rule Builder</summary>
      <p>Create a sample firewall rule and visualize its effect:</p>
      <div class="row" style="flex-wrap:wrap;gap:6px;">
        <select id="fwAction" style="padding:6px;border-radius:6px;background:#0b1628;color:#dbeafe;border:1px solid #233466;">
          <option>ALLOW</option><option>DENY</option>
        </select>
        <input id="fwPort" type="text" placeholder="Port (e.g., 80)"
          style="width:100px;padding:6px;border-radius:6px;background:#0b1628;color:#dbeafe;border:1px solid #233466;">
        <button class="btn" id="fwAdd">Apply Rule</button>
      </div>
      <div class="svgbox" id="fwViz" aria-label="Firewall rule visualization"></div>
      <p id="fwStatus" class="muted" style="margin-top:6px;">No firewall rules applied yet.</p>
    </details>

    <!-- Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz18" style="margin-top:8px;">
        <label>Which measure helps block external attacks at the network edge?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>Firewall</option><option>Patch Update</option><option>Password Change</option>
          </select>
        </label><br><br>
        <label>Which step removes unnecessary entry points into a system?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>Disable Unused Services</option><option>Apply ACLs</option><option>Install Antivirus</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade18">Check Answers</button>
        <span id="score18" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Hardening Visualization ---
    const secureViz=document.getElementById('secureViz');
    const secureStatus=document.getElementById('secureStatus');
    const chkBoxes=document.querySelectorAll('.chk');
    function renderSecurity(){
      const checked=[...chkBoxes].filter(c=>c.checked).length;
      const score=Math.round((checked/6)*100);
      const color=score>80?'#22c55e':score>50?'#eab308':'#ef4444';
      secureViz.innerHTML=`
        <svg viewBox="0 0 400 150" width="100%" height="120">
          <rect x="40" y="40" width="320" height="70" rx="10" fill="#16214a" stroke="${color}" stroke-width="3"/>
          <circle cx="80" cy="75" r="15" fill="${color}"/>
          <circle cx="320" cy="75" r="15" fill="${color}"/>
          <text x="160" y="85" fill="#dbeafe" font-size="14">${score}% Secured</text>
        </svg>`;
      secureStatus.textContent=`System baseline security: ${score}%`;
      secureStatus.style.color=color;
    }
    chkBoxes.forEach(c=>c.addEventListener('change',renderSecurity));
    renderSecurity();

    // --- Firewall Rule Builder ---
    const fwViz=document.getElementById('fwViz');
    const fwStatus=document.getElementById('fwStatus');
    document.getElementById('fwAdd').addEventListener('click',()=>{
      const action=document.getElementById('fwAction').value;
      const port=document.getElementById('fwPort').value;
      const color=action==='ALLOW'?'#22c55e':'#ef4444';
      fwViz.innerHTML=`
        <svg viewBox="0 0 400 130" width="100%" height="110">
          <rect x="60" y="40" width="100" height="50" fill="#16214a" stroke="#2563eb" stroke-width="2"/>
          <rect x="240" y="40" width="100" height="50" fill="#16214a" stroke="#9333ea" stroke-width="2"/>
          <text x="80" y="70" fill="#dbeafe">Client</text>
          <text x="270" y="70" fill="#dbeafe">Server</text>
          <line x1="160" y1="65" x2="240" y2="65" stroke="${color}" stroke-width="3"/>
          <text x="170" y="55" fill="${color}" font-size="11">${action} port ${port}</text>
        </svg>`;
      fwStatus.textContent=`Rule Applied: ${action} traffic on port ${port}`;
      fwStatus.style.color=color;
    });

    // --- Quiz ---
    document.getElementById('grade18').addEventListener('click',()=>{
      const f=new FormData(document.getElementById('quiz18'));
      const q1=f.get('q1'), q2=f.get('q2');
      const s=document.getElementById('score18');
      if(q1==='Firewall'&&q2==='Disable Unused Services'){
        s.textContent='‚úÖ Excellent! You understand network edge and service-layer protection.';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review hardening layers and configurations.';
        s.style.color='var(--bad)';
      }
    });
  </script>

  <style>
    #hardChecklist label{
      display:block;
      background:#0b1628;
      padding:8px;
      border-radius:8px;
      border:1px solid #233466;
      color:#dbeafe;
      cursor:pointer;
    }
    #hardChecklist label:hover{background:#1e3a8a;border-color:#60a5fa;}
  </style>


  <!-- 19 Remote Access -->
  <!-- 19 -->
  <section class="card" id="ch19" aria-labelledby="t19">
    <div class="title">
      <h2 id="t19">Chapter 19 ‚Ä¢ Remote Access Security</h2>
      <span class="tag">VPN ‚Ä¢ Encryption ‚Ä¢ Zero Trust</span>
    </div>

    <p class="muted">
      Remote access security ensures users can connect to corporate resources safely over public networks.
      Technologies like VPNs, RDP, and Zero Trust principles authenticate and encrypt communication to prevent interception or misuse.
    </p>

    <!-- Secure Connection Visualizer -->
    <details open>
      <summary>VPN Tunnel & Encryption Visualizer</summary>
      <p>Toggle between insecure and secure connection states to visualize encryption in action.</p>
      <div class="row" style="margin-bottom:8px;">
        <button class="btn" id="vpnInsecure">Insecure Connection</button>
        <button class="btn" id="vpnSecure">Secure VPN Tunnel</button>
      </div>
      <div class="svgbox" id="vpnViz" aria-label="VPN encryption visual"></div>
      <p id="vpnNote" class="muted" style="margin-top:8px;">No tunnel established.</p>
    </details>

    <!-- Remote Desktop Simulation -->
    <details>
      <summary>Remote Desktop Session Flow</summary>
      <p>Observe how encrypted RDP sessions travel securely through a VPN tunnel.</p>
      <div class="svgbox" id="rdpViz" aria-label="RDP secure session diagram"></div>
      <button class="btn" id="rdpStart" style="margin-top:8px;">Start Secure RDP Session</button>
      <p id="rdpStatus" class="muted" style="margin-top:8px;">Session not started.</p>
    </details>

    <!-- Authentication Models -->
    <details>
      <summary>Authentication Models</summary>
      <p>Select a model to learn how user validation occurs:</p>
      <div class="row" style="flex-wrap:wrap;gap:6px;">
        <button class="btn authModel" data-model="ppp">PPP / CHAP</button>
        <button class="btn authModel" data-model="radius">RADIUS</button>
        <button class="btn authModel" data-model="saml">SAML / SSO</button>
        <button class="btn authModel" data-model="zero">Zero Trust</button>
      </div>
      <p id="authModelInfo" class="muted" style="margin-top:8px;">Select a model above.</p>
    </details>

    <!-- Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz19" style="margin-top:8px;">
        <label>Which protocol establishes encrypted tunnels for secure remote access?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>PPTP</option><option>VPN</option><option>FTP</option>
          </select>
        </label><br><br>
        <label>What is the key principle of Zero Trust architecture?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>Assume Breach</option><option>Open Access</option><option>Default Trust</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade19">Check Answers</button>
        <span id="score19" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- VPN Visualization ---
    const vpnViz=document.getElementById('vpnViz');
    const vpnNote=document.getElementById('vpnNote');
    document.getElementById('vpnInsecure').addEventListener('click',()=>{
      vpnViz.innerHTML=`
        <svg viewBox="0 0 420 130" width="100%" height="110">
          <rect x="40" y="40" width="80" height="50" fill="#16214a" stroke="#9333ea" stroke-width="2"/>
          <rect x="300" y="40" width="80" height="50" fill="#16214a" stroke="#9333ea" stroke-width="2"/>
          <line x1="120" y1="65" x2="300" y2="65" stroke="#ef4444" stroke-width="2" stroke-dasharray="6 4"/>
          <text x="50" y="70" fill="#dbeafe" font-size="12">User</text>
          <text x="320" y="70" fill="#dbeafe" font-size="12">Server</text>
        </svg>`;
      vpnNote.textContent='‚ö†Ô∏è Insecure: Data is transmitted unencrypted and can be intercepted.';
      vpnNote.style.color='var(--bad)';
    });
    document.getElementById('vpnSecure').addEventListener('click',()=>{
      vpnViz.innerHTML=`
        <svg viewBox="0 0 420 130" width="100%" height="110">
          <rect x="40" y="40" width="80" height="50" fill="#16214a" stroke="#2563eb" stroke-width="2"/>
          <rect x="300" y="40" width="80" height="50" fill="#16214a" stroke="#2563eb" stroke-width="2"/>
          <rect x="140" y="55" width="160" height="20" fill="#22c55e" opacity="0.3" rx="6"/>
          <line x1="120" y1="65" x2="300" y2="65" stroke="#22c55e" stroke-width="3"/>
          <text x="50" y="70" fill="#dbeafe" font-size="12">User</text>
          <text x="320" y="70" fill="#dbeafe" font-size="12">Server</text>
          <text x="180" y="50" fill="#86efac" font-size="11">Encrypted Tunnel (VPN)</text>
        </svg>`;
      vpnNote.textContent='‚úÖ Secure: Data is encrypted inside VPN tunnel using AES or IPSec.';
      vpnNote.style.color='var(--ok)';
    });

    // --- RDP Visualization ---
    const rdpViz=document.getElementById('rdpViz');
    const rdpStatus=document.getElementById('rdpStatus');
    document.getElementById('rdpStart').addEventListener('click',()=>{
      rdpViz.innerHTML=`
        <svg viewBox="0 0 420 130" width="100%" height="110">
          <rect x="40" y="40" width="80" height="50" fill="#16214a" stroke="#2563eb" stroke-width="2"/>
          <rect x="300" y="40" width="80" height="50" fill="#16214a" stroke="#2563eb" stroke-width="2"/>
          <path d="M120 65 Q210 20 300 65" stroke="#60a5fa" stroke-width="3" fill="none"/>
          <text x="50" y="70" fill="#dbeafe" font-size="12">Client</text>
          <text x="320" y="70" fill="#dbeafe" font-size="12">Host</text>
          <text x="190" y="35" fill="#93c5fd" font-size="11">Encrypted RDP over VPN</text>
        </svg>`;
      rdpStatus.textContent='üîê Secure RDP session established over VPN tunnel.';
      rdpStatus.style.color='var(--ok)';
    });

    // --- Authentication Models ---
    const authModelInfo=document.getElementById('authModelInfo');
    const authModels={
      ppp:'PPP/CHAP ‚Äì Used in dial-up or legacy VPNs; performs challenge-response authentication.',
      radius:'RADIUS ‚Äì Centralized authentication server verifying credentials for network access.',
      saml:'SAML/SSO ‚Äì Web-based federation allowing single sign-on across multiple apps securely.',
      zero:'Zero Trust ‚Äì Verifies every request as if it originates from an open network (assume breach).'
    };
    document.querySelectorAll('.authModel').forEach(btn=>{
      btn.addEventListener('click',()=>{
        authModelInfo.textContent=authModels[btn.dataset.model];
      });
    });

    // --- Quiz ---
    document.getElementById('grade19').addEventListener('click',()=>{
      const f=new FormData(document.getElementById('quiz19'));
      const q1=f.get('q1'), q2=f.get('q2');
      const s=document.getElementById('score19');
      if(q1==='VPN'&&q2==='Assume Breach'){
        s.textContent='‚úÖ Excellent! VPN encrypts remote traffic; Zero Trust assumes no inherent trust.';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review secure connection methods and Zero Trust concepts.';
        s.style.color='var(--bad)';
      }
    });
  </script>


  <!-- 20 Physical Security -->
   <!-- 20 -->
  <section class="card" id="ch20" aria-labelledby="t20">
    <div class="title">
      <h2 id="t20">Chapter 20 ‚Ä¢ Physical Security</h2>
      <span class="tag">Access Control ‚Ä¢ Surveillance ‚Ä¢ Environmental Protection</span>
    </div>

    <p class="muted">
      Physical security protects IT assets, data centers, and personnel from environmental and human threats.
      It complements cybersecurity by ensuring only authorized individuals can access critical areas.
    </p>

    <!-- Facility Visualizer -->
    <details open>
      <summary>Facility Security Visualization</summary>
      <p>Hover or click security zones to explore physical protection mechanisms.</p>
      <div class="svgbox" id="facilityViz" aria-label="Facility security map"></div>
    </details>

    <!-- Access Control Simulator -->
    <details>
      <summary>Access Control Simulator</summary>
      <p>Simulate different entry attempts and observe how the system reacts.</p>
      <div class="row" style="gap:8px;">
        <button class="btn accessBtn" data-action="badge">Badge In</button>
        <button class="btn accessBtn" data-action="tailgate">Tailgate Attempt</button>
        <button class="btn accessBtn" data-action="breakin">Break-In Attempt</button>
      </div>
      <p id="accessStatus" class="muted" style="margin-top:8px;">Awaiting action...</p>
      <div class="svgbox" id="accessViz" aria-label="Access control visual"></div>
    </details>

    <!-- Security Tier Meter -->
    <details>
      <summary>Security Tier Evaluation</summary>
      <p>Select implemented controls to measure overall facility security level:</p>
      <div id="physControls" class="grid3">
        <label><input type="checkbox" class="physChk" value="cams"> CCTV Cameras</label>
        <label><input type="checkbox" class="physChk" value="badge"> Smart Badges</label>
        <label><input type="checkbox" class="physChk" value="guards"> Security Guards</label>
        <label><input type="checkbox" class="physChk" value="locks"> Electronic Locks</label>
        <label><input type="checkbox" class="physChk" value="fire"> Fire Suppression System</label>
        <label><input type="checkbox" class="physChk" value="env"> Temperature / Humidity Sensors</label>
      </div>
      <div class="svgbox" id="tierViz" aria-label="Security tier meter"></div>
      <p id="tierLevel" class="muted" style="margin-top:8px;">Security Tier: Low</p>
    </details>

    <!-- Quiz -->
    <details>
      <summary>Quick Knowledge Check</summary>
      <form id="quiz20" style="margin-top:8px;">
        <label>Which of the following is a physical control?<br>
          <select name="q1" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>CCTV Camera</option><option>Password Policy</option><option>Firewall</option>
          </select>
        </label><br><br>
        <label>What type of threat does tailgating represent?<br>
          <select name="q2" style="padding:6px;border-radius:6px;background:#0b1628;color:#d7e8ff;border:1px solid #233466;">
            <option value="">Select</option><option>Social Engineering</option><option>Malware</option><option>DoS Attack</option>
          </select>
        </label><br><br>
        <button type="button" class="btn" id="grade20">Check Answers</button>
        <span id="score20" class="score"></span>
      </form>
    </details>
  </section>

  <script>
    // --- Facility Visualization ---
    const facilityViz=document.getElementById('facilityViz');
    facilityViz.innerHTML=`
      <svg viewBox="0 0 500 250" width="100%" height="220">
        <rect x="60" y="40" width="380" height="150" rx="10" fill="#0b1628" stroke="#334155" stroke-width="3"/>
        <rect x="100" y="80" width="100" height="60" fill="#16214a" stroke="#60a5fa" stroke-width="2"/>
        <rect x="300" y="80" width="100" height="60" fill="#16214a" stroke="#9333ea" stroke-width="2"/>
        <text x="120" y="110" fill="#dbeafe">Server Room</text>
        <text x="310" y="110" fill="#dbeafe">Lobby</text>
        <circle cx="250" cy="60" r="6" fill="#facc15" title="Camera"/>
        <circle cx="250" cy="170" r="6" fill="#f87171" title="Fire Sensor"/>
        <text x="180" y="190" fill="#dbeafe" font-size="11">CCTV & Sensors Active</text>
      </svg>`;

    // --- Access Control Simulator ---
    const accessViz=document.getElementById('accessViz');
    const accessStatus=document.getElementById('accessStatus');
    const accessActions={
      badge:{
        msg:'‚úÖ Access granted ‚Äî identity verified via smart badge.',
        color:'var(--ok)',
        vis:`<svg viewBox="0 0 400 120" width="100%" height="100">
          <rect x="80" y="50" width="80" height="40" fill="#16214a" stroke="#2563eb"/>
          <rect x="250" y="50" width="80" height="40" fill="#16214a" stroke="#22c55e"/>
          <text x="90" y="75" fill="#dbeafe">Employee</text><text x="265" y="75" fill="#dbeafe">Server Room</text>
          <line x1="160" y1="70" x2="250" y2="70" stroke="#22c55e" stroke-width="3"/>
        </svg>`
      },
      tailgate:{
        msg:'‚ö†Ô∏è Tailgating attempt detected ‚Äî alert triggered, camera recording initiated!',
        color:'var(--warn)',
        vis:`<svg viewBox="0 0 400 120" width="100%" height="100">
          <rect x="60" y="50" width="60" height="40" fill="#16214a" stroke="#2563eb"/>
          <rect x="140" y="50" width="60" height="40" fill="#16214a" stroke="#f59e0b"/>
          <rect x="260" y="50" width="80" height="40" fill="#16214a" stroke="#22c55e"/>
          <text x="65" y="75" fill="#dbeafe">Auth. User</text><text x="145" y="75" fill="#fcd34d">Intruder</text>
          <line x1="200" y1="70" x2="260" y2="70" stroke="#f59e0b" stroke-width="3" stroke-dasharray="4 2"/>
        </svg>`
      },
      breakin:{
        msg:'üö® Break-in attempt! Door lock override ‚Äî alarm and lockdown triggered!',
        color:'var(--bad)',
        vis:`<svg viewBox="0 0 400 120" width="100%" height="100">
          <rect x="100" y="50" width="80" height="40" fill="#16214a" stroke="#ef4444"/>
          <rect x="250" y="50" width="80" height="40" fill="#16214a" stroke="#22c55e"/>
          <text x="120" y="75" fill="#dbeafe">Intruder</text><text x="270" y="75" fill="#dbeafe">Server Room</text>
          <line x1="180" y1="70" x2="250" y2="70" stroke="#ef4444" stroke-width="3"/>
        </svg>`
      }
    };
    document.querySelectorAll('.accessBtn').forEach(b=>{
      b.addEventListener('click',()=>{
        const act=b.dataset.action;
        const d=accessActions[act];
        accessStatus.textContent=d.msg;
        accessStatus.style.color=d.color;
        accessViz.innerHTML=d.vis;
      });
    });

    // --- Security Tier Meter ---
    const tierViz=document.getElementById('tierViz');
    const tierLevel=document.getElementById('tierLevel');
    const physChk=document.querySelectorAll('.physChk');
    function renderTier(){
      const count=[...physChk].filter(c=>c.checked).length;
      const score=Math.round((count/6)*100);
      const color=score>80?'#22c55e':score>50?'#eab308':'#ef4444';
      tierViz.innerHTML=`
        <svg viewBox="0 0 400 120" width="100%" height="100">
          <rect x="50" y="60" width="${3*score}" height="20" rx="6" fill="${color}" opacity="0.7"/>
          <rect x="50" y="60" width="300" height="20" rx="6" fill="none" stroke="#334155" stroke-width="2"/>
          <text x="160" y="75" fill="#dbeafe" font-size="14">${score}% Secured</text>
        </svg>`;
      tierLevel.textContent=`Security Tier: ${score>80?'High':score>50?'Medium':'Low'}`;
      tierLevel.style.color=color;
    }
    physChk.forEach(c=>c.addEventListener('change',renderTier));
    renderTier();

    // --- Quiz ---
    document.getElementById('grade20').addEventListener('click',()=>{
      const f=new FormData(document.getElementById('quiz20'));
      const q1=f.get('q1'), q2=f.get('q2');
      const s=document.getElementById('score20');
      if(q1==='CCTV Camera'&&q2==='Social Engineering'){
        s.textContent='‚úÖ Excellent! CCTV is a physical control; tailgating is social engineering.';
        s.style.color='var(--ok)';
      } else {
        s.textContent='‚ùå Review control types and social engineering concepts.';
        s.style.color='var(--bad)';
      }
    });
  </script>

  <style>
    #physControls label{
      display:block;
      background:#0b1628;
      padding:8px;
      border-radius:8px;
      border:1px solid #233466;
      color:#dbeafe;
      cursor:pointer;
    }
    #physControls label:hover{background:#1e3a8a;border-color:#60a5fa;}
  </style>


</div>

<footer>
  Part of <a href="../../../dashboard.html" style="color:#22d3ee;text-decoration:none;">Hexworth Prime</a> | Web House Network Master Certification
  <div style="margin-top: 15px;">
    <a href="../index.html" class="btn" style="text-decoration: none;">‚Üê Return to Web House</a>
  </div>
</footer>

<script>
  // -------- Hexworth Gating System ----------
  (function checkAccess() {
    const passed = localStorage.getItem('hexworth_web_midterm_passed') === 'true';
    const overlay = document.getElementById('gateOverlay');
    if (passed) {
      overlay.classList.add('unlocked');
    }
  })();

  // -------- Shared: copy helper (if needed later) ----------
  function flash(el){ el.classList.add('flash'); setTimeout(()=>el.classList.remove('flash'),800); }

  // -------- Flashcards flip (fixed) ----------
  document.querySelectorAll('.fc').forEach(el=>{
    function toggle(){
      const pressed = el.getAttribute('aria-pressed') === 'true';
      el.setAttribute('aria-pressed', String(!pressed));
      el.classList.toggle('flip', !pressed);
    }
    el.addEventListener('click', toggle);
    el.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); toggle(); }});
  });

  // -------- Subnet calculator ----------
  const maskBits=document.getElementById('maskBits');
  const maskBitsOut=document.getElementById('maskBitsOut');
  const maskOut=document.getElementById('maskOut');
  const hostsOut=document.getElementById('hostsOut');
  const addrsOut=document.getElementById('addrsOut');
  const nbOut=document.getElementById('nbOut');
  const exampleNet=document.getElementById('exampleNet');

  function prefixToMask(prefix){
    let bits=''.padStart(prefix,'1').padEnd(32,'0');
    return [0,1,2,3].map(i=>parseInt(bits.slice(i*8,(i+1)*8),2)).join('.');
  }
  function maskInfo(prefix){
    const total = Math.pow(2, 32-prefix);
    const usable = prefix<=30 ? Math.max(total-2,0) : 0;
    return {total, usable};
  }
  const ipOk = ip => /^(\d{1,3}\.){3}\d{1,3}$/.test(ip) && ip.split('.').every(n=>+n>=0 && +n<=255);
  const ipToInt = a => a.reduce((n,o)=> (n<<8)+o)>>>0;
  const intToIP = n => [(n>>>24)&255,(n>>>16)&255,(n>>>8)&255,n&255].join('.');
  function updateCalc(){
    const p = +maskBits.value|0;
    maskBitsOut.textContent = '/'+p;
    const mask = prefixToMask(p);
    maskOut.textContent = mask;
    const {total, usable} = maskInfo(p);
    addrsOut.textContent = total.toLocaleString();
    hostsOut.textContent = usable.toLocaleString();
    const netStr = (exampleNet.value||'').trim();
    if(ipOk(netStr)){
      const ip = netStr.split('.').map(Number);
      const ipInt = ipToInt(ip);
      const mInt = ipToInt(mask.split('.').map(Number));
      const network = (ipInt & mInt)>>>0;
      const broadcast = (network | (~mInt>>>0))>>>0;
      nbOut.textContent = `${intToIP(network)} / ${intToIP(broadcast)}`;
    } else nbOut.textContent = '‚Äî';
  }
  if(maskBits){ maskBits.addEventListener('input', updateCalc); exampleNet.addEventListener('input', updateCalc); updateCalc(); }

  // -------- Chapter 11: VLAN visualizer ----------
  const ports = document.querySelectorAll('.port');
  let trunkOn = false;
  const trunkState = document.getElementById('trunkState');
  const toggleTrunkBtn = document.getElementById('toggleTrunk');
  function paintTrunk(){
    if(!document.getElementById('gi01')){
      const t = document.createElement('div');
      t.id='gi01';
      t.className='port';
      t.style.borderColor='#2dd4bf'; t.style.outline='2px solid #22d3ee';
      t.innerHTML='Gi0/1<br><small>Trunk</small>';
      t.setAttribute('title','802.1Q trunk');
      document.getElementById('vlanPorts').appendChild(t);
    }
    document.getElementById('gi01').style.display = trunkOn? 'block':'none';
    trunkState.textContent = 'Trunk: ' + (trunkOn?'ON':'OFF');
  }
  if(toggleTrunkBtn){ toggleTrunkBtn.addEventListener('click', ()=>{ trunkOn=!trunkOn; paintTrunk(); }); paintTrunk(); }

  ports.forEach(p=>{
    p.addEventListener('click', ()=>{
      // Toggle VLAN 10/20 for the demo
      const v = p.getAttribute('data-vlan')==='10' ? '20' : '10';
      p.setAttribute('data-vlan', v);
      p.querySelector('small').textContent = 'Access ' + v;
    });
  });

  // -------- Chapter 12: Wireless channels ----------
  const bars = document.querySelectorAll('.wifi-bars .bar');
  const cleanOnly = document.getElementById('cleanOnly');
  const clearCh = document.getElementById('clearCh');
  function highlightClean(){ bars.forEach(b=> b.classList.toggle('active', ['1','6','11'].includes(b.dataset.ch))); }
  function clearBars(){ bars.forEach(b=> b.classList.remove('active')); }
  if(cleanOnly){ cleanOnly.addEventListener('click', ()=>{ highlightClean(); }); }
  if(clearCh){ clearCh.addEventListener('click', clearBars); }

  // -------- Chapter 15: HA quiz ----------
  const haAns = {A:true, B:true, C:false};
  const haBtn = document.getElementById('gradeHA');
  const haScore = document.getElementById('haScore');
  if(haBtn){
    haBtn.addEventListener('click', ()=>{
      const picks = Array.from(document.querySelectorAll('#haQuiz input[type="checkbox"]'));
      const ok = picks.every(i => (!!haAns[i.value]) === i.checked);
      haScore.textContent = ok ? 'Perfect!' : 'Review concepts above.';
      haScore.style.color = ok ? 'var(--ok)' : 'var(--warn)';
    });
  }

  // -------- Chapter 16: CIA quick defs ----------
  const ciaOut = document.getElementById('ciaOut');
  const defs = {
    C: 'Confidentiality: only authorized entities access data. Ex: encryption, least privilege.',
    I: 'Integrity: data is accurate and unaltered. Ex: hashes, digital signatures.',
    A: 'Availability: systems are up when needed. Ex: redundancy, backups, HA.'
  };
  document.querySelectorAll('[data-cia]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const k = btn.getAttribute('data-cia');
      ciaOut.textContent = defs[k];
      flash(ciaOut);
    });
  });

  // -------- Chapter 17: attacks spotter ----------
  const atkBtn = document.getElementById('gradeAttacks');
  const atkScore = document.getElementById('atkScore');
  if(atkBtn){
    atkBtn.addEventListener('click', ()=>{
      const wants = {smurf:true, syn:true, rogue:true};
      const picks = Array.from(document.querySelectorAll('#attackList input')).reduce((o,i)=> (o[i.value]=i.checked,o),{});
      const ok = Object.keys(wants).every(k=> wants[k]===picks[k]);
      atkScore.textContent = ok ? 'Nice identification!' : 'Not quite ‚Äî revisit the examples.';
      atkScore.style.color = ok ? 'var(--ok)' : 'var(--bad)';
    });
  }

  // -------- Chapter 18: hardening checklist (localStorage) ----------
  const hardening = document.getElementById('hardening');
  const storeKey = 'hardeningChecklist';
  function loadChecks(){
    try{
      const saved = JSON.parse(localStorage.getItem(storeKey)||'{}');
      hardening.querySelectorAll('input[type="checkbox"]').forEach(cb=>{
        cb.checked = !!saved[cb.dataset.k];
      });
    }catch{}
  }
  function saveChecks(){
    const saved={};
    hardening.querySelectorAll('input[type="checkbox"]').forEach(cb=> saved[cb.dataset.k]=cb.checked);
    localStorage.setItem(storeKey, JSON.stringify(saved));
  }
  if(hardening){
    hardening.addEventListener('change', saveChecks);
    loadChecks();
    document.getElementById('clearHardening').addEventListener('click', ()=>{
      localStorage.removeItem(storeKey);
      hardening.querySelectorAll('input[type="checkbox"]').forEach(cb=> cb.checked=false);
    });
  }

  // -------- Chapter 19: VPN split/full diagram ----------
  const vpnMode = document.getElementById('vpnMode');
  const vpnDiagram = document.getElementById('vpnDiagram');
  function renderVPN(mode){
    vpnMode.textContent = 'Mode: ' + (mode==='split'?'Split Tunnel':'Full Tunnel');
    vpnDiagram.innerHTML = `
      <svg viewBox="0 0 780 180" width="100%" height="180" role="img" aria-label="VPN ${mode}">
        <defs>
          <linearGradient id="t" x1="0" y1="0" x2="1" y2="0"><stop offset="0" stop-color="#6ee7ff"/><stop offset="1" stop-color="#c084fc"/></linearGradient>
        </defs>
        <rect x="20" y="40" width="160" height="40" rx="8" fill="#173056"/>
        <text x="40" y="65" fill="#cfe8ff">Client</text>
        <rect x="300" y="20" width="180" height="80" rx="10" fill="#26406f"/>
        <text x="320" y="60" fill="#dbeafe">VPN Gateway</text>
        <rect x="600" y="40" width="160" height="40" rx="8" fill="#173056"/>
        <text x="620" y="65" fill="#cfe8ff">Internet</text>
        <rect x="600" y="110" width="160" height="40" rx="8" fill="#173056"/>
        <text x="620" y="135" fill="#cfe8ff">Corp LAN</text>

        <!-- tunnel -->
        <path d="M180 60 C 240 40, 260 40, 300 60" stroke="url(#t)" stroke-width="4" fill="none"/>
        <path d="M480 60 C 520 60, 560 60, 600 60" stroke="url(#t)" stroke-width="4" fill="none"/>

        ${mode==='split'
          ? `<line x1="180" y1="60" x2="600" y2="60" stroke-dasharray="6 5" stroke="#6ee7ff" />
             <line x1="180" y1="60" x2="600" y2="130" stroke="url(#t)" stroke-width="3" />`
          : `<line x1="180" y1="60" x2="600" y2="130" stroke="url(#t)" stroke-width="4" />
             <line x1="180" y1="60" x2="600" y2="60" stroke="url(#t)" stroke-width="4" />`
        }
      </svg>`;
  }
  document.querySelectorAll('.vpn').forEach(b=>{
    b.addEventListener('click', ()=> renderVPN(b.dataset.mode));
  });

  // Initial renders
  renderVPN('split');

</script>

<!-- Trail Hunter - Patronus Guide System -->
<script src="../../../components/TrailHunter.js"></script>
<script src="../../../components/FluxCapacitor.js"></script>
</body>
</html>
