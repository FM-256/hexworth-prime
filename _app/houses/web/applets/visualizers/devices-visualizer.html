<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Devices Visualizer - Network Essentials</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: white;
        }

        .home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            z-index: 1000;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .home-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        header p {
            color: #a5b4fc;
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab-btn {
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #7c3aed, #00d4ff);
        }

        .tab-content {
            display: none;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .tab-content h2 {
            color: #00d4ff;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Device Explorer Styles */
        .device-explorer {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }

        .device-list {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 20px;
            max-height: 600px;
            overflow-y: auto;
        }

        .device-category {
            margin-bottom: 20px;
        }

        .device-category h4 {
            color: #f472b6;
            margin-bottom: 10px;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .device-item {
            background: rgba(255,255,255,0.1);
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .device-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
        }

        .device-item.selected {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.4), rgba(0, 212, 255, 0.4));
            border: 1px solid #00d4ff;
        }

        .device-icon {
            font-size: 1.5em;
        }

        .device-details {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 30px;
        }

        .device-details h3 {
            color: #00d4ff;
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .layer-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .layer-badge.l1 { background: #ef4444; }
        .layer-badge.l2 { background: #f472b6; }
        .layer-badge.l3 { background: #34d399; }
        .layer-badge.l4 { background: #60a5fa; }
        .layer-badge.l7 { background: #a855f7; }

        .detail-section {
            margin-bottom: 25px;
        }

        .detail-section h4 {
            color: #f472b6;
            margin-bottom: 10px;
        }

        .detail-section ul {
            list-style: none;
        }

        .detail-section li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .detail-section li:before {
            content: "‚ñ∏";
            position: absolute;
            left: 5px;
            color: #00d4ff;
        }

        /* OSI Layer Mapper */
        .osi-mapper {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 30px;
        }

        .osi-stack {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .osi-layer {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .osi-layer:hover {
            transform: scale(1.02);
        }

        .osi-layer.selected {
            border-color: white;
            box-shadow: 0 0 20px rgba(255,255,255,0.3);
        }

        .osi-layer.l7 { background: linear-gradient(135deg, #a855f7, #7c3aed); }
        .osi-layer.l6 { background: linear-gradient(135deg, #8b5cf6, #6d28d9); }
        .osi-layer.l5 { background: linear-gradient(135deg, #6366f1, #4f46e5); }
        .osi-layer.l4 { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .osi-layer.l3 { background: linear-gradient(135deg, #10b981, #059669); }
        .osi-layer.l2 { background: linear-gradient(135deg, #f472b6, #ec4899); }
        .osi-layer.l1 { background: linear-gradient(135deg, #ef4444, #dc2626); }

        .layer-devices {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 25px;
        }

        .layer-devices h3 {
            color: #00d4ff;
            margin-bottom: 20px;
        }

        .device-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .device-tag {
            background: rgba(255,255,255,0.15);
            padding: 10px 20px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .device-tag:hover {
            background: rgba(255,255,255,0.25);
            transform: scale(1.05);
        }

        /* Network Builder */
        .network-canvas {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            min-height: 500px;
            position: relative;
        }

        .network-tier {
            text-align: center;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            border: 2px dashed rgba(255,255,255,0.3);
        }

        .network-tier h4 {
            margin-bottom: 15px;
            color: #a5b4fc;
        }

        .tier-devices {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            min-height: 80px;
        }

        .placed-device {
            background: rgba(255,255,255,0.15);
            padding: 15px 20px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: move;
            transition: all 0.3s ease;
        }

        .placed-device:hover {
            background: rgba(255,255,255,0.25);
        }

        .placed-device .device-icon {
            font-size: 2em;
        }

        .device-palette {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .device-palette h4 {
            color: #f472b6;
            margin-bottom: 15px;
        }

        .palette-devices {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .palette-device {
            background: rgba(255,255,255,0.1);
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .palette-device:hover {
            background: rgba(255,255,255,0.2);
        }

        /* Collision/Broadcast Domain Visualizer */
        .domain-visualizer {
            text-align: center;
        }

        .domain-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .domain-btn {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid transparent;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .domain-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .domain-btn.selected {
            border-color: #00d4ff;
            background: rgba(0, 212, 255, 0.2);
        }

        .domain-diagram {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .domain-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .domain-device {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            min-width: 100px;
        }

        .collision-domain {
            border: 3px solid #ef4444;
            border-radius: 20px;
            padding: 20px;
            margin: 10px;
            background: rgba(239, 68, 68, 0.1);
        }

        .broadcast-domain {
            border: 3px solid #3b82f6;
            border-radius: 20px;
            padding: 20px;
            margin: 10px;
            background: rgba(59, 130, 246, 0.1);
        }

        .domain-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 5px;
        }

        .legend-color.collision { background: #ef4444; }
        .legend-color.broadcast { background: #3b82f6; }

        /* Quiz Styles */
        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .quiz-question {
            font-size: 1.3em;
            margin-bottom: 25px;
            text-align: center;
        }

        .quiz-options {
            display: grid;
            gap: 15px;
        }

        .quiz-option {
            background: rgba(255,255,255,0.1);
            padding: 18px 25px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            background: rgba(255,255,255,0.2);
        }

        .quiz-option.correct {
            background: rgba(52, 211, 153, 0.3);
            border-color: #34d399;
        }

        .quiz-option.incorrect {
            background: rgba(239, 68, 68, 0.3);
            border-color: #ef4444;
        }

        .quiz-option.disabled {
            pointer-events: none;
        }

        .quiz-feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(52, 211, 153, 0.2);
            border: 1px solid #34d399;
        }

        .quiz-feedback.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid #ef4444;
        }

        .score-display {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.3), rgba(0, 212, 255, 0.3));
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .score-number {
            font-size: 3em;
            font-weight: bold;
            color: #00d4ff;
        }

        .next-btn {
            background: linear-gradient(135deg, #7c3aed, #00d4ff);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1em;
        }

        .next-btn:hover {
            transform: scale(1.05);
        }

        @media (max-width: 900px) {
            .device-explorer, .osi-mapper {
                grid-template-columns: 1fr;
            }

            .device-list {
                max-height: 300px;
            }
        }
    </style>
</head>
<body>
    <a href="../../../../index.html" class="home-btn">&#8592; Back to Catalog</a>

    <div class="container">
        <header>
            <h1>üñß Network Devices Visualizer</h1>
            <p>Explore network devices, their OSI layers, and where they belong in a network</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('explorer')">Device Explorer</button>
            <button class="tab-btn" onclick="showTab('layers')">OSI Layer Map</button>
            <button class="tab-btn" onclick="showTab('domains')">Collision/Broadcast</button>
            <button class="tab-btn" onclick="showTab('quiz')">Quiz</button>
        </div>

        <!-- Tab 1: Device Explorer -->
        <div id="explorer" class="tab-content active">
            <h2>Device Explorer</h2>
            <p style="text-align: center; margin-bottom: 25px; color: #a5b4fc;">Click on a device to learn about it</p>

            <div class="device-explorer">
                <div class="device-list">
                    <div class="device-category">
                        <h4>Layer 1 Devices</h4>
                        <div class="device-item" onclick="showDevice('hub')">
                            <span class="device-icon">‚≠ï</span>
                            <span>Hub</span>
                        </div>
                        <div class="device-item" onclick="showDevice('repeater')">
                            <span class="device-icon">üì°</span>
                            <span>Repeater</span>
                        </div>
                        <div class="device-item" onclick="showDevice('media-converter')">
                            <span class="device-icon">üîå</span>
                            <span>Media Converter</span>
                        </div>
                    </div>

                    <div class="device-category">
                        <h4>Layer 2 Devices</h4>
                        <div class="device-item selected" onclick="showDevice('switch')">
                            <span class="device-icon">üîÄ</span>
                            <span>Switch</span>
                        </div>
                        <div class="device-item" onclick="showDevice('bridge')">
                            <span class="device-icon">üåâ</span>
                            <span>Bridge</span>
                        </div>
                        <div class="device-item" onclick="showDevice('nic')">
                            <span class="device-icon">üí≥</span>
                            <span>NIC</span>
                        </div>
                        <div class="device-item" onclick="showDevice('ap')">
                            <span class="device-icon">üì∂</span>
                            <span>Access Point</span>
                        </div>
                    </div>

                    <div class="device-category">
                        <h4>Layer 3 Devices</h4>
                        <div class="device-item" onclick="showDevice('router')">
                            <span class="device-icon">üåê</span>
                            <span>Router</span>
                        </div>
                        <div class="device-item" onclick="showDevice('l3switch')">
                            <span class="device-icon">üîÄ</span>
                            <span>Layer 3 Switch</span>
                        </div>
                        <div class="device-item" onclick="showDevice('firewall')">
                            <span class="device-icon">üî•</span>
                            <span>Firewall</span>
                        </div>
                    </div>

                    <div class="device-category">
                        <h4>Layer 4-7 Devices</h4>
                        <div class="device-item" onclick="showDevice('loadbalancer')">
                            <span class="device-icon">‚öñÔ∏è</span>
                            <span>Load Balancer</span>
                        </div>
                        <div class="device-item" onclick="showDevice('proxy')">
                            <span class="device-icon">üîÑ</span>
                            <span>Proxy Server</span>
                        </div>
                        <div class="device-item" onclick="showDevice('ids')">
                            <span class="device-icon">üõ°Ô∏è</span>
                            <span>IDS/IPS</span>
                        </div>
                    </div>
                </div>

                <div class="device-details" id="device-details">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Tab 2: OSI Layer Map -->
        <div id="layers" class="tab-content">
            <h2>OSI Layer Device Mapping</h2>
            <p style="text-align: center; margin-bottom: 25px; color: #a5b4fc;">Click on a layer to see which devices operate there</p>

            <div class="osi-mapper">
                <div class="osi-stack">
                    <div class="osi-layer l7 selected" onclick="selectLayer(7)">
                        <strong>Layer 7</strong><br>Application
                    </div>
                    <div class="osi-layer l6" onclick="selectLayer(6)">
                        <strong>Layer 6</strong><br>Presentation
                    </div>
                    <div class="osi-layer l5" onclick="selectLayer(5)">
                        <strong>Layer 5</strong><br>Session
                    </div>
                    <div class="osi-layer l4" onclick="selectLayer(4)">
                        <strong>Layer 4</strong><br>Transport
                    </div>
                    <div class="osi-layer l3" onclick="selectLayer(3)">
                        <strong>Layer 3</strong><br>Network
                    </div>
                    <div class="osi-layer l2" onclick="selectLayer(2)">
                        <strong>Layer 2</strong><br>Data Link
                    </div>
                    <div class="osi-layer l1" onclick="selectLayer(1)">
                        <strong>Layer 1</strong><br>Physical
                    </div>
                </div>

                <div class="layer-devices" id="layer-devices">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Tab 3: Collision/Broadcast Domains -->
        <div id="domains" class="tab-content">
            <h2>Collision & Broadcast Domains</h2>
            <p style="text-align: center; margin-bottom: 25px; color: #a5b4fc;">See how different devices affect network domains</p>

            <div class="domain-controls">
                <button class="domain-btn selected" onclick="showDomainDevice('hub')">Hub</button>
                <button class="domain-btn" onclick="showDomainDevice('switch')">Switch</button>
                <button class="domain-btn" onclick="showDomainDevice('router')">Router</button>
            </div>

            <div class="domain-diagram" id="domain-diagram">
                <!-- Populated by JavaScript -->
            </div>

            <div class="domain-legend">
                <div class="legend-item">
                    <div class="legend-color collision"></div>
                    <span>Collision Domain</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color broadcast"></div>
                    <span>Broadcast Domain</span>
                </div>
            </div>
        </div>

        <!-- Tab 4: Quiz -->
        <div id="quiz" class="tab-content">
            <h2>Test Your Knowledge</h2>

            <div id="quiz-score" class="score-display" style="display: none;">
                <h3>Final Score</h3>
                <div class="score-number"><span id="quiz-correct">0</span>/<span id="quiz-total">10</span></div>
                <button onclick="restartQuiz()" class="next-btn">Restart Quiz</button>
            </div>

            <div class="quiz-container" id="quiz-container">
                <div id="quiz-question" class="quiz-question">Loading question...</div>
                <div id="quiz-options" class="quiz-options"></div>
                <div id="quiz-feedback" class="quiz-feedback"></div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <span id="question-progress">Question 1 of 10</span>
            </div>
        </div>
    </div>

    <script>
        // Device Data
        const devices = {
            hub: {
                name: "Hub",
                icon: "‚≠ï",
                layer: 1,
                layerName: "Physical",
                description: "A hub is a simple Layer 1 device that repeats electrical signals to all connected ports. It creates a single collision domain where all devices share bandwidth.",
                functions: [
                    "Repeats electrical signals to all ports",
                    "Extends network cable distance",
                    "Creates single collision domain",
                    "No intelligence - just signal amplification"
                ],
                placement: "Legacy networks, rarely used today",
                examTip: "Hubs are Layer 1 devices. They don't understand MAC addresses - they just repeat bits."
            },
            repeater: {
                name: "Repeater",
                icon: "üì°",
                layer: 1,
                layerName: "Physical",
                description: "A repeater regenerates and retransmits signals to extend network distance. It operates at Layer 1, working only with electrical/optical signals.",
                functions: [
                    "Regenerates weakened signals",
                    "Extends cable segment distance",
                    "Works with any protocol",
                    "No filtering or processing"
                ],
                placement: "Between cable segments to extend distance",
                examTip: "Repeaters don't create new collision domains - they extend the existing one."
            },
            "media-converter": {
                name: "Media Converter",
                icon: "üîå",
                layer: 1,
                layerName: "Physical",
                description: "Converts signals between different media types (e.g., fiber to copper). Operates at Layer 1 with no data processing.",
                functions: [
                    "Converts fiber optic to copper Ethernet",
                    "Converts between single-mode and multi-mode fiber",
                    "Transparent to protocols above Layer 1",
                    "No MAC or IP processing"
                ],
                placement: "Where different cable types meet (e.g., building entrance)",
                examTip: "Media converters are Layer 1 - they only convert the physical medium."
            },
            switch: {
                name: "Switch",
                icon: "üîÄ",
                layer: 2,
                layerName: "Data Link",
                description: "A switch is a multi-port bridge that forwards frames based on MAC addresses. It creates a separate collision domain per port but maintains one broadcast domain.",
                functions: [
                    "Builds and maintains MAC address table",
                    "Forwards frames based on destination MAC",
                    "Creates collision domain per port",
                    "Supports full-duplex communication",
                    "Can implement VLANs, STP, port security"
                ],
                placement: "Access layer (connects end devices), distribution layer",
                examTip: "Switches break up collision domains but NOT broadcast domains (unless using VLANs)."
            },
            bridge: {
                name: "Bridge",
                icon: "üåâ",
                layer: 2,
                layerName: "Data Link",
                description: "A bridge connects two network segments and filters traffic based on MAC addresses. Essentially a two-port switch.",
                functions: [
                    "Connects two network segments",
                    "Learns MAC addresses dynamically",
                    "Filters traffic between segments",
                    "Creates separate collision domains"
                ],
                placement: "Between network segments (legacy use)",
                examTip: "A switch is essentially a multi-port bridge with hardware acceleration."
            },
            nic: {
                name: "Network Interface Card",
                icon: "üí≥",
                layer: 2,
                layerName: "Data Link",
                description: "The NIC provides physical connectivity to the network and contains the device's unique MAC address.",
                functions: [
                    "Connects device to network medium",
                    "Contains burned-in MAC address",
                    "Converts parallel to serial data",
                    "Handles frame creation and CRC checking"
                ],
                placement: "Inside every networked device",
                examTip: "NICs operate at Layer 2 - they use MAC addresses, not IP addresses."
            },
            ap: {
                name: "Wireless Access Point",
                icon: "üì∂",
                layer: 2,
                layerName: "Data Link",
                description: "An AP bridges wireless clients to the wired network. It operates at Layer 2, handling 802.11 frame conversion.",
                functions: [
                    "Bridges wireless to wired networks",
                    "Handles 802.11 protocol",
                    "Uses CSMA/CA for collision avoidance",
                    "Can support multiple SSIDs/VLANs"
                ],
                placement: "Throughout building for wireless coverage",
                examTip: "APs are Layer 2 devices. They use CSMA/CA (Collision Avoidance), not CSMA/CD."
            },
            router: {
                name: "Router",
                icon: "üåê",
                layer: 3,
                layerName: "Network",
                description: "A router forwards packets between different networks based on IP addresses. It breaks up both collision and broadcast domains.",
                functions: [
                    "Forwards packets based on IP addresses",
                    "Maintains routing table",
                    "Separates broadcast domains",
                    "Supports NAT, ACLs, VPN, QoS",
                    "Connects different network types"
                ],
                placement: "Network edge, between subnets, WAN connectivity",
                examTip: "Routers break up BOTH collision domains AND broadcast domains."
            },
            l3switch: {
                name: "Layer 3 Switch",
                icon: "üîÄ",
                layer: 3,
                layerName: "Network",
                description: "A Layer 3 switch combines switching and routing in hardware. It routes between VLANs at wire speed using ASICs.",
                functions: [
                    "Performs inter-VLAN routing",
                    "Routes in hardware (very fast)",
                    "Has many switched ports",
                    "Supports routing protocols"
                ],
                placement: "Core/distribution layer in campus networks",
                examTip: "Use L3 switches for high-speed inter-VLAN routing. Use routers for WAN and advanced features."
            },
            firewall: {
                name: "Firewall",
                icon: "üî•",
                layer: 3,
                layerName: "Network (L3-L7)",
                description: "A firewall filters traffic based on rules. Basic firewalls work at L3/L4, while NGFWs inspect up to Layer 7.",
                functions: [
                    "Filters traffic based on rules",
                    "Stateful packet inspection",
                    "Can perform deep packet inspection (NGFW)",
                    "Blocks unauthorized access",
                    "Logs security events"
                ],
                placement: "Network perimeter, between security zones",
                examTip: "Firewalls process rules top-to-bottom. First match wins. Implicit deny at end."
            },
            loadbalancer: {
                name: "Load Balancer",
                icon: "‚öñÔ∏è",
                layer: 4,
                layerName: "Transport (L4-L7)",
                description: "Distributes client requests across multiple servers for high availability and scalability.",
                functions: [
                    "Distributes traffic across servers",
                    "Performs health checks",
                    "Provides session persistence",
                    "Enables horizontal scaling"
                ],
                placement: "In front of server farms, DMZ",
                examTip: "Load balancing methods: Round Robin, Least Connections, IP Hash, Weighted."
            },
            proxy: {
                name: "Proxy Server",
                icon: "üîÑ",
                layer: 7,
                layerName: "Application",
                description: "Acts as intermediary for client requests. Can cache content, filter websites, and hide internal addresses.",
                functions: [
                    "Caches frequently accessed content",
                    "Filters web content",
                    "Hides internal IP addresses",
                    "Logs user activity",
                    "Can perform SSL inspection"
                ],
                placement: "Between users and internet (forward), or between internet and servers (reverse)",
                examTip: "Forward proxy = clients to internet. Reverse proxy = internet to servers."
            },
            ids: {
                name: "IDS/IPS",
                icon: "üõ°Ô∏è",
                layer: 7,
                layerName: "Application (L3-L7)",
                description: "IDS detects and alerts on threats (passive). IPS detects and blocks threats (inline/active).",
                functions: [
                    "Detects malicious activity",
                    "Signature-based detection",
                    "Anomaly-based detection",
                    "IPS can block attacks inline"
                ],
                placement: "IDS via SPAN port, IPS inline with traffic",
                examTip: "IDS = passive (alerts only). IPS = active (blocks traffic). Know the difference!"
            }
        };

        // Layer Data
        const layerData = {
            7: {
                name: "Application Layer",
                description: "Provides network services directly to end-user applications. Handles protocols like HTTP, FTP, SMTP, DNS.",
                devices: [
                    { icon: "üîÑ", name: "Proxy Server" },
                    { icon: "üõ°Ô∏è", name: "WAF" },
                    { icon: "üìß", name: "Email Gateway" },
                    { icon: "‚öñÔ∏è", name: "L7 Load Balancer" }
                ]
            },
            6: {
                name: "Presentation Layer",
                description: "Handles data formatting, encryption, and compression. Few dedicated devices operate here.",
                devices: [
                    { icon: "üîê", name: "SSL/TLS Accelerator" },
                    { icon: "üì¶", name: "Compression Device" }
                ]
            },
            5: {
                name: "Session Layer",
                description: "Manages sessions between applications. Most functionality is in software, not hardware.",
                devices: [
                    { icon: "üîó", name: "Session Border Controller" }
                ]
            },
            4: {
                name: "Transport Layer",
                description: "Handles end-to-end communication, flow control, and error recovery. TCP/UDP operate here.",
                devices: [
                    { icon: "‚öñÔ∏è", name: "Load Balancer (L4)" },
                    { icon: "üî•", name: "Stateful Firewall" },
                    { icon: "üõ°Ô∏è", name: "IDS/IPS" }
                ]
            },
            3: {
                name: "Network Layer",
                description: "Handles logical addressing (IP) and routing between networks. Packets are the data unit.",
                devices: [
                    { icon: "üåê", name: "Router" },
                    { icon: "üîÄ", name: "Layer 3 Switch" },
                    { icon: "üî•", name: "Firewall" },
                    { icon: "üîê", name: "VPN Concentrator" }
                ]
            },
            2: {
                name: "Data Link Layer",
                description: "Handles physical addressing (MAC) and frame delivery within a network. Switches operate here.",
                devices: [
                    { icon: "üîÄ", name: "Switch" },
                    { icon: "üåâ", name: "Bridge" },
                    { icon: "üí≥", name: "NIC" },
                    { icon: "üì∂", name: "Access Point" }
                ]
            },
            1: {
                name: "Physical Layer",
                description: "Handles the physical transmission of bits over the medium. Cables, connectors, and signals.",
                devices: [
                    { icon: "‚≠ï", name: "Hub" },
                    { icon: "üì°", name: "Repeater" },
                    { icon: "üîå", name: "Media Converter" },
                    { icon: "üì∂", name: "Range Extender" }
                ]
            }
        };

        // Quiz Questions
        const quizQuestions = [
            { q: "Which OSI layer does a switch operate at?", options: ["Layer 1", "Layer 2", "Layer 3", "Layer 4"], correct: 1, explanation: "Switches operate at Layer 2 (Data Link) and use MAC addresses to forward frames." },
            { q: "What type of device breaks up BOTH collision and broadcast domains?", options: ["Hub", "Switch", "Router", "Bridge"], correct: 2, explanation: "Routers break up both collision and broadcast domains. Each router interface is a separate broadcast domain." },
            { q: "A hub creates how many collision domains for 8 connected devices?", options: ["1", "2", "8", "16"], correct: 0, explanation: "A hub creates ONE collision domain - all devices share the same collision domain regardless of port count." },
            { q: "Which device would you use to connect a fiber cable to copper Ethernet?", options: ["Router", "Bridge", "Media Converter", "Hub"], correct: 2, explanation: "A media converter converts between different physical media types at Layer 1." },
            { q: "IDS differs from IPS because IDS:", options: ["Operates at Layer 2", "Is always inline", "Only detects and alerts", "Blocks all traffic"], correct: 2, explanation: "IDS (Intrusion Detection System) detects and alerts on threats but does not block them. IPS can actively block threats." },
            { q: "Which device uses a MAC address table?", options: ["Router", "Switch", "Hub", "Repeater"], correct: 1, explanation: "Switches build and maintain MAC address tables to make forwarding decisions." },
            { q: "Where should public-facing servers like web servers be placed?", options: ["Internal network", "DMZ", "Core network", "Access layer"], correct: 1, explanation: "Public-facing servers belong in the DMZ (Demilitarized Zone) to protect the internal network." },
            { q: "A Layer 3 switch is best used for:", options: ["WAN connectivity", "Inter-VLAN routing", "NAT translation", "VPN termination"], correct: 1, explanation: "Layer 3 switches excel at high-speed inter-VLAN routing using hardware ASICs." },
            { q: "Which is a Layer 1 device?", options: ["Switch", "Router", "Hub", "Firewall"], correct: 2, explanation: "Hubs are Layer 1 devices - they only repeat electrical signals without understanding addressing." },
            { q: "A proxy server operates at which layer?", options: ["Layer 2", "Layer 3", "Layer 4", "Layer 7"], correct: 3, explanation: "Proxy servers operate at Layer 7 (Application), understanding application protocols like HTTP." }
        ];

        let currentQuestion = 0;
        let quizScore = 0;

        // Initialize
        showDevice('switch');
        selectLayer(7);
        showDomainDevice('hub');
        loadQuestion();

        // Tab Navigation
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.tab-btn[onclick*="${tabId}"]`).classList.add('active');
        }

        // Device Explorer
        function showDevice(deviceId) {
            document.querySelectorAll('.device-item').forEach(item => item.classList.remove('selected'));
            event.target.closest('.device-item').classList.add('selected');

            const device = devices[deviceId];
            const details = document.getElementById('device-details');

            details.innerHTML = `
                <div style="font-size: 3em; margin-bottom: 10px;">${device.icon}</div>
                <h3>${device.name}</h3>
                <span class="layer-badge l${device.layer}">Layer ${device.layer} - ${device.layerName}</span>
                <p style="color: #e2e8f0; margin-bottom: 20px;">${device.description}</p>

                <div class="detail-section">
                    <h4>Key Functions</h4>
                    <ul>
                        ${device.functions.map(f => `<li>${f}</li>`).join('')}
                    </ul>
                </div>

                <div class="detail-section">
                    <h4>Network Placement</h4>
                    <p style="padding-left: 25px;">${device.placement}</p>
                </div>

                <div style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(251, 191, 36, 0.1)); padding: 20px; border-radius: 10px; border-left: 4px solid #f59e0b;">
                    <h4 style="color: #fbbf24; margin-bottom: 10px;">üìù Exam Tip</h4>
                    <p>${device.examTip}</p>
                </div>
            `;
        }

        // OSI Layer Map
        function selectLayer(layer) {
            document.querySelectorAll('.osi-layer').forEach(l => l.classList.remove('selected'));
            document.querySelector(`.osi-layer.l${layer}`).classList.add('selected');

            const data = layerData[layer];
            const container = document.getElementById('layer-devices');

            container.innerHTML = `
                <h3>${data.name}</h3>
                <p style="color: #a5b4fc; margin-bottom: 25px;">${data.description}</p>
                <h4 style="color: #f472b6; margin-bottom: 15px;">Devices at this layer:</h4>
                <div class="device-tags">
                    ${data.devices.map(d => `
                        <div class="device-tag">
                            <span style="font-size: 1.5em;">${d.icon}</span>
                            <span>${d.name}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Collision/Broadcast Domain Visualizer
        function showDomainDevice(device) {
            document.querySelectorAll('.domain-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');

            const container = document.getElementById('domain-diagram');

            if (device === 'hub') {
                container.innerHTML = `
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Hub - 1 Collision Domain, 1 Broadcast Domain</h3>
                    <div class="broadcast-domain">
                        <p style="color: #3b82f6; margin-bottom: 10px;">Broadcast Domain</p>
                        <div class="collision-domain">
                            <p style="color: #ef4444; margin-bottom: 10px;">Collision Domain</p>
                            <div class="domain-row">
                                <div class="domain-device">üíª PC1</div>
                                <div class="domain-device">üíª PC2</div>
                                <div class="domain-device" style="background: rgba(239, 68, 68, 0.3);">‚≠ï Hub</div>
                                <div class="domain-device">üíª PC3</div>
                                <div class="domain-device">üíª PC4</div>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 20px; color: #a5b4fc;">All 4 PCs share ONE collision domain - if two transmit simultaneously, collision occurs!</p>
                `;
            } else if (device === 'switch') {
                container.innerHTML = `
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Switch - 4 Collision Domains, 1 Broadcast Domain</h3>
                    <div class="broadcast-domain">
                        <p style="color: #3b82f6; margin-bottom: 10px;">Broadcast Domain</p>
                        <div class="domain-row">
                            <div class="collision-domain" style="padding: 15px;">
                                <div class="domain-device">üíª PC1</div>
                            </div>
                            <div class="collision-domain" style="padding: 15px;">
                                <div class="domain-device">üíª PC2</div>
                            </div>
                            <div class="domain-device" style="background: rgba(244, 114, 182, 0.3);">üîÄ Switch</div>
                            <div class="collision-domain" style="padding: 15px;">
                                <div class="domain-device">üíª PC3</div>
                            </div>
                            <div class="collision-domain" style="padding: 15px;">
                                <div class="domain-device">üíª PC4</div>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 20px; color: #a5b4fc;">Each port is its own collision domain - full duplex, no collisions! But broadcasts still reach all ports.</p>
                `;
            } else if (device === 'router') {
                container.innerHTML = `
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">Router - Separate Collision AND Broadcast Domains</h3>
                    <div class="domain-row">
                        <div class="broadcast-domain">
                            <p style="color: #3b82f6; margin-bottom: 10px;">Broadcast Domain 1</p>
                            <div class="collision-domain" style="display: flex; gap: 10px; justify-content: center;">
                                <div class="domain-device">üíª PC1</div>
                                <div class="domain-device">üíª PC2</div>
                            </div>
                        </div>
                        <div class="domain-device" style="background: rgba(52, 211, 153, 0.3); align-self: center;">üåê Router</div>
                        <div class="broadcast-domain">
                            <p style="color: #3b82f6; margin-bottom: 10px;">Broadcast Domain 2</p>
                            <div class="collision-domain" style="display: flex; gap: 10px; justify-content: center;">
                                <div class="domain-device">üíª PC3</div>
                                <div class="domain-device">üíª PC4</div>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 20px; color: #a5b4fc;">Routers do NOT forward broadcasts - each interface is a separate broadcast domain!</p>
                `;
            }
        }

        // Quiz Functions
        function loadQuestion() {
            const q = quizQuestions[currentQuestion];
            document.getElementById('quiz-question').textContent = q.q;
            document.getElementById('question-progress').textContent = `Question ${currentQuestion + 1} of ${quizQuestions.length}`;

            const optionsHtml = q.options.map((opt, i) =>
                `<div class="quiz-option" onclick="checkAnswer(${i})">${opt}</div>`
            ).join('');
            document.getElementById('quiz-options').innerHTML = optionsHtml;
            document.getElementById('quiz-feedback').classList.remove('show', 'correct', 'incorrect');
        }

        function checkAnswer(selected) {
            const q = quizQuestions[currentQuestion];
            const options = document.querySelectorAll('.quiz-option');
            const feedback = document.getElementById('quiz-feedback');

            options.forEach((opt, i) => {
                opt.classList.add('disabled');
                if (i === q.correct) opt.classList.add('correct');
                if (i === selected && selected !== q.correct) opt.classList.add('incorrect');
            });

            if (selected === q.correct) {
                quizScore++;
                feedback.classList.add('correct');
                feedback.innerHTML = `<strong>‚úì Correct!</strong> ${q.explanation}`;
            } else {
                feedback.classList.add('incorrect');
                feedback.innerHTML = `<strong>‚úó Incorrect.</strong> ${q.explanation}`;
            }
            feedback.classList.add('show');

            if (currentQuestion < quizQuestions.length - 1) {
                feedback.innerHTML += `<br><button class="next-btn" onclick="nextQuestion()">Next Question ‚Üí</button>`;
            } else {
                showFinalScore();
            }
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function showFinalScore() {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('question-progress').style.display = 'none';
            document.getElementById('quiz-score').style.display = 'block';
            document.getElementById('quiz-correct').textContent = quizScore;
        }

        function restartQuiz() {
            currentQuestion = 0;
            quizScore = 0;
            document.getElementById('quiz-container').style.display = 'block';
            document.getElementById('question-progress').style.display = 'block';
            document.getElementById('quiz-score').style.display = 'none';
            loadQuestion();
        }
    </script>
</body>
</html>
