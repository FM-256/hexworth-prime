<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subnetting Visualizer - Interactive Learning Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #1e3c72 100%);
            min-height: 100vh;
            color: #e0e0e0;
        }

        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 1.5em;
            color: #fff;
        }

        .header h1 span {
            color: #4fc3f7;
        }

        .back-btn {
            background: rgba(79, 195, 247, 0.2);
            color: #4fc3f7;
            border: 1px solid #4fc3f7;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #4fc3f7;
            color: #fff;
        }

        /* Tabs */
        .tab-container {
            display: flex;
            background: rgba(0, 0, 0, 0.2);
            padding: 0 20px;
            overflow-x: auto;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            color: #888;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-weight: 500;
            white-space: nowrap;
        }

        .tab:hover {
            color: #bbb;
            background: rgba(255, 255, 255, 0.05);
        }

        .tab.active {
            color: #4fc3f7;
            border-bottom-color: #4fc3f7;
            background: rgba(79, 195, 247, 0.1);
        }

        /* Main Content */
        .main-content {
            padding: 20px;
            height: calc(100vh - 120px);
            overflow-y: auto;
        }

        .tab-content {
            display: none;
            height: 100%;
        }

        .tab-content.active {
            display: block;
        }

        /* Common Styles */
        .panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .panel h2 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel h3 {
            color: #4fc3f7;
            margin: 20px 0 10px;
            font-size: 1.1em;
        }

        .panel p {
            line-height: 1.8;
            color: #c0c0c0;
        }

        .highlight {
            color: #4fc3f7;
            font-weight: 600;
        }

        .info-box {
            background: rgba(79, 195, 247, 0.15);
            border-left: 4px solid #4fc3f7;
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }

        .warning-box {
            background: rgba(255, 193, 7, 0.15);
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
            color: #ffc107;
        }

        /* ==================== TAB 1: Binary Basics ==================== */
        .binary-demo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .octet-container {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .octet-box {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .octet-label {
            color: #888;
            font-size: 0.85em;
            margin-bottom: 8px;
        }

        .bit-row {
            display: flex;
            gap: 4px;
            margin-bottom: 10px;
        }

        .bit {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .bit.on {
            background: #4caf50;
            color: white;
        }

        .bit.off {
            background: #424242;
            color: #888;
        }

        .bit:hover {
            transform: scale(1.1);
        }

        .bit-value {
            font-size: 0.7em;
            color: #888;
            text-align: center;
        }

        .bit-values-row {
            display: flex;
            gap: 4px;
        }

        .bit-val {
            width: 36px;
            text-align: center;
            font-size: 0.75em;
            color: #888;
        }

        .decimal-result {
            font-size: 2em;
            font-weight: bold;
            color: #4fc3f7;
            margin-top: 5px;
        }

        .octet-separator {
            font-size: 2em;
            color: #666;
        }

        .full-ip-display {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px 40px;
            border-radius: 10px;
            text-align: center;
        }

        .full-ip-display .label {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .full-ip-display .ip {
            font-size: 2em;
            font-weight: bold;
            color: #fff;
            font-family: 'Courier New', monospace;
        }

        /* Powers of 2 reference */
        .powers-reference {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .power-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            text-align: center;
        }

        .power-item .exp {
            font-size: 0.9em;
            color: #888;
        }

        .power-item .val {
            font-size: 1.3em;
            font-weight: bold;
            color: #4fc3f7;
        }

        /* ==================== TAB 2: Subnet Calculator ==================== */
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 900px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            color: #bbb;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid #444;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1em;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4fc3f7;
        }

        .calc-btn {
            background: #4fc3f7;
            color: #000;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            width: 100%;
        }

        .calc-btn:hover {
            background: #29b6f6;
            transform: scale(1.02);
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .result-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #4fc3f7;
        }

        .result-item .label {
            color: #888;
            font-size: 0.85em;
            margin-bottom: 5px;
        }

        .result-item .value {
            color: #fff;
            font-size: 1.2em;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        /* Binary breakdown visualization */
        .binary-breakdown {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            overflow-x: auto;
        }

        .binary-breakdown h4 {
            color: #fff;
            margin-bottom: 15px;
        }

        .binary-row {
            display: flex;
            align-items: center;
            margin: 10px 0;
            gap: 10px;
        }

        .binary-row .row-label {
            width: 120px;
            color: #888;
            font-size: 0.9em;
        }

        .binary-row .bits {
            display: flex;
            gap: 2px;
            font-family: 'Courier New', monospace;
        }

        .binary-row .bit-cell {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85em;
            border-radius: 3px;
        }

        .binary-row .bit-cell.network {
            background: #4caf50;
            color: white;
        }

        .binary-row .bit-cell.host {
            background: #ff9800;
            color: white;
        }

        .binary-row .bit-cell.separator {
            background: transparent;
            color: #666;
        }

        .binary-row .decimal {
            margin-left: 15px;
            color: #4fc3f7;
            font-weight: bold;
        }

        /* ==================== TAB 3: VLSM Designer ==================== */
        .vlsm-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            height: calc(100vh - 200px);
        }

        @media (max-width: 1000px) {
            .vlsm-container {
                grid-template-columns: 1fr;
                height: auto;
            }
        }

        .vlsm-input-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            overflow-y: auto;
        }

        .vlsm-input-panel h3 {
            color: #fff;
            margin-bottom: 15px;
        }

        .subnet-requirement {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .subnet-requirement input {
            flex: 1;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #444;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 0.9em;
        }

        .subnet-requirement .host-count {
            width: 80px;
        }

        .subnet-requirement .remove-btn {
            background: #f44336;
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            line-height: 1;
        }

        .add-subnet-btn {
            background: rgba(79, 195, 247, 0.2);
            color: #4fc3f7;
            border: 1px dashed #4fc3f7;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
            transition: all 0.3s;
        }

        .add-subnet-btn:hover {
            background: rgba(79, 195, 247, 0.3);
        }

        .vlsm-results {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            overflow-y: auto;
        }

        .vlsm-subnet-result {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #4fc3f7;
        }

        .vlsm-subnet-result h4 {
            color: #fff;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .vlsm-subnet-result .detail {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9em;
        }

        .vlsm-subnet-result .detail:last-child {
            border-bottom: none;
        }

        .vlsm-subnet-result .detail .label {
            color: #888;
        }

        .vlsm-subnet-result .detail .value {
            color: #fff;
            font-family: 'Courier New', monospace;
        }

        .efficiency-meter {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .efficiency-meter h4 {
            color: #fff;
            margin-bottom: 10px;
        }

        .meter-bar {
            height: 20px;
            background: #333;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .meter-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            transition: width 0.5s;
        }

        .meter-fill.warning {
            background: linear-gradient(90deg, #ff9800, #ffc107);
        }

        .meter-fill.danger {
            background: linear-gradient(90deg, #f44336, #ff5722);
        }

        /* ==================== TAB 4: Practice Mode ==================== */
        .practice-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .question-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            color: #4fc3f7;
            font-size: 0.9em;
        }

        .difficulty-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .difficulty-badge.easy {
            background: #4caf50;
            color: white;
        }

        .difficulty-badge.medium {
            background: #ff9800;
            color: white;
        }

        .difficulty-badge.hard {
            background: #f44336;
            color: white;
        }

        .question-text {
            font-size: 1.3em;
            color: #fff;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .answer-input {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .answer-input input {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #444;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1.1em;
            font-family: 'Courier New', monospace;
        }

        .answer-input input:focus {
            outline: none;
            border-color: #4fc3f7;
        }

        .answer-input input.correct {
            border-color: #4caf50;
            background: rgba(76, 175, 80, 0.2);
        }

        .answer-input input.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.2);
        }

        .check-btn {
            background: #4fc3f7;
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .check-btn:hover {
            background: #29b6f6;
        }

        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .feedback.correct {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4caf50;
            color: #4caf50;
            display: block;
        }

        .feedback.incorrect {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid #f44336;
            color: #f44336;
            display: block;
        }

        .hint-btn {
            background: transparent;
            color: #ffc107;
            border: 1px solid #ffc107;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .hint-btn:hover {
            background: rgba(255, 193, 7, 0.2);
        }

        .hint-text {
            background: rgba(255, 193, 7, 0.15);
            border-left: 3px solid #ffc107;
            padding: 12px 15px;
            margin-top: 10px;
            border-radius: 0 8px 8px 0;
            color: #ffc107;
            display: none;
        }

        .hint-text.visible {
            display: block;
        }

        .score-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin-bottom: 20px;
        }

        .score-item .number {
            font-size: 2.5em;
            font-weight: bold;
            color: #4fc3f7;
        }

        .score-item .label {
            color: #888;
            font-size: 0.9em;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .nav-btn {
            background: rgba(79, 195, 247, 0.2);
            color: #4fc3f7;
            border: 1px solid #4fc3f7;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: #4fc3f7;
            color: #000;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Expandable sections */
        .expandable {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin: 10px 0;
            overflow: hidden;
        }

        .expandable-header {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
        }

        .expandable-header:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .expandable-header h4 {
            color: #4fc3f7;
            font-size: 1em;
        }

        .expandable-header .arrow {
            color: #4fc3f7;
            transition: transform 0.3s;
        }

        .expandable.open .expandable-header .arrow {
            transform: rotate(180deg);
        }

        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .expandable.open .expandable-content {
            max-height: 500px;
        }

        .expandable-content-inner {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Reference table */
        .reference-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .reference-table th,
        .reference-table td {
            padding: 10px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .reference-table th {
            background: rgba(79, 195, 247, 0.2);
            color: #fff;
            font-weight: 600;
        }

        .reference-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .reference-table code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><span>Subnetting</span> Visualizer</h1>
        <a href="../../index.html" class="back-btn">‚Üê Back to Catalog</a>
    </div>

    <div class="tab-container">
        <div class="tab active" data-tab="binary">Binary Basics</div>
        <div class="tab" data-tab="calculator">Subnet Calculator</div>
        <div class="tab" data-tab="vlsm">VLSM Designer</div>
        <div class="tab" data-tab="practice">Practice Mode</div>
    </div>

    <div class="main-content">
        <!-- ==================== TAB 1: Binary Basics ==================== -->
        <div class="tab-content active" id="tab-binary">
            <div class="panel">
                <h2>üî¢ Understanding Binary - The Foundation of Subnetting</h2>
                <p>Before you can master subnetting, you need to understand how computers see IP addresses: as <span class="highlight">32 binary bits</span> (1s and 0s), not decimal numbers. Click the bits below to toggle them and see how binary converts to decimal!</p>
            </div>

            <div class="panel">
                <h3>Interactive Binary-to-Decimal Converter</h3>
                <p>Click any bit to toggle it on (1) or off (0). Watch how the decimal value changes!</p>

                <div class="binary-demo">
                    <div class="octet-container" id="binary-demo-container">
                        <!-- Octets will be generated by JavaScript -->
                    </div>

                    <div class="full-ip-display">
                        <div class="label">Full IP Address (Dotted Decimal)</div>
                        <div class="ip" id="full-ip-display">0.0.0.0</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>Key Insight:</strong> Each octet is 8 bits. The leftmost bit is worth 128, then 64, 32, 16, 8, 4, 2, 1. Add up all the "on" bits to get the decimal value. The maximum value is 255 (all bits on: 128+64+32+16+8+4+2+1).
                </div>
            </div>

            <div class="panel">
                <h3>Powers of 2 - Your Subnetting Cheat Sheet</h3>
                <p>Memorize these! They're the building blocks of all subnetting calculations.</p>

                <div class="powers-reference">
                    <div class="power-item">
                        <div class="exp">2<sup>0</sup></div>
                        <div class="val">1</div>
                    </div>
                    <div class="power-item">
                        <div class="exp">2<sup>1</sup></div>
                        <div class="val">2</div>
                    </div>
                    <div class="power-item">
                        <div class="exp">2<sup>2</sup></div>
                        <div class="val">4</div>
                    </div>
                    <div class="power-item">
                        <div class="exp">2<sup>3</sup></div>
                        <div class="val">8</div>
                    </div>
                    <div class="power-item">
                        <div class="exp">2<sup>4</sup></div>
                        <div class="val">16</div>
                    </div>
                    <div class="power-item">
                        <div class="exp">2<sup>5</sup></div>
                        <div class="val">32</div>
                    </div>
                    <div class="power-item">
                        <div class="exp">2<sup>6</sup></div>
                        <div class="val">64</div>
                    </div>
                    <div class="power-item">
                        <div class="exp">2<sup>7</sup></div>
                        <div class="val">128</div>
                    </div>
                    <div class="power-item">
                        <div class="exp">2<sup>8</sup></div>
                        <div class="val">256</div>
                    </div>
                </div>

                <div class="warning-box">
                    <strong>Why -2?</strong> When calculating usable hosts, always subtract 2 from the total: one address is the <strong>network address</strong> (all host bits = 0) and one is the <strong>broadcast address</strong> (all host bits = 1).
                </div>
            </div>

            <div class="panel">
                <h3>Common Subnet Masks Reference</h3>
                <div class="expandable open">
                    <div class="expandable-header">
                        <h4>üìã CIDR to Decimal Conversion Table</h4>
                        <span class="arrow">‚ñº</span>
                    </div>
                    <div class="expandable-content">
                        <div class="expandable-content-inner">
                            <table class="reference-table">
                                <thead>
                                    <tr>
                                        <th>CIDR</th>
                                        <th>Subnet Mask</th>
                                        <th>Usable Hosts</th>
                                        <th>Common Use</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>/8</td><td>255.0.0.0</td><td>16,777,214</td><td>Class A default</td></tr>
                                    <tr><td>/16</td><td>255.255.0.0</td><td>65,534</td><td>Class B default</td></tr>
                                    <tr><td>/24</td><td>255.255.255.0</td><td>254</td><td>Class C default</td></tr>
                                    <tr><td>/25</td><td>255.255.255.128</td><td>126</td><td>Half a /24</td></tr>
                                    <tr><td>/26</td><td>255.255.255.192</td><td>62</td><td>Quarter of /24</td></tr>
                                    <tr><td>/27</td><td>255.255.255.224</td><td>30</td><td>Small office</td></tr>
                                    <tr><td>/28</td><td>255.255.255.240</td><td>14</td><td>Small network</td></tr>
                                    <tr><td>/29</td><td>255.255.255.248</td><td>6</td><td>Point-to-point + extras</td></tr>
                                    <tr><td>/30</td><td>255.255.255.252</td><td>2</td><td>Point-to-point link</td></tr>
                                    <tr><td>/31</td><td>255.255.255.254</td><td>2*</td><td>Point-to-point (RFC 3021)</td></tr>
                                    <tr><td>/32</td><td>255.255.255.255</td><td>1</td><td>Host route</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== TAB 2: Subnet Calculator ==================== -->
        <div class="tab-content" id="tab-calculator">
            <div class="calculator-grid">
                <div class="panel">
                    <h2>üßÆ Subnet Calculator</h2>
                    <p>Enter an IP address and subnet mask to calculate all subnet details.</p>

                    <div class="input-group">
                        <label>IP Address</label>
                        <input type="text" id="calc-ip" placeholder="192.168.1.100" value="192.168.1.100">
                    </div>

                    <div class="input-group">
                        <label>Subnet Mask (CIDR or Dotted Decimal)</label>
                        <input type="text" id="calc-mask" placeholder="/24 or 255.255.255.0" value="/24">
                    </div>

                    <button class="calc-btn" id="calculate-btn">Calculate Subnet</button>

                    <div class="result-grid" id="calc-results">
                        <!-- Results populated by JavaScript -->
                    </div>
                </div>

                <div class="panel">
                    <h2>üìä Binary Breakdown</h2>
                    <div class="binary-breakdown" id="binary-breakdown">
                        <p style="color: #888; text-align: center;">Enter an IP address and click Calculate to see the binary breakdown</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== TAB 3: VLSM Designer ==================== -->
        <div class="tab-content" id="tab-vlsm">
            <div class="vlsm-container">
                <div class="vlsm-input-panel">
                    <h3>üìê VLSM Subnet Designer</h3>
                    <p style="color: #888; font-size: 0.9em; margin-bottom: 15px;">Variable Length Subnet Masking - efficiently allocate IP space based on actual needs.</p>

                    <div class="input-group">
                        <label>Network Address (e.g., 192.168.1.0/24)</label>
                        <input type="text" id="vlsm-network" placeholder="192.168.1.0/24" value="192.168.1.0/24">
                    </div>

                    <h4 style="color: #fff; margin: 20px 0 10px;">Subnet Requirements</h4>
                    <div id="vlsm-requirements">
                        <div class="subnet-requirement">
                            <input type="text" class="subnet-name" placeholder="Subnet name" value="Engineering">
                            <input type="number" class="host-count" placeholder="Hosts" value="50">
                            <button class="remove-btn" onclick="removeSubnetReq(this)">√ó</button>
                        </div>
                        <div class="subnet-requirement">
                            <input type="text" class="subnet-name" placeholder="Subnet name" value="Sales">
                            <input type="number" class="host-count" placeholder="Hosts" value="25">
                            <button class="remove-btn" onclick="removeSubnetReq(this)">√ó</button>
                        </div>
                        <div class="subnet-requirement">
                            <input type="text" class="subnet-name" placeholder="Subnet name" value="Management">
                            <input type="number" class="host-count" placeholder="Hosts" value="10">
                            <button class="remove-btn" onclick="removeSubnetReq(this)">√ó</button>
                        </div>
                    </div>

                    <button class="add-subnet-btn" onclick="addSubnetReq()">+ Add Subnet</button>

                    <button class="calc-btn" id="vlsm-calculate-btn" style="margin-top: 15px;">Design VLSM Subnets</button>
                </div>

                <div class="vlsm-results" id="vlsm-results">
                    <h3>üìã VLSM Results</h3>
                    <p style="color: #888;">Click "Design VLSM Subnets" to see the allocation</p>
                </div>
            </div>
        </div>

        <!-- ==================== TAB 4: Practice Mode ==================== -->
        <div class="tab-content" id="tab-practice">
            <div class="practice-container">
                <div class="score-panel">
                    <div class="score-item">
                        <div class="number" id="score-correct">0</div>
                        <div class="label">Correct</div>
                    </div>
                    <div class="score-item">
                        <div class="number" id="score-total">0</div>
                        <div class="label">Attempted</div>
                    </div>
                    <div class="score-item">
                        <div class="number" id="score-streak">0</div>
                        <div class="label">Streak üî•</div>
                    </div>
                </div>

                <div class="question-card" id="question-card">
                    <!-- Question populated by JavaScript -->
                </div>

                <div class="nav-buttons">
                    <button class="nav-btn" id="new-question-btn">üé≤ New Question</button>
                    <select id="difficulty-select" style="padding: 10px 15px; border-radius: 6px; background: rgba(0,0,0,0.3); color: #fff; border: 1px solid #4fc3f7;">
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                        <option value="mixed">Mixed</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== STATE ====================
        let state = {
            binaryOctets: [[0,0,0,0,0,0,0,0], [0,0,0,0,0,0,0,0], [0,0,0,0,0,0,0,0], [0,0,0,0,0,0,0,0]],
            practice: {
                correct: 0,
                total: 0,
                streak: 0,
                currentAnswer: null
            }
        };

        const bitValues = [128, 64, 32, 16, 8, 4, 2, 1];

        // ==================== TAB SWITCHING ====================
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById(`tab-${tabId}`).classList.add('active');

                if (tabId === 'practice' && !state.practice.currentAnswer) {
                    generateQuestion();
                }
            });
        });

        // ==================== EXPANDABLE SECTIONS ====================
        document.querySelectorAll('.expandable-header').forEach(header => {
            header.addEventListener('click', () => {
                header.parentElement.classList.toggle('open');
            });
        });

        // ==================== TAB 1: BINARY BASICS ====================
        function initBinaryDemo() {
            const container = document.getElementById('binary-demo-container');
            container.innerHTML = '';

            for (let octetIdx = 0; octetIdx < 4; octetIdx++) {
                if (octetIdx > 0) {
                    const sep = document.createElement('div');
                    sep.className = 'octet-separator';
                    sep.textContent = '.';
                    container.appendChild(sep);
                }

                const octetBox = document.createElement('div');
                octetBox.className = 'octet-box';

                const label = document.createElement('div');
                label.className = 'octet-label';
                label.textContent = `Octet ${octetIdx + 1}`;
                octetBox.appendChild(label);

                const bitRow = document.createElement('div');
                bitRow.className = 'bit-row';

                for (let bitIdx = 0; bitIdx < 8; bitIdx++) {
                    const bit = document.createElement('div');
                    bit.className = 'bit off';
                    bit.textContent = '0';
                    bit.dataset.octet = octetIdx;
                    bit.dataset.bit = bitIdx;
                    bit.addEventListener('click', toggleBit);
                    bitRow.appendChild(bit);
                }
                octetBox.appendChild(bitRow);

                const valuesRow = document.createElement('div');
                valuesRow.className = 'bit-values-row';
                bitValues.forEach(val => {
                    const valDiv = document.createElement('div');
                    valDiv.className = 'bit-val';
                    valDiv.textContent = val;
                    valuesRow.appendChild(valDiv);
                });
                octetBox.appendChild(valuesRow);

                const decimal = document.createElement('div');
                decimal.className = 'decimal-result';
                decimal.id = `octet-decimal-${octetIdx}`;
                decimal.textContent = '0';
                octetBox.appendChild(decimal);

                container.appendChild(octetBox);
            }

            updateBinaryDisplay();
        }

        function toggleBit(e) {
            const octet = parseInt(e.target.dataset.octet);
            const bit = parseInt(e.target.dataset.bit);

            state.binaryOctets[octet][bit] = state.binaryOctets[octet][bit] === 0 ? 1 : 0;

            e.target.textContent = state.binaryOctets[octet][bit];
            e.target.className = `bit ${state.binaryOctets[octet][bit] === 1 ? 'on' : 'off'}`;

            updateBinaryDisplay();
        }

        function updateBinaryDisplay() {
            const decimals = state.binaryOctets.map((octet, idx) => {
                let sum = 0;
                octet.forEach((bit, bitIdx) => {
                    sum += bit * bitValues[bitIdx];
                });
                document.getElementById(`octet-decimal-${idx}`).textContent = sum;
                return sum;
            });

            document.getElementById('full-ip-display').textContent = decimals.join('.');
        }

        // ==================== TAB 2: SUBNET CALCULATOR ====================
        document.getElementById('calculate-btn').addEventListener('click', calculateSubnet);

        function calculateSubnet() {
            const ipInput = document.getElementById('calc-ip').value.trim();
            const maskInput = document.getElementById('calc-mask').value.trim();

            // Parse IP
            const ipParts = ipInput.split('.').map(Number);
            if (ipParts.length !== 4 || ipParts.some(p => isNaN(p) || p < 0 || p > 255)) {
                alert('Invalid IP address format. Use x.x.x.x');
                return;
            }

            // Parse mask
            let cidr;
            if (maskInput.startsWith('/')) {
                cidr = parseInt(maskInput.substring(1));
            } else if (maskInput.includes('.')) {
                const maskParts = maskInput.split('.').map(Number);
                cidr = maskParts.reduce((acc, octet) => {
                    return acc + (octet.toString(2).match(/1/g) || []).length;
                }, 0);
            } else {
                cidr = parseInt(maskInput);
            }

            if (isNaN(cidr) || cidr < 0 || cidr > 32) {
                alert('Invalid subnet mask. Use /24 or 255.255.255.0 format');
                return;
            }

            // Calculate subnet details
            const ipBinary = ipParts.map(p => p.toString(2).padStart(8, '0')).join('');
            const networkBinary = ipBinary.substring(0, cidr).padEnd(32, '0');
            const broadcastBinary = ipBinary.substring(0, cidr).padEnd(32, '1');

            const networkAddress = binaryToIP(networkBinary);
            const broadcastAddress = binaryToIP(broadcastBinary);
            const firstHost = incrementIP(networkAddress);
            const lastHost = decrementIP(broadcastAddress);

            const hostBits = 32 - cidr;
            const totalHosts = Math.pow(2, hostBits);
            const usableHosts = hostBits <= 1 ? totalHosts : totalHosts - 2;

            const subnetMask = cidrToMask(cidr);
            const wildcardMask = cidrToWildcard(cidr);

            // Display results
            const resultsContainer = document.getElementById('calc-results');
            resultsContainer.innerHTML = `
                <div class="result-item">
                    <div class="label">Network Address</div>
                    <div class="value">${networkAddress}</div>
                </div>
                <div class="result-item">
                    <div class="label">Broadcast Address</div>
                    <div class="value">${broadcastAddress}</div>
                </div>
                <div class="result-item">
                    <div class="label">First Usable Host</div>
                    <div class="value">${firstHost}</div>
                </div>
                <div class="result-item">
                    <div class="label">Last Usable Host</div>
                    <div class="value">${lastHost}</div>
                </div>
                <div class="result-item">
                    <div class="label">Subnet Mask</div>
                    <div class="value">${subnetMask}</div>
                </div>
                <div class="result-item">
                    <div class="label">CIDR Notation</div>
                    <div class="value">/${cidr}</div>
                </div>
                <div class="result-item">
                    <div class="label">Wildcard Mask</div>
                    <div class="value">${wildcardMask}</div>
                </div>
                <div class="result-item">
                    <div class="label">Usable Hosts</div>
                    <div class="value">${usableHosts.toLocaleString()}</div>
                </div>
            `;

            // Binary breakdown
            displayBinaryBreakdown(ipParts, cidr);
        }

        function displayBinaryBreakdown(ipParts, cidr) {
            const container = document.getElementById('binary-breakdown');
            const ipBinary = ipParts.map(p => p.toString(2).padStart(8, '0'));
            const maskBinary = cidrToMask(cidr).split('.').map(p => parseInt(p).toString(2).padStart(8, '0'));

            let ipBitsHtml = '';
            let maskBitsHtml = '';
            let bitCount = 0;

            ipBinary.forEach((octet, octetIdx) => {
                if (octetIdx > 0) {
                    ipBitsHtml += '<div class="bit-cell separator">.</div>';
                    maskBitsHtml += '<div class="bit-cell separator">.</div>';
                }
                for (let i = 0; i < 8; i++) {
                    const isNetwork = bitCount < cidr;
                    ipBitsHtml += `<div class="bit-cell ${isNetwork ? 'network' : 'host'}">${octet[i]}</div>`;
                    maskBitsHtml += `<div class="bit-cell ${isNetwork ? 'network' : 'host'}">${maskBinary[octetIdx][i]}</div>`;
                    bitCount++;
                }
            });

            container.innerHTML = `
                <h4>Binary Visualization</h4>
                <div class="binary-row">
                    <div class="row-label">IP Address:</div>
                    <div class="bits">${ipBitsHtml}</div>
                    <div class="decimal">${ipParts.join('.')}</div>
                </div>
                <div class="binary-row">
                    <div class="row-label">Subnet Mask:</div>
                    <div class="bits">${maskBitsHtml}</div>
                    <div class="decimal">${cidrToMask(cidr)}</div>
                </div>
                <div style="margin-top: 15px; display: flex; gap: 20px;">
                    <div><span style="display: inline-block; width: 15px; height: 15px; background: #4caf50; border-radius: 3px; vertical-align: middle;"></span> Network bits (${cidr})</div>
                    <div><span style="display: inline-block; width: 15px; height: 15px; background: #ff9800; border-radius: 3px; vertical-align: middle;"></span> Host bits (${32 - cidr})</div>
                </div>
            `;
        }

        // ==================== TAB 3: VLSM DESIGNER ====================
        function addSubnetReq() {
            const container = document.getElementById('vlsm-requirements');
            const div = document.createElement('div');
            div.className = 'subnet-requirement';
            div.innerHTML = `
                <input type="text" class="subnet-name" placeholder="Subnet name">
                <input type="number" class="host-count" placeholder="Hosts" value="10">
                <button class="remove-btn" onclick="removeSubnetReq(this)">√ó</button>
            `;
            container.appendChild(div);
        }

        function removeSubnetReq(btn) {
            btn.parentElement.remove();
        }

        document.getElementById('vlsm-calculate-btn').addEventListener('click', calculateVLSM);

        function calculateVLSM() {
            const networkInput = document.getElementById('vlsm-network').value.trim();
            const parts = networkInput.split('/');

            if (parts.length !== 2) {
                alert('Enter network in format: 192.168.1.0/24');
                return;
            }

            const networkIP = parts[0];
            const networkCIDR = parseInt(parts[1]);
            const totalHostBits = 32 - networkCIDR;
            const totalAddresses = Math.pow(2, totalHostBits);

            // Gather requirements
            const requirements = [];
            document.querySelectorAll('.subnet-requirement').forEach(req => {
                const name = req.querySelector('.subnet-name').value || 'Unnamed';
                const hosts = parseInt(req.querySelector('.host-count').value) || 0;
                if (hosts > 0) {
                    requirements.push({ name, hosts });
                }
            });

            if (requirements.length === 0) {
                alert('Add at least one subnet requirement');
                return;
            }

            // Sort by host count descending (VLSM rule: largest first)
            requirements.sort((a, b) => b.hosts - a.hosts);

            // Calculate subnets
            let currentIP = ipToNumber(networkIP);
            const results = [];
            let usedAddresses = 0;

            for (const req of requirements) {
                // Find smallest subnet that fits
                const neededHosts = req.hosts + 2; // +2 for network and broadcast
                let hostBits = Math.ceil(Math.log2(neededHosts));
                if (hostBits < 2) hostBits = 2; // Minimum /30

                const subnetSize = Math.pow(2, hostBits);
                const subnetCIDR = 32 - hostBits;
                const usableHosts = subnetSize - 2;

                // Align to subnet boundary
                const alignedIP = Math.floor(currentIP / subnetSize) * subnetSize;
                if (alignedIP < currentIP) {
                    currentIP = alignedIP + subnetSize;
                }

                const networkAddr = numberToIP(currentIP);
                const broadcastAddr = numberToIP(currentIP + subnetSize - 1);
                const firstHost = numberToIP(currentIP + 1);
                const lastHost = numberToIP(currentIP + subnetSize - 2);

                results.push({
                    name: req.name,
                    requestedHosts: req.hosts,
                    networkAddress: networkAddr,
                    cidr: subnetCIDR,
                    subnetMask: cidrToMask(subnetCIDR),
                    broadcastAddress: broadcastAddr,
                    firstHost: firstHost,
                    lastHost: lastHost,
                    usableHosts: usableHosts,
                    allocated: subnetSize,
                    waste: usableHosts - req.hosts
                });

                usedAddresses += subnetSize;
                currentIP += subnetSize;
            }

            // Check if we exceeded the available space
            const exceeded = usedAddresses > totalAddresses;

            // Display results
            const container = document.getElementById('vlsm-results');
            let html = '<h3>üìã VLSM Allocation Results</h3>';

            if (exceeded) {
                html += `<div class="warning-box">‚ö†Ô∏è Warning: Required ${usedAddresses} addresses but only ${totalAddresses} available in /${networkCIDR}</div>`;
            }

            results.forEach((result, idx) => {
                html += `
                    <div class="vlsm-subnet-result" style="border-left-color: ${getColorForIndex(idx)};">
                        <h4>
                            <span>${result.name}</span>
                            <span style="color: #888; font-size: 0.9em;">/${result.cidr}</span>
                        </h4>
                        <div class="detail">
                            <span class="label">Network:</span>
                            <span class="value">${result.networkAddress}/${result.cidr}</span>
                        </div>
                        <div class="detail">
                            <span class="label">Subnet Mask:</span>
                            <span class="value">${result.subnetMask}</span>
                        </div>
                        <div class="detail">
                            <span class="label">Host Range:</span>
                            <span class="value">${result.firstHost} - ${result.lastHost}</span>
                        </div>
                        <div class="detail">
                            <span class="label">Broadcast:</span>
                            <span class="value">${result.broadcastAddress}</span>
                        </div>
                        <div class="detail">
                            <span class="label">Requested/Available:</span>
                            <span class="value">${result.requestedHosts} / ${result.usableHosts} (${result.waste} unused)</span>
                        </div>
                    </div>
                `;
            });

            // Efficiency meter
            const efficiency = Math.round((requirements.reduce((a, b) => a + b.hosts, 0) / usedAddresses) * 100);
            const efficiencyClass = efficiency >= 70 ? '' : efficiency >= 50 ? 'warning' : 'danger';

            html += `
                <div class="efficiency-meter">
                    <h4>üìä Address Efficiency</h4>
                    <div class="meter-bar">
                        <div class="meter-fill ${efficiencyClass}" style="width: ${Math.min(efficiency, 100)}%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.9em;">
                        <span>Used: ${usedAddresses} addresses</span>
                        <span>Efficiency: ${efficiency}%</span>
                        <span>Available: ${totalAddresses}</span>
                    </div>
                </div>
            `;

            container.innerHTML = html;
        }

        function getColorForIndex(idx) {
            const colors = ['#4fc3f7', '#4caf50', '#ff9800', '#e91e63', '#9c27b0', '#00bcd4'];
            return colors[idx % colors.length];
        }

        // ==================== TAB 4: PRACTICE MODE ====================
        const questionTemplates = {
            easy: [
                { type: 'hosts', q: 'How many usable hosts in a /{cidr} network?', generate: () => {
                    const cidr = 24 + Math.floor(Math.random() * 5); // /24 to /28
                    const hosts = Math.pow(2, 32 - cidr) - 2;
                    return { cidr, answer: hosts.toString(), hint: `Usable hosts = 2^(32-${cidr}) - 2 = 2^${32-cidr} - 2` };
                }},
                { type: 'mask', q: 'What is the subnet mask for /{cidr}?', generate: () => {
                    const cidr = [8, 16, 24, 25, 26, 27, 28][Math.floor(Math.random() * 7)];
                    return { cidr, answer: cidrToMask(cidr), hint: 'Count the network bits and convert each octet to decimal' };
                }},
                { type: 'cidr', q: 'What CIDR notation equals {mask}?', generate: () => {
                    const cidr = [8, 16, 24, 25, 26, 27, 28, 29, 30][Math.floor(Math.random() * 9)];
                    const mask = cidrToMask(cidr);
                    return { mask, answer: `/${cidr}`, altAnswer: cidr.toString(), hint: 'Count the 1 bits in the subnet mask' };
                }}
            ],
            medium: [
                { type: 'network', q: 'What is the network address for {ip}/{cidr}?', generate: () => {
                    const ip = randomIP();
                    const cidr = 24 + Math.floor(Math.random() * 5);
                    const network = getNetworkAddress(ip, cidr);
                    return { ip, cidr, answer: network, hint: `AND the IP with the subnet mask (first ${cidr} bits)` };
                }},
                { type: 'broadcast', q: 'What is the broadcast address for {ip}/{cidr}?', generate: () => {
                    const ip = randomIP();
                    const cidr = 24 + Math.floor(Math.random() * 5);
                    const broadcast = getBroadcastAddress(ip, cidr);
                    return { ip, cidr, answer: broadcast, hint: 'Set all host bits to 1' };
                }},
                { type: 'range', q: 'What is the first usable host for {network}/{cidr}?', generate: () => {
                    const baseOctet = Math.floor(Math.random() * 254) + 1;
                    const network = `192.168.${baseOctet}.0`;
                    const cidr = 24 + Math.floor(Math.random() * 4);
                    const first = incrementIP(network);
                    return { network, cidr, answer: first, hint: 'Add 1 to the network address' };
                }}
            ],
            hard: [
                { type: 'vlsm', q: 'You need {hosts} hosts. What is the smallest CIDR that fits?', generate: () => {
                    const hosts = [5, 10, 20, 50, 100, 200][Math.floor(Math.random() * 6)];
                    const needed = hosts + 2;
                    let hostBits = Math.ceil(Math.log2(needed));
                    const cidr = 32 - hostBits;
                    return { hosts, answer: `/${cidr}`, altAnswer: cidr.toString(), hint: `Need ${needed} addresses (hosts + network + broadcast). Find smallest 2^n >= ${needed}` };
                }},
                { type: 'samesubnet', q: 'Are {ip1} and {ip2} in the same /{cidr} subnet?', generate: () => {
                    const base = `192.168.1`;
                    const cidr = 26;
                    const sameSubnet = Math.random() > 0.5;
                    let ip1, ip2;
                    if (sameSubnet) {
                        const subnetStart = Math.floor(Math.random() * 4) * 64;
                        ip1 = `${base}.${subnetStart + Math.floor(Math.random() * 62) + 1}`;
                        ip2 = `${base}.${subnetStart + Math.floor(Math.random() * 62) + 1}`;
                    } else {
                        ip1 = `${base}.${Math.floor(Math.random() * 64) + 1}`;
                        ip2 = `${base}.${Math.floor(Math.random() * 64) + 65}`;
                    }
                    return { ip1, ip2, cidr, answer: sameSubnet ? 'yes' : 'no', hint: 'Calculate the network address for both IPs - if they match, same subnet' };
                }},
                { type: 'wildcard', q: 'What is the wildcard mask for /{cidr}?', generate: () => {
                    const cidr = [24, 25, 26, 27, 28, 29, 30][Math.floor(Math.random() * 7)];
                    return { cidr, answer: cidrToWildcard(cidr), hint: 'Wildcard = 255.255.255.255 - subnet mask' };
                }}
            ]
        };

        function generateQuestion() {
            const difficulty = document.getElementById('difficulty-select').value;
            let templates;

            if (difficulty === 'mixed') {
                const all = [...questionTemplates.easy, ...questionTemplates.medium, ...questionTemplates.hard];
                templates = [all[Math.floor(Math.random() * all.length)]];
            } else {
                templates = questionTemplates[difficulty];
            }

            const template = templates[Math.floor(Math.random() * templates.length)];
            const data = template.generate();

            let questionText = template.q;
            Object.keys(data).forEach(key => {
                questionText = questionText.replace(`{${key}}`, data[key]);
            });

            state.practice.currentAnswer = data.answer;
            state.practice.currentAltAnswer = data.altAnswer;
            state.practice.currentHint = data.hint;

            const difficultyLabel = difficulty === 'mixed' ?
                (questionTemplates.easy.includes(template) ? 'easy' :
                 questionTemplates.medium.includes(template) ? 'medium' : 'hard') : difficulty;

            document.getElementById('question-card').innerHTML = `
                <div class="question-header">
                    <span class="question-number">Question ${state.practice.total + 1}</span>
                    <span class="difficulty-badge ${difficultyLabel}">${difficultyLabel.toUpperCase()}</span>
                </div>
                <div class="question-text">${questionText}</div>
                <div class="answer-input">
                    <input type="text" id="answer-input" placeholder="Your answer..." autocomplete="off">
                    <button class="check-btn" id="check-answer-btn">Check</button>
                </div>
                <div class="feedback" id="feedback"></div>
                <button class="hint-btn" id="hint-btn">üí° Show Hint</button>
                <div class="hint-text" id="hint-text">${data.hint}</div>
            `;

            document.getElementById('check-answer-btn').addEventListener('click', checkAnswer);
            document.getElementById('answer-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkAnswer();
            });
            document.getElementById('hint-btn').addEventListener('click', () => {
                document.getElementById('hint-text').classList.toggle('visible');
            });
        }

        function checkAnswer() {
            const input = document.getElementById('answer-input');
            const feedback = document.getElementById('feedback');
            const userAnswer = input.value.trim().toLowerCase();
            const correctAnswer = state.practice.currentAnswer.toLowerCase();
            const altAnswer = state.practice.currentAltAnswer?.toLowerCase();

            state.practice.total++;

            if (userAnswer === correctAnswer || userAnswer === altAnswer) {
                state.practice.correct++;
                state.practice.streak++;
                input.classList.add('correct');
                input.classList.remove('incorrect');
                feedback.className = 'feedback correct';
                feedback.textContent = '‚úì Correct! Great job!';
            } else {
                state.practice.streak = 0;
                input.classList.add('incorrect');
                input.classList.remove('correct');
                feedback.className = 'feedback incorrect';
                feedback.textContent = `‚úó Incorrect. The answer is: ${state.practice.currentAnswer}`;
            }

            document.getElementById('score-correct').textContent = state.practice.correct;
            document.getElementById('score-total').textContent = state.practice.total;
            document.getElementById('score-streak').textContent = state.practice.streak;
        }

        document.getElementById('new-question-btn').addEventListener('click', generateQuestion);

        // ==================== HELPER FUNCTIONS ====================
        function binaryToIP(binary) {
            const octets = [];
            for (let i = 0; i < 32; i += 8) {
                octets.push(parseInt(binary.substring(i, i + 8), 2));
            }
            return octets.join('.');
        }

        function cidrToMask(cidr) {
            const mask = [];
            for (let i = 0; i < 4; i++) {
                const bits = Math.min(8, Math.max(0, cidr - i * 8));
                mask.push(256 - Math.pow(2, 8 - bits));
            }
            return mask.join('.');
        }

        function cidrToWildcard(cidr) {
            const mask = cidrToMask(cidr).split('.').map(Number);
            return mask.map(o => 255 - o).join('.');
        }

        function incrementIP(ip) {
            const parts = ip.split('.').map(Number);
            parts[3]++;
            for (let i = 3; i > 0; i--) {
                if (parts[i] > 255) {
                    parts[i] = 0;
                    parts[i - 1]++;
                }
            }
            return parts.join('.');
        }

        function decrementIP(ip) {
            const parts = ip.split('.').map(Number);
            parts[3]--;
            for (let i = 3; i > 0; i--) {
                if (parts[i] < 0) {
                    parts[i] = 255;
                    parts[i - 1]--;
                }
            }
            return parts.join('.');
        }

        function ipToNumber(ip) {
            const parts = ip.split('.').map(Number);
            return ((parts[0] << 24) + (parts[1] << 16) + (parts[2] << 8) + parts[3]) >>> 0;
        }

        function numberToIP(num) {
            return [(num >>> 24) & 255, (num >>> 16) & 255, (num >>> 8) & 255, num & 255].join('.');
        }

        function getNetworkAddress(ip, cidr) {
            const ipNum = ipToNumber(ip);
            const mask = (0xFFFFFFFF << (32 - cidr)) >>> 0;
            return numberToIP(ipNum & mask);
        }

        function getBroadcastAddress(ip, cidr) {
            const network = getNetworkAddress(ip, cidr);
            const networkNum = ipToNumber(network);
            const hostBits = 32 - cidr;
            const broadcast = networkNum + Math.pow(2, hostBits) - 1;
            return numberToIP(broadcast);
        }

        function randomIP() {
            return `192.168.${Math.floor(Math.random() * 256)}.${Math.floor(Math.random() * 254) + 1}`;
        }

        // ==================== INIT ====================
        initBinaryDemo();
    </script>
</body>
</html>
