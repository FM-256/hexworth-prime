<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Troubleshooting Visualizer - Network Essentials</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #ecf0f1;
        }

        .home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            z-index: 1000;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .home-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 80px 20px 20px;
        }

        h1 {
            text-align: center;
            color: #f39c12;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .subtitle {
            text-align: center;
            color: #bdc3c7;
            margin-bottom: 30px;
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .tab-btn {
            background: rgba(255,255,255,0.1);
            border: 2px solid transparent;
            color: #ecf0f1;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            border-color: #f39c12;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #3498db;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        h3 {
            color: #f39c12;
            margin: 20px 0 10px;
            font-size: 1.3em;
        }

        /* Sidebar Layout */
        .sidebar-layout {
            display: grid;
            grid-template-columns: 220px 1fr;
            gap: 25px;
            min-height: 500px;
        }

        .sidebar {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 20px;
        }

        .sidebar-btn {
            display: block;
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: none;
            color: #ecf0f1;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .sidebar-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
        }

        .sidebar-btn.active {
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        .main-content {
            background: rgba(0,0,0,0.1);
            border-radius: 15px;
            padding: 25px;
        }

        /* Methodology Flow */
        .methodology-flow {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .method-step {
            background: rgba(52, 152, 219, 0.3);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            min-width: 130px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .method-step::after {
            content: '‚Üí';
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            color: #f39c12;
            font-size: 1.5em;
        }

        .method-step:last-child::after {
            display: none;
        }

        .method-step:hover, .method-step.active {
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            transform: scale(1.05);
        }

        .method-step .step-num {
            font-size: 2em;
            font-weight: bold;
            color: #f39c12;
        }

        .method-step:hover .step-num, .method-step.active .step-num {
            color: #fff;
        }

        .method-step .step-name {
            color: #ecf0f1;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .step-details {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .step-details ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        /* Command Simulator */
        .terminal {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            font-family: 'Consolas', 'Monaco', monospace;
            min-height: 300px;
        }

        .terminal-header {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .terminal-dot.red { background: #e74c3c; }
        .terminal-dot.yellow { background: #f39c12; }
        .terminal-dot.green { background: #27ae60; }

        .terminal-output {
            color: #0f0;
            white-space: pre-wrap;
            line-height: 1.6;
            max-height: 250px;
            overflow-y: auto;
        }

        .terminal-input {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .terminal-prompt {
            color: #3498db;
            margin-right: 10px;
        }

        .terminal-input input {
            flex: 1;
            background: transparent;
            border: none;
            color: #0f0;
            font-family: inherit;
            font-size: 1em;
            outline: none;
        }

        /* Command Reference */
        .command-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .command-card {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .command-card:hover {
            border-color: #3498db;
            transform: translateY(-3px);
        }

        .command-card .cmd-name {
            color: #f39c12;
            font-family: 'Consolas', monospace;
            font-size: 1.2em;
            margin-bottom: 8px;
        }

        .command-card .cmd-desc {
            color: #bdc3c7;
            font-size: 0.9em;
        }

        /* Troubleshooting Scenario */
        .scenario-box {
            background: rgba(231, 76, 60, 0.2);
            border-left: 4px solid #e74c3c;
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin-bottom: 20px;
        }

        .scenario-box h4 {
            color: #e74c3c;
            margin-bottom: 10px;
        }

        .options-grid {
            display: grid;
            gap: 10px;
            margin-top: 20px;
        }

        .option-btn {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            color: #ecf0f1;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            background: rgba(255,255,255,0.2);
            border-color: #3498db;
        }

        .option-btn.correct {
            background: rgba(39, 174, 96, 0.3);
            border-color: #27ae60;
        }

        .option-btn.incorrect {
            background: rgba(231, 76, 60, 0.3);
            border-color: #e74c3c;
        }

        .result-box {
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .result-box.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .result-box.success {
            background: rgba(39, 174, 96, 0.2);
            border: 2px solid #27ae60;
        }

        .result-box.error {
            background: rgba(231, 76, 60, 0.2);
            border: 2px solid #e74c3c;
        }

        /* Hardware Tools */
        .tool-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .hw-tool-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .hw-tool-card:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-5px);
        }

        .hw-tool-card.selected {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.4), rgba(41, 128, 185, 0.4));
            border: 2px solid #3498db;
        }

        .hw-tool-card .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .hw-tool-card .name {
            color: #f39c12;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .tool-info {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        /* Quiz */
        .quiz-progress {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .progress-bar {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            height: 10px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            height: 100%;
            transition: width 0.3s ease;
        }

        .quiz-question {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 25px;
        }

        .question-text {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #ecf0f1;
        }

        .quiz-options {
            display: grid;
            gap: 12px;
        }

        .quiz-option {
            background: rgba(255,255,255,0.1);
            border: 2px solid transparent;
            color: #ecf0f1;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .quiz-option:hover:not(.selected) {
            background: rgba(255,255,255,0.2);
            border-color: #3498db;
        }

        .quiz-option.selected.correct {
            background: rgba(39, 174, 96, 0.3);
            border-color: #27ae60;
        }

        .quiz-option.selected.incorrect {
            background: rgba(231, 76, 60, 0.3);
            border-color: #e74c3c;
        }

        .quiz-option.correct-answer {
            border-color: #27ae60;
        }

        .explanation {
            background: rgba(52, 152, 219, 0.2);
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 10px 10px 0;
        }

        .quiz-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(52, 152, 219, 0.4);
        }

        .quiz-btn:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Ping Sequence Diagram */
        .ping-sequence {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .ping-step {
            background: rgba(52, 152, 219, 0.3);
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            min-width: 150px;
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .ping-step.active {
            opacity: 1;
            transform: scale(1.1);
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }

        .ping-step.failed {
            opacity: 1;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .ping-step .icon {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .ping-arrow {
            color: #f39c12;
            font-size: 2em;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .sidebar-layout {
                grid-template-columns: 1fr;
            }

            .sidebar {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }

            .sidebar-btn {
                width: auto;
                flex: 1;
                min-width: 120px;
            }

            .methodology-flow {
                flex-direction: column;
                align-items: center;
            }

            .method-step::after {
                content: '‚Üì';
                right: 50%;
                top: auto;
                bottom: -20px;
                transform: translateX(50%);
            }
        }
    </style>
</head>
<body>
    <a href="../../../../index.html" class="home-btn">‚Üê Back to House</a>

    <div class="container">
        <h1>üîß Network Troubleshooting Visualizer</h1>
        <p class="subtitle">Interactive Learning Tool | Network+ Domain 5</p>

        <div class="tab-nav">
            <button class="tab-btn active" onclick="showTab('methodology')">7-Step Methodology</button>
            <button class="tab-btn" onclick="showTab('commands')">Command Simulator</button>
            <button class="tab-btn" onclick="showTab('ping-test')">Ping Sequence</button>
            <button class="tab-btn" onclick="showTab('hardware')">Hardware Tools</button>
            <button class="tab-btn" onclick="showTab('scenarios')">Troubleshoot!</button>
            <button class="tab-btn" onclick="showTab('quiz')">Exam Quiz</button>
        </div>

        <!-- Tab 1: 7-Step Methodology -->
        <div id="methodology" class="tab-content active">
            <h2>üìã The 7-Step Troubleshooting Methodology</h2>
            <p>Click on each step to learn more about it:</p>

            <div class="methodology-flow">
                <div class="method-step" onclick="showMethodStep(1)">
                    <div class="step-num">1</div>
                    <div class="step-name">Identify</div>
                </div>
                <div class="method-step" onclick="showMethodStep(2)">
                    <div class="step-num">2</div>
                    <div class="step-name">Theory</div>
                </div>
                <div class="method-step" onclick="showMethodStep(3)">
                    <div class="step-num">3</div>
                    <div class="step-name">Test</div>
                </div>
                <div class="method-step" onclick="showMethodStep(4)">
                    <div class="step-num">4</div>
                    <div class="step-name">Plan</div>
                </div>
                <div class="method-step" onclick="showMethodStep(5)">
                    <div class="step-num">5</div>
                    <div class="step-name">Implement</div>
                </div>
                <div class="method-step" onclick="showMethodStep(6)">
                    <div class="step-num">6</div>
                    <div class="step-name">Verify</div>
                </div>
                <div class="method-step" onclick="showMethodStep(7)">
                    <div class="step-num">7</div>
                    <div class="step-name">Document</div>
                </div>
            </div>

            <div id="step-details" class="step-details">
                <h3>Click a step above to see details</h3>
                <p>Each step in the troubleshooting methodology serves a specific purpose. Memorize this order for the exam!</p>
            </div>
        </div>

        <!-- Tab 2: Command Simulator -->
        <div id="commands" class="tab-content">
            <h2>üíª Command Simulator</h2>
            <div class="sidebar-layout">
                <div class="sidebar">
                    <h3 style="margin-bottom: 15px; color: #f39c12;">Commands</h3>
                    <button class="sidebar-btn active" onclick="selectCommand('ping')">ping</button>
                    <button class="sidebar-btn" onclick="selectCommand('tracert')">tracert</button>
                    <button class="sidebar-btn" onclick="selectCommand('ipconfig')">ipconfig</button>
                    <button class="sidebar-btn" onclick="selectCommand('nslookup')">nslookup</button>
                    <button class="sidebar-btn" onclick="selectCommand('netstat')">netstat</button>
                    <button class="sidebar-btn" onclick="selectCommand('arp')">arp</button>
                    <button class="sidebar-btn" onclick="selectCommand('route')">route</button>
                </div>
                <div class="main-content">
                    <div id="command-info" style="margin-bottom: 20px;">
                        <h3>ping - Test Network Connectivity</h3>
                        <p>Tests basic connectivity using ICMP Echo Request/Reply packets.</p>
                        <p><strong>Common options:</strong> -t (continuous), -n [count], -l [size]</p>
                    </div>
                    <div class="terminal">
                        <div class="terminal-header">
                            <div class="terminal-dot red"></div>
                            <div class="terminal-dot yellow"></div>
                            <div class="terminal-dot green"></div>
                        </div>
                        <div id="terminal-output" class="terminal-output">Microsoft Windows [Version 10.0.19045]
(c) Microsoft Corporation. All rights reserved.

C:\Users\Admin></div>
                        <div class="terminal-input">
                            <span class="terminal-prompt">C:\></span>
                            <input type="text" id="cmd-input" placeholder="Type a command (try: ping 8.8.8.8)" onkeypress="handleCommand(event)">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 3: Ping Sequence Test -->
        <div id="ping-test" class="tab-content">
            <h2>üéØ Ping Sequence Diagnostic</h2>
            <p>The classic troubleshooting sequence. Click each step to simulate testing:</p>

            <div class="ping-sequence" id="ping-sequence">
                <div class="ping-step" id="ping-1" onclick="testPingStep(1)">
                    <div class="icon">üîÑ</div>
                    <div>127.0.0.1</div>
                    <div style="font-size: 0.8em; color: #bdc3c7;">Loopback</div>
                </div>
                <div class="ping-arrow">‚Üí</div>
                <div class="ping-step" id="ping-2" onclick="testPingStep(2)">
                    <div class="icon">üíª</div>
                    <div>Own IP</div>
                    <div style="font-size: 0.8em; color: #bdc3c7;">NIC Test</div>
                </div>
                <div class="ping-arrow">‚Üí</div>
                <div class="ping-step" id="ping-3" onclick="testPingStep(3)">
                    <div class="icon">üö™</div>
                    <div>Gateway</div>
                    <div style="font-size: 0.8em; color: #bdc3c7;">Local Net</div>
                </div>
                <div class="ping-arrow">‚Üí</div>
                <div class="ping-step" id="ping-4" onclick="testPingStep(4)">
                    <div class="icon">üåê</div>
                    <div>Remote IP</div>
                    <div style="font-size: 0.8em; color: #bdc3c7;">Routing</div>
                </div>
                <div class="ping-arrow">‚Üí</div>
                <div class="ping-step" id="ping-5" onclick="testPingStep(5)">
                    <div class="icon">üìù</div>
                    <div>Hostname</div>
                    <div style="font-size: 0.8em; color: #bdc3c7;">DNS</div>
                </div>
            </div>

            <div id="ping-result" class="step-details">
                <h3>Click each step in order to diagnose where a problem might be</h3>
                <p>Each step tests a different layer of the network stack. If a step fails, the problem is likely at that layer.</p>
            </div>

            <div style="margin-top: 20px;">
                <button class="quiz-btn" onclick="simulateFailure()">üé≤ Simulate Random Failure</button>
                <button class="quiz-btn" onclick="resetPingTest()" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">üîÑ Reset</button>
            </div>
        </div>

        <!-- Tab 4: Hardware Tools -->
        <div id="hardware" class="tab-content">
            <h2>üîß Hardware Troubleshooting Tools</h2>
            <p>Click on a tool to learn about it:</p>

            <div class="tool-grid" id="hw-tools">
                <div class="hw-tool-card" onclick="showHwTool('cable-tester')">
                    <div class="icon">üîå</div>
                    <div class="name">Cable Tester</div>
                </div>
                <div class="hw-tool-card" onclick="showHwTool('tone-gen')">
                    <div class="icon">üîä</div>
                    <div class="name">Tone Generator</div>
                </div>
                <div class="hw-tool-card" onclick="showHwTool('loopback')">
                    <div class="icon">üîÑ</div>
                    <div class="name">Loopback Plug</div>
                </div>
                <div class="hw-tool-card" onclick="showHwTool('multimeter')">
                    <div class="icon">üìä</div>
                    <div class="name">Multimeter</div>
                </div>
                <div class="hw-tool-card" onclick="showHwTool('spectrum')">
                    <div class="icon">üì°</div>
                    <div class="name">Spectrum Analyzer</div>
                </div>
                <div class="hw-tool-card" onclick="showHwTool('tdr')">
                    <div class="icon">üìè</div>
                    <div class="name">TDR/OTDR</div>
                </div>
            </div>

            <div id="hw-tool-info" class="tool-info">
                <h3>Select a tool above</h3>
                <p>Learn about the hardware tools used for network troubleshooting.</p>
            </div>
        </div>

        <!-- Tab 5: Troubleshooting Scenarios -->
        <div id="scenarios" class="tab-content">
            <h2>üîç Interactive Troubleshooting Scenarios</h2>
            <div class="sidebar-layout">
                <div class="sidebar">
                    <h3 style="margin-bottom: 15px; color: #f39c12;">Scenarios</h3>
                    <button class="sidebar-btn active" onclick="loadScenario(0)">Scenario 1</button>
                    <button class="sidebar-btn" onclick="loadScenario(1)">Scenario 2</button>
                    <button class="sidebar-btn" onclick="loadScenario(2)">Scenario 3</button>
                    <button class="sidebar-btn" onclick="loadScenario(3)">Scenario 4</button>
                    <button class="sidebar-btn" onclick="loadScenario(4)">Scenario 5</button>
                </div>
                <div class="main-content">
                    <div id="scenario-content">
                        <!-- Scenario loads here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 6: Quiz -->
        <div id="quiz" class="tab-content">
            <h2>üìù Exam Preparation Quiz</h2>
            <div class="sidebar-layout">
                <div class="sidebar">
                    <div class="quiz-progress">
                        <h4>Progress</h4>
                        <p><span id="quiz-score">0</span> / <span id="quiz-total">10</span> correct</p>
                        <div class="progress-bar">
                            <div id="quiz-progress-fill" class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <h4 style="margin: 15px 0 10px; color: #f39c12;">Topics</h4>
                    <p style="font-size: 0.9em; color: #bdc3c7; line-height: 1.6;">
                        ‚Ä¢ 7-Step Methodology<br>
                        ‚Ä¢ Command-Line Tools<br>
                        ‚Ä¢ Hardware Tools<br>
                        ‚Ä¢ Common Issues<br>
                        ‚Ä¢ OSI Troubleshooting
                    </p>
                </div>
                <div class="main-content">
                    <div id="quiz-content">
                        <!-- Quiz loads here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab Management
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');

            if (tabId === 'scenarios') loadScenario(0);
            if (tabId === 'quiz') initQuiz();
        }

        // 7-Step Methodology
        const methodologySteps = {
            1: {
                title: "Step 1: Identify the Problem",
                content: `
                    <h3>Identify the Problem</h3>
                    <p>Gather information to clearly understand what's wrong.</p>
                    <ul>
                        <li><strong>Ask questions:</strong> What were you doing? When did it start? What changed?</li>
                        <li><strong>Determine scope:</strong> Is it one user, one department, or everyone?</li>
                        <li><strong>Gather symptoms:</strong> Error messages, behaviors, patterns</li>
                        <li><strong>Reproduce:</strong> Can you see the issue yourself?</li>
                    </ul>
                    <p style="margin-top: 15px; color: #f39c12;"><strong>Exam Tip:</strong> This is ALWAYS the first step. Any question starting "A user reports..." means you're in Step 1.</p>
                `
            },
            2: {
                title: "Step 2: Establish a Theory of Probable Cause",
                content: `
                    <h3>Establish a Theory</h3>
                    <p>Based on symptoms, form hypotheses about what's causing the problem.</p>
                    <ul>
                        <li><strong>Question the obvious:</strong> Is it plugged in? Is it turned on?</li>
                        <li><strong>Consider multiple causes:</strong> Don't fixate on one theory</li>
                        <li><strong>Use OSI model:</strong> Bottom-up, top-down, or divide-and-conquer</li>
                        <li><strong>Check recent changes:</strong> What was modified recently?</li>
                    </ul>
                    <p style="margin-top: 15px; color: #f39c12;"><strong>Exam Tip:</strong> "Question the obvious" is a key phrase. Simple causes are most common!</p>
                `
            },
            3: {
                title: "Step 3: Test the Theory to Determine Cause",
                content: `
                    <h3>Test the Theory</h3>
                    <p>Confirm or eliminate your theory through testing.</p>
                    <ul>
                        <li><strong>If confirmed:</strong> Move to Step 4 (Plan)</li>
                        <li><strong>If not confirmed:</strong> Return to Step 2 with a new theory</li>
                        <li><strong>If beyond expertise:</strong> Escalate to senior technician</li>
                        <li><strong>Make one change at a time:</strong> So you know what fixed it</li>
                    </ul>
                    <p style="margin-top: 15px; color: #f39c12;"><strong>Exam Tip:</strong> "Escalate" is valid if the theory cannot be confirmed and you've exhausted options.</p>
                `
            },
            4: {
                title: "Step 4: Establish a Plan of Action",
                content: `
                    <h3>Establish a Plan of Action</h3>
                    <p>Plan the solution and consider impacts before making changes.</p>
                    <ul>
                        <li><strong>Identify effects:</strong> What else might be impacted?</li>
                        <li><strong>Get approval:</strong> If change affects others, notify them</li>
                        <li><strong>Schedule window:</strong> May need maintenance window for production</li>
                        <li><strong>Prepare rollback:</strong> Have a way to undo changes if needed</li>
                    </ul>
                    <p style="margin-top: 15px; color: #f39c12;"><strong>Exam Tip:</strong> This step is about PLANNING, not doing. Don't skip to implementation!</p>
                `
            },
            5: {
                title: "Step 5: Implement the Solution",
                content: `
                    <h3>Implement the Solution</h3>
                    <p>Execute your plan to fix the problem.</p>
                    <ul>
                        <li><strong>Follow the plan:</strong> Don't deviate without reason</li>
                        <li><strong>Document as you go:</strong> Note what you're changing</li>
                        <li><strong>One change at a time:</strong> Don't make multiple changes simultaneously</li>
                        <li><strong>Escalate if needed:</strong> If solution is beyond your skill level</li>
                    </ul>
                    <p style="margin-top: 15px; color: #f39c12;"><strong>Exam Tip:</strong> If implementation doesn't work, you may need to return to earlier steps.</p>
                `
            },
            6: {
                title: "Step 6: Verify Full System Functionality",
                content: `
                    <h3>Verify Full System Functionality</h3>
                    <p>Confirm the fix worked AND nothing else broke.</p>
                    <ul>
                        <li><strong>Test the fix:</strong> Is the original problem solved?</li>
                        <li><strong>Test related systems:</strong> Did the fix break anything else?</li>
                        <li><strong>Have user confirm:</strong> If user reported it, have them verify</li>
                        <li><strong>Implement preventive measures:</strong> Stop it from happening again</li>
                    </ul>
                    <p style="margin-top: 15px; color: #f39c12;"><strong>Exam Tip:</strong> "Preventive measures" is key - it's part of verification, not documentation.</p>
                `
            },
            7: {
                title: "Step 7: Document Findings, Actions, and Outcomes",
                content: `
                    <h3>Document Findings, Actions, and Outcomes</h3>
                    <p>Record everything for future reference.</p>
                    <ul>
                        <li><strong>What was the problem?</strong> Symptoms and root cause</li>
                        <li><strong>What was the solution?</strong> Steps taken to fix it</li>
                        <li><strong>Lessons learned:</strong> How to prevent in future</li>
                        <li><strong>Update knowledge base:</strong> Help others with similar issues</li>
                    </ul>
                    <p style="margin-top: 15px; color: #f39c12;"><strong>Exam Tip:</strong> Documentation is ALWAYS the LAST step. Never before verify!</p>
                `
            }
        };

        function showMethodStep(step) {
            document.querySelectorAll('.method-step').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.method-step')[step - 1].classList.add('active');
            document.getElementById('step-details').innerHTML = methodologySteps[step].content;
        }

        // Command Simulator
        const commandInfo = {
            ping: {
                title: "ping - Test Network Connectivity",
                desc: "Tests basic connectivity using ICMP Echo Request/Reply packets.",
                options: "-t (continuous), -n [count], -l [size], -a (resolve name)"
            },
            tracert: {
                title: "tracert / traceroute - Trace Path",
                desc: "Maps the route packets take to reach a destination by incrementing TTL.",
                options: "-d (no DNS), -h [hops] (max hops)"
            },
            ipconfig: {
                title: "ipconfig - IP Configuration",
                desc: "View and manage network adapter settings on Windows.",
                options: "/all, /release, /renew, /flushdns, /displaydns"
            },
            nslookup: {
                title: "nslookup - DNS Query",
                desc: "Query DNS servers to resolve names and troubleshoot DNS issues.",
                options: "-type=A/MX/NS/PTR, server [dns-ip]"
            },
            netstat: {
                title: "netstat - Network Statistics",
                desc: "Displays active connections, listening ports, and routing tables.",
                options: "-a (all), -n (numeric), -o (PID), -b (executable)"
            },
            arp: {
                title: "arp - Address Resolution Protocol",
                desc: "View and manage the ARP cache (IP to MAC mappings).",
                options: "-a (display), -d (delete), -s (static entry)"
            },
            route: {
                title: "route - Routing Table",
                desc: "View and modify the local routing table.",
                options: "print, add, delete, -p (persistent)"
            }
        };

        // Timed command outputs - for realistic simulation
        const timedCommands = {
            'ping 8.8.8.8': {
                lines: [
                    { text: '\nPinging 8.8.8.8 with 32 bytes of data:', delay: 0 },
                    { text: 'Reply from 8.8.8.8: bytes=32 time=12ms TTL=117', delay: 1000 },
                    { text: 'Reply from 8.8.8.8: bytes=32 time=11ms TTL=117', delay: 2000 },
                    { text: 'Reply from 8.8.8.8: bytes=32 time=12ms TTL=117', delay: 3000 },
                    { text: 'Reply from 8.8.8.8: bytes=32 time=11ms TTL=117', delay: 4000 },
                    { text: '\nPing statistics for 8.8.8.8:', delay: 4500 },
                    { text: '    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),', delay: 4600 },
                    { text: 'Approximate round trip times in milli-seconds:', delay: 4700 },
                    { text: '    Minimum = 11ms, Maximum = 12ms, Average = 11ms', delay: 4800 }
                ]
            },
            'ping 127.0.0.1': {
                lines: [
                    { text: '\nPinging 127.0.0.1 with 32 bytes of data:', delay: 0 },
                    { text: 'Reply from 127.0.0.1: bytes=32 time<1ms TTL=128', delay: 300 },
                    { text: 'Reply from 127.0.0.1: bytes=32 time<1ms TTL=128', delay: 600 },
                    { text: 'Reply from 127.0.0.1: bytes=32 time<1ms TTL=128', delay: 900 },
                    { text: 'Reply from 127.0.0.1: bytes=32 time<1ms TTL=128', delay: 1200 },
                    { text: '\nPing statistics for 127.0.0.1:', delay: 1500 },
                    { text: '    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss)', delay: 1600 }
                ]
            },
            'ping google.com': {
                lines: [
                    { text: '\nPinging google.com [142.250.80.46] with 32 bytes of data:', delay: 0 },
                    { text: 'Reply from 142.250.80.46: bytes=32 time=15ms TTL=116', delay: 1000 },
                    { text: 'Reply from 142.250.80.46: bytes=32 time=14ms TTL=116', delay: 2000 },
                    { text: 'Reply from 142.250.80.46: bytes=32 time=14ms TTL=116', delay: 3000 },
                    { text: 'Reply from 142.250.80.46: bytes=32 time=15ms TTL=116', delay: 4000 },
                    { text: '\nPing statistics for 142.250.80.46:', delay: 4500 },
                    { text: '    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss)', delay: 4600 }
                ]
            },
            'tracert 8.8.8.8': {
                lines: [
                    { text: '\nTracing route to dns.google [8.8.8.8]', delay: 0 },
                    { text: 'over a maximum of 30 hops:\n', delay: 100 },
                    { text: '  1    <1 ms    <1 ms    <1 ms  192.168.1.1', delay: 800 },
                    { text: '  2    10 ms    12 ms    11 ms  10.0.0.1', delay: 1800 },
                    { text: '  3    15 ms    14 ms    15 ms  isp-core-router.net [72.14.215.85]', delay: 3000 },
                    { text: '  4    18 ms    17 ms    18 ms  72.14.232.136', delay: 4200 },
                    { text: '  5    20 ms    19 ms    20 ms  dns.google [8.8.8.8]', delay: 5400 },
                    { text: '\nTrace complete.', delay: 5600 }
                ]
            }
        };

        // Add more timed commands
        Object.assign(timedCommands, {
            'ipconfig': {
                lines: [
                    { text: '\nWindows IP Configuration', delay: 0 },
                    { text: '', delay: 100 },
                    { text: 'Ethernet adapter Ethernet:', delay: 200 },
                    { text: '', delay: 250 },
                    { text: '   Connection-specific DNS Suffix  . : local', delay: 350 },
                    { text: '   Link-local IPv6 Address . . . . . : fe80::1234:5678:abcd:ef01%12', delay: 450 },
                    { text: '   IPv4 Address. . . . . . . . . . . : 192.168.1.100', delay: 550 },
                    { text: '   Subnet Mask . . . . . . . . . . . : 255.255.255.0', delay: 650 },
                    { text: '   Default Gateway . . . . . . . . . : 192.168.1.1', delay: 750 }
                ]
            },
            'ipconfig /all': {
                lines: [
                    { text: '\nWindows IP Configuration', delay: 0 },
                    { text: '', delay: 100 },
                    { text: '   Host Name . . . . . . . . . . . . : WORKSTATION-01', delay: 200 },
                    { text: '   Primary Dns Suffix  . . . . . . . : corp.local', delay: 280 },
                    { text: '   Node Type . . . . . . . . . . . . : Hybrid', delay: 360 },
                    { text: '   IP Routing Enabled. . . . . . . . : No', delay: 440 },
                    { text: '   WINS Proxy Enabled. . . . . . . . : No', delay: 520 },
                    { text: '', delay: 600 },
                    { text: 'Ethernet adapter Ethernet:', delay: 700 },
                    { text: '', delay: 750 },
                    { text: '   Connection-specific DNS Suffix  . : local', delay: 850 },
                    { text: '   Description . . . . . . . . . . . : Intel(R) I211 Gigabit', delay: 930 },
                    { text: '   Physical Address. . . . . . . . . : AA-BB-CC-DD-EE-FF', delay: 1010 },
                    { text: '   DHCP Enabled. . . . . . . . . . . : Yes', delay: 1090 },
                    { text: '   IPv4 Address. . . . . . . . . . . : 192.168.1.100', delay: 1170 },
                    { text: '   Subnet Mask . . . . . . . . . . . : 255.255.255.0', delay: 1250 },
                    { text: '   Default Gateway . . . . . . . . . : 192.168.1.1', delay: 1330 },
                    { text: '   DHCP Server . . . . . . . . . . . : 192.168.1.1', delay: 1410 },
                    { text: '   DNS Servers . . . . . . . . . . . : 192.168.1.1', delay: 1490 },
                    { text: '                                       8.8.8.8', delay: 1570 },
                    { text: '   Lease Obtained. . . . . . . . . . : Monday, December 9, 2025 8:00:00 AM', delay: 1650 },
                    { text: '   Lease Expires . . . . . . . . . . : Tuesday, December 10, 2025 8:00:00 AM', delay: 1730 }
                ]
            },
            'nslookup google.com': {
                lines: [
                    { text: 'Server:  dns.local', delay: 0 },
                    { text: 'Address:  192.168.1.1', delay: 150 },
                    { text: '', delay: 300 },
                    { text: 'Non-authoritative answer:', delay: 800 },
                    { text: 'Name:    google.com', delay: 1000 },
                    { text: 'Addresses:  2607:f8b0:4004:800::200e', delay: 1200 },
                    { text: '          142.250.80.46', delay: 1400 }
                ]
            },
            'netstat -an': {
                lines: [
                    { text: '\nActive Connections', delay: 0 },
                    { text: '', delay: 100 },
                    { text: '  Proto  Local Address          Foreign Address        State', delay: 200 },
                    { text: '  TCP    0.0.0.0:80             0.0.0.0:0              LISTENING', delay: 350 },
                    { text: '  TCP    0.0.0.0:443            0.0.0.0:0              LISTENING', delay: 500 },
                    { text: '  TCP    192.168.1.100:49234    142.250.80.46:443      ESTABLISHED', delay: 650 },
                    { text: '  TCP    192.168.1.100:49235    52.84.12.100:443       TIME_WAIT', delay: 800 },
                    { text: '  TCP    192.168.1.100:49236    151.101.1.140:443      ESTABLISHED', delay: 950 },
                    { text: '  UDP    0.0.0.0:53             *:*', delay: 1100 },
                    { text: '  UDP    0.0.0.0:68             *:*', delay: 1250 }
                ]
            },
            'arp -a': {
                lines: [
                    { text: '\nInterface: 192.168.1.100 --- 0x5', delay: 0 },
                    { text: '  Internet Address      Physical Address      Type', delay: 200 },
                    { text: '  192.168.1.1           aa-bb-cc-dd-ee-01     dynamic', delay: 400 },
                    { text: '  192.168.1.20          aa-bb-cc-dd-ee-02     dynamic', delay: 600 },
                    { text: '  192.168.1.50          aa-bb-cc-dd-ee-03     dynamic', delay: 800 },
                    { text: '  192.168.1.255         ff-ff-ff-ff-ff-ff     static', delay: 1000 },
                    { text: '  224.0.0.22            01-00-5e-00-00-16     static', delay: 1200 }
                ]
            },
            'route print': {
                lines: [
                    { text: '\n===========================================================================', delay: 0 },
                    { text: 'Interface List', delay: 100 },
                    { text: '  5...aa bb cc dd ee ff ......Intel(R) I211 Gigabit Network Connection', delay: 250 },
                    { text: '  1...........................Software Loopback Interface 1', delay: 400 },
                    { text: '===========================================================================', delay: 550 },
                    { text: '', delay: 600 },
                    { text: 'IPv4 Route Table', delay: 700 },
                    { text: '===========================================================================', delay: 800 },
                    { text: 'Active Routes:', delay: 900 },
                    { text: 'Network Destination        Netmask          Gateway       Interface  Metric', delay: 1000 },
                    { text: '          0.0.0.0          0.0.0.0      192.168.1.1   192.168.1.100     25', delay: 1150 },
                    { text: '        127.0.0.0        255.0.0.0         On-link         127.0.0.1    331', delay: 1300 },
                    { text: '        127.0.0.1  255.255.255.255         On-link         127.0.0.1    331', delay: 1450 },
                    { text: '      192.168.1.0    255.255.255.0         On-link    192.168.1.100    281', delay: 1600 },
                    { text: '    192.168.1.100  255.255.255.255         On-link    192.168.1.100    281', delay: 1750 },
                    { text: '    192.168.1.255  255.255.255.255         On-link    192.168.1.100    281', delay: 1900 },
                    { text: '===========================================================================', delay: 2050 }
                ]
            }
        });

        // Static command outputs (instant display - only for help and clear)
        const commandOutputs = {
            'help': `
Available commands (try these):
  ping <ip/hostname>    - Test connectivity
  tracert <ip/hostname> - Trace route
  ipconfig [/all]       - Show IP configuration
  nslookup <hostname>   - DNS lookup
  netstat -an           - Show connections
  arp -a                - Show ARP cache
  route print           - Show routing table
  clear                 - Clear screen`
        };

        function selectCommand(cmd) {
            document.querySelectorAll('#commands .sidebar-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const info = commandInfo[cmd];
            document.getElementById('command-info').innerHTML = `
                <h3>${info.title}</h3>
                <p>${info.desc}</p>
                <p><strong>Common options:</strong> ${info.options}</p>
            `;
        }

        let commandRunning = false;

        function handleCommand(e) {
            if (e.key === 'Enter') {
                if (commandRunning) return; // Prevent new commands while one is running

                const input = document.getElementById('cmd-input');
                const cmd = input.value.trim().toLowerCase();
                const output = document.getElementById('terminal-output');

                output.textContent += `\n${cmd}\n`;
                input.value = '';

                if (cmd === 'clear') {
                    output.textContent = 'Microsoft Windows [Version 10.0.19045]\n(c) Microsoft Corporation. All rights reserved.\n\nC:\\Users\\Admin>';
                } else if (timedCommands[cmd]) {
                    // Timed output for ping, tracert, etc.
                    commandRunning = true;
                    input.disabled = true;
                    input.placeholder = 'Command running...';

                    const lines = timedCommands[cmd].lines;
                    const maxDelay = Math.max(...lines.map(l => l.delay));

                    lines.forEach(line => {
                        setTimeout(() => {
                            output.textContent += line.text + '\n';
                            output.scrollTop = output.scrollHeight;
                        }, line.delay);
                    });

                    // Re-enable input after command completes
                    setTimeout(() => {
                        output.textContent += '\nC:\\Users\\Admin>';
                        output.scrollTop = output.scrollHeight;
                        commandRunning = false;
                        input.disabled = false;
                        input.placeholder = 'Type a command (try: ping 8.8.8.8)';
                        input.focus();
                    }, maxDelay + 500);

                } else if (commandOutputs[cmd]) {
                    // Instant output for other commands
                    output.textContent += commandOutputs[cmd];
                    output.textContent += '\n\nC:\\Users\\Admin>';
                } else if (cmd.startsWith('ping ') || cmd.startsWith('tracert ') || cmd.startsWith('nslookup ')) {
                    // Generic response for unlisted targets
                    output.textContent += '\nCommand executed. (Try: ping 8.8.8.8, tracert 8.8.8.8, nslookup google.com)';
                    output.textContent += '\n\nC:\\Users\\Admin>';
                } else {
                    output.textContent += `\n'${cmd}' is not recognized. Type 'help' for commands.`;
                    output.textContent += '\n\nC:\\Users\\Admin>';
                }

                output.scrollTop = output.scrollHeight;
            }
        }

        // Ping Sequence Test
        let pingTestState = [null, null, null, null, null];
        let failurePoint = -1;

        function testPingStep(step) {
            if (step > 1 && pingTestState[step - 2] === null) {
                document.getElementById('ping-result').innerHTML = `
                    <h3>‚ö†Ô∏è Test in Order!</h3>
                    <p>You should test step ${step - 1} first. Always start from the bottom of the network stack.</p>
                `;
                return;
            }

            const success = failurePoint === -1 || step < failurePoint;
            pingTestState[step - 1] = success;

            const stepEl = document.getElementById(`ping-${step}`);
            stepEl.classList.add(success ? 'active' : 'failed');

            const results = {
                1: {
                    success: "‚úÖ Loopback successful! TCP/IP stack is working.",
                    fail: "‚ùå Loopback failed! TCP/IP stack problem. Reinstall network adapter or TCP/IP."
                },
                2: {
                    success: "‚úÖ NIC responding! Network adapter is working.",
                    fail: "‚ùå NIC not responding! Check network adapter, drivers, or hardware."
                },
                3: {
                    success: "‚úÖ Gateway reachable! Local network connectivity OK.",
                    fail: "‚ùå Can't reach gateway! Check cable, switch port, or gateway IP configuration."
                },
                4: {
                    success: "‚úÖ Remote IP reachable! Routing is working.",
                    fail: "‚ùå Can't reach remote IP! Routing problem - check gateway, ISP, or firewall."
                },
                5: {
                    success: "‚úÖ DNS working! Name resolution successful. Network fully functional!",
                    fail: "‚ùå DNS failure! Can reach IPs but not names. Check DNS server configuration."
                }
            };

            const result = success ? results[step].success : results[step].fail;
            document.getElementById('ping-result').innerHTML = `
                <h3>Step ${step} Result</h3>
                <p>${result}</p>
                ${!success ? '<p style="margin-top: 10px; color: #f39c12;"><strong>Diagnosis:</strong> Problem identified at this layer. Focus troubleshooting here.</p>' : ''}
            `;
        }

        function simulateFailure() {
            resetPingTest();
            failurePoint = Math.floor(Math.random() * 5) + 1;
            document.getElementById('ping-result').innerHTML = `
                <h3>üé≤ Random Failure Simulated</h3>
                <p>A problem has been introduced somewhere in the network. Test each step in order to find where it fails!</p>
            `;
        }

        function resetPingTest() {
            pingTestState = [null, null, null, null, null];
            failurePoint = -1;
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`ping-${i}`).classList.remove('active', 'failed');
            }
            document.getElementById('ping-result').innerHTML = `
                <h3>Click each step in order to diagnose</h3>
                <p>Each step tests a different layer of the network stack.</p>
            `;
        }

        // Hardware Tools
        const hwTools = {
            'cable-tester': {
                name: 'Cable Tester',
                icon: 'üîå',
                desc: 'Tests copper cable continuity, wire mapping, and identifies faults.',
                uses: [
                    'Verify cable continuity (no breaks)',
                    'Check correct wire mapping (T568A/B)',
                    'Detect shorts between wires',
                    'Identify split pairs and crossed pairs'
                ],
                tip: 'Always test BOTH ends of a cable. A basic tester checks continuity; a certifier tests to Cat5e/Cat6 standards.'
            },
            'tone-gen': {
                name: 'Tone Generator & Probe',
                icon: 'üîä',
                desc: 'Also called "Fox and Hound" - traces cables through walls and identifies cable runs.',
                uses: [
                    'Trace unlabeled cables in walls/ceilings',
                    'Identify specific cables in a bundle',
                    'Find cable endpoints in patch panels',
                    'Locate cables without access to both ends'
                ],
                tip: 'Connect generator to one end, use inductive probe to trace the cable without disconnecting anything.'
            },
            'loopback': {
                name: 'Loopback Plug',
                icon: 'üîÑ',
                desc: 'Tests NIC functionality by looping transmit pins back to receive pins.',
                uses: [
                    'Test if NIC can send and receive',
                    'Isolate NIC problems from cable/network issues',
                    'Verify port functionality on switches',
                    'Test serial connections'
                ],
                tip: 'A working NIC with loopback should send packets and receive them back. Used with diagnostic software.'
            },
            'multimeter': {
                name: 'Multimeter',
                icon: 'üìä',
                desc: 'Measures voltage, current, and resistance for electrical troubleshooting.',
                uses: [
                    'Verify PoE voltage (48V DC expected)',
                    'Check cable continuity (resistance)',
                    'Test power supplies and outlets',
                    'Verify proper grounding'
                ],
                tip: 'For PoE testing: measure between pins 1&2 (+) and 3&6 (-) for Mode A, or 4&5 and 7&8 for Mode B.'
            },
            'spectrum': {
                name: 'Spectrum Analyzer',
                icon: 'üì°',
                desc: 'Analyzes wireless frequencies to identify interference and signal issues.',
                uses: [
                    'Identify interference sources',
                    'Measure signal strength across spectrum',
                    'Find channel utilization',
                    'Detect rogue access points',
                    'Site surveys for WiFi deployment'
                ],
                tip: '2.4 GHz interference sources: microwaves, Bluetooth, cordless phones. Use 5 GHz to avoid.'
            },
            'tdr': {
                name: 'TDR / OTDR',
                icon: 'üìè',
                desc: 'Time-Domain Reflectometer - finds cable breaks and measures distance to fault.',
                uses: [
                    'Locate exact distance to cable break',
                    'Find impedance mismatches (kinks, damage)',
                    'Measure total cable length',
                    'Identify splice points in fiber (OTDR)'
                ],
                tip: 'TDR for copper cables, OTDR for fiber optic. Essential for long cable runs where visual inspection is impossible.'
            }
        };

        function showHwTool(tool) {
            document.querySelectorAll('.hw-tool-card').forEach(c => c.classList.remove('selected'));
            event.target.closest('.hw-tool-card').classList.add('selected');

            const t = hwTools[tool];
            document.getElementById('hw-tool-info').innerHTML = `
                <h3>${t.icon} ${t.name}</h3>
                <p>${t.desc}</p>
                <h4 style="margin-top: 15px; color: #3498db;">Common Uses:</h4>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    ${t.uses.map(u => `<li>${u}</li>`).join('')}
                </ul>
                <p style="margin-top: 15px; padding: 15px; background: rgba(243, 156, 18, 0.2); border-radius: 10px;">
                    <strong>üí° Tip:</strong> ${t.tip}
                </p>
            `;
        }

        // Troubleshooting Scenarios
        const scenarios = [
            {
                title: "Scenario 1: No Internet Access",
                description: "A user reports they can't access any websites. Other users in the same department are working fine.",
                symptoms: ["Can't browse any websites", "Email client shows offline", "Other users work fine"],
                question: "What should you do FIRST?",
                options: [
                    "Replace the network cable",
                    "Check if the computer has an IP address",
                    "Call the ISP",
                    "Reboot the router"
                ],
                correct: 1,
                explanation: "Following the methodology: First IDENTIFY the problem by gathering information. Checking the IP address (ipconfig) tells you if the computer has network connectivity and helps narrow down the issue. A 169.254.x.x address would indicate DHCP failure."
            },
            {
                title: "Scenario 2: Slow Network Performance",
                description: "Users report the network is extremely slow. The issue started after a new switch was installed.",
                symptoms: ["Very slow file transfers", "High number of collisions reported", "Started after new switch installation"],
                question: "What is the MOST LIKELY cause?",
                options: [
                    "DNS server is overloaded",
                    "Duplex mismatch between switch and devices",
                    "The switch is defective",
                    "Virus on the network"
                ],
                correct: 1,
                explanation: "High collisions and slow transfers after a switch change strongly suggest a duplex mismatch. One side may be set to full-duplex while the other is half-duplex. Check switch port settings and enable auto-negotiation."
            },
            {
                title: "Scenario 3: Can Ping IP but Not Hostname",
                description: "A user can access resources by IP address (ping 8.8.8.8 works) but not by name (can't browse to google.com).",
                symptoms: ["ping 8.8.8.8 succeeds", "ping google.com fails", "Browser shows 'server not found'"],
                question: "What should you check?",
                options: [
                    "The default gateway setting",
                    "The DNS server configuration",
                    "The network cable",
                    "The firewall rules"
                ],
                correct: 1,
                explanation: "If IP addresses work but hostnames don't, DNS resolution is failing. Check DNS server settings (ipconfig /all), try nslookup, and consider using a different DNS server (8.8.8.8) to test. Also try ipconfig /flushdns."
            },
            {
                title: "Scenario 4: Intermittent Connectivity",
                description: "A workstation randomly loses network connectivity for a few seconds, then reconnects. The problem happens several times per hour.",
                symptoms: ["Random disconnections", "Reconnects automatically", "Network adapter shows link up/down"],
                question: "What is the FIRST thing to check?",
                options: [
                    "The DHCP lease time",
                    "The network cable and connections",
                    "The switch firmware",
                    "The wireless interference"
                ],
                correct: 1,
                explanation: "Intermittent physical layer issues (bad cable, loose connection, damaged port) are the most common cause of random disconnections. Check the cable, connectors, and try a different switch port. Use a cable tester if available."
            },
            {
                title: "Scenario 5: 169.254.x.x Address",
                description: "A newly deployed computer shows an IP address of 169.254.45.23. It cannot communicate with any other computers.",
                symptoms: ["IP address is 169.254.x.x", "Can't ping gateway", "Can't reach DHCP server"],
                question: "What does this IP address indicate?",
                options: [
                    "The computer is configured with a static IP",
                    "The DHCP server assigned this address",
                    "The computer couldn't reach the DHCP server (APIPA)",
                    "The DNS server is misconfigured"
                ],
                correct: 2,
                explanation: "169.254.x.x is an APIPA (Automatic Private IP Addressing) address. Windows assigns this when it can't reach a DHCP server. Check: Is the DHCP server running? Is the network cable connected? Is the port in the correct VLAN? Is the DHCP pool exhausted?"
            }
        ];

        let currentScenario = 0;

        function loadScenario(index) {
            currentScenario = index;
            const s = scenarios[index];

            document.querySelectorAll('#scenarios .sidebar-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === index);
            });

            document.getElementById('scenario-content').innerHTML = `
                <div class="scenario-box">
                    <h4>${s.title}</h4>
                    <p>${s.description}</p>
                    <h4 style="margin-top: 15px;">Symptoms:</h4>
                    <ul style="margin-left: 20px;">
                        ${s.symptoms.map(sym => `<li>${sym}</li>`).join('')}
                    </ul>
                </div>
                <h3>${s.question}</h3>
                <div class="options-grid" id="scenario-options">
                    ${s.options.map((opt, i) => `
                        <button class="option-btn" onclick="checkScenarioAnswer(${i})">${opt}</button>
                    `).join('')}
                </div>
                <div id="scenario-result" class="result-box"></div>
            `;
        }

        function checkScenarioAnswer(selected) {
            const s = scenarios[currentScenario];
            const buttons = document.querySelectorAll('#scenario-options .option-btn');
            const result = document.getElementById('scenario-result');

            buttons.forEach((btn, i) => {
                btn.disabled = true;
                if (i === s.correct) btn.classList.add('correct');
                if (i === selected && i !== s.correct) btn.classList.add('incorrect');
            });

            const isCorrect = selected === s.correct;
            result.className = `result-box show ${isCorrect ? 'success' : 'error'}`;
            result.innerHTML = `
                <h4>${isCorrect ? '‚úÖ Correct!' : '‚ùå Not Quite'}</h4>
                <p>${s.explanation}</p>
            `;
        }

        // Quiz
        const quizQuestions = [
            {
                q: "What is the FIRST step in the CompTIA troubleshooting methodology?",
                options: ["Establish a theory", "Identify the problem", "Test the theory", "Document findings"],
                correct: 1,
                explanation: "Always start by identifying the problem - gather information, question users, determine scope."
            },
            {
                q: "Which command would you use to find the path packets take to a destination?",
                options: ["ping", "netstat", "tracert", "arp"],
                correct: 2,
                explanation: "tracert (Windows) or traceroute (Linux) maps the route by sending packets with incrementing TTL values."
            },
            {
                q: "A computer has the IP address 169.254.100.50. What does this indicate?",
                options: ["Static IP configuration", "DHCP assigned address", "APIPA - DHCP failure", "Loopback address"],
                correct: 2,
                explanation: "169.254.x.x is APIPA (Automatic Private IP Addressing), assigned when DHCP is unreachable."
            },
            {
                q: "Which hardware tool would you use to trace a cable through a wall?",
                options: ["Cable tester", "Tone generator and probe", "Multimeter", "Loopback plug"],
                correct: 1,
                explanation: "A tone generator (fox) and probe (hound) lets you trace cables through walls by following an audible tone."
            },
            {
                q: "What command shows active network connections and listening ports?",
                options: ["ipconfig", "netstat", "nslookup", "route"],
                correct: 1,
                explanation: "netstat -an shows all active connections and listening ports in numeric format."
            },
            {
                q: "If ping to an IP works but ping to a hostname fails, what is the likely issue?",
                options: ["Routing problem", "DNS problem", "Physical layer issue", "Firewall blocking"],
                correct: 1,
                explanation: "If IPs work but names don't, DNS resolution is failing. Check DNS server configuration."
            },
            {
                q: "Which step comes IMMEDIATELY after 'Verify full system functionality'?",
                options: ["Implement the solution", "Establish a plan", "Document findings", "Test the theory"],
                correct: 2,
                explanation: "Documentation is ALWAYS the last step, coming after you've verified the fix works."
            },
            {
                q: "What tool measures voltage and is used to verify PoE?",
                options: ["Spectrum analyzer", "Cable tester", "Multimeter", "TDR"],
                correct: 2,
                explanation: "A multimeter measures voltage, current, and resistance. Used to verify PoE (48V DC)."
            },
            {
                q: "High collisions and slow speeds after connecting a new device suggest:",
                options: ["DNS misconfiguration", "Duplex mismatch", "Wrong default gateway", "Exhausted DHCP pool"],
                correct: 1,
                explanation: "Collisions indicate one side is half-duplex while the other is full-duplex. Check port settings."
            },
            {
                q: "Which troubleshooting approach starts at the Physical layer and works up?",
                options: ["Top-down", "Divide and conquer", "Bottom-up", "OSI sequential"],
                correct: 2,
                explanation: "Bottom-up starts at Layer 1 (Physical) checking cables, lights, then moves up to higher layers."
            }
        ];

        let quizState = {
            current: 0,
            score: 0,
            answered: []
        };

        function initQuiz() {
            quizState = { current: 0, score: 0, answered: [] };
            document.getElementById('quiz-score').textContent = '0';
            document.getElementById('quiz-total').textContent = quizQuestions.length;
            document.getElementById('quiz-progress-fill').style.width = '0%';
            showQuizQuestion();
        }

        function showQuizQuestion() {
            const q = quizQuestions[quizState.current];
            const container = document.getElementById('quiz-content');

            container.innerHTML = `
                <div class="quiz-question">
                    <p style="color: #bdc3c7; margin-bottom: 10px;">Question ${quizState.current + 1} of ${quizQuestions.length}</p>
                    <p class="question-text">${q.q}</p>
                    <div class="quiz-options">
                        ${q.options.map((opt, i) => `
                            <button class="quiz-option" onclick="checkQuizAnswer(${i})">${opt}</button>
                        `).join('')}
                    </div>
                    <div id="quiz-explanation" class="explanation" style="display: none;"></div>
                    <button id="quiz-next" class="quiz-btn" onclick="nextQuestion()" style="display: none;">
                        ${quizState.current < quizQuestions.length - 1 ? 'Next Question ‚Üí' : 'See Results'}
                    </button>
                </div>
            `;
        }

        function checkQuizAnswer(selected) {
            const q = quizQuestions[quizState.current];
            const buttons = document.querySelectorAll('.quiz-option');

            buttons.forEach((btn, i) => {
                btn.disabled = true;
                btn.classList.add('selected');
                if (i === q.correct) btn.classList.add('correct', 'correct-answer');
                if (i === selected && i !== q.correct) btn.classList.add('incorrect');
            });

            if (selected === q.correct) {
                quizState.score++;
                document.getElementById('quiz-score').textContent = quizState.score;
            }

            quizState.answered.push(selected);

            const progress = ((quizState.current + 1) / quizQuestions.length) * 100;
            document.getElementById('quiz-progress-fill').style.width = progress + '%';

            document.getElementById('quiz-explanation').style.display = 'block';
            document.getElementById('quiz-explanation').innerHTML = `
                <strong>${selected === q.correct ? '‚úÖ Correct!' : '‚ùå Incorrect'}</strong><br>
                ${q.explanation}
            `;

            document.getElementById('quiz-next').style.display = 'inline-block';
        }

        function nextQuestion() {
            quizState.current++;
            if (quizState.current < quizQuestions.length) {
                showQuizQuestion();
            } else {
                showQuizResults();
            }
        }

        function showQuizResults() {
            const percentage = Math.round((quizState.score / quizQuestions.length) * 100);
            const container = document.getElementById('quiz-content');

            let message, color;
            if (percentage >= 80) {
                message = "üéâ Excellent! You're ready for the exam!";
                color = '#27ae60';
            } else if (percentage >= 60) {
                message = "üëç Good job! Review the topics you missed.";
                color = '#f39c12';
            } else {
                message = "üìö Keep studying! Review the presentation and try again.";
                color = '#e74c3c';
            }

            container.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <h2 style="color: ${color}; margin-bottom: 20px;">${message}</h2>
                    <p style="font-size: 3em; margin: 20px 0;">${quizState.score} / ${quizQuestions.length}</p>
                    <p style="font-size: 1.5em; color: #bdc3c7;">${percentage}%</p>
                    <button class="quiz-btn" onclick="initQuiz()" style="margin-top: 30px;">Try Again</button>
                </div>
            `;
        }

        // Initialize
        loadScenario(0);
    </script>
<script src="../../../../components/FluxCapacitor.js"></script>
</body>
</html>
