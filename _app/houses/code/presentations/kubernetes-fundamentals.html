<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <!-- Achievement & Progress Integration -->
    <script src="../../../components/AchievementManager.js"></script>
    <script src="../../../components/ModuleProgress.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Fundamentals - House of the Code</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --house-color: #6366F1;
            --house-glow: rgba(99, 102, 241, 0.4);
            --bg-dark: #0a0a12;
            --bg-card: rgba(15, 15, 25, 0.8);
            --text-primary: #e8e8f0;
            --text-secondary: #8888aa;
            --k8s-blue: #326CE5;
            --k8s-light: #7CB8FF;
        }

        body {
            min-height: 100vh;
            background: var(--bg-dark);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Header */
        .module-header {
            padding: 20px 30px;
            background: rgba(10, 10, 18, 0.95);
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .back-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid rgba(99, 102, 241, 0.3);
            background: transparent;
            color: var(--house-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .back-btn:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        .module-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .house-badge {
            font-size: 0.7rem;
            padding: 4px 12px;
            background: rgba(99, 102, 241, 0.15);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 20px;
            color: var(--house-color);
            letter-spacing: 0.1em;
        }

        /* Main Content */
        .module-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 30px;
        }

        .intro-section {
            text-align: center;
            margin-bottom: 50px;
        }

        .intro-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .intro-title {
            font-size: 2.2rem;
            font-weight: 300;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #fff, var(--k8s-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .intro-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 20px;
            line-height: 1.6;
        }

        .prerequisite-box {
            background: rgba(245, 158, 11, 0.05);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-left: 4px solid #f59e0b;
            border-radius: 8px;
            padding: 15px 20px;
            margin: 20px auto;
            max-width: 600px;
        }

        .prerequisite-box strong {
            color: #f59e0b;
            font-size: 0.9rem;
        }

        .prerequisite-box p {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-top: 5px;
            line-height: 1.5;
        }

        .prerequisite-box a {
            color: #60a5fa;
            text-decoration: none;
            font-weight: 500;
        }

        .prerequisite-box a:hover {
            text-decoration: underline;
        }

        /* Section Headers */
        .section-header {
            font-size: 1.4rem;
            font-weight: 400;
            margin-bottom: 25px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-header::before {
            content: '';
            width: 4px;
            height: 24px;
            background: var(--house-color);
            border-radius: 2px;
        }

        /* Benefits Grid */
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }

        .benefit-card {
            background: var(--bg-card);
            border: 1px solid rgba(99, 102, 241, 0.15);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .benefit-card:hover {
            border-color: var(--house-color);
            transform: translateY(-5px);
            box-shadow: 0 5px 20px var(--house-glow);
        }

        .benefit-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .benefit-card h3 {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--k8s-blue);
        }

        .benefit-card p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Architecture Visualization */
        .architecture-container {
            background: var(--bg-card);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 50px;
        }

        .arch-diagram {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .arch-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .arch-section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--k8s-blue);
            text-align: center;
            margin-bottom: 10px;
        }

        .arch-layer {
            background: rgba(99, 102, 241, 0.05);
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .arch-layer:hover {
            border-color: var(--house-color);
            background: rgba(99, 102, 241, 0.15);
            transform: scale(1.02);
        }

        .arch-layer.active {
            border-color: var(--k8s-blue);
            background: rgba(50, 108, 229, 0.1);
            box-shadow: 0 5px 25px rgba(50, 108, 229, 0.3);
        }

        .arch-layer-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .arch-layer-desc {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .arch-detail {
            background: rgba(99, 102, 241, 0.05);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 10px;
            padding: 20px;
            display: none;
        }

        .arch-detail.visible {
            display: block;
            animation: slideIn 0.3s ease;
        }

        .arch-detail h4 {
            color: var(--k8s-blue);
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .arch-detail p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Objects Grid */
        .objects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }

        .object-card {
            background: var(--bg-card);
            border: 1px solid rgba(99, 102, 241, 0.15);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .object-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--k8s-blue);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .object-card:hover::before {
            transform: scaleY(1);
        }

        .object-card:hover {
            border-color: var(--house-color);
            transform: translateX(5px);
            box-shadow: 0 5px 20px var(--house-glow);
        }

        .object-card.expanded {
            border-color: var(--house-color);
            box-shadow: 0 5px 25px var(--house-glow);
        }

        .object-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .object-icon {
            font-size: 1.5rem;
        }

        .object-name {
            font-size: 1rem;
            font-weight: 600;
            color: var(--k8s-blue);
        }

        .object-summary {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .object-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .object-card.expanded .object-details {
            max-height: 400px;
        }

        .object-example {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 6px;
            margin-top: 12px;
            border-left: 3px solid var(--k8s-blue);
        }

        .object-example code {
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            color: #7dd3fc;
            display: block;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .example-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 6px;
        }

        /* Command Cards */
        .commands-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 18px;
            margin-bottom: 50px;
        }

        .command-card {
            background: var(--bg-card);
            border: 1px solid rgba(99, 102, 241, 0.15);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .command-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--k8s-blue);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .command-card:hover::before {
            transform: scaleY(1);
        }

        .command-card:hover {
            border-color: var(--house-color);
            transform: translateX(5px);
            box-shadow: 0 5px 20px var(--house-glow);
        }

        .command-card.expanded {
            border-color: var(--house-color);
            box-shadow: 0 5px 25px var(--house-glow);
        }

        .command-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .command-icon {
            font-size: 1.5rem;
        }

        .command-name {
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            font-weight: 600;
            color: var(--k8s-blue);
        }

        .command-summary {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .command-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .command-card.expanded .command-details {
            max-height: 500px;
        }

        .command-example {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 6px;
            margin-top: 12px;
            border-left: 3px solid var(--k8s-blue);
        }

        .command-example code {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: #7dd3fc;
            display: block;
            line-height: 1.6;
        }

        /* Comparison Section */
        .comparison-container {
            background: var(--bg-card);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 50px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(99, 102, 241, 0.1);
        }

        .comparison-table th {
            color: var(--k8s-blue);
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .comparison-table td {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .comparison-table tr:hover {
            background: rgba(99, 102, 241, 0.05);
        }

        /* YAML Example */
        .yaml-container {
            background: var(--bg-card);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 50px;
        }

        .yaml-code {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(50, 108, 229, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.8;
            color: #7dd3fc;
            overflow-x: auto;
        }

        .yaml-code .comment {
            color: #6b7280;
        }

        .yaml-code .keyword {
            color: #fb923c;
            font-weight: bold;
        }

        .yaml-code .value {
            color: #a78bfa;
        }

        /* Action Buttons */
        .action-section {
            background: var(--bg-card);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
        }

        .action-section h3 {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .action-section p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .action-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 30px;
            background: linear-gradient(135deg, var(--house-color), #4f46e5);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            margin: 5px;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--house-glow);
        }

        .action-btn.k8s {
            background: linear-gradient(135deg, var(--k8s-blue), #1e5bc7);
        }

        .action-btn.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        /* Footer */
        .module-footer {
            text-align: center;
            padding: 30px;
            border-top: 1px solid rgba(99, 102, 241, 0.1);
            margin-top: 50px;
        }

        .footer-text {
            font-size: 0.75rem;
            color: var(--text-secondary);
            letter-spacing: 0.1em;
        }

        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .benefits-grid {
                grid-template-columns: 1fr;
            }

            .objects-grid,
            .commands-grid {
                grid-template-columns: 1fr;
            }

            .arch-diagram {
                grid-template-columns: 1fr;
            }

            .intro-title {
                font-size: 1.8rem;
            }

            .comparison-table {
                font-size: 0.8rem;
            }

            .comparison-table th,
            .comparison-table td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header class="module-header">
        <div class="header-left">
            <button class="back-btn" onclick="goBack()">‚Üê</button>
            <span class="module-title">Kubernetes Fundamentals</span>
        </div>
        <span class="house-badge">HOUSE OF THE CODE</span>
    </header>

    <main class="module-content">
        <section class="intro-section">
            <div class="intro-icon">‚éà</div>
            <h1 class="intro-title">Kubernetes Fundamentals</h1>
            <p class="intro-subtitle">
                Master container orchestration at scale. Kubernetes automates deployment, scaling, and management
                of containerized applications across clusters of machines.
            </p>
            <div class="prerequisite-box">
                <strong>Prerequisite:</strong>
                <p>This module builds on Docker fundamentals. If you haven't already, complete the
                <a href="docker-fundamentals.html">Docker Fundamentals</a> module first to understand
                containers, images, and basic containerization concepts.</p>
            </div>
        </section>

        <!-- What is Kubernetes -->
        <h2 class="section-header">What is Kubernetes (K8s)?</h2>
        <div class="benefits-grid">
            <div class="benefit-card">
                <div class="benefit-icon">üö¢</div>
                <h3>Container Orchestration</h3>
                <p>Automates the deployment, scaling, and operation of containerized applications across clusters of hosts.</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">üîÑ</div>
                <h3>Self-Healing</h3>
                <p>Automatically restarts failed containers, replaces containers, kills unresponsive containers, and reschedules workloads.</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">üìà</div>
                <h3>Automatic Scaling</h3>
                <p>Scale applications up and down automatically based on CPU usage, memory, or custom metrics.</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">‚öñÔ∏è</div>
                <h3>Load Balancing</h3>
                <p>Distributes network traffic across containers to ensure stability and high availability of your applications.</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">üîê</div>
                <h3>Secret Management</h3>
                <p>Store and manage sensitive information like passwords, OAuth tokens, and SSH keys securely.</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">üåä</div>
                <h3>Rolling Updates</h3>
                <p>Update applications with zero downtime using rolling deployment strategies and automatic rollbacks.</p>
            </div>
        </div>

        <!-- Why Container Orchestration Matters -->
        <h2 class="section-header">Why Orchestration Matters</h2>
        <div class="comparison-container">
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                Running a few containers manually is manageable. But what happens when you have hundreds or thousands of containers?
                Kubernetes solves the challenges that emerge at scale.
            </p>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Challenge</th>
                        <th>Manual Management</th>
                        <th>With Kubernetes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Container Failures</strong></td>
                        <td>Manual detection and restart</td>
                        <td>Automatic restart and rescheduling</td>
                    </tr>
                    <tr>
                        <td><strong>Scaling</strong></td>
                        <td>Manually start/stop containers</td>
                        <td>Automatic scaling based on load</td>
                    </tr>
                    <tr>
                        <td><strong>Updates</strong></td>
                        <td>Take down app, update, restart</td>
                        <td>Zero-downtime rolling updates</td>
                    </tr>
                    <tr>
                        <td><strong>Resource Allocation</strong></td>
                        <td>Manually distribute across servers</td>
                        <td>Intelligent scheduling and bin-packing</td>
                    </tr>
                    <tr>
                        <td><strong>Service Discovery</strong></td>
                        <td>Hardcode IPs, manual DNS updates</td>
                        <td>Built-in service discovery and DNS</td>
                    </tr>
                    <tr>
                        <td><strong>Configuration</strong></td>
                        <td>Environment variables per container</td>
                        <td>ConfigMaps and Secrets management</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Kubernetes Architecture -->
        <h2 class="section-header">Kubernetes Architecture</h2>
        <div class="architecture-container">
            <p style="color: var(--text-secondary); margin-bottom: 25px;">
                A Kubernetes cluster consists of a <strong>Control Plane</strong> (manages the cluster) and
                <strong>Worker Nodes</strong> (run your applications). Click on components to learn more.
            </p>
            <div class="arch-diagram">
                <div class="arch-section">
                    <div class="arch-section-title">Control Plane</div>

                    <div class="arch-layer" onclick="showArchDetail('api-server')">
                        <div class="arch-layer-title">API Server</div>
                        <div class="arch-layer-desc">Front-end for K8s control plane</div>
                    </div>

                    <div class="arch-layer" onclick="showArchDetail('etcd')">
                        <div class="arch-layer-title">etcd</div>
                        <div class="arch-layer-desc">Distributed key-value store</div>
                    </div>

                    <div class="arch-layer" onclick="showArchDetail('scheduler')">
                        <div class="arch-layer-title">Scheduler</div>
                        <div class="arch-layer-desc">Assigns pods to nodes</div>
                    </div>

                    <div class="arch-layer" onclick="showArchDetail('controller')">
                        <div class="arch-layer-title">Controller Manager</div>
                        <div class="arch-layer-desc">Runs controller processes</div>
                    </div>
                </div>

                <div class="arch-section">
                    <div class="arch-section-title">Worker Nodes</div>

                    <div class="arch-layer" onclick="showArchDetail('kubelet')">
                        <div class="arch-layer-title">Kubelet</div>
                        <div class="arch-layer-desc">Agent running on each node</div>
                    </div>

                    <div class="arch-layer" onclick="showArchDetail('kube-proxy')">
                        <div class="arch-layer-title">Kube-proxy</div>
                        <div class="arch-layer-desc">Network proxy on each node</div>
                    </div>

                    <div class="arch-layer" onclick="showArchDetail('container-runtime')">
                        <div class="arch-layer-title">Container Runtime</div>
                        <div class="arch-layer-desc">Runs containers (Docker, containerd)</div>
                    </div>

                    <div class="arch-layer" onclick="showArchDetail('pods')">
                        <div class="arch-layer-title">Pods</div>
                        <div class="arch-layer-desc">Your running applications</div>
                    </div>
                </div>
            </div>

            <div class="arch-detail" id="archDetail">
                <h4>Click on a component to learn more</h4>
                <p>The control plane manages the cluster state, while worker nodes run your containerized applications.
                All communication goes through the API server, which is the central hub of the cluster.</p>
            </div>
        </div>

        <!-- Core Kubernetes Objects -->
        <h2 class="section-header">Core Kubernetes Objects</h2>
        <div class="objects-grid">
            <div class="object-card" onclick="toggleCard(this)">
                <div class="object-header">
                    <span class="object-icon">üì¶</span>
                    <span class="object-name">Pod</span>
                </div>
                <div class="object-summary">Smallest deployable unit - one or more containers that share resources</div>
                <div class="object-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        A Pod represents a single instance of a running process in your cluster. Pods contain one or more containers
                        that share storage, network, and specifications for how to run. Think of it as a wrapper around your container(s).
                    </p>
                    <div class="object-example">
                        <div class="example-label">Example Pod YAML</div>
                        <code>apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod
spec:
  containers:
  - name: nginx
    image: nginx:latest
    ports:
    - containerPort: 80</code>
                    </div>
                </div>
            </div>

            <div class="object-card" onclick="toggleCard(this)">
                <div class="object-header">
                    <span class="object-icon">üöÄ</span>
                    <span class="object-name">Deployment</span>
                </div>
                <div class="object-summary">Manages replica Pods and provides declarative updates</div>
                <div class="object-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Deployments describe a desired state for Pods and ReplicaSets. The Deployment controller changes the actual state
                        to match your desired state. Used for stateless applications with rolling updates and rollbacks.
                    </p>
                    <div class="object-example">
                        <div class="example-label">Example Deployment</div>
                        <code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:latest</code>
                    </div>
                </div>
            </div>

            <div class="object-card" onclick="toggleCard(this)">
                <div class="object-header">
                    <span class="object-icon">üåê</span>
                    <span class="object-name">Service</span>
                </div>
                <div class="object-summary">Exposes Pods as a network service with stable endpoint</div>
                <div class="object-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Services provide stable networking for Pods. Since Pods can be destroyed and recreated, they get new IP addresses.
                        Services give you a stable DNS name and IP that routes traffic to the right Pods.
                    </p>
                    <div class="object-example">
                        <div class="example-label">Example Service</div>
                        <code>apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  selector:
    app: nginx
  ports:
  - protocol: TCP
    port: 80
    targetPort: 80
  type: LoadBalancer</code>
                    </div>
                </div>
            </div>

            <div class="object-card" onclick="toggleCard(this)">
                <div class="object-header">
                    <span class="object-icon">‚öôÔ∏è</span>
                    <span class="object-name">ConfigMap</span>
                </div>
                <div class="object-summary">Store non-confidential configuration data in key-value pairs</div>
                <div class="object-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        ConfigMaps allow you to decouple configuration from container images. Store configuration data
                        that Pods can consume as environment variables, command-line arguments, or configuration files.
                    </p>
                    <div class="object-example">
                        <div class="example-label">Example ConfigMap</div>
                        <code>apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  database_url: "postgres://db:5432"
  log_level: "info"
  feature_flag: "enabled"</code>
                    </div>
                </div>
            </div>

            <div class="object-card" onclick="toggleCard(this)">
                <div class="object-header">
                    <span class="object-icon">üîí</span>
                    <span class="object-name">Secret</span>
                </div>
                <div class="object-summary">Store sensitive information like passwords and tokens</div>
                <div class="object-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Secrets are like ConfigMaps but designed for sensitive data. They're base64 encoded (not encrypted by default)
                        and can be mounted as files or exposed as environment variables.
                    </p>
                    <div class="object-example">
                        <div class="example-label">Example Secret</div>
                        <code>apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
type: Opaque
data:
  username: YWRtaW4=
  password: czNjcjN0cEBzc3dvcmQ=</code>
                    </div>
                </div>
            </div>

            <div class="object-card" onclick="toggleCard(this)">
                <div class="object-header">
                    <span class="object-icon">üìÇ</span>
                    <span class="object-name">Namespace</span>
                </div>
                <div class="object-summary">Virtual clusters to divide cluster resources</div>
                <div class="object-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Namespaces provide isolation within a cluster. Use them to separate environments (dev, staging, prod),
                        teams, or projects. Resources in different namespaces can have the same name.
                    </p>
                    <div class="object-example">
                        <div class="example-label">Example Namespace</div>
                        <code>apiVersion: v1
kind: Namespace
metadata:
  name: production
---
# Use namespace in other resources
metadata:
  namespace: production</code>
                    </div>
                </div>
            </div>
        </div>

        <!-- kubectl Basics -->
        <h2 class="section-header">kubectl - The Kubernetes CLI</h2>
        <div class="commands-grid">
            <div class="command-card" onclick="toggleCard(this)">
                <div class="command-header">
                    <span class="command-icon">üìã</span>
                    <span class="command-name">kubectl get</span>
                </div>
                <div class="command-summary">List resources in your cluster</div>
                <div class="command-details">
                    <div class="command-example">
                        <div class="example-label">Examples</div>
                        <code>kubectl get pods
kubectl get deployments
kubectl get services
kubectl get nodes
kubectl get all</code>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        The most commonly used command. Add <code>-o wide</code> for more details, <code>-n namespace</code>
                        to specify namespace, or <code>--all-namespaces</code> to see all.
                    </p>
                </div>
            </div>

            <div class="command-card" onclick="toggleCard(this)">
                <div class="command-header">
                    <span class="command-icon">üîç</span>
                    <span class="command-name">kubectl describe</span>
                </div>
                <div class="command-summary">Show detailed information about a resource</div>
                <div class="command-details">
                    <div class="command-example">
                        <div class="example-label">Examples</div>
                        <code>kubectl describe pod nginx-pod
kubectl describe deployment nginx-deployment
kubectl describe node node-1</code>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Shows detailed information including events, which is crucial for debugging. Events show what's
                        happening with a resource (scheduling, pulling images, errors, etc.).
                    </p>
                </div>
            </div>

            <div class="command-card" onclick="toggleCard(this)">
                <div class="command-header">
                    <span class="command-icon">‚ú®</span>
                    <span class="command-name">kubectl apply</span>
                </div>
                <div class="command-summary">Create or update resources from YAML/JSON files</div>
                <div class="command-details">
                    <div class="command-example">
                        <div class="example-label">Examples</div>
                        <code>kubectl apply -f deployment.yaml
kubectl apply -f ./configs/
kubectl apply -f https://example.com/config.yaml</code>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        The declarative way to manage resources. If the resource exists, it updates it. If not, it creates it.
                        This is the preferred method for production systems.
                    </p>
                </div>
            </div>

            <div class="command-card" onclick="toggleCard(this)">
                <div class="command-header">
                    <span class="command-icon">üóëÔ∏è</span>
                    <span class="command-name">kubectl delete</span>
                </div>
                <div class="command-summary">Delete resources from the cluster</div>
                <div class="command-details">
                    <div class="command-example">
                        <div class="example-label">Examples</div>
                        <code>kubectl delete pod nginx-pod
kubectl delete -f deployment.yaml
kubectl delete deployment nginx-deployment</code>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Removes resources from the cluster. Be careful with this command in production! You can delete by
                        name or by file (deletes everything defined in that file).
                    </p>
                </div>
            </div>

            <div class="command-card" onclick="toggleCard(this)">
                <div class="command-header">
                    <span class="command-icon">üìù</span>
                    <span class="command-name">kubectl logs</span>
                </div>
                <div class="command-summary">View logs from containers in pods</div>
                <div class="command-details">
                    <div class="command-example">
                        <div class="example-label">Examples</div>
                        <code>kubectl logs nginx-pod
kubectl logs nginx-pod -c container-name
kubectl logs -f nginx-pod
kubectl logs --tail=100 nginx-pod</code>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Essential for debugging. Use <code>-f</code> to follow logs in real-time, <code>-c</code> to specify
                        container in multi-container pods, <code>--previous</code> for logs from crashed containers.
                    </p>
                </div>
            </div>

            <div class="command-card" onclick="toggleCard(this)">
                <div class="command-header">
                    <span class="command-icon">‚ö°</span>
                    <span class="command-name">kubectl exec</span>
                </div>
                <div class="command-summary">Execute commands inside a container</div>
                <div class="command-details">
                    <div class="command-example">
                        <div class="example-label">Examples</div>
                        <code>kubectl exec nginx-pod -- ls /
kubectl exec -it nginx-pod -- /bin/bash
kubectl exec nginx-pod -c container -- env</code>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Run commands inside containers. Use <code>-it</code> for interactive terminal sessions.
                        Great for debugging and inspecting running containers.
                    </p>
                </div>
            </div>

            <div class="command-card" onclick="toggleCard(this)">
                <div class="command-header">
                    <span class="command-icon">üìä</span>
                    <span class="command-name">kubectl scale</span>
                </div>
                <div class="command-summary">Change the number of pod replicas</div>
                <div class="command-details">
                    <div class="command-example">
                        <div class="example-label">Examples</div>
                        <code>kubectl scale deployment nginx --replicas=5
kubectl scale deployment nginx --replicas=0
kubectl scale -f deployment.yaml --replicas=3</code>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Manually scale deployments up or down. Set replicas to 0 to temporarily stop all pods.
                        For production, consider using Horizontal Pod Autoscalers instead.
                    </p>
                </div>
            </div>

            <div class="command-card" onclick="toggleCard(this)">
                <div class="command-header">
                    <span class="command-icon">üîÑ</span>
                    <span class="command-name">kubectl rollout</span>
                </div>
                <div class="command-summary">Manage deployment rollouts and history</div>
                <div class="command-details">
                    <div class="command-example">
                        <div class="example-label">Examples</div>
                        <code>kubectl rollout status deployment/nginx
kubectl rollout history deployment/nginx
kubectl rollout undo deployment/nginx
kubectl rollout restart deployment/nginx</code>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Manage deployment updates. Check rollout status, view history, rollback to previous versions,
                        or restart deployments. Critical for safe production deployments.
                    </p>
                </div>
            </div>

            <div class="command-card" onclick="toggleCard(this)">
                <div class="command-header">
                    <span class="command-icon">üîå</span>
                    <span class="command-name">kubectl port-forward</span>
                </div>
                <div class="command-summary">Forward local ports to pods for testing</div>
                <div class="command-details">
                    <div class="command-example">
                        <div class="example-label">Examples</div>
                        <code>kubectl port-forward pod/nginx-pod 8080:80
kubectl port-forward service/nginx 8080:80
kubectl port-forward deployment/nginx 8080:80</code>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Access applications running in the cluster from your local machine. Great for development
                        and debugging without exposing services externally.
                    </p>
                </div>
            </div>
        </div>

        <!-- YAML Manifests -->
        <h2 class="section-header">Understanding YAML Manifests</h2>
        <div class="yaml-container">
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                Kubernetes uses YAML files to define the desired state of your resources. Every manifest follows
                the same basic structure with four required fields.
            </p>

            <div class="yaml-code">
<span class="comment"># Every K8s manifest has these 4 required fields</span>

<span class="keyword">apiVersion:</span> <span class="value">apps/v1</span>  <span class="comment"># API version for this resource type</span>
<span class="keyword">kind:</span> <span class="value">Deployment</span>      <span class="comment"># Type of resource to create</span>
<span class="keyword">metadata:</span>               <span class="comment"># Data that helps identify the resource</span>
  <span class="keyword">name:</span> <span class="value">nginx-deployment</span>
  <span class="keyword">labels:</span>
    <span class="keyword">app:</span> <span class="value">nginx</span>
    <span class="keyword">env:</span> <span class="value">production</span>

<span class="keyword">spec:</span>                  <span class="comment"># Desired state specification</span>
  <span class="keyword">replicas:</span> <span class="value">3</span>         <span class="comment"># Run 3 copies of this pod</span>
  <span class="keyword">selector:</span>            <span class="comment"># How to identify pods managed by this deployment</span>
    <span class="keyword">matchLabels:</span>
      <span class="keyword">app:</span> <span class="value">nginx</span>

  <span class="keyword">template:</span>            <span class="comment"># Pod template (blueprint for creating pods)</span>
    <span class="keyword">metadata:</span>
      <span class="keyword">labels:</span>
        <span class="keyword">app:</span> <span class="value">nginx</span>
    <span class="keyword">spec:</span>
      <span class="keyword">containers:</span>
      - <span class="keyword">name:</span> <span class="value">nginx</span>
        <span class="keyword">image:</span> <span class="value">nginx:1.24</span>
        <span class="keyword">ports:</span>
        - <span class="keyword">containerPort:</span> <span class="value">80</span>
        <span class="keyword">resources:</span>        <span class="comment"># Resource limits and requests</span>
          <span class="keyword">requests:</span>
            <span class="keyword">memory:</span> <span class="value">"128Mi"</span>
            <span class="keyword">cpu:</span> <span class="value">"100m"</span>
          <span class="keyword">limits:</span>
            <span class="keyword">memory:</span> <span class="value">"256Mi"</span>
            <span class="keyword">cpu:</span> <span class="value">"200m"</span>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: rgba(99, 102, 241, 0.05); border-radius: 8px; border-left: 3px solid var(--k8s-blue);">
                <p style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6;">
                    <strong style="color: var(--k8s-blue);">Key Concepts:</strong><br>
                    <code>apiVersion</code> - API group and version (e.g., v1, apps/v1, batch/v1)<br>
                    <code>kind</code> - Resource type (Pod, Deployment, Service, etc.)<br>
                    <code>metadata</code> - Name, labels, annotations, namespace<br>
                    <code>spec</code> - Desired state - what you want the resource to be<br>
                    <code>status</code> - Current state (managed by K8s, not in your YAML)
                </p>
            </div>
        </div>

        <!-- Practice Resources -->
        <section class="action-section" style="background: rgba(99, 102, 241, 0.05); border-color: rgba(99, 102, 241, 0.3);">
            <h3>Ready to Practice?</h3>
            <p>Try our interactive Kubernetes cluster simulator to practice kubectl commands in a safe environment.</p>
            <a href="../applets/kubernetes-cluster-sim.html" class="action-btn k8s">
                Launch K8s Simulator ‚Üí
            </a>
        </section>

        <section class="action-section">
            <h3>Hands-On Lab Exercise</h3>
            <p>Work through real-world Kubernetes scenarios with step-by-step guidance.</p>
            <a href="../labs/kubernetes-lab.html" class="action-btn k8s">
                Start Lab Exercise ‚Üí
            </a>
        </section>

        <section class="action-section">
            <h3>Test Your Knowledge</h3>
            <p>Take the Kubernetes fundamentals quiz to validate your understanding.</p>
            <a href="../quizzes/kubernetes-quiz.html" class="action-btn k8s">
                Take Quiz ‚Üí
            </a>
        </section>

        <!-- Module Completion -->
        <section class="action-section" style="background: var(--bg-card); border: 1px solid rgba(99, 102, 241, 0.3); margin-top: 20px;">
            <h3>Finished Reviewing?</h3>
            <p>Mark this module as complete to track your progress and unlock achievements.</p>
            <button class="action-btn success" onclick="completeModule()">
                ‚úì Mark as Complete
            </button>
        </section>
    </main>

    <footer class="module-footer">
        <div class="footer-text">HOUSE OF THE CODE ‚Ä¢ HEXWORTH PRIME</div>
    </footer>

    <script>
        // Architecture details data
        const archDetails = {
            'api-server': {
                title: 'API Server (kube-apiserver)',
                description: 'The front-end for the Kubernetes control plane. All communication goes through the API server - kubectl commands, internal components, external clients. It validates and configures data for API objects, serves the RESTful API, and is the only component that directly interacts with etcd.'
            },
            'etcd': {
                title: 'etcd',
                description: 'A consistent and highly-available key-value store used as Kubernetes\' backing store for all cluster data. It stores the entire state of the cluster - all resource definitions, configurations, secrets, and current state. If you lose etcd, you lose your cluster state.'
            },
            'scheduler': {
                title: 'Scheduler (kube-scheduler)',
                description: 'Watches for newly created Pods with no assigned node and selects an optimal node for them to run on. It considers resource requirements, hardware/software/policy constraints, affinity rules, data locality, and inter-workload interference when making scheduling decisions.'
            },
            'controller': {
                title: 'Controller Manager (kube-controller-manager)',
                description: 'Runs controller processes that regulate the state of the cluster. Each controller is a separate process, but they\'re compiled into a single binary. Examples: Node Controller (notices when nodes go down), ReplicaSet Controller (maintains correct number of pods), Endpoints Controller (populates service endpoints).'
            },
            'kubelet': {
                title: 'Kubelet',
                description: 'An agent that runs on each node in the cluster. It ensures containers are running in Pods. The kubelet takes a set of PodSpecs and ensures the containers described in those PodSpecs are running and healthy. It doesn\'t manage containers not created by Kubernetes.'
            },
            'kube-proxy': {
                title: 'Kube-proxy',
                description: 'A network proxy that runs on each node, maintaining network rules that allow network communication to your Pods. It implements the Kubernetes Service concept by maintaining network rules for routing and load balancing. Can use iptables, IPVS, or userspace proxy modes.'
            },
            'container-runtime': {
                title: 'Container Runtime',
                description: 'The software responsible for running containers. Kubernetes supports container runtimes that implement the Container Runtime Interface (CRI): containerd, CRI-O, Docker (via dockershim, deprecated), and any other CRI-compatible runtime. This is what actually starts and stops your containers.'
            },
            'pods': {
                title: 'Pods (Your Applications)',
                description: 'The smallest deployable units you create and manage in Kubernetes. A Pod represents one or more containers that should be controlled as a single application, with shared storage/network resources and a specification for how to run the containers. Pods are ephemeral - they can be destroyed and recreated at any time.'
            }
        };

        // Show architecture detail
        function showArchDetail(componentId) {
            const detail = archDetails[componentId];
            const panel = document.getElementById('archDetail');

            // Update active state
            document.querySelectorAll('.arch-layer').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');

            panel.innerHTML = `
                <h4>${detail.title}</h4>
                <p>${detail.description}</p>
            `;

            panel.classList.add('visible');
        }

        // Toggle card details
        function toggleCard(card) {
            const isExpanded = card.classList.contains('expanded');

            // Close all other cards of the same type
            const parent = card.parentElement;
            parent.querySelectorAll('.object-card, .command-card').forEach(c => {
                c.classList.remove('expanded');
            });

            // Toggle current card
            if (!isExpanded) {
                card.classList.add('expanded');
            }
        }

        // Navigation functions
        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.location.href = '../../../dashboard.html';
            }
        }

        function completeModule() {
            ModuleProgress.complete('code', 'code-kubernetes-fundamentals', {
                returnToDashboard: true
            });
        }

        // Initialize - show first architecture detail
        document.addEventListener('DOMContentLoaded', () => {
            const firstLayer = document.querySelector('.arch-layer');
            if (firstLayer) {
                firstLayer.classList.add('active');
                const detail = archDetails['api-server'];
                const panel = document.getElementById('archDetail');
                panel.innerHTML = `
                    <h4>${detail.title}</h4>
                    <p>${detail.description}</p>
                `;
                panel.classList.add('visible');
            }
        });
    </script>
</body>
</html>
