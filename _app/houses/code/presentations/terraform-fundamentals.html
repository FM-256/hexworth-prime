<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <!-- Achievement & Progress Integration -->
    <script src="../../../components/AchievementManager.js"></script>
    <script src="../../../components/ModuleProgress.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terraform Fundamentals - House of the Code</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --house-color: #6366F1;
            --house-glow: rgba(99, 102, 241, 0.4);
            --bg-dark: #0a0a12;
            --bg-card: rgba(15, 15, 25, 0.8);
            --text-primary: #e8e8f0;
            --text-secondary: #8888aa;
            --terraform-purple: #7B42BC;
            --terraform-glow: rgba(123, 66, 188, 0.4);
        }

        body {
            min-height: 100vh;
            background: var(--bg-dark);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Header */
        .module-header {
            padding: 20px 30px;
            background: rgba(10, 10, 18, 0.95);
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .back-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid rgba(99, 102, 241, 0.3);
            background: transparent;
            color: var(--house-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .back-btn:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        .module-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .house-badge {
            font-size: 0.7rem;
            padding: 4px 12px;
            background: rgba(99, 102, 241, 0.15);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 20px;
            color: var(--house-color);
            letter-spacing: 0.1em;
        }

        /* Main Content */
        .module-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 30px;
        }

        .intro-section {
            text-align: center;
            margin-bottom: 50px;
        }

        .intro-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .intro-title {
            font-size: 2.2rem;
            font-weight: 300;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #fff, var(--terraform-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .intro-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Section Headers */
        .section-header {
            font-size: 1.4rem;
            font-weight: 400;
            margin-bottom: 25px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-header::before {
            content: '';
            width: 4px;
            height: 24px;
            background: var(--terraform-purple);
            border-radius: 2px;
        }

        /* Benefits Grid */
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }

        .benefit-card {
            background: var(--bg-card);
            border: 1px solid rgba(123, 66, 188, 0.15);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .benefit-card:hover {
            border-color: var(--terraform-purple);
            transform: translateY(-5px);
            box-shadow: 0 5px 20px var(--terraform-glow);
        }

        .benefit-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .benefit-card h3 {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--terraform-purple);
        }

        .benefit-card p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Workflow Visualization */
        .workflow-container {
            background: var(--bg-card);
            border: 1px solid rgba(123, 66, 188, 0.2);
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 50px;
        }

        .workflow-diagram {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 30px;
        }

        .workflow-step {
            flex: 1;
            min-width: 180px;
            background: rgba(123, 66, 188, 0.05);
            border: 2px solid rgba(123, 66, 188, 0.3);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .workflow-step:hover {
            border-color: var(--terraform-purple);
            background: rgba(123, 66, 188, 0.15);
            transform: scale(1.05);
        }

        .workflow-step.active {
            border-color: var(--terraform-purple);
            background: rgba(123, 66, 188, 0.2);
            box-shadow: 0 5px 25px var(--terraform-glow);
        }

        .workflow-arrow {
            font-size: 1.5rem;
            color: var(--terraform-purple);
            flex-shrink: 0;
        }

        .step-icon {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .step-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .step-desc {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .workflow-detail {
            background: rgba(123, 66, 188, 0.05);
            border: 1px solid rgba(123, 66, 188, 0.2);
            border-radius: 10px;
            padding: 20px;
            display: none;
        }

        .workflow-detail.visible {
            display: block;
            animation: slideIn 0.3s ease;
        }

        .workflow-detail h4 {
            color: var(--terraform-purple);
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .workflow-detail p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* HCL Code Examples */
        .code-container {
            background: var(--bg-card);
            border: 1px solid rgba(123, 66, 188, 0.2);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 50px;
        }

        .code-block {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(123, 66, 188, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
            color: #7dd3fc;
            overflow-x: auto;
        }

        .code-block .comment {
            color: #6b7280;
        }

        .code-block .keyword {
            color: #fb923c;
            font-weight: bold;
        }

        .code-block .string {
            color: #a78bfa;
        }

        .code-block .number {
            color: #10b981;
        }

        /* Concepts Grid */
        .concepts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 18px;
            margin-bottom: 50px;
        }

        .concept-card {
            background: var(--bg-card);
            border: 1px solid rgba(123, 66, 188, 0.15);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--terraform-purple);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .concept-card:hover::before {
            transform: scaleY(1);
        }

        .concept-card:hover {
            border-color: var(--terraform-purple);
            transform: translateX(5px);
            box-shadow: 0 5px 20px var(--terraform-glow);
        }

        .concept-card.expanded {
            border-color: var(--terraform-purple);
            box-shadow: 0 5px 25px var(--terraform-glow);
        }

        .concept-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .concept-icon {
            font-size: 1.5rem;
        }

        .concept-name {
            font-size: 1rem;
            font-weight: 600;
            color: var(--terraform-purple);
        }

        .concept-summary {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .concept-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .concept-card.expanded .concept-details {
            max-height: 500px;
        }

        .concept-example {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 6px;
            margin-top: 12px;
            border-left: 3px solid var(--terraform-purple);
        }

        .concept-example code {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: #7dd3fc;
            display: block;
            line-height: 1.6;
        }

        .example-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 6px;
        }

        /* Comparison Table */
        .comparison-container {
            background: var(--bg-card);
            border: 1px solid rgba(123, 66, 188, 0.2);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 50px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(123, 66, 188, 0.1);
        }

        .comparison-table th {
            color: var(--terraform-purple);
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .comparison-table td {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .comparison-table tr:hover {
            background: rgba(123, 66, 188, 0.05);
        }

        /* Action Buttons */
        .action-section {
            background: var(--bg-card);
            border: 1px solid rgba(123, 66, 188, 0.2);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
        }

        .action-section h3 {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .action-section p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .action-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 30px;
            background: linear-gradient(135deg, var(--terraform-purple), #5b2d8a);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            margin: 5px;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--terraform-glow);
        }

        .action-btn.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        /* Info Box */
        .info-box {
            background: rgba(123, 66, 188, 0.05);
            border: 1px solid rgba(123, 66, 188, 0.3);
            border-left: 4px solid var(--terraform-purple);
            border-radius: 8px;
            padding: 15px 20px;
            margin: 20px 0;
        }

        .info-box strong {
            color: var(--terraform-purple);
            font-size: 0.9rem;
        }

        .info-box p, .info-box ul {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-top: 8px;
            line-height: 1.6;
        }

        .info-box code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #7dd3fc;
        }

        /* Footer */
        .module-footer {
            text-align: center;
            padding: 30px;
            border-top: 1px solid rgba(123, 66, 188, 0.1);
            margin-top: 50px;
        }

        .footer-text {
            font-size: 0.75rem;
            color: var(--text-secondary);
            letter-spacing: 0.1em;
        }

        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .benefits-grid {
                grid-template-columns: 1fr;
            }

            .concepts-grid {
                grid-template-columns: 1fr;
            }

            .workflow-diagram {
                flex-direction: column;
            }

            .workflow-arrow {
                transform: rotate(90deg);
            }

            .intro-title {
                font-size: 1.8rem;
            }

            .comparison-table {
                font-size: 0.8rem;
            }

            .comparison-table th,
            .comparison-table td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header class="module-header">
        <div class="header-left">
            <button class="back-btn" onclick="goBack()">‚Üê</button>
            <span class="module-title">Terraform Fundamentals</span>
        </div>
        <span class="house-badge">HOUSE OF THE CODE</span>
    </header>

    <main class="module-content">
        <section class="intro-section">
            <div class="intro-icon">üèóÔ∏è</div>
            <h1 class="intro-title">Terraform Fundamentals</h1>
            <p class="intro-subtitle">
                Master Infrastructure as Code with Terraform. Define, provision, and manage cloud infrastructure
                using declarative configuration files. Version control your infrastructure just like application code.
            </p>
        </section>

        <!-- What is Infrastructure as Code -->
        <h2 class="section-header">What is Infrastructure as Code (IaC)?</h2>
        <div class="benefits-grid">
            <div class="benefit-card">
                <div class="benefit-icon">üìù</div>
                <h3>Code-Defined Infrastructure</h3>
                <p>Manage infrastructure using configuration files instead of manual processes. Infrastructure becomes versionable, testable, and repeatable.</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">üîÑ</div>
                <h3>Version Control</h3>
                <p>Store infrastructure code in Git. Track changes, review modifications, roll back to previous versions, and collaborate with teams.</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">‚ö°</div>
                <h3>Automation & Speed</h3>
                <p>Provision entire environments in minutes instead of days. Eliminate manual errors and ensure consistency across deployments.</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">‚ôªÔ∏è</div>
                <h3>Reusability</h3>
                <p>Create modules and templates. Use the same configuration to create dev, staging, and production environments with small variations.</p>
            </div>
        </div>

        <!-- Why Terraform -->
        <h2 class="section-header">Why Terraform?</h2>
        <div class="comparison-container">
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                Terraform is the most popular Infrastructure as Code tool, offering unique advantages over alternatives.
            </p>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Terraform</th>
                        <th>CloudFormation</th>
                        <th>Ansible</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Cloud Support</strong></td>
                        <td>Multi-cloud (AWS, Azure, GCP, etc.)</td>
                        <td>AWS only</td>
                        <td>Multi-cloud (configuration management focus)</td>
                    </tr>
                    <tr>
                        <td><strong>Language</strong></td>
                        <td>HCL (HashiCorp Configuration Language)</td>
                        <td>JSON or YAML</td>
                        <td>YAML</td>
                    </tr>
                    <tr>
                        <td><strong>Approach</strong></td>
                        <td>Declarative (what you want)</td>
                        <td>Declarative</td>
                        <td>Procedural (how to do it)</td>
                    </tr>
                    <tr>
                        <td><strong>State Management</strong></td>
                        <td>Explicit state file</td>
                        <td>Managed by AWS</td>
                        <td>No state (agentless)</td>
                    </tr>
                    <tr>
                        <td><strong>Learning Curve</strong></td>
                        <td>Moderate</td>
                        <td>Moderate-High</td>
                        <td>Low-Moderate</td>
                    </tr>
                    <tr>
                        <td><strong>Best For</strong></td>
                        <td>Cloud infrastructure provisioning</td>
                        <td>AWS-specific infrastructure</td>
                        <td>Configuration management + provisioning</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Terraform Workflow -->
        <h2 class="section-header">The Terraform Workflow</h2>
        <div class="workflow-container">
            <p style="color: var(--text-secondary); margin-bottom: 25px;">
                Terraform follows a simple but powerful workflow. Click each step to learn more.
            </p>
            <div class="workflow-diagram">
                <div class="workflow-step" onclick="showWorkflowDetail('write')">
                    <div class="step-icon">‚úçÔ∏è</div>
                    <div class="step-title">Write</div>
                    <div class="step-desc">Define infrastructure</div>
                </div>
                <div class="workflow-arrow">‚Üí</div>
                <div class="workflow-step" onclick="showWorkflowDetail('init')">
                    <div class="step-icon">üîß</div>
                    <div class="step-title">Init</div>
                    <div class="step-desc">Initialize project</div>
                </div>
                <div class="workflow-arrow">‚Üí</div>
                <div class="workflow-step" onclick="showWorkflowDetail('plan')">
                    <div class="step-icon">üìã</div>
                    <div class="step-title">Plan</div>
                    <div class="step-desc">Preview changes</div>
                </div>
                <div class="workflow-arrow">‚Üí</div>
                <div class="workflow-step" onclick="showWorkflowDetail('apply')">
                    <div class="step-icon">üöÄ</div>
                    <div class="step-title">Apply</div>
                    <div class="step-desc">Create resources</div>
                </div>
                <div class="workflow-arrow">‚Üí</div>
                <div class="workflow-step" onclick="showWorkflowDetail('destroy')">
                    <div class="step-icon">üí•</div>
                    <div class="step-title">Destroy</div>
                    <div class="step-desc">Clean up resources</div>
                </div>
            </div>

            <div class="workflow-detail" id="workflowDetail">
                <h4>Click on a step to learn more</h4>
                <p>Terraform's workflow ensures safe, predictable infrastructure changes through a series of deliberate steps.</p>
            </div>
        </div>

        <!-- HCL Syntax Basics -->
        <h2 class="section-header">HCL Syntax Basics</h2>
        <div class="code-container">
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                HashiCorp Configuration Language (HCL) is Terraform's human-readable configuration language. It's designed to be both machine-friendly and easy to read.
            </p>

            <div class="code-block">
<span class="comment"># Configure the AWS Provider</span>
<span class="keyword">provider</span> <span class="string">"aws"</span> {
  region = <span class="string">"us-east-1"</span>
}

<span class="comment"># Create a VPC</span>
<span class="keyword">resource</span> <span class="string">"aws_vpc"</span> <span class="string">"main"</span> {
  cidr_block = <span class="string">"10.0.0.0/16"</span>

  tags = {
    Name = <span class="string">"main-vpc"</span>
    Environment = <span class="string">"production"</span>
  }
}

<span class="comment"># Create an EC2 instance</span>
<span class="keyword">resource</span> <span class="string">"aws_instance"</span> <span class="string">"web"</span> {
  ami           = <span class="string">"ami-0c55b159cbfafe1f0"</span>
  instance_type = <span class="string">"t2.micro"</span>
  vpc_id        = aws_vpc.main.id

  tags = {
    Name = <span class="string">"web-server"</span>
  }
}
            </div>

            <div class="info-box">
                <strong>HCL Structure:</strong>
                <ul style="padding-left: 20px; margin-top: 8px;">
                    <li><code>provider</code> - Configures cloud platform (AWS, Azure, GCP)</li>
                    <li><code>resource</code> - Defines infrastructure component to create</li>
                    <li><code>variable</code> - Input parameters for configurations</li>
                    <li><code>output</code> - Values to display after apply</li>
                    <li><code>module</code> - Reusable groups of resources</li>
                </ul>
            </div>
        </div>

        <!-- Core Terraform Concepts -->
        <h2 class="section-header">Core Terraform Concepts</h2>
        <div class="concepts-grid">
            <div class="concept-card" onclick="toggleConcept(this)">
                <div class="concept-header">
                    <span class="concept-icon">üîå</span>
                    <span class="concept-name">Providers</span>
                </div>
                <div class="concept-summary">Plugins that interact with cloud platforms and services</div>
                <div class="concept-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Providers are the bridge between Terraform and infrastructure platforms (AWS, Azure, GCP, Kubernetes, etc.).
                        Each provider exposes resources and data sources specific to that platform.
                    </p>
                    <div class="concept-example">
                        <div class="example-label">Example</div>
                        <code>terraform {</code>
                        <code>  required_providers {</code>
                        <code>    aws = {</code>
                        <code>      source  = "hashicorp/aws"</code>
                        <code>      version = "~> 4.0"</code>
                        <code>    }</code>
                        <code>  }</code>
                        <code>}</code>
                    </div>
                </div>
            </div>

            <div class="concept-card" onclick="toggleConcept(this)">
                <div class="concept-header">
                    <span class="concept-icon">üì¶</span>
                    <span class="concept-name">Resources</span>
                </div>
                <div class="concept-summary">Infrastructure components you want to create</div>
                <div class="concept-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Resources are the building blocks of your infrastructure - EC2 instances, S3 buckets, databases, networks, etc.
                        Each resource has a type (e.g., aws_instance) and a local name for reference.
                    </p>
                    <div class="concept-example">
                        <div class="example-label">Example</div>
                        <code>resource "aws_s3_bucket" "data" {</code>
                        <code>  bucket = "my-data-bucket"</code>
                        <code>  acl    = "private"</code>
                        <code>}</code>
                    </div>
                </div>
            </div>

            <div class="concept-card" onclick="toggleConcept(this)">
                <div class="concept-header">
                    <span class="concept-icon">üìù</span>
                    <span class="concept-name">Variables</span>
                </div>
                <div class="concept-summary">Input parameters to customize configurations</div>
                <div class="concept-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Variables make configurations reusable and flexible. Define once, use multiple times with different values for
                        different environments (dev, staging, prod).
                    </p>
                    <div class="concept-example">
                        <div class="example-label">Example</div>
                        <code>variable "instance_type" {</code>
                        <code>  description = "EC2 instance type"</code>
                        <code>  type        = string</code>
                        <code>  default     = "t2.micro"</code>
                        <code>}</code>
                    </div>
                </div>
            </div>

            <div class="concept-card" onclick="toggleConcept(this)">
                <div class="concept-header">
                    <span class="concept-icon">üì§</span>
                    <span class="concept-name">Outputs</span>
                </div>
                <div class="concept-summary">Values to extract and display after apply</div>
                <div class="concept-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Outputs extract information from your infrastructure (like IP addresses, DNS names) and make them available
                        for use in other configurations or display to users.
                    </p>
                    <div class="concept-example">
                        <div class="example-label">Example</div>
                        <code>output "instance_ip" {</code>
                        <code>  description = "EC2 public IP"</code>
                        <code>  value       = aws_instance.web.public_ip</code>
                        <code>}</code>
                    </div>
                </div>
            </div>

            <div class="concept-card" onclick="toggleConcept(this)">
                <div class="concept-header">
                    <span class="concept-icon">üíæ</span>
                    <span class="concept-name">State</span>
                </div>
                <div class="concept-summary">Terraform's record of your infrastructure</div>
                <div class="concept-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        The state file (terraform.tfstate) is Terraform's database of what infrastructure exists. It maps your configuration
                        to real-world resources and tracks metadata. Critical for team collaboration - store in remote backend (S3, Terraform Cloud).
                    </p>
                    <div class="concept-example">
                        <div class="example-label">Remote Backend Example</div>
                        <code>terraform {</code>
                        <code>  backend "s3" {</code>
                        <code>    bucket = "my-terraform-state"</code>
                        <code>    key    = "prod/terraform.tfstate"</code>
                        <code>    region = "us-east-1"</code>
                        <code>  }</code>
                        <code>}</code>
                    </div>
                </div>
            </div>

            <div class="concept-card" onclick="toggleConcept(this)">
                <div class="concept-header">
                    <span class="concept-icon">üìö</span>
                    <span class="concept-name">Modules</span>
                </div>
                <div class="concept-summary">Reusable, composable infrastructure templates</div>
                <div class="concept-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Modules are containers for multiple resources used together. Create reusable components like "web server cluster"
                        or "database with backups". Share modules across projects and teams via Terraform Registry.
                    </p>
                    <div class="concept-example">
                        <div class="example-label">Using a Module</div>
                        <code>module "vpc" {</code>
                        <code>  source  = "terraform-aws-modules/vpc/aws"</code>
                        <code>  version = "3.14.0"</code>
                        <code>  name = "my-vpc"</code>
                        <code>  cidr = "10.0.0.0/16"</code>
                        <code>}</code>
                    </div>
                </div>
            </div>

            <div class="concept-card" onclick="toggleConcept(this)">
                <div class="concept-header">
                    <span class="concept-icon">üîç</span>
                    <span class="concept-name">Data Sources</span>
                </div>
                <div class="concept-summary">Query existing infrastructure and data</div>
                <div class="concept-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Data sources allow Terraform to fetch information from existing resources not managed by the current configuration.
                        Query AWS AMIs, existing VPCs, DNS records, etc.
                    </p>
                    <div class="concept-example">
                        <div class="example-label">Example</div>
                        <code>data "aws_ami" "ubuntu" {</code>
                        <code>  most_recent = true</code>
                        <code>  owners      = ["099720109477"]</code>
                        <code>  filter {</code>
                        <code>    name   = "name"</code>
                        <code>    values = ["ubuntu/images/hvm-ssd/ubuntu-*"]</code>
                        <code>  }</code>
                        <code>}</code>
                    </div>
                </div>
            </div>

            <div class="concept-card" onclick="toggleConcept(this)">
                <div class="concept-header">
                    <span class="concept-icon">üîó</span>
                    <span class="concept-name">Dependencies</span>
                </div>
                <div class="concept-summary">Resource relationships and creation order</div>
                <div class="concept-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Terraform automatically understands dependencies when you reference one resource from another. It creates resources
                        in the correct order. Use depends_on for explicit dependencies when needed.
                    </p>
                    <div class="concept-example">
                        <div class="example-label">Implicit Dependency</div>
                        <code>resource "aws_eip" "ip" {</code>
                        <code>  instance = aws_instance.web.id</code>
                        <code>  # EIP depends on instance</code>
                        <code>}</code>
                    </div>
                </div>
            </div>

            <div class="concept-card" onclick="toggleConcept(this)">
                <div class="concept-header">
                    <span class="concept-icon">‚öôÔ∏è</span>
                    <span class="concept-name">Provisioners</span>
                </div>
                <div class="concept-summary">Execute scripts during resource creation</div>
                <div class="concept-details">
                    <p style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);">
                        Provisioners run scripts on resources after creation (local-exec, remote-exec). Use as last resort - prefer
                        cloud-init or configuration management tools. Provisioners make infrastructure less predictable.
                    </p>
                    <div class="concept-example">
                        <div class="example-label">Example</div>
                        <code>provisioner "remote-exec" {</code>
                        <code>  inline = [</code>
                        <code>    "sudo apt-get update",</code>
                        <code>    "sudo apt-get install -y nginx"</code>
                        <code>  ]</code>
                        <code>}</code>
                    </div>
                </div>
            </div>
        </div>

        <!-- State Management -->
        <h2 class="section-header">Understanding State Management</h2>
        <div class="code-container">
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                State management is critical for Terraform. The state file is the source of truth for your infrastructure.
            </p>

            <div class="info-box">
                <strong>State Best Practices:</strong>
                <ul style="padding-left: 20px; margin-top: 8px;">
                    <li><strong>Never edit state files manually</strong> - Use terraform state commands</li>
                    <li><strong>Use remote backends</strong> - S3, Terraform Cloud, Azure Blob for team collaboration</li>
                    <li><strong>Enable state locking</strong> - Prevent concurrent modifications (DynamoDB with S3)</li>
                    <li><strong>Version control state</strong> - Keep backups, some backends do this automatically</li>
                    <li><strong>Separate state per environment</strong> - Different state files for dev/staging/prod</li>
                    <li><strong>Encrypt state</strong> - Contains sensitive data like passwords and keys</li>
                </ul>
            </div>

            <div class="code-block" style="margin-top: 20px;">
<span class="comment"># Remote state with S3 and DynamoDB locking</span>
<span class="keyword">terraform</span> {
  backend <span class="string">"s3"</span> {
    bucket         = <span class="string">"my-terraform-state-bucket"</span>
    key            = <span class="string">"production/terraform.tfstate"</span>
    region         = <span class="string">"us-east-1"</span>
    encrypt        = <span class="keyword">true</span>
    dynamodb_table = <span class="string">"terraform-state-lock"</span>
  }
}

<span class="comment"># Reference state from another project</span>
<span class="keyword">data</span> <span class="string">"terraform_remote_state"</span> <span class="string">"network"</span> {
  backend = <span class="string">"s3"</span>
  config = {
    bucket = <span class="string">"my-terraform-state-bucket"</span>
    key    = <span class="string">"network/terraform.tfstate"</span>
    region = <span class="string">"us-east-1"</span>
  }
}
            </div>
        </div>

        <!-- Practice Resources -->
        <section class="action-section" style="background: rgba(123, 66, 188, 0.05); border-color: rgba(123, 66, 188, 0.3);">
            <h3>Ready to Design?</h3>
            <p>Try our interactive infrastructure visualizer to design cloud resources and generate Terraform code.</p>
            <a href="../applets/terraform-visualizer.html" class="action-btn">
                Launch Terraform Visualizer ‚Üí
            </a>
        </section>

        <section class="action-section">
            <h3>Hands-On Lab Exercise</h3>
            <p>Work through real-world Terraform scenarios with step-by-step guidance.</p>
            <a href="../labs/terraform-lab.html" class="action-btn">
                Start Lab Exercise ‚Üí
            </a>
        </section>

        <section class="action-section">
            <h3>Test Your Knowledge</h3>
            <p>Take the Terraform fundamentals quiz to validate your understanding.</p>
            <a href="../quizzes/terraform-quiz.html" class="action-btn">
                Take Quiz ‚Üí
            </a>
        </section>

        <!-- Module Completion -->
        <section class="action-section" style="background: var(--bg-card); border: 1px solid rgba(123, 66, 188, 0.3); margin-top: 20px;">
            <h3>Finished Reviewing?</h3>
            <p>Mark this module as complete to track your progress and unlock achievements.</p>
            <button class="action-btn success" onclick="completeModule()">
                ‚úì Mark as Complete
            </button>
        </section>
    </main>

    <footer class="module-footer">
        <div class="footer-text">HOUSE OF THE CODE ‚Ä¢ HEXWORTH PRIME</div>
    </footer>

    <script>
        // Workflow details data
        const workflowDetails = {
            write: {
                title: 'Write Configuration',
                description: 'Define your infrastructure using HCL (HashiCorp Configuration Language) in .tf files. Specify providers, resources, variables, and outputs. This is where you declare what infrastructure you want. Write configuration files using any text editor or IDE. Organize files by purpose: main.tf (resources), variables.tf (inputs), outputs.tf (outputs), providers.tf (provider configuration). Use version control (Git) to track changes to your infrastructure code.'
            },
            init: {
                title: 'terraform init',
                description: 'Initialize your Terraform working directory. This command downloads provider plugins specified in your configuration, sets up the backend for state storage, and prepares your project for use. Run this command first in any new project, or after adding new providers. The .terraform directory is created to store provider plugins and modules. The init command is safe to run multiple times.'
            },
            plan: {
                title: 'terraform plan',
                description: 'Preview what changes Terraform will make before actually making them. This creates an execution plan showing which resources will be created, modified, or destroyed. Review the plan carefully - it shows the difference between your desired state (configuration) and current state (what exists). Use -out flag to save the plan and apply it exactly: terraform plan -out=tfplan. This is your safety check before making changes.'
            },
            apply: {
                title: 'terraform apply',
                description: 'Execute the planned changes to create, update, or delete infrastructure resources. Terraform will show the plan again and ask for confirmation (yes/no). After confirmation, Terraform provisions the resources and updates the state file. Use -auto-approve to skip confirmation (not recommended in production). The state file is updated to reflect the new infrastructure. Apply can take minutes to hours depending on resource complexity.'
            },
            destroy: {
                title: 'terraform destroy',
                description: 'Tear down and delete all infrastructure managed by this Terraform configuration. Use this to clean up resources when no longer needed. Terraform shows a destruction plan and asks for confirmation. All resources in the state file will be destroyed in the correct order (handling dependencies). Be extremely careful with this command in production. Consider using -target to destroy specific resources instead of everything.'
            }
        };

        // Show workflow detail
        function showWorkflowDetail(stepId) {
            const detail = workflowDetails[stepId];
            const panel = document.getElementById('workflowDetail');

            // Update active state
            document.querySelectorAll('.workflow-step').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');

            panel.innerHTML = `
                <h4>${detail.title}</h4>
                <p>${detail.description}</p>
            `;

            panel.classList.add('visible');
        }

        // Toggle concept details
        function toggleConcept(card) {
            const isExpanded = card.classList.contains('expanded');

            // Close all other cards
            document.querySelectorAll('.concept-card').forEach(c => {
                c.classList.remove('expanded');
            });

            // Toggle current card
            if (!isExpanded) {
                card.classList.add('expanded');
            }
        }

        // Navigation functions
        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.location.href = '../../../dashboard.html';
            }
        }

        function completeModule() {
            ModuleProgress.complete('code', 'code-terraform-fundamentals', {
                returnToDashboard: true
            });
        }

        // Initialize - show first workflow detail
        document.addEventListener('DOMContentLoaded', () => {
            const firstStep = document.querySelector('.workflow-step');
            if (firstStep) {
                firstStep.classList.add('active');
                const detail = workflowDetails['write'];
                const panel = document.getElementById('workflowDetail');
                panel.innerHTML = `
                    <h4>${detail.title}</h4>
                    <p>${detail.description}</p>
                `;
                panel.classList.add('visible');
            }
        });
    </script>
<script src="../../../components/FluxCapacitor.js"></script>
</body>
</html>
