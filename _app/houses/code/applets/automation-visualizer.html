<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Access Control -->
    <script src="../../../../components/AccessGuard.js"></script>
    <script>
        AccessGuard.require('sorted');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Automation Visualizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ea580c 0%, #fb923c 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            color: white;
            padding: 30px 0;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .back-link {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-decoration: none;
            font-size: 1.1em;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .back-link:hover {
            opacity: 1;
        }

        /* Tabs */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 15px 30px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .tab-btn.active {
            background: white;
            color: #ea580c;
            border-color: white;
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .tab-content.active {
            display: block;
        }

        h2 {
            color: #ea580c;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        h3 {
            color: #ea580c;
            margin: 25px 0 15px;
            font-size: 1.4em;
        }

        /* REST API Explorer */
        .api-explorer {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .api-request {
            background: #f8fafc;
            border-radius: 15px;
            padding: 25px;
        }

        .method-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .method-btn {
            padding: 10px 20px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .method-btn.get {
            border-color: #3b82f6;
            color: #1e40af;
        }

        .method-btn.get.active {
            background: #3b82f6;
            color: white;
        }

        .method-btn.post {
            border-color: #10b981;
            color: #065f46;
        }

        .method-btn.post.active {
            background: #10b981;
            color: white;
        }

        .method-btn.put {
            border-color: #f59e0b;
            color: #92400e;
        }

        .method-btn.put.active {
            background: #f59e0b;
            color: white;
        }

        .method-btn.delete {
            border-color: #ef4444;
            color: #991b1b;
        }

        .method-btn.delete.active {
            background: #ef4444;
            color: white;
        }

        .url-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
        }

        .request-body {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            margin-bottom: 15px;
        }

        .send-btn {
            width: 100%;
            padding: 15px;
            background: #ea580c;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .send-btn:hover {
            background: #c2410c;
        }

        .api-response {
            background: #1e293b;
            border-radius: 15px;
            padding: 25px;
            color: #10b981;
            font-family: 'Courier New', monospace;
            min-height: 400px;
        }

        .status-badge {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .status-200 {
            background: #d1fae5;
            color: #065f46;
        }

        .status-201 {
            background: #d1fae5;
            color: #065f46;
        }

        .status-400 {
            background: #fef3c7;
            color: #92400e;
        }

        .status-401 {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-404 {
            background: #fee2e2;
            color: #991b1b;
        }

        /* JSON/XML Converter */
        .converter {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
        }

        .converter-input, .converter-output {
            background: #1e293b;
            border-radius: 15px;
            padding: 20px;
        }

        .converter textarea {
            width: 100%;
            min-height: 400px;
            background: transparent;
            border: none;
            color: #10b981;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            resize: vertical;
        }

        .converter textarea:focus {
            outline: none;
        }

        .convert-btn {
            padding: 15px 30px;
            background: #ea580c;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s;
        }

        .convert-btn:hover {
            background: #c2410c;
        }

        .label {
            color: #94a3b8;
            margin-bottom: 10px;
            font-weight: bold;
        }

        /* Tool Comparison */
        .tool-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .tool-card {
            border: 3px solid;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }

        .tool-card.ansible {
            border-color: #ef4444;
            background: #fef2f2;
        }

        .tool-card.puppet {
            border-color: #fb923c;
            background: #fff7ed;
        }

        .tool-card.chef {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .tool-card h3 {
            margin-top: 0;
            font-size: 1.6em;
        }

        .feature-list {
            text-align: left;
            margin-top: 15px;
        }

        .feature-item {
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .feature-item:last-child {
            border-bottom: none;
        }

        .feature-label {
            font-weight: bold;
            color: #64748b;
            display: inline-block;
            width: 120px;
        }

        /* Quiz */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-question {
            background: #f8fafc;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .quiz-question h4 {
            color: #ea580c;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 15px 20px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: #fb923c;
            background: #fff7ed;
        }

        .quiz-option.selected {
            border-color: #fb923c;
            background: #fed7aa;
        }

        .quiz-option.correct {
            border-color: #10b981;
            background: #d1fae5;
        }

        .quiz-option.incorrect {
            border-color: #ef4444;
            background: #fee2e2;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: #d1fae5;
            color: #065f46;
        }

        .quiz-feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #ea580c;
            color: white;
        }

        .btn-primary:hover {
            background: #c2410c;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .score-display {
            font-size: 1.2em;
            color: #ea580c;
            font-weight: bold;
        }

        .info-box {
            background: #fed7aa;
            border-left: 4px solid #fb923c;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }

        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }

        @media (max-width: 900px) {
            .api-explorer, .converter, .tool-grid {
                grid-template-columns: 1fr;
            }

            .converter {
                grid-template-rows: auto auto auto;
            }
        }
    </style>
</head>
<body>
    <a href="../../index.html" class="back-link">‚Üê Back to House</a>

    <div class="container">
        <header>
            <h1>ü§ñ Network Automation Visualizer</h1>
            <p>Interactive REST API, JSON/XML, and Config Management Tools</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" data-tab="api">REST API Explorer</button>
            <button class="tab-btn" data-tab="converter">JSON/XML Converter</button>
            <button class="tab-btn" data-tab="comparison">Tool Comparison</button>
            <button class="tab-btn" data-tab="quiz">Quiz</button>
        </div>

        <!-- Tab 1: REST API Explorer -->
        <div id="api" class="tab-content active">
            <h2>REST API Explorer</h2>
            <p>Simulate REST API requests and see responses:</p>

            <div class="api-explorer">
                <div class="api-request">
                    <h3>Request</h3>

                    <div class="method-selector">
                        <button class="method-btn get active" onclick="selectMethod('GET')">GET</button>
                        <button class="method-btn post" onclick="selectMethod('POST')">POST</button>
                        <button class="method-btn put" onclick="selectMethod('PUT')">PUT</button>
                        <button class="method-btn delete" onclick="selectMethod('DELETE')">DELETE</button>
                    </div>

                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">URL:</label>
                    <select class="url-input" id="urlSelect" onchange="updateRequestBody()">
                        <option value="interfaces">GET /api/v1/interfaces</option>
                        <option value="interface-detail">GET /api/v1/interfaces/GigabitEthernet0/1</option>
                        <option value="vlans">GET /api/v1/vlans</option>
                        <option value="create-vlan">POST /api/v1/vlans</option>
                        <option value="update-interface">PUT /api/v1/interfaces/GigabitEthernet0/1</option>
                        <option value="delete-vlan">DELETE /api/v1/vlans/99</option>
                    </select>

                    <label style="display: block; margin: 15px 0 5px; font-weight: bold;">Request Body (JSON):</label>
                    <textarea class="request-body" id="requestBody" placeholder="Request body for POST/PUT methods..."></textarea>

                    <button class="send-btn" onclick="sendRequest()">Send Request</button>
                </div>

                <div class="api-response" id="responseArea">
                    <div class="label">Response</div>
                    <div style="color: #64748b;">Click "Send Request" to see the response...</div>
                </div>
            </div>

            <div class="info-box" style="margin-top: 20px;">
                <strong>How it works:</strong> Select an HTTP method and endpoint, then click Send Request. This simulates what happens when your automation script makes a REST API call to a network device.
            </div>
        </div>

        <!-- Tab 2: JSON/XML Converter -->
        <div id="converter" class="tab-content">
            <h2>JSON ‚Üî XML Converter</h2>
            <p>Convert between JSON and XML formats with syntax highlighting:</p>

            <div class="converter">
                <div class="converter-input">
                    <div class="label">JSON Input</div>
                    <textarea id="jsonInput" placeholder='Enter JSON here...'>{
  "interface": {
    "name": "GigabitEthernet0/1",
    "ip_address": "10.1.1.1",
    "subnet_mask": "255.255.255.0",
    "status": "up"
  }
}</textarea>
                </div>

                <div style="text-align: center;">
                    <button class="convert-btn" onclick="convertToXML()">‚Üí<br>Convert<br>‚Üí</button>
                    <br><br>
                    <button class="convert-btn" onclick="convertToJSON()">‚Üê<br>Convert<br>‚Üê</button>
                </div>

                <div class="converter-output">
                    <div class="label">XML Output</div>
                    <textarea id="xmlOutput" placeholder="XML output will appear here..."></textarea>
                </div>
            </div>

            <div class="warning-box" style="margin-top: 20px;">
                <strong>Note:</strong> JSON is more compact and easier to read. XML is more verbose but supports attributes and namespaces. NETCONF uses XML, while most modern REST APIs prefer JSON.
            </div>
        </div>

        <!-- Tab 3: Tool Comparison -->
        <div id="comparison" class="tab-content">
            <h2>Configuration Management Tool Comparison</h2>
            <p>Compare Ansible, Puppet, and Chef for network automation:</p>

            <div class="tool-grid">
                <div class="tool-card ansible">
                    <h3>üî¥ Ansible</h3>
                    <div class="feature-list">
                        <div class="feature-item">
                            <span class="feature-label">Architecture:</span>
                            <span>Agentless</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Transport:</span>
                            <span>SSH</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Model:</span>
                            <span>Push</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Language:</span>
                            <span>YAML (Playbooks)</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Learning Curve:</span>
                            <span>Easy</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Network Use:</span>
                            <span>Most Popular</span>
                        </div>
                    </div>
                </div>

                <div class="tool-card puppet">
                    <h3>üü† Puppet</h3>
                    <div class="feature-list">
                        <div class="feature-item">
                            <span class="feature-label">Architecture:</span>
                            <span>Agent-based</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Transport:</span>
                            <span>Custom protocol</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Model:</span>
                            <span>Pull</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Language:</span>
                            <span>Puppet DSL (Manifests)</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Learning Curve:</span>
                            <span>Medium</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Network Use:</span>
                            <span>Common</span>
                        </div>
                    </div>
                </div>

                <div class="tool-card chef">
                    <h3>üîµ Chef</h3>
                    <div class="feature-list">
                        <div class="feature-item">
                            <span class="feature-label">Architecture:</span>
                            <span>Agent-based</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Transport:</span>
                            <span>Custom protocol</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Model:</span>
                            <span>Pull</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Language:</span>
                            <span>Ruby DSL (Recipes)</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Learning Curve:</span>
                            <span>Hard</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-label">Network Use:</span>
                            <span>Rare</span>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Push vs Pull Model</h3>
            <div class="info-box">
                <strong>Push Model (Ansible):</strong> Central server connects to devices and pushes configurations. You control when changes happen.
            </div>
            <div class="warning-box">
                <strong>Pull Model (Puppet/Chef):</strong> Agents on devices periodically check central server and pull configurations. Devices control timing, but agents must be installed.
            </div>

            <h3>Why Ansible Dominates Networking</h3>
            <ul style="margin-left: 20px; line-height: 2;">
                <li><strong>Agentless:</strong> Network devices don't support agents well - SSH is universal</li>
                <li><strong>Simple syntax:</strong> YAML is easier than Ruby or Puppet DSL</li>
                <li><strong>Vendor support:</strong> Extensive modules for Cisco, Juniper, Arista, etc.</li>
                <li><strong>Fast deployment:</strong> No agent installation or certificate management</li>
            </ul>
        </div>

        <!-- Tab 4: Quiz -->
        <div id="quiz" class="tab-content">
            <h2>Network Automation Knowledge Check</h2>
            <div class="quiz-container">
                <div id="quiz-area">
                    <!-- Quiz populated by JS -->
                </div>
                <div class="quiz-controls">
                    <div class="score-display" id="score-display">Score: 0/0</div>
                    <div>
                        <button class="btn btn-secondary" onclick="resetQuiz()">Restart Quiz</button>
                        <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()">Check Answer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab).classList.add('active');
            });
        });

        // REST API Explorer
        let currentMethod = 'GET';

        function selectMethod(method) {
            currentMethod = method;
            document.querySelectorAll('.method-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.method-btn.${method.toLowerCase()}`).classList.add('active');
            updateRequestBody();
        }

        function updateRequestBody() {
            const endpoint = document.getElementById('urlSelect').value;
            const bodyField = document.getElementById('requestBody');

            if (endpoint === 'create-vlan') {
                bodyField.value = `{
  "vlan_id": 30,
  "name": "Engineering",
  "state": "active"
}`;
            } else if (endpoint === 'update-interface') {
                bodyField.value = `{
  "description": "Updated Link to Core",
  "ip_address": "10.1.1.10",
  "subnet_mask": "255.255.255.0"
}`;
            } else {
                bodyField.value = '';
            }
        }

        const apiResponses = {
            'interfaces': {
                status: 200,
                data: {
                    interfaces: [
                        { name: "GigabitEthernet0/1", status: "up", ip: "10.1.1.1" },
                        { name: "GigabitEthernet0/2", status: "up", ip: "10.1.2.1" },
                        { name: "GigabitEthernet0/3", status: "down", ip: "unassigned" }
                    ]
                }
            },
            'interface-detail': {
                status: 200,
                data: {
                    interface: "GigabitEthernet0/1",
                    description: "Link to Core Switch",
                    ip_address: "10.1.1.1",
                    subnet_mask: "255.255.255.0",
                    status: "up",
                    bandwidth: "1000000",
                    duplex: "full"
                }
            },
            'vlans': {
                status: 200,
                data: {
                    vlans: [
                        { vlan_id: 10, name: "Management", state: "active" },
                        { vlan_id: 20, name: "Sales", state: "active" },
                        { vlan_id: 99, name: "Unused", state: "active" }
                    ]
                }
            },
            'create-vlan': {
                status: 201,
                data: {
                    message: "VLAN created successfully",
                    vlan_id: 30,
                    name: "Engineering",
                    state: "active"
                }
            },
            'update-interface': {
                status: 200,
                data: {
                    message: "Interface updated successfully",
                    interface: "GigabitEthernet0/1",
                    description: "Updated Link to Core",
                    ip_address: "10.1.1.10"
                }
            },
            'delete-vlan': {
                status: 200,
                data: {
                    message: "VLAN 99 deleted successfully"
                }
            }
        };

        function sendRequest() {
            const endpoint = document.getElementById('urlSelect').value;
            const response = apiResponses[endpoint];
            const responseArea = document.getElementById('responseArea');

            const statusClass = `status-${response.status}`;
            const statusText = response.status === 200 ? '200 OK' :
                             response.status === 201 ? '201 Created' :
                             `${response.status}`;

            responseArea.innerHTML = `
                <div class="label">Response</div>
                <div class="status-badge ${statusClass}">${statusText}</div>
                <pre style="color: #10b981; line-height: 1.6;">${JSON.stringify(response.data, null, 2)}</pre>
            `;
        }

        // JSON/XML Converter
        function convertToXML() {
            const jsonInput = document.getElementById('jsonInput').value;
            const xmlOutput = document.getElementById('xmlOutput');

            try {
                const obj = JSON.parse(jsonInput);
                const xml = jsonToXml(obj);
                xmlOutput.value = formatXml(xml);
            } catch (e) {
                xmlOutput.value = `Error: Invalid JSON\n${e.message}`;
            }
        }

        function jsonToXml(obj, rootName = 'root') {
            let xml = '';

            for (let key in obj) {
                if (obj.hasOwnProperty(key)) {
                    const value = obj[key];

                    if (typeof value === 'object' && !Array.isArray(value)) {
                        xml += `<${key}>\n${jsonToXml(value)}</${key}>\n`;
                    } else if (Array.isArray(value)) {
                        value.forEach(item => {
                            if (typeof item === 'object') {
                                xml += `<${key}>\n${jsonToXml(item)}</${key}>\n`;
                            } else {
                                xml += `<${key}>${item}</${key}>\n`;
                            }
                        });
                    } else {
                        xml += `<${key}>${value}</${key}>\n`;
                    }
                }
            }

            return xml;
        }

        function formatXml(xml) {
            const PADDING = '  ';
            const reg = /(>)(<)(\/*)/g;
            let formatted = '';
            let pad = 0;

            xml = xml.replace(reg, '$1\n$2$3');

            xml.split('\n').forEach(node => {
                let indent = 0;
                if (node.match(/.+<\/\w[^>]*>$/)) {
                    indent = 0;
                } else if (node.match(/^<\/\w/)) {
                    if (pad !== 0) {
                        pad -= 1;
                    }
                } else if (node.match(/^<\w[^>]*[^\/]>.*$/)) {
                    indent = 1;
                } else {
                    indent = 0;
                }

                formatted += PADDING.repeat(pad) + node + '\n';
                pad += indent;
            });

            return formatted.trim();
        }

        function convertToJSON() {
            const xmlInput = document.getElementById('xmlOutput').value;
            const jsonOutput = document.getElementById('jsonInput');

            try {
                // Simple XML to JSON converter (basic implementation)
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlInput, 'text/xml');
                const obj = xmlToJson(xmlDoc.documentElement);
                jsonOutput.value = JSON.stringify(obj, null, 2);
            } catch (e) {
                jsonOutput.value = `Error: Invalid XML\n${e.message}`;
            }
        }

        function xmlToJson(xml) {
            let obj = {};

            if (xml.nodeType === 1) {
                if (xml.attributes.length > 0) {
                    obj['@attributes'] = {};
                    for (let j = 0; j < xml.attributes.length; j++) {
                        const attribute = xml.attributes.item(j);
                        obj['@attributes'][attribute.nodeName] = attribute.nodeValue;
                    }
                }
            } else if (xml.nodeType === 3) {
                obj = xml.nodeValue;
            }

            if (xml.hasChildNodes()) {
                for (let i = 0; i < xml.childNodes.length; i++) {
                    const item = xml.childNodes.item(i);
                    const nodeName = item.nodeName;
                    if (typeof obj[nodeName] === 'undefined') {
                        obj[nodeName] = xmlToJson(item);
                    } else {
                        if (typeof obj[nodeName].push === 'undefined') {
                            const old = obj[nodeName];
                            obj[nodeName] = [];
                            obj[nodeName].push(old);
                        }
                        obj[nodeName].push(xmlToJson(item));
                    }
                }
            }
            return obj;
        }

        // Quiz
        const quizQuestions = [
            {
                question: "Which HTTP method is used to retrieve (read) data from a REST API?",
                options: ["POST", "GET", "PUT", "DELETE"],
                correct: 1,
                explanation: "GET retrieves data without modifying anything. It's the 'Read' operation in CRUD."
            },
            {
                question: "What HTTP status code indicates a successful resource creation?",
                options: ["200 OK", "201 Created", "204 No Content", "400 Bad Request"],
                correct: 1,
                explanation: "201 Created means a POST request successfully created a new resource."
            },
            {
                question: "Which data format is more commonly used in modern REST APIs?",
                options: ["XML", "JSON", "CSV", "YAML"],
                correct: 1,
                explanation: "JSON is more popular due to being lightweight, easy to read, and native to JavaScript."
            },
            {
                question: "What is the main advantage of Ansible for network automation?",
                options: ["Agent-based", "Uses Ruby", "Agentless", "Requires database"],
                correct: 2,
                explanation: "Ansible is agentless - it uses SSH, so no software needs to be installed on network devices."
            },
            {
                question: "Which configuration management tool uses a push model?",
                options: ["Puppet", "Chef", "Ansible", "All of them"],
                correct: 2,
                explanation: "Ansible uses a push model - the central server pushes configs. Puppet and Chef use pull models."
            },
            {
                question: "What protocol does NETCONF use for transport?",
                options: ["HTTP", "HTTPS", "SSH", "Telnet"],
                correct: 2,
                explanation: "NETCONF uses SSH on port 830 for secure, encrypted communication."
            },
            {
                question: "What does YANG define in network automation?",
                options: ["Transport protocol", "Data models", "Programming language", "Encryption method"],
                correct: 1,
                explanation: "YANG defines data models - the structure and format of configuration and operational data."
            },
            {
                question: "Which protocol is HTTP-based and uses YANG models?",
                options: ["NETCONF", "RESTCONF", "SNMP", "SSH"],
                correct: 1,
                explanation: "RESTCONF is HTTP-based and uses YANG models, combining REST principles with NETCONF capabilities."
            },
            {
                question: "What does the HTTP status code 401 indicate?",
                options: ["Success", "Resource created", "Unauthorized", "Not found"],
                correct: 2,
                explanation: "401 Unauthorized means authentication failed - wrong credentials or missing token."
            },
            {
                question: "In Infrastructure as Code, where should network configurations be stored?",
                options: ["On each device", "In version control (Git)", "On paper", "In Excel"],
                correct: 1,
                explanation: "IaC configurations should be stored in version control (Git) to track changes and enable collaboration."
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = false;

        function renderQuiz() {
            const area = document.getElementById('quiz-area');
            const q = quizQuestions[currentQuestion];

            area.innerHTML = `
                <div class="quiz-question">
                    <h4>Question ${currentQuestion + 1} of ${quizQuestions.length}</h4>
                    <p style="font-size: 1.1em; margin-bottom: 20px;">${q.question}</p>
                    <div class="quiz-options">
                        ${q.options.map((opt, i) => `
                            <div class="quiz-option" onclick="selectAnswer(${i})" data-index="${i}">
                                ${opt}
                            </div>
                        `).join('')}
                    </div>
                    <div class="quiz-feedback" id="quiz-feedback"></div>
                </div>
            `;

            document.getElementById('next-btn').textContent = 'Check Answer';
            answered = false;
            updateScore();
        }

        function selectAnswer(index) {
            if (answered) return;

            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            document.querySelector(`.quiz-option[data-index="${index}"]`).classList.add('selected');
        }

        function nextQuestion() {
            if (!answered) {
                const selected = document.querySelector('.quiz-option.selected');
                if (!selected) {
                    alert('Please select an answer!');
                    return;
                }

                const selectedIndex = parseInt(selected.dataset.index);
                const q = quizQuestions[currentQuestion];
                const feedback = document.getElementById('quiz-feedback');

                document.querySelectorAll('.quiz-option').forEach((opt, i) => {
                    if (i === q.correct) {
                        opt.classList.add('correct');
                    } else if (i === selectedIndex && selectedIndex !== q.correct) {
                        opt.classList.add('incorrect');
                    }
                });

                if (selectedIndex === q.correct) {
                    score++;
                    feedback.className = 'quiz-feedback show correct';
                    feedback.innerHTML = `‚úÖ Correct! ${q.explanation}`;
                } else {
                    feedback.className = 'quiz-feedback show incorrect';
                    feedback.innerHTML = `‚ùå Incorrect. ${q.explanation}`;
                }

                answered = true;
                updateScore();

                if (currentQuestion < quizQuestions.length - 1) {
                    document.getElementById('next-btn').textContent = 'Next Question ‚Üí';
                } else {
                    document.getElementById('next-btn').textContent = 'See Results';
                }
            } else {
                currentQuestion++;
                if (currentQuestion < quizQuestions.length) {
                    renderQuiz();
                } else {
                    showResults();
                }
            }
        }

        function updateScore() {
            document.getElementById('score-display').textContent = `Score: ${score}/${answered ? currentQuestion + 1 : currentQuestion}`;
        }

        function showResults() {
            const area = document.getElementById('quiz-area');
            const percentage = Math.round((score / quizQuestions.length) * 100);
            let message, color;

            if (percentage >= 90) {
                message = "üèÜ Excellent! You're an automation expert!";
                color = "#10b981";
            } else if (percentage >= 70) {
                message = "üëç Good job! You understand network automation well.";
                color = "#ea580c";
            } else if (percentage >= 50) {
                message = "üìö Not bad, but review REST APIs and config management.";
                color = "#f59e0b";
            } else {
                message = "üìñ Keep studying! Review all 20 presentation slides.";
                color = "#ef4444";
            }

            area.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 4em; margin-bottom: 20px;">üéØ</div>
                    <h3 style="font-size: 2em; color: ${color};">You scored ${score}/${quizQuestions.length} (${percentage}%)</h3>
                    <p style="font-size: 1.3em; margin: 20px 0;">${message}</p>
                </div>
            `;

            document.getElementById('next-btn').style.display = 'none';
        }

        function resetQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            document.getElementById('next-btn').style.display = 'inline-block';
            renderQuiz();
        }

        // Initialize
        updateRequestBody();
        renderQuiz();
    </script>
</body>
</html>
