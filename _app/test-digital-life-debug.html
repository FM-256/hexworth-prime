<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Life - DEBUG</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --accent: #9f7aea;
            --glow-color: rgba(159, 122, 234, 0.6);
        }
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%);
            font-family: 'Segoe UI', sans-serif;
            color: #fff;
            overflow: hidden;
        }
        #debug {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.9);
            color: #0f0;
            padding: 15px;
            font-family: monospace;
            font-size: 12px;
            z-index: 9999;
            max-height: 90vh;
            overflow: auto;
            border: 1px solid #0f0;
        }
        #debug .error { color: #f00; }
        #debug .success { color: #0f0; }
        #debug .warn { color: #ff0; }
    </style>
</head>
<body>
    <div id="debug">
        <strong>Debug Log:</strong><br><br>
    </div>

    <script>
        // Debug logger
        const debug = document.getElementById('debug');
        function log(msg, type = '') {
            const line = document.createElement('div');
            line.className = type;
            line.textContent = msg;
            debug.appendChild(line);
            console.log(msg);
        }

        // Catch all errors
        window.onerror = function(msg, url, line, col, error) {
            log(`ERROR: ${msg} at ${url}:${line}:${col}`, 'error');
            return false;
        };

        log('Starting debug load...');
    </script>

    <!-- Load scripts one by one with error checking -->
    <script>log('Loading Firefly.js...');</script>
    <script src="digital-life/core/Firefly.js" onerror="log('FAILED: Firefly.js', 'error')"></script>
    <script>if(typeof Firefly !== 'undefined') log('✓ Firefly loaded', 'success'); else log('✗ Firefly undefined', 'error');</script>

    <script>log('Loading Ecosystem.js...');</script>
    <script src="digital-life/core/Ecosystem.js" onerror="log('FAILED: Ecosystem.js', 'error')"></script>
    <script>if(typeof Ecosystem !== 'undefined') log('✓ Ecosystem loaded', 'success'); else log('✗ Ecosystem undefined', 'error');</script>

    <script>log('Loading Particles.js...');</script>
    <script src="digital-life/effects/Particles.js" onerror="log('FAILED: Particles.js', 'error')"></script>
    <script>if(typeof ParticleSystem !== 'undefined') log('✓ ParticleSystem loaded', 'success'); else log('✗ ParticleSystem undefined', 'error');</script>

    <script>log('Loading ShootingStar.js...');</script>
    <script src="digital-life/effects/ShootingStar.js" onerror="log('FAILED: ShootingStar.js', 'error')"></script>
    <script>if(typeof ShootingStarSystem !== 'undefined') log('✓ ShootingStarSystem loaded', 'success'); else log('✗ ShootingStarSystem undefined', 'error');</script>

    <script>log('Loading AmbientEffects.js...');</script>
    <script src="digital-life/effects/AmbientEffects.js" onerror="log('FAILED: AmbientEffects.js', 'error')"></script>
    <script>if(typeof AmbientEffects !== 'undefined') log('✓ AmbientEffects loaded', 'success'); else log('✗ AmbientEffects undefined', 'error');</script>

    <script>log('Loading BlackHole.js...');</script>
    <script src="digital-life/entities/BlackHole.js" onerror="log('FAILED: BlackHole.js', 'error')"></script>
    <script>if(typeof BlackHole !== 'undefined') log('✓ BlackHole loaded', 'success'); else log('✗ BlackHole undefined', 'error');</script>

    <script>log('Loading Planet.js...');</script>
    <script src="digital-life/entities/Planet.js" onerror="log('FAILED: Planet.js', 'error')"></script>
    <script>if(typeof Planet !== 'undefined') log('✓ Planet loaded', 'success'); else log('✗ Planet undefined', 'error');</script>

    <script>log('Loading Hunting.js...');</script>
    <script src="digital-life/behaviors/Hunting.js" onerror="log('FAILED: Hunting.js', 'error')"></script>
    <script>if(typeof HuntingSystem !== 'undefined') log('✓ HuntingSystem loaded', 'success'); else log('✗ HuntingSystem undefined', 'error');</script>

    <script>log('Loading Swarming.js...');</script>
    <script src="digital-life/behaviors/Swarming.js" onerror="log('FAILED: Swarming.js', 'error')"></script>
    <script>if(typeof SwarmingSystem !== 'undefined') log('✓ SwarmingSystem loaded', 'success'); else log('✗ SwarmingSystem undefined', 'error');</script>

    <script>log('Loading Constellation.js...');</script>
    <script src="digital-life/behaviors/Constellation.js" onerror="log('FAILED: Constellation.js', 'error')"></script>
    <script>if(typeof ConstellationSystem !== 'undefined') log('✓ ConstellationSystem loaded', 'success'); else log('✗ ConstellationSystem undefined', 'error');</script>

    <script>log('Loading Reproduction.js...');</script>
    <script src="digital-life/behaviors/Reproduction.js" onerror="log('FAILED: Reproduction.js', 'error')"></script>
    <script>if(typeof ReproductionSystem !== 'undefined') log('✓ ReproductionSystem loaded', 'success'); else log('✗ ReproductionSystem undefined', 'error');</script>

    <script>log('Loading HousePersonality.js...');</script>
    <script src="digital-life/behaviors/HousePersonality.js" onerror="log('FAILED: HousePersonality.js', 'error')"></script>
    <script>if(typeof HousePersonalitySystem !== 'undefined') log('✓ HousePersonalitySystem loaded', 'success'); else log('✗ HousePersonalitySystem undefined', 'error');</script>

    <script>log('Loading RareFireflies.js...');</script>
    <script src="digital-life/behaviors/RareFireflies.js" onerror="log('FAILED: RareFireflies.js', 'error')"></script>
    <script>if(typeof RareFireflySystem !== 'undefined') log('✓ RareFireflySystem loaded', 'success'); else log('✗ RareFireflySystem undefined', 'error');</script>

    <script>log('Loading InteractionSystem.js...');</script>
    <script src="digital-life/behaviors/InteractionSystem.js" onerror="log('FAILED: InteractionSystem.js', 'error')"></script>
    <script>if(typeof InteractionSystem !== 'undefined') log('✓ InteractionSystem loaded', 'success'); else log('✗ InteractionSystem undefined', 'error');</script>

    <script>log('Loading EnvironmentalSystem.js...');</script>
    <script src="digital-life/behaviors/EnvironmentalSystem.js" onerror="log('FAILED: EnvironmentalSystem.js', 'error')"></script>
    <script>if(typeof EnvironmentalSystem !== 'undefined') log('✓ EnvironmentalSystem loaded', 'success'); else log('✗ EnvironmentalSystem undefined', 'error');</script>

    <script>log('Loading index.js (DigitalLife)...');</script>
    <script src="digital-life/index.js" onerror="log('FAILED: index.js', 'error')"></script>
    <script>if(typeof DigitalLife !== 'undefined') log('✓ DigitalLife loaded', 'success'); else log('✗ DigitalLife undefined', 'error');</script>

    <script>
        log('');
        log('All scripts loaded. Attempting to initialize...');

        try {
            // Try with ALL behaviors disabled first
            const digitalLife = new DigitalLife({
                population: { initial: 15, min: 10, max: 30 },
                visual: { showStats: true },
                behaviors: {
                    hunting: { enabled: false },
                    swarming: { enabled: false },
                    constellation: { enabled: false },
                    reproduction: { enabled: false },
                    housePersonality: { enabled: false },
                    rareFireflies: { enabled: false },
                    interaction: { enabled: false },
                    environmental: { enabled: false },
                    ambientEffects: { enabled: false }
                }
            });

            log('DigitalLife created, calling init...', 'warn');
            digitalLife.init(document.body);
            log('✓ DigitalLife initialized successfully!', 'success');

        } catch (e) {
            log(`INIT ERROR: ${e.message}`, 'error');
            log(`Stack: ${e.stack}`, 'error');
        }
    </script>
</body>
</html>
