<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Life - Test Page</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Default theme - purple magic */
            --accent: #9f7aea;
            --glow-color: rgba(159, 122, 234, 0.6);
        }

        /* Theme variations for testing */
        body.theme-blue {
            --accent: #38bdf8;
            --glow-color: rgba(56, 189, 248, 0.6);
        }

        body.theme-green {
            --accent: #22c55e;
            --glow-color: rgba(34, 197, 94, 0.6);
        }

        body.theme-gold {
            --accent: #fbbf24;
            --glow-color: rgba(251, 191, 36, 0.6);
        }

        body.theme-red {
            --accent: #ef4444;
            --glow-color: rgba(239, 68, 68, 0.6);
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #fff;
            overflow: hidden;
        }

        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #333;
            z-index: 1000;
            min-width: 200px;
        }

        .controls h3 {
            margin: 0 0 15px 0;
            font-size: 14px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .control-group button {
            width: 100%;
            padding: 8px 12px;
            background: #222;
            border: 1px solid #444;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .control-group button:hover {
            background: #333;
            border-color: var(--accent);
        }

        .control-group button.active {
            background: var(--accent);
            border-color: var(--accent);
            color: #000;
        }

        .theme-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
        }

        .theme-buttons button {
            padding: 6px;
            font-size: 10px;
        }

        .title {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 0;
            pointer-events: none;
        }

        .title h1 {
            font-size: 3rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            color: rgba(255, 255, 255, 0.1);
            text-transform: uppercase;
        }

        .title p {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.05);
            letter-spacing: 0.2em;
            margin-top: 10px;
        }

        .version-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 10px;
            color: #333;
            letter-spacing: 0.1em;
        }
    </style>
</head>
<body>
    <div class="title">
        <h1>Digital Life</h1>
        <p>Binary Ecosystem Test</p>
    </div>

    <div class="controls">
        <h3>Controls</h3>

        <div class="control-group">
            <label>Simulation</label>
            <button id="btnToggle">Pause</button>
        </div>

        <div class="control-group">
            <label>Spawn</label>
            <button id="btnStar">Trigger Star</button>
            <button id="btnAscended" style="margin-top: 5px;">Spawn Ascended</button>
        </div>

        <div class="control-group">
            <label>Rare Types</label>
            <div class="theme-buttons">
                <button id="btnGolden" style="background: #fbbf24; color: #000;">Golden</button>
                <button id="btnDiamond" style="background: #67e8f9; color: #000;">Diamond</button>
                <button id="btnGlitch" style="background: #a855f7;">Glitch</button>
            </div>
        </div>

        <div class="control-group">
            <label>Debug</label>
            <button id="btnStats">Toggle Stats</button>
        </div>

        <div class="control-group">
            <label>Audio</label>
            <button id="btnAudio">Enable Audio</button>
            <button id="btnAmbient" style="margin-top: 5px;">Toggle Ambient</button>
            <button id="btnTestSound" style="margin-top: 5px;">Test Sound</button>
        </div>

        <div class="control-group">
            <label>Theme</label>
            <div class="theme-buttons">
                <button onclick="setTheme('')" style="background: #9f7aea;">Purple</button>
                <button onclick="setTheme('blue')" style="background: #38bdf8;">Blue</button>
                <button onclick="setTheme('green')" style="background: #22c55e;">Green</button>
                <button onclick="setTheme('gold')" style="background: #fbbf24; color: #000;">Gold</button>
                <button onclick="setTheme('red')" style="background: #ef4444;">Red</button>
            </div>
        </div>
    </div>

    <div class="version-badge">DIGITAL LIFE v3.8.0 - PRIME Phase 8 (Audio) - ALL PHASES COMPLETE!</div>

    <!-- Load Digital Life modules -->
    <!-- Core -->
    <script src="digital-life/core/Firefly.js"></script>
    <script src="digital-life/core/Ecosystem.js"></script>

    <!-- Effects -->
    <script src="digital-life/effects/Particles.js"></script>
    <script src="digital-life/effects/ShootingStar.js"></script>
    <script src="digital-life/effects/AmbientEffects.js"></script>
    <script src="digital-life/effects/Trails.js"></script>

    <!-- Entities -->
    <script src="digital-life/entities/BlackHole.js"></script>
    <script src="digital-life/entities/Moon.js"></script>
    <script src="digital-life/entities/Planet.js"></script>
    <script src="digital-life/entities/EnergyWell.js"></script>
    <script src="digital-life/entities/PredatorStar.js"></script>
    <script src="digital-life/entities/ShadowFirefly.js"></script>
    <script src="digital-life/entities/VoidSerpent.js"></script>
    <script src="digital-life/entities/Parasite.js"></script>
    <script src="digital-life/entities/Portal.js"></script>
    <script src="digital-life/entities/Sanctuary.js"></script>

    <!-- Interactions (Phase 6) -->
    <script src="digital-life/interactions/PlayerTools.js"></script>

    <!-- Behaviors -->
    <script src="digital-life/behaviors/Hunting.js"></script>
    <script src="digital-life/behaviors/Swarming.js"></script>
    <script src="digital-life/behaviors/Constellation.js"></script>
    <script src="digital-life/behaviors/Reproduction.js"></script>
    <script src="digital-life/behaviors/HousePersonality.js"></script>
    <script src="digital-life/behaviors/RareFireflies.js"></script>
    <script src="digital-life/behaviors/InteractionSystem.js"></script>
    <script src="digital-life/behaviors/EnvironmentalSystem.js"></script>
    <script src="digital-life/behaviors/Genetics.js"></script>
    <script src="digital-life/behaviors/Pheromones.js"></script>
    <script src="digital-life/behaviors/PredatorManager.js"></script>

    <!-- Cosmic Events (Phase 3) -->
    <script src="digital-life/events/CosmicEventManager.js"></script>
    <script src="digital-life/events/SolarFlare.js"></script>
    <script src="digital-life/events/MeteorShower.js"></script>
    <script src="digital-life/events/VoidStorm.js"></script>
    <script src="digital-life/events/Eclipse.js"></script>
    <script src="digital-life/events/NebulaDrift.js"></script>

    <!-- Meta Systems (Phase 7) -->
    <script src="digital-life/meta/Achievements.js"></script>
    <script src="digital-life/meta/Statistics.js"></script>
    <script src="digital-life/meta/EventLog.js"></script>

    <!-- Audio Systems (Phase 8) -->
    <script src="digital-life/audio/SoundManager.js"></script>
    <script src="digital-life/audio/EventSounds.js"></script>
    <script src="digital-life/audio/AmbientLayer.js"></script>

    <!-- Main -->
    <script src="digital-life/index.js"></script>

    <script>
        // Wait for DOM to be fully ready before initializing
        let digitalLife;

        function initDigitalLife() {
            // Initialize Digital Life with all behavior systems
            digitalLife = new DigitalLife({
                population: {
                    initial: 25,
                    min: 15,
                    max: 50
                },
                shootingStars: {
                    minInterval: 6000,
                    maxInterval: 12000
                },
                collision: {
                    showBinaryArithmetic: true // Show 1+1=10 etc
                },
                visual: {
                    showStats: true // Start with stats visible for testing
                },
                behaviors: {
                    hunting: { enabled: true },
                    swarming: { enabled: true },
                    constellation: { enabled: true },
                    reproduction: { enabled: true },
                    housePersonality: { enabled: true },
                    rareFireflies: { enabled: true },
                    interaction: { enabled: true },
                    environmental: { enabled: true },
                    ambientEffects: { enabled: true }
                }
            });

            digitalLife.init(document.body);
        }

        // Initialize after DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initDigitalLife);
        } else {
            initDigitalLife();
        }

        // Control handlers
        const btnToggle = document.getElementById('btnToggle');
        const btnStar = document.getElementById('btnStar');
        const btnStats = document.getElementById('btnStats');
        const btnAscended = document.getElementById('btnAscended');
        const btnGolden = document.getElementById('btnGolden');
        const btnDiamond = document.getElementById('btnDiamond');
        const btnGlitch = document.getElementById('btnGlitch');

        let isPaused = false;

        btnToggle.addEventListener('click', () => {
            if (isPaused) {
                digitalLife.resume();
                btnToggle.textContent = 'Pause';
                btnToggle.classList.remove('active');
            } else {
                digitalLife.pause();
                btnToggle.textContent = 'Resume';
                btnToggle.classList.add('active');
            }
            isPaused = !isPaused;
        });

        btnStar.addEventListener('click', () => {
            digitalLife.triggerShootingStar();
        });

        btnStats.addEventListener('click', () => {
            digitalLife.toggleStats();
        });

        btnAscended.addEventListener('click', () => {
            // Spawn an Ascended tier firefly for testing
            if (digitalLife.ecosystem) {
                const firefly = digitalLife.ecosystem.spawnFirefly({
                    tier: Firefly.TIERS.ASCENDED,
                    x: window.innerWidth * 0.5 + (Math.random() - 0.5) * 200,
                    y: window.innerHeight * 0.5 + (Math.random() - 0.5) * 200
                });
                if (firefly) {
                    console.log('Spawned Ascended digizen:', firefly.id);
                }
            }
        });

        // Rare firefly spawn buttons
        btnGolden.addEventListener('click', () => {
            const firefly = digitalLife.spawnRare('golden');
            if (firefly) console.log('Spawned Golden 1:', firefly.id);
        });

        btnDiamond.addEventListener('click', () => {
            const firefly = digitalLife.spawnRare('diamond');
            if (firefly) console.log('Spawned Diamond 0:', firefly.id);
        });

        btnGlitch.addEventListener('click', () => {
            const firefly = digitalLife.spawnRare('glitch');
            if (firefly) console.log('Spawned Glitch:', firefly.id);
        });

        // Audio controls
        const btnAudio = document.getElementById('btnAudio');
        const btnAmbient = document.getElementById('btnAmbient');
        const btnTestSound = document.getElementById('btnTestSound');
        let audioEnabled = false;

        btnAudio.addEventListener('click', () => {
            audioEnabled = !audioEnabled;
            digitalLife.toggleAudio();
            btnAudio.textContent = audioEnabled ? 'Disable Audio' : 'Enable Audio';
            btnAudio.classList.toggle('active', audioEnabled);
            console.log('ðŸ”Š Audio:', audioEnabled ? 'ENABLED' : 'DISABLED');
        });

        btnAmbient.addEventListener('click', () => {
            if (!audioEnabled) {
                alert('Enable audio first!');
                return;
            }
            digitalLife.toggleAmbient();
            console.log('ðŸŽµ Ambient layer toggled');
        });

        // Sound test rotation - cycles through all sounds
        const allSounds = [
            'birth', 'death', 'evolution',
            'golden', 'diamond', 'glitch', 'ancient',
            'shootingStar', 'solarFlare', 'meteorShower', 'voidStorm', 'eclipse',
            'shadow', 'serpent', 'parasite',
            'achievement'
        ];
        let soundIndex = 0;

        btnTestSound.addEventListener('click', () => {
            if (!audioEnabled) {
                alert('Enable audio first!');
                return;
            }
            // Cycle through all sounds so you can hear each one
            const soundType = allSounds[soundIndex];
            digitalLife.testSound(soundType);
            console.log(`ðŸ”” Testing sound [${soundIndex + 1}/${allSounds.length}]: ${soundType}`);
            soundIndex = (soundIndex + 1) % allSounds.length;
        });

        // Theme switcher
        function setTheme(theme) {
            document.body.className = theme ? 'theme-' + theme : '';
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

            switch (e.key.toLowerCase()) {
                case ' ':
                    e.preventDefault();
                    btnToggle.click();
                    break;
                case 's':
                    btnStar.click();
                    break;
                case 'd':
                    btnStats.click();
                    break;
                case 'a':
                    btnAscended.click();
                    break;
                case 'g':
                    btnGolden.click();
                    break;
                case 'i':
                    btnDiamond.click();
                    break;
                case 'x':
                    btnGlitch.click();
                    break;
                case 'm':
                    btnAudio.click();
                    break;
                case 't':
                    btnTestSound.click();
                    break;
            }
        });

        console.log('%cðŸ”® Digital Life Test Page v3.8.0 - ALL PHASES COMPLETE!', 'font-size: 16px; font-weight: bold; color: #9f7aea;');
        console.log('%cPhase 1 - Visual Polish:', 'font-weight: bold; color: #22c55e;');
        console.log('  â€¢ Persistent firefly trails');
        console.log('  â€¢ Enhanced death particles by tier/type');
        console.log('  â€¢ Planet atmosphere & ring visuals');
        console.log('%cPhase 2 - Ecosystem Depth:', 'font-weight: bold; color: #f59e0b;');
        console.log('  â€¢ Energy Wells (Standard, Volatile, Ancient)');
        console.log('  â€¢ Genetics system with trait inheritance');
        console.log('  â€¢ Pheromone trails (Food, Danger, Mating, Swarm)');
        console.log('  â€¢ Predator Stars (Hunter, Lurker, Drifter)');
        console.log('%cPhase 3 - Cosmic Events:', 'font-weight: bold; color: #ef4444;');
        console.log('  â€¢ Solar Flare (energy boost wave)');
        console.log('  â€¢ Meteor Shower (multiple shooting stars)');
        console.log('  â€¢ Void Storm (gravity distortions)');
        console.log('  â€¢ Eclipse (darkness + brighter glows)');
        console.log('  â€¢ Nebula Drift (colored gas clouds)');
        console.log('%cPhase 4 - Planet Expansion:', 'font-weight: bold; color: #8b5cf6;');
        console.log('  â€¢ Moons (Resource, Shield, Beacon, Ancient)');
        console.log('  â€¢ Volcanic eruptions (energy bursts)');
        console.log('  â€¢ Planet lifecycle (young â†’ mature â†’ ancient â†’ dying)');
        console.log('  â€¢ Planet collapse (ancient planets boost black hole)');
        console.log('%cPhase 5 - Predator Variety:', 'font-weight: bold; color: #ec4899;');
        console.log('  â€¢ Shadow Fireflies (dark variant, converts 0s)');
        console.log('  â€¢ Void Serpent (large multi-segment predator)');
        console.log('  â€¢ Parasites (attach and drain energy)');
        console.log('  â€¢ PredatorManager (orchestrates all predators)');
        console.log('%cPhase 6 - Player Tools:', 'font-weight: bold; color: #06b6d4;');
        console.log('  â€¢ Energy Blessing (heal nearby fireflies)');
        console.log('  â€¢ Gravity Brush (create temporary gravity wells)');
        console.log('  â€¢ Shield Bubble (protect from predators)');
        console.log('  â€¢ Spawn Beacon (attract fireflies)');
        console.log('  â€¢ Evolution Catalyst (boost evolution)');
        console.log('  â€¢ Warp Portals (teleport fireflies)');
        console.log('  â€¢ Sanctuaries (safe zones)');
        console.log('%cPhase 7 - Meta Systems:', 'font-weight: bold; color: #f472b6;');
        console.log('  â€¢ Achievement System (~35 milestones)');
        console.log('  â€¢ Statistics HUD (real-time ecosystem data)');
        console.log('  â€¢ Event Log (scrolling event history)');
        console.log('  â€¢ LocalStorage persistence for achievements');
        console.log('%cPhase 8 - Audio:', 'font-weight: bold; color: #84cc16;');
        console.log('  â€¢ SoundManager (Web Audio API, procedural sounds)');
        console.log('  â€¢ EventSounds (births, deaths, collisions, cosmic)');
        console.log('  â€¢ AmbientLayer (reactive background atmosphere)');
        console.log('  â€¢ Audio disabled by default (enable in debug panel)');
        console.log('%cCore Features:', 'font-weight: bold;');
        console.log('  â€¢ Black Hole, Planets, Evolution Tiers');
        console.log('  â€¢ Swarm intelligence, Constellations');
        console.log('  â€¢ Rare fireflies (Golden, Diamond, Glitch, Ancient)');
        console.log('%cKeyboard shortcuts:', 'font-weight: bold;');
        console.log('  Space=Pause, S=Star, D=Stats/Debug, A=Ascended');
        console.log('  G=Golden, I=Diamond, X=Glitch');
        console.log('  M=Toggle Audio, T=Test Sound');
        console.log('  1-5=Player Tools (Blessing, Gravity, Shield, Beacon, Catalyst)');
        console.log('%cðŸŽ‰ The 8-phase Digital Life expansion is now complete!', 'font-size: 14px; font-weight: bold; color: #fbbf24;');
    </script>
</body>
</html>
